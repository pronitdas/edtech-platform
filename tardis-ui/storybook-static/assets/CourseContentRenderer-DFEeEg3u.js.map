{"version":3,"file":"CourseContentRenderer-DFEeEg3u.js","sources":["../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/arrow-left.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/chevron-right.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/copy.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/maximize.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/minimize.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/plus.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/square-pen.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/star.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/target.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/trophy.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/user.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/users.js","../../node_modules/.pnpm/lucide-react@0.525.0_react@19.1.0/node_modules/lucide-react/dist/esm/icons/zap.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/decompose.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/parse.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/transform/index.js","../../node_modules/.pnpm/d3-interpolate@3.0.1/node_modules/d3-interpolate/src/zoom.js","../../src/components/ui/Loader.tsx","../../src/components/video/ModernVideoPlayer.tsx","../../node_modules/.pnpm/ccount@2.0.1/node_modules/ccount/index.js","../../node_modules/.pnpm/escape-string-regexp@5.0.0/node_modules/escape-string-regexp/index.js","../../node_modules/.pnpm/mdast-util-find-and-replace@3.0.2/node_modules/mdast-util-find-and-replace/lib/index.js","../../node_modules/.pnpm/mdast-util-gfm-autolink-literal@2.0.1/node_modules/mdast-util-gfm-autolink-literal/lib/index.js","../../node_modules/.pnpm/mdast-util-gfm-footnote@2.1.0/node_modules/mdast-util-gfm-footnote/lib/index.js","../../node_modules/.pnpm/mdast-util-gfm-strikethrough@2.0.0/node_modules/mdast-util-gfm-strikethrough/lib/index.js","../../node_modules/.pnpm/markdown-table@3.0.4/node_modules/markdown-table/index.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/blockquote.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/pattern-in-scope.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/break.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/format-code-as-indented.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-fence.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/code.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-quote.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/definition.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-emphasis.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/encode-character-reference.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/encode-info.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/emphasis.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/format-heading-as-setext.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/heading.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/html.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/image.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/image-reference.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/inline-code.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/format-link-as-autolink.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/link.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/link-reference.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-bullet.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-bullet-other.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-bullet-ordered.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-rule.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/list.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-list-item-indent.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/list-item.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/paragraph.js","../../node_modules/.pnpm/mdast-util-phrasing@4.1.0/node_modules/mdast-util-phrasing/lib/index.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/root.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-strong.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/strong.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/text.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/util/check-rule-repetition.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/thematic-break.js","../../node_modules/.pnpm/mdast-util-to-markdown@2.1.2/node_modules/mdast-util-to-markdown/lib/handle/index.js","../../node_modules/.pnpm/mdast-util-gfm-table@2.0.0/node_modules/mdast-util-gfm-table/lib/index.js","../../node_modules/.pnpm/mdast-util-gfm-task-list-item@2.0.0/node_modules/mdast-util-gfm-task-list-item/lib/index.js","../../node_modules/.pnpm/mdast-util-gfm@3.1.0/node_modules/mdast-util-gfm/lib/index.js","../../node_modules/.pnpm/micromark-extension-gfm-autolink-literal@2.1.0/node_modules/micromark-extension-gfm-autolink-literal/lib/syntax.js","../../node_modules/.pnpm/micromark-extension-gfm-footnote@2.1.0/node_modules/micromark-extension-gfm-footnote/lib/syntax.js","../../node_modules/.pnpm/micromark-extension-gfm-strikethrough@2.1.0/node_modules/micromark-extension-gfm-strikethrough/lib/syntax.js","../../node_modules/.pnpm/micromark-extension-gfm-table@2.1.1/node_modules/micromark-extension-gfm-table/lib/edit-map.js","../../node_modules/.pnpm/micromark-extension-gfm-table@2.1.1/node_modules/micromark-extension-gfm-table/lib/infer.js","../../node_modules/.pnpm/micromark-extension-gfm-table@2.1.1/node_modules/micromark-extension-gfm-table/lib/syntax.js","../../node_modules/.pnpm/micromark-extension-gfm-task-list-item@2.1.0/node_modules/micromark-extension-gfm-task-list-item/lib/syntax.js","../../node_modules/.pnpm/micromark-extension-gfm@3.0.0/node_modules/micromark-extension-gfm/index.js","../../node_modules/.pnpm/remark-gfm@4.0.1/node_modules/remark-gfm/lib/index.js","../../node_modules/.pnpm/dompurify@3.2.6/node_modules/dompurify/dist/purify.es.mjs","../../src/components/MarkDownViewer.tsx","../../src/components/slideshow/SlideshowControls.tsx","../../src/components/slideshow/ModernMarkdownSlideshow.tsx","../../src/components/Quiz.tsx","../../node_modules/.pnpm/classcat@5.0.5/node_modules/classcat/index.js","../../node_modules/.pnpm/d3-dispatch@3.0.1/node_modules/d3-dispatch/src/dispatch.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespaces.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/namespace.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/creator.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selector.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/select.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/array.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selectorAll.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectAll.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/matcher.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChild.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/selectChildren.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/filter.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sparse.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/enter.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/constant.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/data.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/exit.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/join.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/merge.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/order.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/sort.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/call.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/nodes.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/node.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/size.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/empty.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/each.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/attr.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/window.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/style.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/property.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/classed.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/text.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/html.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/raise.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/lower.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/append.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/insert.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/remove.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/clone.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/datum.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/on.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/dispatch.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/iterator.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/selection/index.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/select.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/sourceEvent.js","../../node_modules/.pnpm/d3-selection@3.0.0/node_modules/d3-selection/src/pointer.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/noevent.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/nodrag.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/constant.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/event.js","../../node_modules/.pnpm/d3-drag@3.0.0/node_modules/d3-drag/src/drag.js","../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timer.js","../../node_modules/.pnpm/d3-timer@3.0.1/node_modules/d3-timer/src/timeout.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/schedule.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/interrupt.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/interrupt.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/tween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/interpolate.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attr.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/attrTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/delay.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/duration.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/ease.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/easeVarying.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/filter.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/merge.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/on.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/remove.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/select.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selectAll.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/selection.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/style.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/styleTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/text.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/textTween.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/transition.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/end.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/transition/index.js","../../node_modules/.pnpm/d3-ease@3.0.1/node_modules/d3-ease/src/cubic.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/transition.js","../../node_modules/.pnpm/d3-transition@3.0.1_d3-selection@3.0.0/node_modules/d3-transition/src/selection/index.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/constant.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/event.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/transform.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/noevent.js","../../node_modules/.pnpm/d3-zoom@3.0.0/node_modules/d3-zoom/src/zoom.js","../../node_modules/.pnpm/@xyflow+system@0.0.65/node_modules/@xyflow/system/dist/esm/index.js","../../node_modules/.pnpm/zustand@4.5.7_@types+react@19.1.8_immer@10.1.1_react@19.1.0/node_modules/zustand/esm/vanilla.mjs","../../node_modules/.pnpm/zustand@4.5.7_@types+react@19.1.8_immer@10.1.1_react@19.1.0/node_modules/zustand/esm/traditional.mjs","../../node_modules/.pnpm/zustand@4.5.7_@types+react@19.1.8_immer@10.1.1_react@19.1.0/node_modules/zustand/esm/shallow.mjs","../../node_modules/.pnpm/@xyflow+react@12.8.1_@types+react@19.1.8_immer@10.1.1_react-dom@19.1.0_react@19.1.0__react@19.1.0/node_modules/@xyflow/react/dist/esm/index.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/graph.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/version.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/index.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/json.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/components.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/data/priority-queue.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/tarjan.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/topsort.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/dfs.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/postorder.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/preorder.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/prim.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/lib/alg/index.js","../../node_modules/.pnpm/@dagrejs+graphlib@2.2.4/node_modules/@dagrejs/graphlib/index.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/data/list.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/greedy-fas.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/util.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/acyclic.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/normalize.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/rank/util.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/rank/feasible-tree.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/rank/network-simplex.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/rank/index.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/parent-dummy-chains.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/nesting-graph.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/add-border-segments.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/coordinate-system.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/init-order.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/cross-count.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/barycenter.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/resolve-conflicts.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/sort.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/sort-subgraph.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/build-layer-graph.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/add-subgraph-constraints.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/order/index.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/position/bk.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/position/index.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/layout.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/debug.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/lib/version.js","../../node_modules/.pnpm/@dagrejs+dagre@1.1.5/node_modules/@dagrejs/dagre/index.js","../../node_modules/.pnpm/@radix-ui+react-presence@1.1.4_@types+react-dom@19.1.6_@types+react@19.1.8__@types+reac_949a0df3eae86665e086aa01aee25ebf/node_modules/@radix-ui/react-presence/dist/index.mjs","../../node_modules/.pnpm/@radix-ui+react-dialog@1.1.14_@types+react-dom@19.1.6_@types+react@19.1.8__@types+react_ebf14a846abc2fe74b19ca0ca406c133/node_modules/@radix-ui/react-dialog/dist/index.mjs","../../src/components/ui/dialog.tsx","../../src/components/MindMap.tsx","../../src/components/EnhancedMindMap.tsx","../../src/services/promptsConfig.ts","../../src/services/utils.ts","../../src/services/openAiFns.ts","../../src/services/RoleplayService.ts","../../src/components/BlackboardDisplay.tsx","../../src/components/StudentCard.tsx","../../src/components/RoleplayComponent.tsx","../../src/components/interactive/index.ts","../../src/components/course/CourseContentRenderer.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"m12 19-7-7 7-7\", key: \"1l729n\" }],\n  [\"path\", { d: \"M19 12H5\", key: \"x3x0zl\" }]\n];\nconst ArrowLeft = createLucideIcon(\"arrow-left\", __iconNode);\n\nexport { __iconNode, ArrowLeft as default };\n//# sourceMappingURL=arrow-left.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [[\"path\", { d: \"m9 18 6-6-6-6\", key: \"mthhwq\" }]];\nconst ChevronRight = createLucideIcon(\"chevron-right\", __iconNode);\n\nexport { __iconNode, ChevronRight as default };\n//# sourceMappingURL=chevron-right.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"rect\", { width: \"14\", height: \"14\", x: \"8\", y: \"8\", rx: \"2\", ry: \"2\", key: \"17jyea\" }],\n  [\"path\", { d: \"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2\", key: \"zix9uf\" }]\n];\nconst Copy = createLucideIcon(\"copy\", __iconNode);\n\nexport { __iconNode, Copy as default };\n//# sourceMappingURL=copy.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M8 3H5a2 2 0 0 0-2 2v3\", key: \"1dcmit\" }],\n  [\"path\", { d: \"M21 8V5a2 2 0 0 0-2-2h-3\", key: \"1e4gt3\" }],\n  [\"path\", { d: \"M3 16v3a2 2 0 0 0 2 2h3\", key: \"wsl5sc\" }],\n  [\"path\", { d: \"M16 21h3a2 2 0 0 0 2-2v-3\", key: \"18trek\" }]\n];\nconst Maximize = createLucideIcon(\"maximize\", __iconNode);\n\nexport { __iconNode, Maximize as default };\n//# sourceMappingURL=maximize.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M8 3v3a2 2 0 0 1-2 2H3\", key: \"hohbtr\" }],\n  [\"path\", { d: \"M21 8h-3a2 2 0 0 1-2-2V3\", key: \"5jw1f3\" }],\n  [\"path\", { d: \"M3 16h3a2 2 0 0 1 2 2v3\", key: \"198tvr\" }],\n  [\"path\", { d: \"M16 21v-3a2 2 0 0 1 2-2h3\", key: \"ph8mxp\" }]\n];\nconst Minimize = createLucideIcon(\"minimize\", __iconNode);\n\nexport { __iconNode, Minimize as default };\n//# sourceMappingURL=minimize.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M5 12h14\", key: \"1ays0h\" }],\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }]\n];\nconst Plus = createLucideIcon(\"plus\", __iconNode);\n\nexport { __iconNode, Plus as default };\n//# sourceMappingURL=plus.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7\", key: \"1m0v6g\" }],\n  [\n    \"path\",\n    {\n      d: \"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z\",\n      key: \"ohrbg2\"\n    }\n  ]\n];\nconst SquarePen = createLucideIcon(\"square-pen\", __iconNode);\n\nexport { __iconNode, SquarePen as default };\n//# sourceMappingURL=square-pen.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z\",\n      key: \"r04s7s\"\n    }\n  ]\n];\nconst Star = createLucideIcon(\"star\", __iconNode);\n\nexport { __iconNode, Star as default };\n//# sourceMappingURL=star.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"6\", key: \"1vlfrh\" }],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"2\", key: \"1c9p78\" }]\n];\nconst Target = createLucideIcon(\"target\", __iconNode);\n\nexport { __iconNode, Target as default };\n//# sourceMappingURL=target.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978\", key: \"1n3hpd\" }],\n  [\"path\", { d: \"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978\", key: \"rfe1zi\" }],\n  [\"path\", { d: \"M18 9h1.5a1 1 0 0 0 0-5H18\", key: \"7xy6bh\" }],\n  [\"path\", { d: \"M4 22h16\", key: \"57wxv0\" }],\n  [\"path\", { d: \"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z\", key: \"1mhfuq\" }],\n  [\"path\", { d: \"M6 9H4.5a1 1 0 0 1 0-5H6\", key: \"tex48p\" }]\n];\nconst Trophy = createLucideIcon(\"trophy\", __iconNode);\n\nexport { __iconNode, Trophy as default };\n//# sourceMappingURL=trophy.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2\", key: \"975kel\" }],\n  [\"circle\", { cx: \"12\", cy: \"7\", r: \"4\", key: \"17ys0d\" }]\n];\nconst User = createLucideIcon(\"user\", __iconNode);\n\nexport { __iconNode, User as default };\n//# sourceMappingURL=user.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\"path\", { d: \"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2\", key: \"1yyitq\" }],\n  [\"path\", { d: \"M16 3.128a4 4 0 0 1 0 7.744\", key: \"16gr8j\" }],\n  [\"path\", { d: \"M22 21v-2a4 4 0 0 0-3-3.87\", key: \"kshegd\" }],\n  [\"circle\", { cx: \"9\", cy: \"7\", r: \"4\", key: \"nufk8\" }]\n];\nconst Users = createLucideIcon(\"users\", __iconNode);\n\nexport { __iconNode, Users as default };\n//# sourceMappingURL=users.js.map\n","/**\n * @license lucide-react v0.525.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst __iconNode = [\n  [\n    \"path\",\n    {\n      d: \"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z\",\n      key: \"1xq2db\"\n    }\n  ]\n];\nconst Zap = createLucideIcon(\"zap\", __iconNode);\n\nexport { __iconNode, Zap as default };\n//# sourceMappingURL=zap.js.map\n","var degrees = 180 / Math.PI;\n\nexport var identity = {\n  translateX: 0,\n  translateY: 0,\n  rotate: 0,\n  skewX: 0,\n  scaleX: 1,\n  scaleY: 1\n};\n\nexport default function(a, b, c, d, e, f) {\n  var scaleX, scaleY, skewX;\n  if (scaleX = Math.sqrt(a * a + b * b)) a /= scaleX, b /= scaleX;\n  if (skewX = a * c + b * d) c -= a * skewX, d -= b * skewX;\n  if (scaleY = Math.sqrt(c * c + d * d)) c /= scaleY, d /= scaleY, skewX /= scaleY;\n  if (a * d < b * c) a = -a, b = -b, skewX = -skewX, scaleX = -scaleX;\n  return {\n    translateX: e,\n    translateY: f,\n    rotate: Math.atan2(b, a) * degrees,\n    skewX: Math.atan(skewX) * degrees,\n    scaleX: scaleX,\n    scaleY: scaleY\n  };\n}\n","import decompose, {identity} from \"./decompose.js\";\n\nvar svgNode;\n\n/* eslint-disable no-undef */\nexport function parseCss(value) {\n  const m = new (typeof DOMMatrix === \"function\" ? DOMMatrix : WebKitCSSMatrix)(value + \"\");\n  return m.isIdentity ? identity : decompose(m.a, m.b, m.c, m.d, m.e, m.f);\n}\n\nexport function parseSvg(value) {\n  if (value == null) return identity;\n  if (!svgNode) svgNode = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n  svgNode.setAttribute(\"transform\", value);\n  if (!(value = svgNode.transform.baseVal.consolidate())) return identity;\n  value = value.matrix;\n  return decompose(value.a, value.b, value.c, value.d, value.e, value.f);\n}\n","import number from \"../number.js\";\nimport {parseCss, parseSvg} from \"./parse.js\";\n\nfunction interpolateTransform(parse, pxComma, pxParen, degParen) {\n\n  function pop(s) {\n    return s.length ? s.pop() + \" \" : \"\";\n  }\n\n  function translate(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(\"translate(\", null, pxComma, null, pxParen);\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb || yb) {\n      s.push(\"translate(\" + xb + pxComma + yb + pxParen);\n    }\n  }\n\n  function rotate(a, b, s, q) {\n    if (a !== b) {\n      if (a - b > 180) b += 360; else if (b - a > 180) a += 360; // shortest path\n      q.push({i: s.push(pop(s) + \"rotate(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"rotate(\" + b + degParen);\n    }\n  }\n\n  function skewX(a, b, s, q) {\n    if (a !== b) {\n      q.push({i: s.push(pop(s) + \"skewX(\", null, degParen) - 2, x: number(a, b)});\n    } else if (b) {\n      s.push(pop(s) + \"skewX(\" + b + degParen);\n    }\n  }\n\n  function scale(xa, ya, xb, yb, s, q) {\n    if (xa !== xb || ya !== yb) {\n      var i = s.push(pop(s) + \"scale(\", null, \",\", null, \")\");\n      q.push({i: i - 4, x: number(xa, xb)}, {i: i - 2, x: number(ya, yb)});\n    } else if (xb !== 1 || yb !== 1) {\n      s.push(pop(s) + \"scale(\" + xb + \",\" + yb + \")\");\n    }\n  }\n\n  return function(a, b) {\n    var s = [], // string constants and placeholders\n        q = []; // number interpolators\n    a = parse(a), b = parse(b);\n    translate(a.translateX, a.translateY, b.translateX, b.translateY, s, q);\n    rotate(a.rotate, b.rotate, s, q);\n    skewX(a.skewX, b.skewX, s, q);\n    scale(a.scaleX, a.scaleY, b.scaleX, b.scaleY, s, q);\n    a = b = null; // gc\n    return function(t) {\n      var i = -1, n = q.length, o;\n      while (++i < n) s[(o = q[i]).i] = o.x(t);\n      return s.join(\"\");\n    };\n  };\n}\n\nexport var interpolateTransformCss = interpolateTransform(parseCss, \"px, \", \"px)\", \"deg)\");\nexport var interpolateTransformSvg = interpolateTransform(parseSvg, \", \", \")\", \")\");\n","var epsilon2 = 1e-12;\n\nfunction cosh(x) {\n  return ((x = Math.exp(x)) + 1 / x) / 2;\n}\n\nfunction sinh(x) {\n  return ((x = Math.exp(x)) - 1 / x) / 2;\n}\n\nfunction tanh(x) {\n  return ((x = Math.exp(2 * x)) - 1) / (x + 1);\n}\n\nexport default (function zoomRho(rho, rho2, rho4) {\n\n  // p0 = [ux0, uy0, w0]\n  // p1 = [ux1, uy1, w1]\n  function zoom(p0, p1) {\n    var ux0 = p0[0], uy0 = p0[1], w0 = p0[2],\n        ux1 = p1[0], uy1 = p1[1], w1 = p1[2],\n        dx = ux1 - ux0,\n        dy = uy1 - uy0,\n        d2 = dx * dx + dy * dy,\n        i,\n        S;\n\n    // Special case for u0 â‰… u1.\n    if (d2 < epsilon2) {\n      S = Math.log(w1 / w0) / rho;\n      i = function(t) {\n        return [\n          ux0 + t * dx,\n          uy0 + t * dy,\n          w0 * Math.exp(rho * t * S)\n        ];\n      }\n    }\n\n    // General case.\n    else {\n      var d1 = Math.sqrt(d2),\n          b0 = (w1 * w1 - w0 * w0 + rho4 * d2) / (2 * w0 * rho2 * d1),\n          b1 = (w1 * w1 - w0 * w0 - rho4 * d2) / (2 * w1 * rho2 * d1),\n          r0 = Math.log(Math.sqrt(b0 * b0 + 1) - b0),\n          r1 = Math.log(Math.sqrt(b1 * b1 + 1) - b1);\n      S = (r1 - r0) / rho;\n      i = function(t) {\n        var s = t * S,\n            coshr0 = cosh(r0),\n            u = w0 / (rho2 * d1) * (coshr0 * tanh(rho * s + r0) - sinh(r0));\n        return [\n          ux0 + u * dx,\n          uy0 + u * dy,\n          w0 * coshr0 / cosh(rho * s + r0)\n        ];\n      }\n    }\n\n    i.duration = S * 1000 * rho / Math.SQRT2;\n\n    return i;\n  }\n\n  zoom.rho = function(_) {\n    var _1 = Math.max(1e-3, +_), _2 = _1 * _1, _4 = _2 * _2;\n    return zoomRho(_1, _2, _4);\n  };\n\n  return zoom;\n})(Math.SQRT2, 2, 4);\n","import React from 'react'\n\ntype LoaderSize = 'small' | 'medium' | 'large'\ntype LoaderColor = 'blue' | 'green' | 'red' | 'purple'\n\ninterface LoaderProps {\n  size?: LoaderSize\n  color?: LoaderColor\n}\n\nconst Loader: React.FC<LoaderProps> = ({ size = 'medium', color = 'blue' }) => {\n  // Size mapping\n  const sizeMap: Record<LoaderSize, string> = {\n    small: 'w-5 h-5',\n    medium: 'w-10 h-10',\n    large: 'w-14 h-14',\n  }\n\n  // Color mapping\n  const colorMap: Record<LoaderColor, string> = {\n    blue: 'from-blue-400 to-blue-600',\n    green: 'from-green-400 to-green-600',\n    red: 'from-red-400 to-red-600',\n    purple: 'from-purple-400 to-purple-600',\n  }\n\n  return (\n    <div className='flex items-center justify-center'>\n      <div\n        className={` ${sizeMap[size]} border-3 animate-spin rounded-full border-t-transparent bg-gradient-to-r ${colorMap[color]} `}\n      />\n    </div>\n  )\n}\n\nexport default Loader\n","import React, { useRef, useEffect, useState, useMemo } from 'react'\n// Assuming you might add icons later, e.g., from react-icons\n// import { FaPlay, FaPause, FaExpand, FaCompress, FaVolumeUp, FaVolumeMute } from 'react-icons/fa';\nimport VideoCore, { VideoRefType } from './VideoCore'\nimport VideoControls from './VideoControls'\nimport VideoTimeline from './VideoTimeline'\nimport { TimelineMarker } from './VideoTypes'\nimport { useVideoState } from './useVideoState'\n\ninterface VideoMarker {\n  id: string\n  time: number\n  title: string\n  description: string\n  type: 'chapter'\n}\n\ninterface ChapterInfo {\n  title: string\n  startTime: number\n  endTime?: number\n}\n\ninterface ModernVideoPlayerProps {\n  src: string\n  title: string\n  chapterId: string\n  knowledgeId: string\n  className?: string\n  markers?: VideoMarker[]\n  onMarkerClick?: (marker: VideoMarker) => void\n  onTimeUpdate?: (currentTime: number) => void\n  showChapterOverlay?: boolean\n  currentChapter?: ChapterInfo\n}\n\n/**\n * Modern video player component with enhanced accessibility and modular architecture\n */\nconst ModernVideoPlayer: React.FC<ModernVideoPlayerProps> = ({\n  src,\n  title,\n  chapterId,\n  knowledgeId,\n  className = '',\n  markers = [],\n  onMarkerClick,\n  onTimeUpdate,\n  showChapterOverlay = false,\n  currentChapter,\n}) => {\n  const videoRef = useRef<HTMLVideoElement>(null)\n  const containerRef = useRef<HTMLDivElement>(null) // Ref for the main container\n  const [isPlaying, setIsPlaying] = useState(false)\n  const [currentTime, setCurrentTime] = useState(0)\n  const [duration, setDuration] = useState(0)\n  const [volume, setVolume] = useState(1)\n  const [isMuted, setIsMuted] = useState(false)\n  const [isFullscreen, setIsFullscreen] = useState(false)\n  const [showControls, setShowControls] = useState(false) // State to manage controls visibility\n  const controlsTimeoutRef = useRef<NodeJS.Timeout | null>(null)\n  const seekInitiatedRef = useRef<boolean>(false) // Ref to track if seek was just initiated\n  const seekTimeoutRef = useRef<NodeJS.Timeout | null>(null) // Timeout to reset the seek flag\n\n  // Find current marker based on video time\n  const currentMarker = useMemo(() => {\n    return markers\n      .slice()\n      .reverse()\n      .find(marker => currentTime >= marker.time)\n  }, [currentTime, markers])\n\n  useEffect(() => {\n    const video = videoRef.current\n    const container = containerRef.current\n    if (!video || !container) return\n\n    const handleTimeUpdateEvent = () => {\n      const newTime = video.currentTime\n      setCurrentTime(newTime)\n\n      // If a seek was just initiated, skip calling the parent's onTimeUpdate for a brief moment\n      if (seekInitiatedRef.current) {\n        console.log(\n          '[ModernVideoPlayer] Time update skipped due to recent seek'\n        )\n        return\n      }\n\n      onTimeUpdate?.(newTime)\n    }\n\n    const handleDurationChange = () => {\n      if (!isNaN(video.duration) && isFinite(video.duration)) {\n        setDuration(video.duration)\n      } else {\n        // Handle cases like live streams or unloaded video where duration isn't available\n        setDuration(0)\n      }\n    }\n    const handlePlay = () => setIsPlaying(true)\n    const handlePause = () => setIsPlaying(false)\n    const handleVolumeChange = () => {\n      setVolume(video.volume)\n      setIsMuted(video.muted || video.volume === 0)\n    }\n\n    // Use the fullscreen API specific to the container for better control\n    const handleFullscreenChange = () => {\n      setIsFullscreen(document.fullscreenElement === container)\n    }\n\n    // Initial duration set\n    if (video.readyState >= 1) {\n      // HAVE_METADATA\n      handleDurationChange()\n    }\n\n    video.addEventListener('timeupdate', handleTimeUpdateEvent)\n    video.addEventListener('durationchange', handleDurationChange)\n    video.addEventListener('loadedmetadata', handleDurationChange) // Handle async metadata loading\n    video.addEventListener('play', handlePlay)\n    video.addEventListener('pause', handlePause)\n    video.addEventListener('volumechange', handleVolumeChange)\n    // Listen on the container for fullscreen changes\n    document.addEventListener('fullscreenchange', handleFullscreenChange)\n\n    // Auto-hide controls logic\n    const hideControls = () => setShowControls(false)\n\n    const resetControlsTimeout = () => {\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current)\n      }\n      setShowControls(true)\n      // Hide controls after 3 seconds of inactivity, only if playing\n      if (isPlaying) {\n        controlsTimeoutRef.current = setTimeout(hideControls, 3000)\n      }\n    }\n\n    container.addEventListener('mousemove', resetControlsTimeout)\n    container.addEventListener('mouseleave', hideControls)\n    container.addEventListener('click', resetControlsTimeout) // Show controls on click too\n\n    return () => {\n      video.removeEventListener('timeupdate', handleTimeUpdateEvent)\n      video.removeEventListener('durationchange', handleDurationChange)\n      video.removeEventListener('loadedmetadata', handleDurationChange)\n      video.removeEventListener('play', handlePlay)\n      video.removeEventListener('pause', handlePause)\n      video.removeEventListener('volumechange', handleVolumeChange)\n      document.removeEventListener('fullscreenchange', handleFullscreenChange)\n\n      container.removeEventListener('mousemove', resetControlsTimeout)\n      container.removeEventListener('mouseleave', hideControls)\n      container.removeEventListener('click', resetControlsTimeout)\n      if (controlsTimeoutRef.current) {\n        clearTimeout(controlsTimeoutRef.current)\n      }\n      // Clear the seek timeout on unmount\n      if (seekTimeoutRef.current) {\n        clearTimeout(seekTimeoutRef.current)\n      }\n    }\n  }, [onTimeUpdate, isPlaying]) // Added isPlaying dependency for auto-hide logic\n\n  const togglePlay = () => {\n    if (videoRef.current) {\n      if (isPlaying) {\n        videoRef.current.pause()\n      } else {\n        videoRef.current\n          .play()\n          .catch(error => console.error('Error playing video:', error))\n      }\n    }\n  }\n\n  const handleSeek = (e: React.ChangeEvent<HTMLInputElement> | number) => {\n    const targetTime = typeof e === 'number' ? e : parseFloat(e.target.value)\n    console.log('[ModernVideoPlayer] handleSeek called with time:', targetTime)\n    if (videoRef.current) {\n      const video = videoRef.current\n      console.log(\n        '[ModernVideoPlayer] videoRef exists. Duration:',\n        video.duration,\n        'ReadyState:',\n        video.readyState\n      )\n      const canSeek =\n        isFinite(targetTime) &&\n        video.duration > 0 &&\n        targetTime >= 0 &&\n        targetTime <= video.duration\n      console.log('[ModernVideoPlayer] Can seek?', canSeek)\n      if (canSeek) {\n        console.log('[ModernVideoPlayer] Seeking video to:', targetTime)\n        video.currentTime = targetTime\n        console.log(\n          '[ModernVideoPlayer] video.currentTime set to:',\n          video.currentTime\n        ) // Log immediately after setting\n        setCurrentTime(targetTime) // Update state immediately for responsiveness\n\n        // Set the flag to ignore the next time update(s)\n        seekInitiatedRef.current = true\n        // Clear any existing timeout\n        if (seekTimeoutRef.current) {\n          clearTimeout(seekTimeoutRef.current)\n        }\n        // Reset the flag after a short delay (e.g., 250ms)\n        seekTimeoutRef.current = setTimeout(() => {\n          seekInitiatedRef.current = false\n          console.log('[ModernVideoPlayer] Seek flag reset')\n        }, 250) // Adjust delay if needed\n      } else {\n        console.warn(\n          '[ModernVideoPlayer] Seek prevented. Time:',\n          targetTime,\n          'Duration:',\n          video.duration\n        )\n      }\n    } else {\n      console.warn(\n        '[ModernVideoPlayer] handleSeek called but videoRef is null.'\n      )\n    }\n  }\n\n  const handleVolumeChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    if (videoRef.current) {\n      const vol = parseFloat(e.target.value)\n      videoRef.current.volume = vol\n      videoRef.current.muted = vol === 0\n    }\n  }\n\n  const toggleMute = () => {\n    if (videoRef.current) {\n      videoRef.current.muted = !videoRef.current.muted\n      // If unmuting and volume was 0, set to a default volume (e.g., 0.5)\n      if (!videoRef.current.muted && videoRef.current.volume === 0) {\n        videoRef.current.volume = 0.5\n      }\n    }\n  }\n\n  const toggleFullscreen = async () => {\n    const elem = containerRef.current // Target the container\n    if (!elem) return\n\n    if (!document.fullscreenElement) {\n      try {\n        // Standard fullscreen request\n        if (elem.requestFullscreen) {\n          await elem.requestFullscreen()\n          // Fallbacks for older browsers (consider removing if not needed)\n        } else if ((elem as any).mozRequestFullScreen) {\n          /* Firefox */\n          await (elem as any).mozRequestFullScreen()\n        } else if ((elem as any).webkitRequestFullscreen) {\n          /* Chrome, Safari & Opera */\n          await (elem as any).webkitRequestFullscreen()\n        } else if ((elem as any).msRequestFullscreen) {\n          /* IE/Edge */\n          await (elem as any).msRequestFullscreen()\n        }\n      } catch (err) {\n        console.error('Error attempting to enable fullscreen:', err)\n      }\n    } else {\n      try {\n        if (document.exitFullscreen) {\n          await document.exitFullscreen()\n        } else if ((document as any).mozCancelFullScreen) {\n          /* Firefox */\n          await (document as any).mozCancelFullScreen()\n        } else if ((document as any).webkitExitFullscreen) {\n          /* Chrome, Safari & Opera */\n          await (document as any).webkitExitFullscreen()\n        } else if ((document as any).msExitFullscreen) {\n          /* IE/Edge */\n          await (document as any).msExitFullscreen()\n        }\n      } catch (err) {\n        console.error('Error attempting to disable fullscreen:', err)\n      }\n    }\n  }\n\n  const formatTime = (seconds: number): string => {\n    if (isNaN(seconds) || !isFinite(seconds)) {\n      return '00:00'\n    }\n    const mins = Math.floor(seconds / 60)\n    const secs = Math.floor(seconds % 60)\n    return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n  }\n\n  // Calculate progress for the seek bar's background gradient\n  const progressPercent = duration > 0 ? (currentTime / duration) * 100 : 0\n  const seekBarBackground = `linear-gradient(to right, #3b82f6 ${progressPercent}%, #4b5563 ${progressPercent}%)` // Tailwind blue-500 and gray-600\n\n  return (\n    <div\n      ref={containerRef}\n      className={`group relative ${className} bg-black`} // Use group for hover/focus states within children\n      onMouseEnter={() => setShowControls(true)}\n      // onMouseLeave={() => !isPlaying && setShowControls(false)} // Keep controls visible when paused and mouse leaves\n    >\n      {/* Video Element */}\n      <video\n        ref={videoRef}\n        className='block aspect-video h-full w-full' // block removes extra space below video\n        src={src}\n        title={title}\n        playsInline // Important for mobile inline playback\n        onClick={togglePlay} // Allow clicking video to play/pause\n        onDoubleClick={toggleFullscreen} // Double click for fullscreen\n      >\n        Your browser does not support the video tag.\n      </video>\n\n      {/* Controls Overlay - Conditionally Render based on showControls or group-hover/focus-within */}\n      <div\n        className={`absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/70 to-transparent p-2 transition-opacity duration-300 ease-in-out sm:p-4 ${showControls || !isPlaying ? 'opacity-100' : 'opacity-0 focus-within:opacity-100 group-hover:opacity-100'}`}\n        onClick={e => e.stopPropagation()} // Prevent clicks inside controls from toggling play/pause on the video element itself\n      >\n        {/* Timeline / Seek Bar */}\n        <div className='mb-2 flex items-center gap-2'>\n          <input\n            type='range'\n            min='0'\n            max={duration || 0} // Ensure max is 0 if duration is not available yet\n            value={currentTime}\n            onChange={handleSeek}\n            className='range-lg h-2 w-full cursor-pointer appearance-none rounded-lg bg-gray-700' // Basic styling\n            style={{ background: seekBarBackground }} // Dynamic background\n            aria-label='Video progress'\n            disabled={duration <= 0} // Disable if duration is 0 or invalid\n          />\n        </div>\n\n        {/* Bottom Row Controls */}\n        <div className='flex items-center justify-between text-white'>\n          {/* Left Controls */}\n          <div className='flex items-center gap-2 sm:gap-4'>\n            <button\n              onClick={togglePlay}\n              className='rounded-full p-1.5 transition-colors hover:bg-white/20 sm:p-2'\n              aria-label={isPlaying ? 'Pause' : 'Play'}\n            >\n              {/* Replace with actual icons */}\n              {isPlaying ? (\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  className='h-5 w-5 sm:h-6 sm:w-6'\n                  viewBox='0 0 20 20'\n                  fill='currentColor'\n                >\n                  <path\n                    fillRule='evenodd'\n                    d='M18 10a8 8 0 11-16 0 8 8 0 0116 0zM7 8a1 1 0 00-1 1v2a1 1 0 102 0V9a1 1 0 00-1-1zm5 0a1 1 0 00-1 1v2a1 1 0 102 0V9a1 1 0 00-1-1z'\n                    clipRule='evenodd'\n                  />\n                </svg> // Basic Pause Icon\n              ) : (\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  className='h-5 w-5 sm:h-6 sm:w-6'\n                  viewBox='0 0 20 20'\n                  fill='currentColor'\n                >\n                  <path\n                    fillRule='evenodd'\n                    d='M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z'\n                    clipRule='evenodd'\n                  />\n                </svg> // Basic Play Icon\n              )}\n            </button>\n\n            {/* Volume Control */}\n            <div className='group flex items-center gap-1'>\n              <button\n                onClick={toggleMute}\n                className='rounded-full p-1.5 transition-colors hover:bg-white/20 sm:p-2'\n                aria-label={isMuted ? 'Unmute' : 'Mute'}\n              >\n                {/* Replace with actual icons */}\n                {isMuted ? (\n                  <svg\n                    xmlns='http://www.w3.org/2000/svg'\n                    className='h-5 w-5 sm:h-6 sm:w-6'\n                    viewBox='0 0 20 20'\n                    fill='currentColor'\n                  >\n                    <path\n                      fillRule='evenodd'\n                      d='M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM14.657 2.929a1 1 0 011.414 0L19 5.858l-1.414 1.414L16.172 6.5a1 1 0 01-1.414-1.414l-1.06-1.061zm-1.06 1.06a1 1 0 010 1.414L11.172 7.914a1 1 0 01-1.414-1.414l1.414-1.414zm3.535 2.122a1 1 0 010 1.414L15.757 9.33a1 1 0 01-1.414-1.414l1.414-1.414a1 1 0 011.414 0zm-1.414 1.414a1 1 0 010 1.414l-.707.707a1 1 0 01-1.414-1.414l.707-.707z'\n                      clipRule='evenodd'\n                    />\n                  </svg> // Mute Icon Placeholder\n                ) : (\n                  <svg\n                    xmlns='http://www.w3.org/2000/svg'\n                    className='h-5 w-5 sm:h-6 sm:w-6'\n                    viewBox='0 0 20 20'\n                    fill='currentColor'\n                  >\n                    <path\n                      fillRule='evenodd'\n                      d='M9.383 3.076A1 1 0 0110 4v12a1 1 0 01-1.707.707L4.586 13H2a1 1 0 01-1-1V8a1 1 0 011-1h2.586l3.707-3.707a1 1 0 011.09-.217zM12.293 7.293a1 1 0 011.414 0L15 8.586l-1.293 1.293a1 1 0 11-1.414-1.414l.293-.293zm4.707 4.707a1 1 0 01-1.414 0L15 11.414l1.293-1.293a1 1 0 011.414 1.414l-.293.293z'\n                      clipRule='evenodd'\n                    />\n                  </svg> // Volume Icon Placeholder\n                )}\n              </button>\n              <input\n                type='range'\n                min='0'\n                max='1'\n                step='0.05'\n                value={isMuted ? 0 : volume}\n                onChange={handleVolumeChange}\n                className='h-1.5 w-0 cursor-pointer appearance-none rounded-lg bg-gray-600 transition-all duration-200 ease-in-out group-hover:w-16 sm:h-2' // Hide by default, show on hover\n                aria-label='Volume control'\n              />\n            </div>\n\n            {/* Time Display */}\n            <div className='ml-2 whitespace-nowrap text-xs tabular-nums sm:text-sm'>\n              {formatTime(currentTime)} / {formatTime(duration)}\n            </div>\n          </div>\n\n          {/* Right Controls */}\n          <div className='flex items-center gap-2 sm:gap-4'>\n            {/* Potential place for settings, chapters, quality etc. */}\n\n            <button\n              onClick={toggleFullscreen}\n              className='rounded-full p-1.5 transition-colors hover:bg-white/20 sm:p-2'\n              aria-label={isFullscreen ? 'Exit fullscreen' : 'Enter fullscreen'}\n            >\n              {/* Replace with actual icons */}\n              {isFullscreen ? (\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  className='h-5 w-5 sm:h-6 sm:w-6'\n                  viewBox='0 0 20 20'\n                  fill='currentColor'\n                >\n                  <path\n                    fillRule='evenodd'\n                    d='M5.293 4.293a1 1 0 011.414 0L10 7.586l3.293-3.293a1 1 0 111.414 1.414L11.414 9H15a1 1 0 110 2h-5a1 1 0 01-1-1V5a1 1 0 112 0v3.586L5.293 5.707a1 1 0 010-1.414zM10 18a1 1 0 01-1-1v-3.586l-3.293 3.293a1 1 0 11-1.414-1.414L7.586 12H4a1 1 0 110-2h5a1 1 0 011 1z'\n                    clipRule='evenodd'\n                  />\n                </svg> // Exit Fullscreen Icon\n              ) : (\n                <svg\n                  xmlns='http://www.w3.org/2000/svg'\n                  className='h-5 w-5 sm:h-6 sm:w-6'\n                  viewBox='0 0 20 20'\n                  fill='currentColor'\n                >\n                  <path\n                    fillRule='evenodd'\n                    d='M3 4a1 1 0 011-1h4a1 1 0 010 2H5v3a1 1 0 11-2 0V4zm14 0a1 1 0 011 1v4a1 1 0 11-2 0V5h-3a1 1 0 110-2h4zM4 17a1 1 0 01-1-1v-4a1 1 0 112 0v3h3a1 1 0 110 2H4zm13-1a1 1 0 01-1 1h-4a1 1 0 110-2h3v-3a1 1 0 112 0v4z'\n                    clipRule='evenodd'\n                  />\n                </svg> // Enter Fullscreen Icon\n              )}\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Optional Chapter Overlay */}\n      {showChapterOverlay && currentChapter && (\n        <div\n          className={`absolute left-4 top-4 rounded-md bg-black/60 p-2 text-sm text-white transition-opacity duration-300 ease-in-out ${showControls || !isPlaying ? 'opacity-100' : 'opacity-0 focus-within:opacity-100 group-hover:opacity-100'}`}\n        >\n          <h3 className='font-semibold'>{currentChapter.title}</h3>\n          <p className='text-xs text-gray-300'>\n            {formatTime(currentChapter.startTime)}\n            {currentChapter.endTime &&\n              ` - ${formatTime(currentChapter.endTime)}`}\n          </p>\n        </div>\n      )}\n\n      {/* Floating Chapter Markers (Example) */}\n      {showChapterOverlay && markers.length > 0 && (\n        <div\n          className={`absolute bottom-20 right-4 flex flex-col gap-1 transition-opacity duration-300 ease-in-out ${showControls || !isPlaying ? 'opacity-100' : 'opacity-0 focus-within:opacity-100 group-hover:opacity-100'}`}\n        >\n          {markers.map(marker => (\n            <button\n              key={marker.id}\n              onClick={e => {\n                e.stopPropagation() // Prevent video click toggle\n                console.log(\n                  '[ModernVideoPlayer] Marker clicked:',\n                  marker.title,\n                  'Target Time:',\n                  marker.time\n                )\n                // Seek the video first to ensure responsiveness\n                handleSeek(marker.time)\n                // Then notify the parent component if needed\n                onMarkerClick?.(marker)\n              }}\n              className={`rounded px-3 py-1 text-xs shadow transition-colors hover:bg-blue-600 ${currentTime >= marker.time && (!currentChapter || marker.time >= currentChapter.startTime) ? 'bg-blue-500 font-semibold' : 'bg-gray-700/80'}`}\n              title={marker.description || marker.title}\n            >\n              {marker.title}\n            </button>\n          ))}\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default ModernVideoPlayer\n","/**\n * Count how often a character (or substring) is used in a string.\n *\n * @param {string} value\n *   Value to search in.\n * @param {string} character\n *   Character (or substring) to look for.\n * @return {number}\n *   Number of times `character` occurred in `value`.\n */\nexport function ccount(value, character) {\n  const source = String(value)\n\n  if (typeof character !== 'string') {\n    throw new TypeError('Expected character')\n  }\n\n  let count = 0\n  let index = source.indexOf(character)\n\n  while (index !== -1) {\n    count++\n    index = source.indexOf(character, index + character.length)\n  }\n\n  return count\n}\n","export default function escapeStringRegexp(string) {\n\tif (typeof string !== 'string') {\n\t\tthrow new TypeError('Expected a string');\n\t}\n\n\t// Escape characters with special meaning either inside or outside character sets.\n\t// Use a simple backslash escape when itâ€™s always valid, and a `\\xnn` escape when the simpler form would be disallowed by Unicode patternsâ€™ stricter grammar.\n\treturn string\n\t\t.replace(/[|\\\\{}()[\\]^$+*?.]/g, '\\\\$&')\n\t\t.replace(/-/g, '\\\\x2d');\n}\n","/**\n * @import {Nodes, Parents, PhrasingContent, Root, Text} from 'mdast'\n * @import {BuildVisitor, Test, VisitorResult} from 'unist-util-visit-parents'\n */\n\n/**\n * @typedef RegExpMatchObject\n *   Info on the match.\n * @property {number} index\n *   The index of the search at which the result was found.\n * @property {string} input\n *   A copy of the search string in the text node.\n * @property {[...Array<Parents>, Text]} stack\n *   All ancestors of the text node, where the last node is the text itself.\n *\n * @typedef {RegExp | string} Find\n *   Pattern to find.\n *\n *   Strings are escaped and then turned into global expressions.\n *\n * @typedef {Array<FindAndReplaceTuple>} FindAndReplaceList\n *   Several find and replaces, in array form.\n *\n * @typedef {[Find, Replace?]} FindAndReplaceTuple\n *   Find and replace in tuple form.\n *\n * @typedef {ReplaceFunction | string | null | undefined} Replace\n *   Thing to replace with.\n *\n * @callback ReplaceFunction\n *   Callback called when a search matches.\n * @param {...any} parameters\n *   The parameters are the result of corresponding search expression:\n *\n *   * `value` (`string`) â€” whole match\n *   * `...capture` (`Array<string>`) â€” matches from regex capture groups\n *   * `match` (`RegExpMatchObject`) â€” info on the match\n * @returns {Array<PhrasingContent> | PhrasingContent | string | false | null | undefined}\n *   Thing to replace with.\n *\n *   * when `null`, `undefined`, `''`, remove the match\n *   * â€¦or when `false`, do not replace at all\n *   * â€¦or when `string`, replace with a text node of that value\n *   * â€¦or when `Node` or `Array<Node>`, replace with those nodes\n *\n * @typedef {[RegExp, ReplaceFunction]} Pair\n *   Normalized find and replace.\n *\n * @typedef {Array<Pair>} Pairs\n *   All find and replaced.\n *\n * @typedef Options\n *   Configuration.\n * @property {Test | null | undefined} [ignore]\n *   Test for which nodes to ignore (optional).\n */\n\nimport escape from 'escape-string-regexp'\nimport {visitParents} from 'unist-util-visit-parents'\nimport {convert} from 'unist-util-is'\n\n/**\n * Find patterns in a tree and replace them.\n *\n * The algorithm searches the tree in *preorder* for complete values in `Text`\n * nodes.\n * Partial matches are not supported.\n *\n * @param {Nodes} tree\n *   Tree to change.\n * @param {FindAndReplaceList | FindAndReplaceTuple} list\n *   Patterns to find.\n * @param {Options | null | undefined} [options]\n *   Configuration (when `find` is not `Find`).\n * @returns {undefined}\n *   Nothing.\n */\nexport function findAndReplace(tree, list, options) {\n  const settings = options || {}\n  const ignored = convert(settings.ignore || [])\n  const pairs = toPairs(list)\n  let pairIndex = -1\n\n  while (++pairIndex < pairs.length) {\n    visitParents(tree, 'text', visitor)\n  }\n\n  /** @type {BuildVisitor<Root, 'text'>} */\n  function visitor(node, parents) {\n    let index = -1\n    /** @type {Parents | undefined} */\n    let grandparent\n\n    while (++index < parents.length) {\n      const parent = parents[index]\n      /** @type {Array<Nodes> | undefined} */\n      const siblings = grandparent ? grandparent.children : undefined\n\n      if (\n        ignored(\n          parent,\n          siblings ? siblings.indexOf(parent) : undefined,\n          grandparent\n        )\n      ) {\n        return\n      }\n\n      grandparent = parent\n    }\n\n    if (grandparent) {\n      return handler(node, parents)\n    }\n  }\n\n  /**\n   * Handle a text node which is not in an ignored parent.\n   *\n   * @param {Text} node\n   *   Text node.\n   * @param {Array<Parents>} parents\n   *   Parents.\n   * @returns {VisitorResult}\n   *   Result.\n   */\n  function handler(node, parents) {\n    const parent = parents[parents.length - 1]\n    const find = pairs[pairIndex][0]\n    const replace = pairs[pairIndex][1]\n    let start = 0\n    /** @type {Array<Nodes>} */\n    const siblings = parent.children\n    const index = siblings.indexOf(node)\n    let change = false\n    /** @type {Array<PhrasingContent>} */\n    let nodes = []\n\n    find.lastIndex = 0\n\n    let match = find.exec(node.value)\n\n    while (match) {\n      const position = match.index\n      /** @type {RegExpMatchObject} */\n      const matchObject = {\n        index: match.index,\n        input: match.input,\n        stack: [...parents, node]\n      }\n      let value = replace(...match, matchObject)\n\n      if (typeof value === 'string') {\n        value = value.length > 0 ? {type: 'text', value} : undefined\n      }\n\n      // It wasnâ€™t a match after all.\n      if (value === false) {\n        // False acts as if there was no match.\n        // So we need to reset `lastIndex`, which currently being at the end of\n        // the current match, to the beginning.\n        find.lastIndex = position + 1\n      } else {\n        if (start !== position) {\n          nodes.push({\n            type: 'text',\n            value: node.value.slice(start, position)\n          })\n        }\n\n        if (Array.isArray(value)) {\n          nodes.push(...value)\n        } else if (value) {\n          nodes.push(value)\n        }\n\n        start = position + match[0].length\n        change = true\n      }\n\n      if (!find.global) {\n        break\n      }\n\n      match = find.exec(node.value)\n    }\n\n    if (change) {\n      if (start < node.value.length) {\n        nodes.push({type: 'text', value: node.value.slice(start)})\n      }\n\n      parent.children.splice(index, 1, ...nodes)\n    } else {\n      nodes = [node]\n    }\n\n    return index + nodes.length\n  }\n}\n\n/**\n * Turn a tuple or a list of tuples into pairs.\n *\n * @param {FindAndReplaceList | FindAndReplaceTuple} tupleOrList\n *   Schema.\n * @returns {Pairs}\n *   Clean pairs.\n */\nfunction toPairs(tupleOrList) {\n  /** @type {Pairs} */\n  const result = []\n\n  if (!Array.isArray(tupleOrList)) {\n    throw new TypeError('Expected find and replace tuple or list of tuples')\n  }\n\n  /** @type {FindAndReplaceList} */\n  // @ts-expect-error: correct.\n  const list =\n    !tupleOrList[0] || Array.isArray(tupleOrList[0])\n      ? tupleOrList\n      : [tupleOrList]\n\n  let index = -1\n\n  while (++index < list.length) {\n    const tuple = list[index]\n    result.push([toExpression(tuple[0]), toFunction(tuple[1])])\n  }\n\n  return result\n}\n\n/**\n * Turn a find into an expression.\n *\n * @param {Find} find\n *   Find.\n * @returns {RegExp}\n *   Expression.\n */\nfunction toExpression(find) {\n  return typeof find === 'string' ? new RegExp(escape(find), 'g') : find\n}\n\n/**\n * Turn a replace into a function.\n *\n * @param {Replace} replace\n *   Replace.\n * @returns {ReplaceFunction}\n *   Function.\n */\nfunction toFunction(replace) {\n  return typeof replace === 'function'\n    ? replace\n    : function () {\n        return replace\n      }\n}\n","/**\n * @import {RegExpMatchObject, ReplaceFunction} from 'mdast-util-find-and-replace'\n * @import {CompileContext, Extension as FromMarkdownExtension, Handle as FromMarkdownHandle, Transform as FromMarkdownTransform} from 'mdast-util-from-markdown'\n * @import {ConstructName, Options as ToMarkdownExtension} from 'mdast-util-to-markdown'\n * @import {Link, PhrasingContent} from 'mdast'\n */\n\nimport {ccount} from 'ccount'\nimport {ok as assert} from 'devlop'\nimport {unicodePunctuation, unicodeWhitespace} from 'micromark-util-character'\nimport {findAndReplace} from 'mdast-util-find-and-replace'\n\n/** @type {ConstructName} */\nconst inConstruct = 'phrasing'\n/** @type {Array<ConstructName>} */\nconst notInConstruct = ['autolink', 'link', 'image', 'label']\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM autolink\n * literals in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n */\nexport function gfmAutolinkLiteralFromMarkdown() {\n  return {\n    transforms: [transformGfmAutolinkLiterals],\n    enter: {\n      literalAutolink: enterLiteralAutolink,\n      literalAutolinkEmail: enterLiteralAutolinkValue,\n      literalAutolinkHttp: enterLiteralAutolinkValue,\n      literalAutolinkWww: enterLiteralAutolinkValue\n    },\n    exit: {\n      literalAutolink: exitLiteralAutolink,\n      literalAutolinkEmail: exitLiteralAutolinkEmail,\n      literalAutolinkHttp: exitLiteralAutolinkHttp,\n      literalAutolinkWww: exitLiteralAutolinkWww\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM autolink\n * literals in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM autolink literals.\n */\nexport function gfmAutolinkLiteralToMarkdown() {\n  return {\n    unsafe: [\n      {\n        character: '@',\n        before: '[+\\\\-.\\\\w]',\n        after: '[\\\\-.\\\\w]',\n        inConstruct,\n        notInConstruct\n      },\n      {\n        character: '.',\n        before: '[Ww]',\n        after: '[\\\\-.\\\\w]',\n        inConstruct,\n        notInConstruct\n      },\n      {\n        character: ':',\n        before: '[ps]',\n        after: '\\\\/',\n        inConstruct,\n        notInConstruct\n      }\n    ]\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolink(token) {\n  this.enter({type: 'link', title: null, url: '', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterLiteralAutolinkValue(token) {\n  this.config.enter.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkHttp(token) {\n  this.config.exit.autolinkProtocol.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkWww(token) {\n  this.config.exit.data.call(this, token)\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'link')\n  node.url = 'http://' + this.sliceSerialize(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolinkEmail(token) {\n  this.config.exit.autolinkEmail.call(this, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitLiteralAutolink(token) {\n  this.exit(token)\n}\n\n/** @type {FromMarkdownTransform} */\nfunction transformGfmAutolinkLiterals(tree) {\n  findAndReplace(\n    tree,\n    [\n      [/(https?:\\/\\/|www(?=\\.))([-.\\w]+)([^ \\t\\r\\n]*)/gi, findUrl],\n      [/(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)/gu, findEmail]\n    ],\n    {ignore: ['link', 'linkReference']}\n  )\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} protocol\n * @param {string} domain\n * @param {string} path\n * @param {RegExpMatchObject} match\n * @returns {Array<PhrasingContent> | Link | false}\n */\n// eslint-disable-next-line max-params\nfunction findUrl(_, protocol, domain, path, match) {\n  let prefix = ''\n\n  // Not an expected previous character.\n  if (!previous(match)) {\n    return false\n  }\n\n  // Treat `www` as part of the domain.\n  if (/^w/i.test(protocol)) {\n    domain = protocol + domain\n    protocol = ''\n    prefix = 'http://'\n  }\n\n  if (!isCorrectDomain(domain)) {\n    return false\n  }\n\n  const parts = splitUrl(domain + path)\n\n  if (!parts[0]) return false\n\n  /** @type {Link} */\n  const result = {\n    type: 'link',\n    title: null,\n    url: prefix + protocol + parts[0],\n    children: [{type: 'text', value: protocol + parts[0]}]\n  }\n\n  if (parts[1]) {\n    return [result, {type: 'text', value: parts[1]}]\n  }\n\n  return result\n}\n\n/**\n * @type {ReplaceFunction}\n * @param {string} _\n * @param {string} atext\n * @param {string} label\n * @param {RegExpMatchObject} match\n * @returns {Link | false}\n */\nfunction findEmail(_, atext, label, match) {\n  if (\n    // Not an expected previous character.\n    !previous(match, true) ||\n    // Label ends in not allowed character.\n    /[-\\d_]$/.test(label)\n  ) {\n    return false\n  }\n\n  return {\n    type: 'link',\n    title: null,\n    url: 'mailto:' + atext + '@' + label,\n    children: [{type: 'text', value: atext + '@' + label}]\n  }\n}\n\n/**\n * @param {string} domain\n * @returns {boolean}\n */\nfunction isCorrectDomain(domain) {\n  const parts = domain.split('.')\n\n  if (\n    parts.length < 2 ||\n    (parts[parts.length - 1] &&\n      (/_/.test(parts[parts.length - 1]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 1]))) ||\n    (parts[parts.length - 2] &&\n      (/_/.test(parts[parts.length - 2]) ||\n        !/[a-zA-Z\\d]/.test(parts[parts.length - 2])))\n  ) {\n    return false\n  }\n\n  return true\n}\n\n/**\n * @param {string} url\n * @returns {[string, string | undefined]}\n */\nfunction splitUrl(url) {\n  const trailExec = /[!\"&'),.:;<>?\\]}]+$/.exec(url)\n\n  if (!trailExec) {\n    return [url, undefined]\n  }\n\n  url = url.slice(0, trailExec.index)\n\n  let trail = trailExec[0]\n  let closingParenIndex = trail.indexOf(')')\n  const openingParens = ccount(url, '(')\n  let closingParens = ccount(url, ')')\n\n  while (closingParenIndex !== -1 && openingParens > closingParens) {\n    url += trail.slice(0, closingParenIndex + 1)\n    trail = trail.slice(closingParenIndex + 1)\n    closingParenIndex = trail.indexOf(')')\n    closingParens++\n  }\n\n  return [url, trail]\n}\n\n/**\n * @param {RegExpMatchObject} match\n * @param {boolean | null | undefined} [email=false]\n * @returns {boolean}\n */\nfunction previous(match, email) {\n  const code = match.input.charCodeAt(match.index - 1)\n\n  return (\n    (match.index === 0 ||\n      unicodeWhitespace(code) ||\n      unicodePunctuation(code)) &&\n    // If itâ€™s an email, the previous character should not be a slash.\n    (!email || code !== 47)\n  )\n}\n","/**\n * @import {\n *   CompileContext,\n *   Extension as FromMarkdownExtension,\n *   Handle as FromMarkdownHandle\n * } from 'mdast-util-from-markdown'\n * @import {ToMarkdownOptions} from 'mdast-util-gfm-footnote'\n * @import {\n *   Handle as ToMarkdownHandle,\n *   Map,\n *   Options as ToMarkdownExtension\n * } from 'mdast-util-to-markdown'\n * @import {FootnoteDefinition, FootnoteReference} from 'mdast'\n */\n\nimport {ok as assert} from 'devlop'\nimport {normalizeIdentifier} from 'micromark-util-normalize-identifier'\n\nfootnoteReference.peek = footnoteReferencePeek\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteCallString() {\n  this.buffer()\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteCall(token) {\n  this.enter({type: 'footnoteReference', identifier: '', label: ''}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteDefinitionLabelString() {\n  this.buffer()\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterFootnoteDefinition(token) {\n  this.enter(\n    {type: 'footnoteDefinition', identifier: '', label: '', children: []},\n    token\n  )\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteCallString(token) {\n  const label = this.resume()\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'footnoteReference')\n  node.identifier = normalizeIdentifier(\n    this.sliceSerialize(token)\n  ).toLowerCase()\n  node.label = label\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteCall(token) {\n  this.exit(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteDefinitionLabelString(token) {\n  const label = this.resume()\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'footnoteDefinition')\n  node.identifier = normalizeIdentifier(\n    this.sliceSerialize(token)\n  ).toLowerCase()\n  node.label = label\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitFootnoteDefinition(token) {\n  this.exit(token)\n}\n\n/** @type {ToMarkdownHandle} */\nfunction footnoteReferencePeek() {\n  return '['\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {FootnoteReference} node\n */\nfunction footnoteReference(node, _, state, info) {\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[^')\n  const exit = state.enter('footnoteReference')\n  const subexit = state.enter('reference')\n  value += tracker.move(\n    state.safe(state.associationId(node), {after: ']', before: value})\n  )\n  subexit()\n  exit()\n  value += tracker.move(']')\n  return value\n}\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM footnotes\n * in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown`.\n */\nexport function gfmFootnoteFromMarkdown() {\n  return {\n    enter: {\n      gfmFootnoteCallString: enterFootnoteCallString,\n      gfmFootnoteCall: enterFootnoteCall,\n      gfmFootnoteDefinitionLabelString: enterFootnoteDefinitionLabelString,\n      gfmFootnoteDefinition: enterFootnoteDefinition\n    },\n    exit: {\n      gfmFootnoteCallString: exitFootnoteCallString,\n      gfmFootnoteCall: exitFootnoteCall,\n      gfmFootnoteDefinitionLabelString: exitFootnoteDefinitionLabelString,\n      gfmFootnoteDefinition: exitFootnoteDefinition\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM footnotes\n * in markdown.\n *\n * @param {ToMarkdownOptions | null | undefined} [options]\n *   Configuration (optional).\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown`.\n */\nexport function gfmFootnoteToMarkdown(options) {\n  // To do: next major: change default.\n  let firstLineBlank = false\n\n  if (options && options.firstLineBlank) {\n    firstLineBlank = true\n  }\n\n  return {\n    handlers: {footnoteDefinition, footnoteReference},\n    // This is on by default already.\n    unsafe: [{character: '[', inConstruct: ['label', 'phrasing', 'reference']}]\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {FootnoteDefinition} node\n   */\n  function footnoteDefinition(node, _, state, info) {\n    const tracker = state.createTracker(info)\n    let value = tracker.move('[^')\n    const exit = state.enter('footnoteDefinition')\n    const subexit = state.enter('label')\n    value += tracker.move(\n      state.safe(state.associationId(node), {before: value, after: ']'})\n    )\n    subexit()\n\n    value += tracker.move(']:')\n\n    if (node.children && node.children.length > 0) {\n      tracker.shift(4)\n\n      value += tracker.move(\n        (firstLineBlank ? '\\n' : ' ') +\n          state.indentLines(\n            state.containerFlow(node, tracker.current()),\n            firstLineBlank ? mapAll : mapExceptFirst\n          )\n      )\n    }\n\n    exit()\n\n    return value\n  }\n}\n\n/** @type {Map} */\nfunction mapExceptFirst(line, index, blank) {\n  return index === 0 ? line : mapAll(line, index, blank)\n}\n\n/** @type {Map} */\nfunction mapAll(line, index, blank) {\n  return (blank ? '' : '    ') + line\n}\n","/**\n * @typedef {import('mdast').Delete} Delete\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n *\n * @typedef {import('mdast-util-to-markdown').ConstructName} ConstructName\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n */\n\n/**\n * List of constructs that occur in phrasing (paragraphs, headings), but cannot\n * contain strikethrough.\n * So they sort of cancel each other out.\n * Note: could use a better name.\n *\n * Note: keep in sync with: <https://github.com/syntax-tree/mdast-util-to-markdown/blob/8ce8dbf/lib/unsafe.js#L14>\n *\n * @type {Array<ConstructName>}\n */\nconst constructsWithoutStrikethrough = [\n  'autolink',\n  'destinationLiteral',\n  'destinationRaw',\n  'reference',\n  'titleQuote',\n  'titleApostrophe'\n]\n\nhandleDelete.peek = peekDelete\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughFromMarkdown() {\n  return {\n    canContainEols: ['delete'],\n    enter: {strikethrough: enterStrikethrough},\n    exit: {strikethrough: exitStrikethrough}\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM\n * strikethrough in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM strikethrough.\n */\nexport function gfmStrikethroughToMarkdown() {\n  return {\n    unsafe: [\n      {\n        character: '~',\n        inConstruct: 'phrasing',\n        notInConstruct: constructsWithoutStrikethrough\n      }\n    ],\n    handlers: {delete: handleDelete}\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterStrikethrough(token) {\n  this.enter({type: 'delete', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitStrikethrough(token) {\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {Delete} node\n */\nfunction handleDelete(node, _, state, info) {\n  const tracker = state.createTracker(info)\n  const exit = state.enter('strikethrough')\n  let value = tracker.move('~~')\n  value += state.containerPhrasing(node, {\n    ...tracker.current(),\n    before: value,\n    after: '~'\n  })\n  value += tracker.move('~~')\n  exit()\n  return value\n}\n\n/** @type {ToMarkdownHandle} */\nfunction peekDelete() {\n  return '~'\n}\n","// To do: next major: remove.\n/**\n * @typedef {Options} MarkdownTableOptions\n *   Configuration.\n */\n\n/**\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [alignDelimiters=true]\n *   Whether to align the delimiters (default: `true`);\n *   they are aligned by default:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   Pass `false` to make them staggered:\n *\n *   ```markdown\n *   | Alpha | B |\n *   | - | - |\n *   | C | Delta |\n *   ```\n * @property {ReadonlyArray<string | null | undefined> | string | null | undefined} [align]\n *   How to align columns (default: `''`);\n *   one style for all columns or styles for their respective columns;\n *   each style is either `'l'` (left), `'r'` (right), or `'c'` (center);\n *   other values are treated as `''`, which doesnâ€™t place the colon in the\n *   alignment row but does align left;\n *   *only the lowercased first character is used, so `Right` is fine.*\n * @property {boolean | null | undefined} [delimiterEnd=true]\n *   Whether to end each row with the delimiter (default: `true`).\n *\n *   > ðŸ‘‰ **Note**: please donâ€™t use this: it could create fragile structures\n *   > that arenâ€™t understandable to some markdown parsers.\n *\n *   When `true`, there are ending delimiters:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there are no ending delimiters:\n *\n *   ```markdown\n *   | Alpha | B\n *   | ----- | -----\n *   | C     | Delta\n *   ```\n * @property {boolean | null | undefined} [delimiterStart=true]\n *   Whether to begin each row with the delimiter (default: `true`).\n *\n *   > ðŸ‘‰ **Note**: please donâ€™t use this: it could create fragile structures\n *   > that arenâ€™t understandable to some markdown parsers.\n *\n *   When `true`, there are starting delimiters:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there are no starting delimiters:\n *\n *   ```markdown\n *   Alpha | B     |\n *   ----- | ----- |\n *   C     | Delta |\n *   ```\n * @property {boolean | null | undefined} [padding=true]\n *   Whether to add a space of padding between delimiters and cells\n *   (default: `true`).\n *\n *   When `true`, there is padding:\n *\n *   ```markdown\n *   | Alpha | B     |\n *   | ----- | ----- |\n *   | C     | Delta |\n *   ```\n *\n *   When `false`, there is no padding:\n *\n *   ```markdown\n *   |Alpha|B    |\n *   |-----|-----|\n *   |C    |Delta|\n *   ```\n * @property {((value: string) => number) | null | undefined} [stringLength]\n *   Function to detect the length of table cell content (optional);\n *   this is used when aligning the delimiters (`|`) between table cells;\n *   full-width characters and emoji mess up delimiter alignment when viewing\n *   the markdown source;\n *   to fix this, you can pass this function,\n *   which receives the cell content and returns its â€œvisibleâ€ size;\n *   note that what is and isnâ€™t visible depends on where the text is displayed.\n *\n *   Without such a function, the following:\n *\n *   ```js\n *   markdownTable([\n *     ['Alpha', 'Bravo'],\n *     ['ä¸­æ–‡', 'Charlie'],\n *     ['ðŸ‘©â€â¤ï¸â€ðŸ‘©', 'Delta']\n *   ])\n *   ```\n *\n *   Yields:\n *\n *   ```markdown\n *   | Alpha | Bravo |\n *   | - | - |\n *   | ä¸­æ–‡ | Charlie |\n *   | ðŸ‘©â€â¤ï¸â€ðŸ‘© | Delta |\n *   ```\n *\n *   With [`string-width`](https://github.com/sindresorhus/string-width):\n *\n *   ```js\n *   import stringWidth from 'string-width'\n *\n *   markdownTable(\n *     [\n *       ['Alpha', 'Bravo'],\n *       ['ä¸­æ–‡', 'Charlie'],\n *       ['ðŸ‘©â€â¤ï¸â€ðŸ‘©', 'Delta']\n *     ],\n *     {stringLength: stringWidth}\n *   )\n *   ```\n *\n *   Yields:\n *\n *   ```markdown\n *   | Alpha | Bravo   |\n *   | ----- | ------- |\n *   | ä¸­æ–‡  | Charlie |\n *   | ðŸ‘©â€â¤ï¸â€ðŸ‘©    | Delta   |\n *   ```\n */\n\n/**\n * @param {string} value\n *   Cell value.\n * @returns {number}\n *   Cell size.\n */\nfunction defaultStringLength(value) {\n  return value.length\n}\n\n/**\n * Generate a markdown\n * ([GFM](https://docs.github.com/en/github/writing-on-github/working-with-advanced-formatting/organizing-information-with-tables))\n * table.\n *\n * @param {ReadonlyArray<ReadonlyArray<string | null | undefined>>} table\n *   Table data (matrix of strings).\n * @param {Readonly<Options> | null | undefined} [options]\n *   Configuration (optional).\n * @returns {string}\n *   Result.\n */\nexport function markdownTable(table, options) {\n  const settings = options || {}\n  // To do: next major: change to spread.\n  const align = (settings.align || []).concat()\n  const stringLength = settings.stringLength || defaultStringLength\n  /** @type {Array<number>} Character codes as symbols for alignment per column. */\n  const alignments = []\n  /** @type {Array<Array<string>>} Cells per row. */\n  const cellMatrix = []\n  /** @type {Array<Array<number>>} Sizes of each cell per row. */\n  const sizeMatrix = []\n  /** @type {Array<number>} */\n  const longestCellByColumn = []\n  let mostCellsPerRow = 0\n  let rowIndex = -1\n\n  // This is a superfluous loop if we donâ€™t align delimiters, but otherwise weâ€™d\n  // do superfluous work when aligning, so optimize for aligning.\n  while (++rowIndex < table.length) {\n    /** @type {Array<string>} */\n    const row = []\n    /** @type {Array<number>} */\n    const sizes = []\n    let columnIndex = -1\n\n    if (table[rowIndex].length > mostCellsPerRow) {\n      mostCellsPerRow = table[rowIndex].length\n    }\n\n    while (++columnIndex < table[rowIndex].length) {\n      const cell = serialize(table[rowIndex][columnIndex])\n\n      if (settings.alignDelimiters !== false) {\n        const size = stringLength(cell)\n        sizes[columnIndex] = size\n\n        if (\n          longestCellByColumn[columnIndex] === undefined ||\n          size > longestCellByColumn[columnIndex]\n        ) {\n          longestCellByColumn[columnIndex] = size\n        }\n      }\n\n      row.push(cell)\n    }\n\n    cellMatrix[rowIndex] = row\n    sizeMatrix[rowIndex] = sizes\n  }\n\n  // Figure out which alignments to use.\n  let columnIndex = -1\n\n  if (typeof align === 'object' && 'length' in align) {\n    while (++columnIndex < mostCellsPerRow) {\n      alignments[columnIndex] = toAlignment(align[columnIndex])\n    }\n  } else {\n    const code = toAlignment(align)\n\n    while (++columnIndex < mostCellsPerRow) {\n      alignments[columnIndex] = code\n    }\n  }\n\n  // Inject the alignment row.\n  columnIndex = -1\n  /** @type {Array<string>} */\n  const row = []\n  /** @type {Array<number>} */\n  const sizes = []\n\n  while (++columnIndex < mostCellsPerRow) {\n    const code = alignments[columnIndex]\n    let before = ''\n    let after = ''\n\n    if (code === 99 /* `c` */) {\n      before = ':'\n      after = ':'\n    } else if (code === 108 /* `l` */) {\n      before = ':'\n    } else if (code === 114 /* `r` */) {\n      after = ':'\n    }\n\n    // There *must* be at least one hyphen-minus in each alignment cell.\n    let size =\n      settings.alignDelimiters === false\n        ? 1\n        : Math.max(\n            1,\n            longestCellByColumn[columnIndex] - before.length - after.length\n          )\n\n    const cell = before + '-'.repeat(size) + after\n\n    if (settings.alignDelimiters !== false) {\n      size = before.length + size + after.length\n\n      if (size > longestCellByColumn[columnIndex]) {\n        longestCellByColumn[columnIndex] = size\n      }\n\n      sizes[columnIndex] = size\n    }\n\n    row[columnIndex] = cell\n  }\n\n  // Inject the alignment row.\n  cellMatrix.splice(1, 0, row)\n  sizeMatrix.splice(1, 0, sizes)\n\n  rowIndex = -1\n  /** @type {Array<string>} */\n  const lines = []\n\n  while (++rowIndex < cellMatrix.length) {\n    const row = cellMatrix[rowIndex]\n    const sizes = sizeMatrix[rowIndex]\n    columnIndex = -1\n    /** @type {Array<string>} */\n    const line = []\n\n    while (++columnIndex < mostCellsPerRow) {\n      const cell = row[columnIndex] || ''\n      let before = ''\n      let after = ''\n\n      if (settings.alignDelimiters !== false) {\n        const size =\n          longestCellByColumn[columnIndex] - (sizes[columnIndex] || 0)\n        const code = alignments[columnIndex]\n\n        if (code === 114 /* `r` */) {\n          before = ' '.repeat(size)\n        } else if (code === 99 /* `c` */) {\n          if (size % 2) {\n            before = ' '.repeat(size / 2 + 0.5)\n            after = ' '.repeat(size / 2 - 0.5)\n          } else {\n            before = ' '.repeat(size / 2)\n            after = before\n          }\n        } else {\n          after = ' '.repeat(size)\n        }\n      }\n\n      if (settings.delimiterStart !== false && !columnIndex) {\n        line.push('|')\n      }\n\n      if (\n        settings.padding !== false &&\n        // Donâ€™t add the opening space if weâ€™re not aligning and the cell is\n        // empty: there will be a closing space.\n        !(settings.alignDelimiters === false && cell === '') &&\n        (settings.delimiterStart !== false || columnIndex)\n      ) {\n        line.push(' ')\n      }\n\n      if (settings.alignDelimiters !== false) {\n        line.push(before)\n      }\n\n      line.push(cell)\n\n      if (settings.alignDelimiters !== false) {\n        line.push(after)\n      }\n\n      if (settings.padding !== false) {\n        line.push(' ')\n      }\n\n      if (\n        settings.delimiterEnd !== false ||\n        columnIndex !== mostCellsPerRow - 1\n      ) {\n        line.push('|')\n      }\n    }\n\n    lines.push(\n      settings.delimiterEnd === false\n        ? line.join('').replace(/ +$/, '')\n        : line.join('')\n    )\n  }\n\n  return lines.join('\\n')\n}\n\n/**\n * @param {string | null | undefined} [value]\n *   Value to serialize.\n * @returns {string}\n *   Result.\n */\nfunction serialize(value) {\n  return value === null || value === undefined ? '' : String(value)\n}\n\n/**\n * @param {string | null | undefined} value\n *   Value.\n * @returns {number}\n *   Alignment.\n */\nfunction toAlignment(value) {\n  const code = typeof value === 'string' ? value.codePointAt(0) : 0\n\n  return code === 67 /* `C` */ || code === 99 /* `c` */\n    ? 99 /* `c` */\n    : code === 76 /* `L` */ || code === 108 /* `l` */\n      ? 108 /* `l` */\n      : code === 82 /* `R` */ || code === 114 /* `r` */\n        ? 114 /* `r` */\n        : 0\n}\n","/**\n * @import {Blockquote, Parents} from 'mdast'\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {Blockquote} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function blockquote(node, _, state, info) {\n  const exit = state.enter('blockquote')\n  const tracker = state.createTracker(info)\n  tracker.move('> ')\n  tracker.shift(2)\n  const value = state.indentLines(\n    state.containerFlow(node, tracker.current()),\n    map\n  )\n  exit()\n  return value\n}\n\n/** @type {Map} */\nfunction map(line, _, blank) {\n  return '>' + (blank ? '' : ' ') + line\n}\n","/**\n * @import {ConstructName, Unsafe} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {Array<ConstructName>} stack\n * @param {Unsafe} pattern\n * @returns {boolean}\n */\nexport function patternInScope(stack, pattern) {\n  return (\n    listInScope(stack, pattern.inConstruct, true) &&\n    !listInScope(stack, pattern.notInConstruct, false)\n  )\n}\n\n/**\n * @param {Array<ConstructName>} stack\n * @param {Unsafe['inConstruct']} list\n * @param {boolean} none\n * @returns {boolean}\n */\nfunction listInScope(stack, list, none) {\n  if (typeof list === 'string') {\n    list = [list]\n  }\n\n  if (!list || list.length === 0) {\n    return none\n  }\n\n  let index = -1\n\n  while (++index < list.length) {\n    if (stack.includes(list[index])) {\n      return true\n    }\n  }\n\n  return false\n}\n","/**\n * @import {Break, Parents} from 'mdast'\n * @import {Info, State} from 'mdast-util-to-markdown'\n */\n\nimport {patternInScope} from '../util/pattern-in-scope.js'\n\n/**\n * @param {Break} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function hardBreak(_, _1, state, info) {\n  let index = -1\n\n  while (++index < state.unsafe.length) {\n    // If we canâ€™t put eols in this construct (setext headings, tables), use a\n    // space instead.\n    if (\n      state.unsafe[index].character === '\\n' &&\n      patternInScope(state.stack, state.unsafe[index])\n    ) {\n      return /[ \\t]/.test(info.before) ? '' : ' '\n    }\n  }\n\n  return '\\\\\\n'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Code} from 'mdast'\n */\n\n/**\n * @param {Code} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatCodeAsIndented(node, state) {\n  return Boolean(\n    state.options.fences === false &&\n      node.value &&\n      // If thereâ€™s no infoâ€¦\n      !node.lang &&\n      // And thereâ€™s a non-whitespace characterâ€¦\n      /[^ \\r\\n]/.test(node.value) &&\n      // And the value doesnâ€™t start or end in a blankâ€¦\n      !/^[\\t ]*(?:[\\r\\n]|$)|(?:^|[\\r\\n])[\\t ]*$/.test(node.value)\n  )\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['fence'], null | undefined>}\n */\nexport function checkFence(state) {\n  const marker = state.options.fence || '`'\n\n  if (marker !== '`' && marker !== '~') {\n    throw new Error(\n      'Cannot serialize code with `' +\n        marker +\n        '` for `options.fence`, expected `` ` `` or `~`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n * @import {Code, Parents} from 'mdast'\n */\n\nimport {longestStreak} from 'longest-streak'\nimport {formatCodeAsIndented} from '../util/format-code-as-indented.js'\nimport {checkFence} from '../util/check-fence.js'\n\n/**\n * @param {Code} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function code(node, _, state, info) {\n  const marker = checkFence(state)\n  const raw = node.value || ''\n  const suffix = marker === '`' ? 'GraveAccent' : 'Tilde'\n\n  if (formatCodeAsIndented(node, state)) {\n    const exit = state.enter('codeIndented')\n    const value = state.indentLines(raw, map)\n    exit()\n    return value\n  }\n\n  const tracker = state.createTracker(info)\n  const sequence = marker.repeat(Math.max(longestStreak(raw, marker) + 1, 3))\n  const exit = state.enter('codeFenced')\n  let value = tracker.move(sequence)\n\n  if (node.lang) {\n    const subexit = state.enter(`codeFencedLang${suffix}`)\n    value += tracker.move(\n      state.safe(node.lang, {\n        before: value,\n        after: ' ',\n        encode: ['`'],\n        ...tracker.current()\n      })\n    )\n    subexit()\n  }\n\n  if (node.lang && node.meta) {\n    const subexit = state.enter(`codeFencedMeta${suffix}`)\n    value += tracker.move(' ')\n    value += tracker.move(\n      state.safe(node.meta, {\n        before: value,\n        after: '\\n',\n        encode: ['`'],\n        ...tracker.current()\n      })\n    )\n    subexit()\n  }\n\n  value += tracker.move('\\n')\n\n  if (raw) {\n    value += tracker.move(raw + '\\n')\n  }\n\n  value += tracker.move(sequence)\n  exit()\n  return value\n}\n\n/** @type {Map} */\nfunction map(line, _, blank) {\n  return (blank ? '' : '    ') + line\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['quote'], null | undefined>}\n */\nexport function checkQuote(state) {\n  const marker = state.options.quote || '\"'\n\n  if (marker !== '\"' && marker !== \"'\") {\n    throw new Error(\n      'Cannot serialize title with `' +\n        marker +\n        '` for `options.quote`, expected `\"`, or `\\'`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Definition, Parents} from 'mdast'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\n\n/**\n * @param {Definition} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function definition(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = state.enter('definition')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  value += tracker.move(\n    state.safe(state.associationId(node), {\n      before: value,\n      after: ']',\n      ...tracker.current()\n    })\n  )\n  value += tracker.move(']: ')\n\n  subexit()\n\n  if (\n    // If thereâ€™s no url, orâ€¦\n    !node.url ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : '\\n',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  exit()\n\n  return value\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['emphasis'], null | undefined>}\n */\nexport function checkEmphasis(state) {\n  const marker = state.options.emphasis || '*'\n\n  if (marker !== '*' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize emphasis with `' +\n        marker +\n        '` for `options.emphasis`, expected `*`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * Encode a code point as a character reference.\n *\n * @param {number} code\n *   Code point to encode.\n * @returns {string}\n *   Encoded character reference.\n */\nexport function encodeCharacterReference(code) {\n  return '&#x' + code.toString(16).toUpperCase() + ';'\n}\n","/**\n * @import {EncodeSides} from '../types.js'\n */\n\nimport {classifyCharacter} from 'micromark-util-classify-character'\n\n/**\n * Check whether to encode (as a character reference) the characters\n * surrounding an attention run.\n *\n * Which characters are around an attention run influence whether it works or\n * not.\n *\n * See <https://github.com/orgs/syntax-tree/discussions/60> for more info.\n * See this markdown in a particular renderer to see what works:\n *\n * ```markdown\n * |                         | A (letter inside) | B (punctuation inside) | C (whitespace inside) | D (nothing inside) |\n * | ----------------------- | ----------------- | ---------------------- | --------------------- | ------------------ |\n * | 1 (letter outside)      | x*y*z             | x*.*z                  | x* *z                 | x**z               |\n * | 2 (punctuation outside) | .*y*.             | .*.*.                  | .* *.                 | .**.               |\n * | 3 (whitespace outside)  | x *y* z           | x *.* z                | x * * z               | x ** z             |\n * | 4 (nothing outside)     | *x*               | *.*                    | * *                   | **                 |\n * ```\n *\n * @param {number} outside\n *   Code point on the outer side of the run.\n * @param {number} inside\n *   Code point on the inner side of the run.\n * @param {'*' | '_'} marker\n *   Marker of the run.\n *   Underscores are handled more strictly (they form less often) than\n *   asterisks.\n * @returns {EncodeSides}\n *   Whether to encode characters.\n */\n// Important: punctuation must never be encoded.\n// Punctuation is solely used by markdown constructs.\n// And by encoding itself.\n// Encoding them will break constructs or double encode things.\nexport function encodeInfo(outside, inside, marker) {\n  const outsideKind = classifyCharacter(outside)\n  const insideKind = classifyCharacter(inside)\n\n  // Letter outside:\n  if (outsideKind === undefined) {\n    return insideKind === undefined\n      ? // Letter inside:\n        // we have to encode *both* letters for `_` as it is looser.\n        // it already forms for `*` (and GFMs `~`).\n        marker === '_'\n        ? {inside: true, outside: true}\n        : {inside: false, outside: false}\n      : insideKind === 1\n        ? // Whitespace inside: encode both (letter, whitespace).\n          {inside: true, outside: true}\n        : // Punctuation inside: encode outer (letter)\n          {inside: false, outside: true}\n  }\n\n  // Whitespace outside:\n  if (outsideKind === 1) {\n    return insideKind === undefined\n      ? // Letter inside: already forms.\n        {inside: false, outside: false}\n      : insideKind === 1\n        ? // Whitespace inside: encode both (whitespace).\n          {inside: true, outside: true}\n        : // Punctuation inside: already forms.\n          {inside: false, outside: false}\n  }\n\n  // Punctuation outside:\n  return insideKind === undefined\n    ? // Letter inside: already forms.\n      {inside: false, outside: false}\n    : insideKind === 1\n      ? // Whitespace inside: encode inner (whitespace).\n        {inside: true, outside: false}\n      : // Punctuation inside: already forms.\n        {inside: false, outside: false}\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Emphasis, Parents} from 'mdast'\n */\n\nimport {checkEmphasis} from '../util/check-emphasis.js'\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {encodeInfo} from '../util/encode-info.js'\n\nemphasis.peek = emphasisPeek\n\n/**\n * @param {Emphasis} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function emphasis(node, _, state, info) {\n  const marker = checkEmphasis(state)\n  const exit = state.enter('emphasis')\n  const tracker = state.createTracker(info)\n  const before = tracker.move(marker)\n\n  let between = tracker.move(\n    state.containerPhrasing(node, {\n      after: marker,\n      before,\n      ...tracker.current()\n    })\n  )\n  const betweenHead = between.charCodeAt(0)\n  const open = encodeInfo(\n    info.before.charCodeAt(info.before.length - 1),\n    betweenHead,\n    marker\n  )\n\n  if (open.inside) {\n    between = encodeCharacterReference(betweenHead) + between.slice(1)\n  }\n\n  const betweenTail = between.charCodeAt(between.length - 1)\n  const close = encodeInfo(info.after.charCodeAt(0), betweenTail, marker)\n\n  if (close.inside) {\n    between = between.slice(0, -1) + encodeCharacterReference(betweenTail)\n  }\n\n  const after = tracker.move(marker)\n\n  exit()\n\n  state.attentionEncodeSurroundingInfo = {\n    after: close.outside,\n    before: open.outside\n  }\n  return before + between + after\n}\n\n/**\n * @param {Emphasis} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nfunction emphasisPeek(_, _1, state) {\n  return state.options.emphasis || '*'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Heading} from 'mdast'\n */\n\nimport {EXIT, visit} from 'unist-util-visit'\nimport {toString} from 'mdast-util-to-string'\n\n/**\n * @param {Heading} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatHeadingAsSetext(node, state) {\n  let literalWithBreak = false\n\n  // Look for literals with a line break.\n  // Note that this also\n  visit(node, function (node) {\n    if (\n      ('value' in node && /\\r?\\n|\\r/.test(node.value)) ||\n      node.type === 'break'\n    ) {\n      literalWithBreak = true\n      return EXIT\n    }\n  })\n\n  return Boolean(\n    (!node.depth || node.depth < 3) &&\n      toString(node) &&\n      (state.options.setext || literalWithBreak)\n  )\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Heading, Parents} from 'mdast'\n */\n\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {formatHeadingAsSetext} from '../util/format-heading-as-setext.js'\n\n/**\n * @param {Heading} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function heading(node, _, state, info) {\n  const rank = Math.max(Math.min(6, node.depth || 1), 1)\n  const tracker = state.createTracker(info)\n\n  if (formatHeadingAsSetext(node, state)) {\n    const exit = state.enter('headingSetext')\n    const subexit = state.enter('phrasing')\n    const value = state.containerPhrasing(node, {\n      ...tracker.current(),\n      before: '\\n',\n      after: '\\n'\n    })\n    subexit()\n    exit()\n\n    return (\n      value +\n      '\\n' +\n      (rank === 1 ? '=' : '-').repeat(\n        // The whole sizeâ€¦\n        value.length -\n          // Minus the position of the character after the last EOL (or\n          // 0 if there is none)â€¦\n          (Math.max(value.lastIndexOf('\\r'), value.lastIndexOf('\\n')) + 1)\n      )\n    )\n  }\n\n  const sequence = '#'.repeat(rank)\n  const exit = state.enter('headingAtx')\n  const subexit = state.enter('phrasing')\n\n  // Note: for proper tracking, we should reset the output positions when there\n  // is no content returned, because then the space is not output.\n  // Practically, in that case, there is no content, so it doesnâ€™t matter that\n  // weâ€™ve tracked one too many characters.\n  tracker.move(sequence + ' ')\n\n  let value = state.containerPhrasing(node, {\n    before: '# ',\n    after: '\\n',\n    ...tracker.current()\n  })\n\n  if (/^[\\t ]/.test(value)) {\n    // To do: what effect has the character reference on tracking?\n    value = encodeCharacterReference(value.charCodeAt(0)) + value.slice(1)\n  }\n\n  value = value ? sequence + ' ' + value : sequence\n\n  if (state.options.closeAtx) {\n    value += ' ' + sequence\n  }\n\n  subexit()\n  exit()\n\n  return value\n}\n","/**\n * @import {Html} from 'mdast'\n */\n\nhtml.peek = htmlPeek\n\n/**\n * @param {Html} node\n * @returns {string}\n */\nexport function html(node) {\n  return node.value || ''\n}\n\n/**\n * @returns {string}\n */\nfunction htmlPeek() {\n  return '<'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Image, Parents} from 'mdast'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\n\nimage.peek = imagePeek\n\n/**\n * @param {Image} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function image(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const exit = state.enter('image')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('![')\n  value += tracker.move(\n    state.safe(node.alt, {before: value, after: ']', ...tracker.current()})\n  )\n  value += tracker.move('](')\n\n  subexit()\n\n  if (\n    // If thereâ€™s no url but there is a titleâ€¦\n    (!node.url && node.title) ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : ')',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  value += tracker.move(')')\n  exit()\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction imagePeek() {\n  return '!'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {ImageReference, Parents} from 'mdast'\n */\n\nimageReference.peek = imageReferencePeek\n\n/**\n * @param {ImageReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function imageReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('imageReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('![')\n  const alt = state.safe(node.alt, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(alt + '][')\n\n  subexit()\n  // Hide the fact that weâ€™re in phrasing, because escapes donâ€™t work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesnâ€™t matter that\n  // weâ€™ve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !alt || alt !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction imageReferencePeek() {\n  return '!'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {InlineCode, Parents} from 'mdast'\n */\n\ninlineCode.peek = inlineCodePeek\n\n/**\n * @param {InlineCode} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @returns {string}\n */\nexport function inlineCode(node, _, state) {\n  let value = node.value || ''\n  let sequence = '`'\n  let index = -1\n\n  // If there is a single grave accent on its own in the code, use a fence of\n  // two.\n  // If there are two in a row, use one.\n  while (new RegExp('(^|[^`])' + sequence + '([^`]|$)').test(value)) {\n    sequence += '`'\n  }\n\n  // If this is not just spaces or eols (tabs donâ€™t count), and either the\n  // first or last character are a space, eol, or tick, then pad with spaces.\n  if (\n    /[^ \\r\\n]/.test(value) &&\n    ((/^[ \\r\\n]/.test(value) && /[ \\r\\n]$/.test(value)) || /^`|`$/.test(value))\n  ) {\n    value = ' ' + value + ' '\n  }\n\n  // We have a potential problem: certain characters after eols could result in\n  // blocks being seen.\n  // For example, if someone injected the string `'\\n# b'`, then that would\n  // result in an ATX heading.\n  // We canâ€™t escape characters in `inlineCode`, but because eols are\n  // transformed to spaces when going from markdown to HTML anyway, we can swap\n  // them out.\n  while (++index < state.unsafe.length) {\n    const pattern = state.unsafe[index]\n    const expression = state.compilePattern(pattern)\n    /** @type {RegExpExecArray | null} */\n    let match\n\n    // Only look for `atBreak`s.\n    // Btw: note that `atBreak` patterns will always start the regex at LF or\n    // CR.\n    if (!pattern.atBreak) continue\n\n    while ((match = expression.exec(value))) {\n      let position = match.index\n\n      // Support CRLF (patterns only look for one of the characters).\n      if (\n        value.charCodeAt(position) === 10 /* `\\n` */ &&\n        value.charCodeAt(position - 1) === 13 /* `\\r` */\n      ) {\n        position--\n      }\n\n      value = value.slice(0, position) + ' ' + value.slice(match.index + 1)\n    }\n  }\n\n  return sequence + value + sequence\n}\n\n/**\n * @returns {string}\n */\nfunction inlineCodePeek() {\n  return '`'\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Link} from 'mdast'\n */\n\nimport {toString} from 'mdast-util-to-string'\n\n/**\n * @param {Link} node\n * @param {State} state\n * @returns {boolean}\n */\nexport function formatLinkAsAutolink(node, state) {\n  const raw = toString(node)\n\n  return Boolean(\n    !state.options.resourceLink &&\n      // If thereâ€™s a urlâ€¦\n      node.url &&\n      // And thereâ€™s a no titleâ€¦\n      !node.title &&\n      // And the content of `node` is a single text nodeâ€¦\n      node.children &&\n      node.children.length === 1 &&\n      node.children[0].type === 'text' &&\n      // And if the url is the same as the contentâ€¦\n      (raw === node.url || 'mailto:' + raw === node.url) &&\n      // And that starts w/ a protocolâ€¦\n      /^[a-z][a-z+.-]+:/i.test(node.url) &&\n      // And that doesnâ€™t contain ASCII control codes (character escapes and\n      // references donâ€™t work), space, or angle bracketsâ€¦\n      !/[\\0- <>\\u007F]/.test(node.url)\n  )\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Link, Parents} from 'mdast'\n * @import {Exit} from '../types.js'\n */\n\nimport {checkQuote} from '../util/check-quote.js'\nimport {formatLinkAsAutolink} from '../util/format-link-as-autolink.js'\n\nlink.peek = linkPeek\n\n/**\n * @param {Link} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function link(node, _, state, info) {\n  const quote = checkQuote(state)\n  const suffix = quote === '\"' ? 'Quote' : 'Apostrophe'\n  const tracker = state.createTracker(info)\n  /** @type {Exit} */\n  let exit\n  /** @type {Exit} */\n  let subexit\n\n  if (formatLinkAsAutolink(node, state)) {\n    // Hide the fact that weâ€™re in phrasing, because escapes donâ€™t work.\n    const stack = state.stack\n    state.stack = []\n    exit = state.enter('autolink')\n    let value = tracker.move('<')\n    value += tracker.move(\n      state.containerPhrasing(node, {\n        before: value,\n        after: '>',\n        ...tracker.current()\n      })\n    )\n    value += tracker.move('>')\n    exit()\n    state.stack = stack\n    return value\n  }\n\n  exit = state.enter('link')\n  subexit = state.enter('label')\n  let value = tracker.move('[')\n  value += tracker.move(\n    state.containerPhrasing(node, {\n      before: value,\n      after: '](',\n      ...tracker.current()\n    })\n  )\n  value += tracker.move('](')\n  subexit()\n\n  if (\n    // If thereâ€™s no url but there is a titleâ€¦\n    (!node.url && node.title) ||\n    // If there are control characters or whitespace.\n    /[\\0- \\u007F]/.test(node.url)\n  ) {\n    subexit = state.enter('destinationLiteral')\n    value += tracker.move('<')\n    value += tracker.move(\n      state.safe(node.url, {before: value, after: '>', ...tracker.current()})\n    )\n    value += tracker.move('>')\n  } else {\n    // No whitespace, raw is prettier.\n    subexit = state.enter('destinationRaw')\n    value += tracker.move(\n      state.safe(node.url, {\n        before: value,\n        after: node.title ? ' ' : ')',\n        ...tracker.current()\n      })\n    )\n  }\n\n  subexit()\n\n  if (node.title) {\n    subexit = state.enter(`title${suffix}`)\n    value += tracker.move(' ' + quote)\n    value += tracker.move(\n      state.safe(node.title, {\n        before: value,\n        after: quote,\n        ...tracker.current()\n      })\n    )\n    value += tracker.move(quote)\n    subexit()\n  }\n\n  value += tracker.move(')')\n\n  exit()\n  return value\n}\n\n/**\n * @param {Link} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @returns {string}\n */\nfunction linkPeek(node, _, state) {\n  return formatLinkAsAutolink(node, state) ? '<' : '['\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {LinkReference, Parents} from 'mdast'\n */\n\nlinkReference.peek = linkReferencePeek\n\n/**\n * @param {LinkReference} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function linkReference(node, _, state, info) {\n  const type = node.referenceType\n  const exit = state.enter('linkReference')\n  let subexit = state.enter('label')\n  const tracker = state.createTracker(info)\n  let value = tracker.move('[')\n  const text = state.containerPhrasing(node, {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  value += tracker.move(text + '][')\n\n  subexit()\n  // Hide the fact that weâ€™re in phrasing, because escapes donâ€™t work.\n  const stack = state.stack\n  state.stack = []\n  subexit = state.enter('reference')\n  // Note: for proper tracking, we should reset the output positions when we end\n  // up making a `shortcut` reference, because then there is no brace output.\n  // Practically, in that case, there is no content, so it doesnâ€™t matter that\n  // weâ€™ve tracked one too many characters.\n  const reference = state.safe(state.associationId(node), {\n    before: value,\n    after: ']',\n    ...tracker.current()\n  })\n  subexit()\n  state.stack = stack\n  exit()\n\n  if (type === 'full' || !text || text !== reference) {\n    value += tracker.move(reference + ']')\n  } else if (type === 'shortcut') {\n    // Remove the unwanted `[`.\n    value = value.slice(0, -1)\n  } else {\n    value += tracker.move(']')\n  }\n\n  return value\n}\n\n/**\n * @returns {string}\n */\nfunction linkReferencePeek() {\n  return '['\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bullet'], null | undefined>}\n */\nexport function checkBullet(state) {\n  const marker = state.options.bullet || '*'\n\n  if (marker !== '*' && marker !== '+' && marker !== '-') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        marker +\n        '` for `options.bullet`, expected `*`, `+`, or `-`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\nimport {checkBullet} from './check-bullet.js'\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bullet'], null | undefined>}\n */\nexport function checkBulletOther(state) {\n  const bullet = checkBullet(state)\n  const bulletOther = state.options.bulletOther\n\n  if (!bulletOther) {\n    return bullet === '*' ? '-' : '*'\n  }\n\n  if (bulletOther !== '*' && bulletOther !== '+' && bulletOther !== '-') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        bulletOther +\n        '` for `options.bulletOther`, expected `*`, `+`, or `-`'\n    )\n  }\n\n  if (bulletOther === bullet) {\n    throw new Error(\n      'Expected `bullet` (`' +\n        bullet +\n        '`) and `bulletOther` (`' +\n        bulletOther +\n        '`) to be different'\n    )\n  }\n\n  return bulletOther\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['bulletOrdered'], null | undefined>}\n */\nexport function checkBulletOrdered(state) {\n  const marker = state.options.bulletOrdered || '.'\n\n  if (marker !== '.' && marker !== ')') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        marker +\n        '` for `options.bulletOrdered`, expected `.` or `)`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['rule'], null | undefined>}\n */\nexport function checkRule(state) {\n  const marker = state.options.rule || '*'\n\n  if (marker !== '*' && marker !== '-' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize rules with `' +\n        marker +\n        '` for `options.rule`, expected `*`, `-`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {List, Parents} from 'mdast'\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkBulletOther} from '../util/check-bullet-other.js'\nimport {checkBulletOrdered} from '../util/check-bullet-ordered.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @param {List} node\n * @param {Parents | undefined} parent\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function list(node, parent, state, info) {\n  const exit = state.enter('list')\n  const bulletCurrent = state.bulletCurrent\n  /** @type {string} */\n  let bullet = node.ordered ? checkBulletOrdered(state) : checkBullet(state)\n  /** @type {string} */\n  const bulletOther = node.ordered\n    ? bullet === '.'\n      ? ')'\n      : '.'\n    : checkBulletOther(state)\n  let useDifferentMarker =\n    parent && state.bulletLastUsed ? bullet === state.bulletLastUsed : false\n\n  if (!node.ordered) {\n    const firstListItem = node.children ? node.children[0] : undefined\n\n    // If thereâ€™s an empty first list item directly in two list items,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * - *\n    // ```\n    //\n    // â€¦because otherwise it would become one big thematic break.\n    if (\n      // Bullet could be used as a thematic break marker:\n      (bullet === '*' || bullet === '-') &&\n      // Empty first list item:\n      firstListItem &&\n      (!firstListItem.children || !firstListItem.children[0]) &&\n      // Directly in two other list items:\n      state.stack[state.stack.length - 1] === 'list' &&\n      state.stack[state.stack.length - 2] === 'listItem' &&\n      state.stack[state.stack.length - 3] === 'list' &&\n      state.stack[state.stack.length - 4] === 'listItem' &&\n      // That are each the first child.\n      state.indexStack[state.indexStack.length - 1] === 0 &&\n      state.indexStack[state.indexStack.length - 2] === 0 &&\n      state.indexStack[state.indexStack.length - 3] === 0\n    ) {\n      useDifferentMarker = true\n    }\n\n    // If thereâ€™s a thematic break at the start of the first list item,\n    // we have to use a different bullet:\n    //\n    // ```markdown\n    // * ---\n    // ```\n    //\n    // â€¦because otherwise it would become one big thematic break.\n    if (checkRule(state) === bullet && firstListItem) {\n      let index = -1\n\n      while (++index < node.children.length) {\n        const item = node.children[index]\n\n        if (\n          item &&\n          item.type === 'listItem' &&\n          item.children &&\n          item.children[0] &&\n          item.children[0].type === 'thematicBreak'\n        ) {\n          useDifferentMarker = true\n          break\n        }\n      }\n    }\n  }\n\n  if (useDifferentMarker) {\n    bullet = bulletOther\n  }\n\n  state.bulletCurrent = bullet\n  const value = state.containerFlow(node, info)\n  state.bulletLastUsed = bullet\n  state.bulletCurrent = bulletCurrent\n  exit()\n  return value\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['listItemIndent'], null | undefined>}\n */\nexport function checkListItemIndent(state) {\n  const style = state.options.listItemIndent || 'one'\n\n  if (style !== 'tab' && style !== 'one' && style !== 'mixed') {\n    throw new Error(\n      'Cannot serialize items with `' +\n        style +\n        '` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`'\n    )\n  }\n\n  return style\n}\n","/**\n * @import {Info, Map, State} from 'mdast-util-to-markdown'\n * @import {ListItem, Parents} from 'mdast'\n */\n\nimport {checkBullet} from '../util/check-bullet.js'\nimport {checkListItemIndent} from '../util/check-list-item-indent.js'\n\n/**\n * @param {ListItem} node\n * @param {Parents | undefined} parent\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function listItem(node, parent, state, info) {\n  const listItemIndent = checkListItemIndent(state)\n  let bullet = state.bulletCurrent || checkBullet(state)\n\n  // Add the marker value for ordered lists.\n  if (parent && parent.type === 'list' && parent.ordered) {\n    bullet =\n      (typeof parent.start === 'number' && parent.start > -1\n        ? parent.start\n        : 1) +\n      (state.options.incrementListMarker === false\n        ? 0\n        : parent.children.indexOf(node)) +\n      bullet\n  }\n\n  let size = bullet.length + 1\n\n  if (\n    listItemIndent === 'tab' ||\n    (listItemIndent === 'mixed' &&\n      ((parent && parent.type === 'list' && parent.spread) || node.spread))\n  ) {\n    size = Math.ceil(size / 4) * 4\n  }\n\n  const tracker = state.createTracker(info)\n  tracker.move(bullet + ' '.repeat(size - bullet.length))\n  tracker.shift(size)\n  const exit = state.enter('listItem')\n  const value = state.indentLines(\n    state.containerFlow(node, tracker.current()),\n    map\n  )\n  exit()\n\n  return value\n\n  /** @type {Map} */\n  function map(line, index, blank) {\n    if (index) {\n      return (blank ? '' : ' '.repeat(size)) + line\n    }\n\n    return (blank ? bullet : bullet + ' '.repeat(size - bullet.length)) + line\n  }\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Paragraph, Parents} from 'mdast'\n */\n\n/**\n * @param {Paragraph} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function paragraph(node, _, state, info) {\n  const exit = state.enter('paragraph')\n  const subexit = state.enter('phrasing')\n  const value = state.containerPhrasing(node, info)\n  subexit()\n  exit()\n  return value\n}\n","/**\n * @typedef {import('mdast').Html} Html\n * @typedef {import('mdast').PhrasingContent} PhrasingContent\n */\n\nimport {convert} from 'unist-util-is'\n\n/**\n * Check if the given value is *phrasing content*.\n *\n * > ðŸ‘‰ **Note**: Excludes `html`, which can be both phrasing or flow.\n *\n * @param node\n *   Thing to check, typically `Node`.\n * @returns\n *   Whether `value` is phrasing content.\n */\n\nexport const phrasing =\n  /** @type {(node?: unknown) => node is Exclude<PhrasingContent, Html>} */\n  (\n    convert([\n      'break',\n      'delete',\n      'emphasis',\n      // To do: next major: removed since footnotes were added to GFM.\n      'footnote',\n      'footnoteReference',\n      'image',\n      'imageReference',\n      'inlineCode',\n      // Enabled by `mdast-util-math`:\n      'inlineMath',\n      'link',\n      'linkReference',\n      // Enabled by `mdast-util-mdx`:\n      'mdxJsxTextElement',\n      // Enabled by `mdast-util-mdx`:\n      'mdxTextExpression',\n      'strong',\n      'text',\n      // Enabled by `mdast-util-directive`:\n      'textDirective'\n    ])\n  )\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Root} from 'mdast'\n */\n\nimport {phrasing} from 'mdast-util-phrasing'\n\n/**\n * @param {Root} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function root(node, _, state, info) {\n  // Note: `html` nodes are ambiguous.\n  const hasPhrasing = node.children.some(function (d) {\n    return phrasing(d)\n  })\n\n  const container = hasPhrasing ? state.containerPhrasing : state.containerFlow\n  return container.call(state, node, info)\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['strong'], null | undefined>}\n */\nexport function checkStrong(state) {\n  const marker = state.options.strong || '*'\n\n  if (marker !== '*' && marker !== '_') {\n    throw new Error(\n      'Cannot serialize strong with `' +\n        marker +\n        '` for `options.strong`, expected `*`, or `_`'\n    )\n  }\n\n  return marker\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Strong} from 'mdast'\n */\n\nimport {checkStrong} from '../util/check-strong.js'\nimport {encodeCharacterReference} from '../util/encode-character-reference.js'\nimport {encodeInfo} from '../util/encode-info.js'\n\nstrong.peek = strongPeek\n\n/**\n * @param {Strong} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function strong(node, _, state, info) {\n  const marker = checkStrong(state)\n  const exit = state.enter('strong')\n  const tracker = state.createTracker(info)\n  const before = tracker.move(marker + marker)\n\n  let between = tracker.move(\n    state.containerPhrasing(node, {\n      after: marker,\n      before,\n      ...tracker.current()\n    })\n  )\n  const betweenHead = between.charCodeAt(0)\n  const open = encodeInfo(\n    info.before.charCodeAt(info.before.length - 1),\n    betweenHead,\n    marker\n  )\n\n  if (open.inside) {\n    between = encodeCharacterReference(betweenHead) + between.slice(1)\n  }\n\n  const betweenTail = between.charCodeAt(between.length - 1)\n  const close = encodeInfo(info.after.charCodeAt(0), betweenTail, marker)\n\n  if (close.inside) {\n    between = between.slice(0, -1) + encodeCharacterReference(betweenTail)\n  }\n\n  const after = tracker.move(marker + marker)\n\n  exit()\n\n  state.attentionEncodeSurroundingInfo = {\n    after: close.outside,\n    before: open.outside\n  }\n  return before + between + after\n}\n\n/**\n * @param {Strong} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nfunction strongPeek(_, _1, state) {\n  return state.options.strong || '*'\n}\n","/**\n * @import {Info, State} from 'mdast-util-to-markdown'\n * @import {Parents, Text} from 'mdast'\n */\n\n/**\n * @param {Text} node\n * @param {Parents | undefined} _\n * @param {State} state\n * @param {Info} info\n * @returns {string}\n */\nexport function text(node, _, state, info) {\n  return state.safe(node.value, info)\n}\n","/**\n * @import {Options, State} from 'mdast-util-to-markdown'\n */\n\n/**\n * @param {State} state\n * @returns {Exclude<Options['ruleRepetition'], null | undefined>}\n */\nexport function checkRuleRepetition(state) {\n  const repetition = state.options.ruleRepetition || 3\n\n  if (repetition < 3) {\n    throw new Error(\n      'Cannot serialize rules with repetition `' +\n        repetition +\n        '` for `options.ruleRepetition`, expected `3` or more'\n    )\n  }\n\n  return repetition\n}\n","/**\n * @import {State} from 'mdast-util-to-markdown'\n * @import {Parents, ThematicBreak} from 'mdast'\n */\n\nimport {checkRuleRepetition} from '../util/check-rule-repetition.js'\nimport {checkRule} from '../util/check-rule.js'\n\n/**\n * @param {ThematicBreak} _\n * @param {Parents | undefined} _1\n * @param {State} state\n * @returns {string}\n */\nexport function thematicBreak(_, _1, state) {\n  const value = (\n    checkRule(state) + (state.options.ruleSpaces ? ' ' : '')\n  ).repeat(checkRuleRepetition(state))\n\n  return state.options.ruleSpaces ? value.slice(0, -1) : value\n}\n","import {blockquote} from './blockquote.js'\nimport {hardBreak} from './break.js'\nimport {code} from './code.js'\nimport {definition} from './definition.js'\nimport {emphasis} from './emphasis.js'\nimport {heading} from './heading.js'\nimport {html} from './html.js'\nimport {image} from './image.js'\nimport {imageReference} from './image-reference.js'\nimport {inlineCode} from './inline-code.js'\nimport {link} from './link.js'\nimport {linkReference} from './link-reference.js'\nimport {list} from './list.js'\nimport {listItem} from './list-item.js'\nimport {paragraph} from './paragraph.js'\nimport {root} from './root.js'\nimport {strong} from './strong.js'\nimport {text} from './text.js'\nimport {thematicBreak} from './thematic-break.js'\n\n/**\n * Default (CommonMark) handlers.\n */\nexport const handle = {\n  blockquote,\n  break: hardBreak,\n  code,\n  definition,\n  emphasis,\n  hardBreak,\n  heading,\n  html,\n  image,\n  imageReference,\n  inlineCode,\n  link,\n  linkReference,\n  list,\n  listItem,\n  paragraph,\n  root,\n  strong,\n  text,\n  thematicBreak\n}\n","/**\n * @typedef {import('mdast').InlineCode} InlineCode\n * @typedef {import('mdast').Table} Table\n * @typedef {import('mdast').TableCell} TableCell\n * @typedef {import('mdast').TableRow} TableRow\n *\n * @typedef {import('markdown-table').Options} MarkdownTableOptions\n *\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n *\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').State} State\n * @typedef {import('mdast-util-to-markdown').Info} Info\n */\n\n/**\n * @typedef Options\n *   Configuration.\n * @property {boolean | null | undefined} [tableCellPadding=true]\n *   Whether to add a space of padding between delimiters and cells (default:\n *   `true`).\n * @property {boolean | null | undefined} [tablePipeAlign=true]\n *   Whether to align the delimiters (default: `true`).\n * @property {MarkdownTableOptions['stringLength'] | null | undefined} [stringLength]\n *   Function to detect the length of table cell content, used when aligning\n *   the delimiters between cells (optional).\n */\n\nimport {ok as assert} from 'devlop'\nimport {markdownTable} from 'markdown-table'\nimport {defaultHandlers} from 'mdast-util-to-markdown'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM tables in\n * markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM tables.\n */\nexport function gfmTableFromMarkdown() {\n  return {\n    enter: {\n      table: enterTable,\n      tableData: enterCell,\n      tableHeader: enterCell,\n      tableRow: enterRow\n    },\n    exit: {\n      codeText: exitCodeText,\n      table: exitTable,\n      tableData: exit,\n      tableHeader: exit,\n      tableRow: exit\n    }\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterTable(token) {\n  const align = token._align\n  assert(align, 'expected `_align` on table')\n  this.enter(\n    {\n      type: 'table',\n      align: align.map(function (d) {\n        return d === 'none' ? null : d\n      }),\n      children: []\n    },\n    token\n  )\n  this.data.inTable = true\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitTable(token) {\n  this.exit(token)\n  this.data.inTable = undefined\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterRow(token) {\n  this.enter({type: 'tableRow', children: []}, token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exit(token) {\n  this.exit(token)\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction enterCell(token) {\n  this.enter({type: 'tableCell', children: []}, token)\n}\n\n// Overwrite the default code text data handler to unescape escaped pipes when\n// they are in tables.\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitCodeText(token) {\n  let value = this.resume()\n\n  if (this.data.inTable) {\n    value = value.replace(/\\\\([\\\\|])/g, replace)\n  }\n\n  const node = this.stack[this.stack.length - 1]\n  assert(node.type === 'inlineCode')\n  node.value = value\n  this.exit(token)\n}\n\n/**\n * @param {string} $0\n * @param {string} $1\n * @returns {string}\n */\nfunction replace($0, $1) {\n  // Pipes work, backslashes donâ€™t (but canâ€™t escape pipes).\n  return $1 === '|' ? $1 : $0\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM tables in\n * markdown.\n *\n * @param {Options | null | undefined} [options]\n *   Configuration.\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM tables.\n */\nexport function gfmTableToMarkdown(options) {\n  const settings = options || {}\n  const padding = settings.tableCellPadding\n  const alignDelimiters = settings.tablePipeAlign\n  const stringLength = settings.stringLength\n  const around = padding ? ' ' : '|'\n\n  return {\n    unsafe: [\n      {character: '\\r', inConstruct: 'tableCell'},\n      {character: '\\n', inConstruct: 'tableCell'},\n      // A pipe, when followed by a tab or space (padding), or a dash or colon\n      // (unpadded delimiter row), could result in a table.\n      {atBreak: true, character: '|', after: '[\\t :-]'},\n      // A pipe in a cell must be encoded.\n      {character: '|', inConstruct: 'tableCell'},\n      // A colon must be followed by a dash, in which case it could start a\n      // delimiter row.\n      {atBreak: true, character: ':', after: '-'},\n      // A delimiter row can also start with a dash, when followed by more\n      // dashes, a colon, or a pipe.\n      // This is a stricter version than the built in check for lists, thematic\n      // breaks, and setex heading underlines though:\n      // <https://github.com/syntax-tree/mdast-util-to-markdown/blob/51a2038/lib/unsafe.js#L57>\n      {atBreak: true, character: '-', after: '[:|-]'}\n    ],\n    handlers: {\n      inlineCode: inlineCodeWithTable,\n      table: handleTable,\n      tableCell: handleTableCell,\n      tableRow: handleTableRow\n    }\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {Table} node\n   */\n  function handleTable(node, _, state, info) {\n    return serializeData(handleTableAsData(node, state, info), node.align)\n  }\n\n  /**\n   * This function isnâ€™t really used normally, because we handle rows at the\n   * table level.\n   * But, if someone passes in a table row, this ensures we make somewhat sense.\n   *\n   * @type {ToMarkdownHandle}\n   * @param {TableRow} node\n   */\n  function handleTableRow(node, _, state, info) {\n    const row = handleTableRowAsData(node, state, info)\n    const value = serializeData([row])\n    // `markdown-table` will always add an align row\n    return value.slice(0, value.indexOf('\\n'))\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {TableCell} node\n   */\n  function handleTableCell(node, _, state, info) {\n    const exit = state.enter('tableCell')\n    const subexit = state.enter('phrasing')\n    const value = state.containerPhrasing(node, {\n      ...info,\n      before: around,\n      after: around\n    })\n    subexit()\n    exit()\n    return value\n  }\n\n  /**\n   * @param {Array<Array<string>>} matrix\n   * @param {Array<string | null | undefined> | null | undefined} [align]\n   */\n  function serializeData(matrix, align) {\n    return markdownTable(matrix, {\n      align,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      alignDelimiters,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      padding,\n      // @ts-expect-error: `markdown-table` types should support `null`.\n      stringLength\n    })\n  }\n\n  /**\n   * @param {Table} node\n   * @param {State} state\n   * @param {Info} info\n   */\n  function handleTableAsData(node, state, info) {\n    const children = node.children\n    let index = -1\n    /** @type {Array<Array<string>>} */\n    const result = []\n    const subexit = state.enter('table')\n\n    while (++index < children.length) {\n      result[index] = handleTableRowAsData(children[index], state, info)\n    }\n\n    subexit()\n\n    return result\n  }\n\n  /**\n   * @param {TableRow} node\n   * @param {State} state\n   * @param {Info} info\n   */\n  function handleTableRowAsData(node, state, info) {\n    const children = node.children\n    let index = -1\n    /** @type {Array<string>} */\n    const result = []\n    const subexit = state.enter('tableRow')\n\n    while (++index < children.length) {\n      // Note: the positional info as used here is incorrect.\n      // Making it correct would be impossible due to aligning cells?\n      // And it would need copy/pasting `markdown-table` into this project.\n      result[index] = handleTableCell(children[index], node, state, info)\n    }\n\n    subexit()\n\n    return result\n  }\n\n  /**\n   * @type {ToMarkdownHandle}\n   * @param {InlineCode} node\n   */\n  function inlineCodeWithTable(node, parent, state) {\n    let value = defaultHandlers.inlineCode(node, parent, state)\n\n    if (state.stack.includes('tableCell')) {\n      value = value.replace(/\\|/g, '\\\\$&')\n    }\n\n    return value\n  }\n}\n","/**\n * @typedef {import('mdast').ListItem} ListItem\n * @typedef {import('mdast').Paragraph} Paragraph\n * @typedef {import('mdast-util-from-markdown').CompileContext} CompileContext\n * @typedef {import('mdast-util-from-markdown').Extension} FromMarkdownExtension\n * @typedef {import('mdast-util-from-markdown').Handle} FromMarkdownHandle\n * @typedef {import('mdast-util-to-markdown').Options} ToMarkdownExtension\n * @typedef {import('mdast-util-to-markdown').Handle} ToMarkdownHandle\n */\n\nimport {ok as assert} from 'devlop'\nimport {defaultHandlers} from 'mdast-util-to-markdown'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM task\n * list items in markdown.\n *\n * @returns {FromMarkdownExtension}\n *   Extension for `mdast-util-from-markdown` to enable GFM task list items.\n */\nexport function gfmTaskListItemFromMarkdown() {\n  return {\n    exit: {\n      taskListCheckValueChecked: exitCheck,\n      taskListCheckValueUnchecked: exitCheck,\n      paragraph: exitParagraphWithTaskListItem\n    }\n  }\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM task list\n * items in markdown.\n *\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM task list items.\n */\nexport function gfmTaskListItemToMarkdown() {\n  return {\n    unsafe: [{atBreak: true, character: '-', after: '[:|-]'}],\n    handlers: {listItem: listItemWithTaskListItem}\n  }\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitCheck(token) {\n  // Weâ€™re always in a paragraph, in a list item.\n  const node = this.stack[this.stack.length - 2]\n  assert(node.type === 'listItem')\n  node.checked = token.type === 'taskListCheckValueChecked'\n}\n\n/**\n * @this {CompileContext}\n * @type {FromMarkdownHandle}\n */\nfunction exitParagraphWithTaskListItem(token) {\n  const parent = this.stack[this.stack.length - 2]\n\n  if (\n    parent &&\n    parent.type === 'listItem' &&\n    typeof parent.checked === 'boolean'\n  ) {\n    const node = this.stack[this.stack.length - 1]\n    assert(node.type === 'paragraph')\n    const head = node.children[0]\n\n    if (head && head.type === 'text') {\n      const siblings = parent.children\n      let index = -1\n      /** @type {Paragraph | undefined} */\n      let firstParaghraph\n\n      while (++index < siblings.length) {\n        const sibling = siblings[index]\n        if (sibling.type === 'paragraph') {\n          firstParaghraph = sibling\n          break\n        }\n      }\n\n      if (firstParaghraph === node) {\n        // Must start with a space or a tab.\n        head.value = head.value.slice(1)\n\n        if (head.value.length === 0) {\n          node.children.shift()\n        } else if (\n          node.position &&\n          head.position &&\n          typeof head.position.start.offset === 'number'\n        ) {\n          head.position.start.column++\n          head.position.start.offset++\n          node.position.start = Object.assign({}, head.position.start)\n        }\n      }\n    }\n  }\n\n  this.exit(token)\n}\n\n/**\n * @type {ToMarkdownHandle}\n * @param {ListItem} node\n */\nfunction listItemWithTaskListItem(node, parent, state, info) {\n  const head = node.children[0]\n  const checkable =\n    typeof node.checked === 'boolean' && head && head.type === 'paragraph'\n  const checkbox = '[' + (node.checked ? 'x' : ' ') + '] '\n  const tracker = state.createTracker(info)\n\n  if (checkable) {\n    tracker.move(checkbox)\n  }\n\n  let value = defaultHandlers.listItem(node, parent, state, {\n    ...info,\n    ...tracker.current()\n  })\n\n  if (checkable) {\n    value = value.replace(/^(?:[*+-]|\\d+\\.)([\\r\\n]| {1,3})/, check)\n  }\n\n  return value\n\n  /**\n   * @param {string} $0\n   * @returns {string}\n   */\n  function check($0) {\n    return $0 + checkbox\n  }\n}\n","/**\n * @import {Extension as FromMarkdownExtension} from 'mdast-util-from-markdown'\n * @import {Options} from 'mdast-util-gfm'\n * @import {Options as ToMarkdownExtension} from 'mdast-util-to-markdown'\n */\n\nimport {\n  gfmAutolinkLiteralFromMarkdown,\n  gfmAutolinkLiteralToMarkdown\n} from 'mdast-util-gfm-autolink-literal'\nimport {\n  gfmFootnoteFromMarkdown,\n  gfmFootnoteToMarkdown\n} from 'mdast-util-gfm-footnote'\nimport {\n  gfmStrikethroughFromMarkdown,\n  gfmStrikethroughToMarkdown\n} from 'mdast-util-gfm-strikethrough'\nimport {gfmTableFromMarkdown, gfmTableToMarkdown} from 'mdast-util-gfm-table'\nimport {\n  gfmTaskListItemFromMarkdown,\n  gfmTaskListItemToMarkdown\n} from 'mdast-util-gfm-task-list-item'\n\n/**\n * Create an extension for `mdast-util-from-markdown` to enable GFM (autolink\n * literals, footnotes, strikethrough, tables, tasklists).\n *\n * @returns {Array<FromMarkdownExtension>}\n *   Extension for `mdast-util-from-markdown` to enable GFM (autolink literals,\n *   footnotes, strikethrough, tables, tasklists).\n */\nexport function gfmFromMarkdown() {\n  return [\n    gfmAutolinkLiteralFromMarkdown(),\n    gfmFootnoteFromMarkdown(),\n    gfmStrikethroughFromMarkdown(),\n    gfmTableFromMarkdown(),\n    gfmTaskListItemFromMarkdown()\n  ]\n}\n\n/**\n * Create an extension for `mdast-util-to-markdown` to enable GFM (autolink\n * literals, footnotes, strikethrough, tables, tasklists).\n *\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {ToMarkdownExtension}\n *   Extension for `mdast-util-to-markdown` to enable GFM (autolink literals,\n *   footnotes, strikethrough, tables, tasklists).\n */\nexport function gfmToMarkdown(options) {\n  return {\n    extensions: [\n      gfmAutolinkLiteralToMarkdown(),\n      gfmFootnoteToMarkdown(options),\n      gfmStrikethroughToMarkdown(),\n      gfmTableToMarkdown(options),\n      gfmTaskListItemToMarkdown()\n    ]\n  }\n}\n","/**\n * @import {Code, ConstructRecord, Event, Extension, Previous, State, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { asciiAlpha, asciiAlphanumeric, asciiControl, markdownLineEndingOrSpace, unicodePunctuation, unicodeWhitespace } from 'micromark-util-character';\nconst wwwPrefix = {\n  tokenize: tokenizeWwwPrefix,\n  partial: true\n};\nconst domain = {\n  tokenize: tokenizeDomain,\n  partial: true\n};\nconst path = {\n  tokenize: tokenizePath,\n  partial: true\n};\nconst trail = {\n  tokenize: tokenizeTrail,\n  partial: true\n};\nconst emailDomainDotTrail = {\n  tokenize: tokenizeEmailDomainDotTrail,\n  partial: true\n};\nconst wwwAutolink = {\n  name: 'wwwAutolink',\n  tokenize: tokenizeWwwAutolink,\n  previous: previousWww\n};\nconst protocolAutolink = {\n  name: 'protocolAutolink',\n  tokenize: tokenizeProtocolAutolink,\n  previous: previousProtocol\n};\nconst emailAutolink = {\n  name: 'emailAutolink',\n  tokenize: tokenizeEmailAutolink,\n  previous: previousEmail\n};\n\n/** @type {ConstructRecord} */\nconst text = {};\n\n/**\n * Create an extension for `micromark` to support GitHub autolink literal\n * syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   autolink literal syntax.\n */\nexport function gfmAutolinkLiteral() {\n  return {\n    text\n  };\n}\n\n/** @type {Code} */\nlet code = 48;\n\n// Add alphanumerics.\nwhile (code < 123) {\n  text[code] = emailAutolink;\n  code++;\n  if (code === 58) code = 65;else if (code === 91) code = 97;\n}\ntext[43] = emailAutolink;\ntext[45] = emailAutolink;\ntext[46] = emailAutolink;\ntext[95] = emailAutolink;\ntext[72] = [emailAutolink, protocolAutolink];\ntext[104] = [emailAutolink, protocolAutolink];\ntext[87] = [emailAutolink, wwwAutolink];\ntext[119] = [emailAutolink, wwwAutolink];\n\n// To do: perform email autolink literals on events, afterwards.\n// Thatâ€™s where `markdown-rs` and `cmark-gfm` perform it.\n// It should look for `@`, then for atext backwards, and then for a label\n// forwards.\n// To do: `mailto:`, `xmpp:` protocol as prefix.\n\n/**\n * Email autolink literal.\n *\n * ```markdown\n * > | a contact@example.org b\n *       ^^^^^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeEmailAutolink(effects, ok, nok) {\n  const self = this;\n  /** @type {boolean | undefined} */\n  let dot;\n  /** @type {boolean} */\n  let data;\n  return start;\n\n  /**\n   * Start of email autolink literal.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    if (!gfmAtext(code) || !previousEmail.call(self, self.previous) || previousUnbalanced(self.events)) {\n      return nok(code);\n    }\n    effects.enter('literalAutolink');\n    effects.enter('literalAutolinkEmail');\n    return atext(code);\n  }\n\n  /**\n   * In email atext.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function atext(code) {\n    if (gfmAtext(code)) {\n      effects.consume(code);\n      return atext;\n    }\n    if (code === 64) {\n      effects.consume(code);\n      return emailDomain;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In email domain.\n   *\n   * The reference code is a bit overly complex as it handles the `@`, of which\n   * there may be just one.\n   * Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L318>\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *               ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomain(code) {\n    // Dot followed by alphanumerical (not `-` or `_`).\n    if (code === 46) {\n      return effects.check(emailDomainDotTrail, emailDomainAfter, emailDomainDot)(code);\n    }\n\n    // Alphanumerical, `-`, and `_`.\n    if (code === 45 || code === 95 || asciiAlphanumeric(code)) {\n      data = true;\n      effects.consume(code);\n      return emailDomain;\n    }\n\n    // To do: `/` if xmpp.\n\n    // Note: normally weâ€™d truncate trailing punctuation from the link.\n    // However, email autolink literals cannot contain any of those markers,\n    // except for `.`, but that can only occur if it isnâ€™t trailing.\n    // So we can ignore truncating!\n    return emailDomainAfter(code);\n  }\n\n  /**\n   * In email domain, on dot that is not a trail.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *                      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomainDot(code) {\n    effects.consume(code);\n    dot = true;\n    return emailDomain;\n  }\n\n  /**\n   * After email domain.\n   *\n   * ```markdown\n   * > | a contact@example.org b\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function emailDomainAfter(code) {\n    // Domain must not be empty, must include a dot, and must end in alphabetical.\n    // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L332>.\n    if (data && dot && asciiAlpha(self.previous)) {\n      effects.exit('literalAutolinkEmail');\n      effects.exit('literalAutolink');\n      return ok(code);\n    }\n    return nok(code);\n  }\n}\n\n/**\n * `www` autolink literal.\n *\n * ```markdown\n * > | a www.example.org b\n *       ^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeWwwAutolink(effects, ok, nok) {\n  const self = this;\n  return wwwStart;\n\n  /**\n   * Start of www autolink literal.\n   *\n   * ```markdown\n   * > | www.example.com/a?b#c\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwStart(code) {\n    if (code !== 87 && code !== 119 || !previousWww.call(self, self.previous) || previousUnbalanced(self.events)) {\n      return nok(code);\n    }\n    effects.enter('literalAutolink');\n    effects.enter('literalAutolinkWww');\n    // Note: we *check*, so we can discard the `www.` we parsed.\n    // If it worked, we consider it as a part of the domain.\n    return effects.check(wwwPrefix, effects.attempt(domain, effects.attempt(path, wwwAfter), nok), nok)(code);\n  }\n\n  /**\n   * After a www autolink literal.\n   *\n   * ```markdown\n   * > | www.example.com/a?b#c\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwAfter(code) {\n    effects.exit('literalAutolinkWww');\n    effects.exit('literalAutolink');\n    return ok(code);\n  }\n}\n\n/**\n * Protocol autolink literal.\n *\n * ```markdown\n * > | a https://example.org b\n *       ^^^^^^^^^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeProtocolAutolink(effects, ok, nok) {\n  const self = this;\n  let buffer = '';\n  let seen = false;\n  return protocolStart;\n\n  /**\n   * Start of protocol autolink literal.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolStart(code) {\n    if ((code === 72 || code === 104) && previousProtocol.call(self, self.previous) && !previousUnbalanced(self.events)) {\n      effects.enter('literalAutolink');\n      effects.enter('literalAutolinkHttp');\n      buffer += String.fromCodePoint(code);\n      effects.consume(code);\n      return protocolPrefixInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In protocol.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *     ^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolPrefixInside(code) {\n    // `5` is size of `https`\n    if (asciiAlpha(code) && buffer.length < 5) {\n      // @ts-expect-error: definitely number.\n      buffer += String.fromCodePoint(code);\n      effects.consume(code);\n      return protocolPrefixInside;\n    }\n    if (code === 58) {\n      const protocol = buffer.toLowerCase();\n      if (protocol === 'http' || protocol === 'https') {\n        effects.consume(code);\n        return protocolSlashesInside;\n      }\n    }\n    return nok(code);\n  }\n\n  /**\n   * In slashes.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *           ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolSlashesInside(code) {\n    if (code === 47) {\n      effects.consume(code);\n      if (seen) {\n        return afterProtocol;\n      }\n      seen = true;\n      return protocolSlashesInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After protocol, before domain.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *             ^\n   * ```\n   *\n   * @type {State}\n   */\n  function afterProtocol(code) {\n    // To do: this is different from `markdown-rs`:\n    // https://github.com/wooorm/markdown-rs/blob/b3a921c761309ae00a51fe348d8a43adbc54b518/src/construct/gfm_autolink_literal.rs#L172-L182\n    return code === null || asciiControl(code) || markdownLineEndingOrSpace(code) || unicodeWhitespace(code) || unicodePunctuation(code) ? nok(code) : effects.attempt(domain, effects.attempt(path, protocolAfter), nok)(code);\n  }\n\n  /**\n   * After a protocol autolink literal.\n   *\n   * ```markdown\n   * > | https://example.com/a?b#c\n   *                              ^\n   * ```\n   *\n   * @type {State}\n   */\n  function protocolAfter(code) {\n    effects.exit('literalAutolinkHttp');\n    effects.exit('literalAutolink');\n    return ok(code);\n  }\n}\n\n/**\n * `www` prefix.\n *\n * ```markdown\n * > | a www.example.org b\n *       ^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeWwwPrefix(effects, ok, nok) {\n  let size = 0;\n  return wwwPrefixInside;\n\n  /**\n   * In www prefix.\n   *\n   * ```markdown\n   * > | www.example.com\n   *     ^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwPrefixInside(code) {\n    if ((code === 87 || code === 119) && size < 3) {\n      size++;\n      effects.consume(code);\n      return wwwPrefixInside;\n    }\n    if (code === 46 && size === 3) {\n      effects.consume(code);\n      return wwwPrefixAfter;\n    }\n    return nok(code);\n  }\n\n  /**\n   * After www prefix.\n   *\n   * ```markdown\n   * > | www.example.com\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function wwwPrefixAfter(code) {\n    // If there is *anything*, we can link.\n    return code === null ? nok(code) : ok(code);\n  }\n}\n\n/**\n * Domain.\n *\n * ```markdown\n * > | a https://example.org b\n *               ^^^^^^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDomain(effects, ok, nok) {\n  /** @type {boolean | undefined} */\n  let underscoreInLastSegment;\n  /** @type {boolean | undefined} */\n  let underscoreInLastLastSegment;\n  /** @type {boolean | undefined} */\n  let seen;\n  return domainInside;\n\n  /**\n   * In domain.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *             ^^^^^^^^^^^\n   * ```\n   *\n   * @type {State}\n   */\n  function domainInside(code) {\n    // Check whether this marker, which is a trailing punctuation\n    // marker, optionally followed by more trailing markers, and then\n    // followed by an end.\n    if (code === 46 || code === 95) {\n      return effects.check(trail, domainAfter, domainAtPunctuation)(code);\n    }\n\n    // GH documents that only alphanumerics (other than `-`, `.`, and `_`) can\n    // occur, which sounds like ASCII only, but they also support `www.é»žçœ‹.com`,\n    // so thatâ€™s Unicode.\n    // Instead of some new production for Unicode alphanumerics, markdown\n    // already has that for Unicode punctuation and whitespace, so use those.\n    // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L12>.\n    if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code) || code !== 45 && unicodePunctuation(code)) {\n      return domainAfter(code);\n    }\n    seen = true;\n    effects.consume(code);\n    return domainInside;\n  }\n\n  /**\n   * In domain, at potential trailing punctuation, that was not trailing.\n   *\n   * ```markdown\n   * > | https://example.com\n   *                    ^\n   * ```\n   *\n   * @type {State}\n   */\n  function domainAtPunctuation(code) {\n    // There is an underscore in the last segment of the domain\n    if (code === 95) {\n      underscoreInLastSegment = true;\n    }\n    // Otherwise, itâ€™s a `.`: save the last segment underscore in the\n    // penultimate segment slot.\n    else {\n      underscoreInLastLastSegment = underscoreInLastSegment;\n      underscoreInLastSegment = undefined;\n    }\n    effects.consume(code);\n    return domainInside;\n  }\n\n  /**\n   * After domain.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *                        ^\n   * ```\n   *\n   * @type {State} */\n  function domainAfter(code) {\n    // Note: thatâ€™s GH says a dot is needed, but itâ€™s not true:\n    // <https://github.com/github/cmark-gfm/issues/279>\n    if (underscoreInLastLastSegment || underscoreInLastSegment || !seen) {\n      return nok(code);\n    }\n    return ok(code);\n  }\n}\n\n/**\n * Path.\n *\n * ```markdown\n * > | a https://example.org/stuff b\n *                          ^^^^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizePath(effects, ok) {\n  let sizeOpen = 0;\n  let sizeClose = 0;\n  return pathInside;\n\n  /**\n   * In path.\n   *\n   * ```markdown\n   * > | https://example.com/a\n   *                        ^^\n   * ```\n   *\n   * @type {State}\n   */\n  function pathInside(code) {\n    if (code === 40) {\n      sizeOpen++;\n      effects.consume(code);\n      return pathInside;\n    }\n\n    // To do: `markdown-rs` also needs this.\n    // If this is a paren, and there are less closings than openings,\n    // we donâ€™t check for a trail.\n    if (code === 41 && sizeClose < sizeOpen) {\n      return pathAtPunctuation(code);\n    }\n\n    // Check whether this trailing punctuation marker is optionally\n    // followed by more trailing markers, and then followed\n    // by an end.\n    if (code === 33 || code === 34 || code === 38 || code === 39 || code === 41 || code === 42 || code === 44 || code === 46 || code === 58 || code === 59 || code === 60 || code === 63 || code === 93 || code === 95 || code === 126) {\n      return effects.check(trail, ok, pathAtPunctuation)(code);\n    }\n    if (code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    effects.consume(code);\n    return pathInside;\n  }\n\n  /**\n   * In path, at potential trailing punctuation, that was not trailing.\n   *\n   * ```markdown\n   * > | https://example.com/a\"b\n   *                          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function pathAtPunctuation(code) {\n    // Count closing parens.\n    if (code === 41) {\n      sizeClose++;\n    }\n    effects.consume(code);\n    return pathInside;\n  }\n}\n\n/**\n * Trail.\n *\n * This calls `ok` if this *is* the trail, followed by an end, which means\n * the entire trail is not part of the link.\n * It calls `nok` if this *is* part of the link.\n *\n * ```markdown\n * > | https://example.com\").\n *                        ^^^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTrail(effects, ok, nok) {\n  return trail;\n\n  /**\n   * In trail of domain or path.\n   *\n   * ```markdown\n   * > | https://example.com\").\n   *                        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trail(code) {\n    // Regular trailing punctuation.\n    if (code === 33 || code === 34 || code === 39 || code === 41 || code === 42 || code === 44 || code === 46 || code === 58 || code === 59 || code === 63 || code === 95 || code === 126) {\n      effects.consume(code);\n      return trail;\n    }\n\n    // `&` followed by one or more alphabeticals and then a `;`, is\n    // as a whole considered as trailing punctuation.\n    // In all other cases, it is considered as continuation of the URL.\n    if (code === 38) {\n      effects.consume(code);\n      return trailCharacterReferenceStart;\n    }\n\n    // Needed because we allow literals after `[`, as we fix:\n    // <https://github.com/github/cmark-gfm/issues/278>.\n    // Check that it is not followed by `(` or `[`.\n    if (code === 93) {\n      effects.consume(code);\n      return trailBracketAfter;\n    }\n    if (\n    // `<` is an end.\n    code === 60 ||\n    // So is whitespace.\n    code === null || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    return nok(code);\n  }\n\n  /**\n   * In trail, after `]`.\n   *\n   * > ðŸ‘‰ **Note**: this deviates from `cmark-gfm` to fix a bug.\n   * > See end of <https://github.com/github/cmark-gfm/issues/278> for more.\n   *\n   * ```markdown\n   * > | https://example.com](\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailBracketAfter(code) {\n    // Whitespace or something that could start a resource or reference is the end.\n    // Switch back to trail otherwise.\n    if (code === null || code === 40 || code === 91 || markdownLineEndingOrSpace(code) || unicodeWhitespace(code)) {\n      return ok(code);\n    }\n    return trail(code);\n  }\n\n  /**\n   * In character-reference like trail, after `&`.\n   *\n   * ```markdown\n   * > | https://example.com&amp;).\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailCharacterReferenceStart(code) {\n    // When non-alpha, itâ€™s not a trail.\n    return asciiAlpha(code) ? trailCharacterReferenceInside(code) : nok(code);\n  }\n\n  /**\n   * In character-reference like trail.\n   *\n   * ```markdown\n   * > | https://example.com&amp;).\n   *                         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function trailCharacterReferenceInside(code) {\n    // Switch back to trail if this is well-formed.\n    if (code === 59) {\n      effects.consume(code);\n      return trail;\n    }\n    if (asciiAlpha(code)) {\n      effects.consume(code);\n      return trailCharacterReferenceInside;\n    }\n\n    // Itâ€™s not a trail.\n    return nok(code);\n  }\n}\n\n/**\n * Dot in email domain trail.\n *\n * This calls `ok` if this *is* the trail, followed by an end, which means\n * the trail is not part of the link.\n * It calls `nok` if this *is* part of the link.\n *\n * ```markdown\n * > | contact@example.org.\n *                        ^\n * ```\n *\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeEmailDomainDotTrail(effects, ok, nok) {\n  return start;\n\n  /**\n   * Dot.\n   *\n   * ```markdown\n   * > | contact@example.org.\n   *                    ^   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    // Must be dot.\n    effects.consume(code);\n    return after;\n  }\n\n  /**\n   * After dot.\n   *\n   * ```markdown\n   * > | contact@example.org.\n   *                     ^   ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // Not a trail if alphanumeric.\n    return asciiAlphanumeric(code) ? nok(code) : ok(code);\n  }\n}\n\n/**\n * See:\n * <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L156>.\n *\n * @type {Previous}\n */\nfunction previousWww(code) {\n  return code === null || code === 40 || code === 42 || code === 95 || code === 91 || code === 93 || code === 126 || markdownLineEndingOrSpace(code);\n}\n\n/**\n * See:\n * <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L214>.\n *\n * @type {Previous}\n */\nfunction previousProtocol(code) {\n  return !asciiAlpha(code);\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Previous}\n */\nfunction previousEmail(code) {\n  // Do not allow a slash â€œinsideâ€ atext.\n  // The reference code is a bit weird, but thatâ€™s what it results in.\n  // Source: <https://github.com/github/cmark-gfm/blob/ef1cfcb/extensions/autolink.c#L307>.\n  // Other than slash, every preceding character is allowed.\n  return !(code === 47 || gfmAtext(code));\n}\n\n/**\n * @param {Code} code\n * @returns {boolean}\n */\nfunction gfmAtext(code) {\n  return code === 43 || code === 45 || code === 46 || code === 95 || asciiAlphanumeric(code);\n}\n\n/**\n * @param {Array<Event>} events\n * @returns {boolean}\n */\nfunction previousUnbalanced(events) {\n  let index = events.length;\n  let result = false;\n  while (index--) {\n    const token = events[index][1];\n    if ((token.type === 'labelLink' || token.type === 'labelImage') && !token._balanced) {\n      result = true;\n      break;\n    }\n\n    // If weâ€™ve seen this token, and it was marked as not having any unbalanced\n    // bracket before it, we can exit.\n    if (token._gfmAutolinkLiteralWalkedInto) {\n      result = false;\n      break;\n    }\n  }\n  if (events.length > 0 && !result) {\n    // Mark the last token as â€œwalked intoâ€ w/o finding\n    // anything.\n    events[events.length - 1][1]._gfmAutolinkLiteralWalkedInto = true;\n  }\n  return result;\n}","/**\n * @import {Event, Exiter, Extension, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { blankLine } from 'micromark-core-commonmark';\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEndingOrSpace } from 'micromark-util-character';\nimport { normalizeIdentifier } from 'micromark-util-normalize-identifier';\nconst indent = {\n  tokenize: tokenizeIndent,\n  partial: true\n};\n\n// To do: micromark should support a `_hiddenGfmFootnoteSupport`, which only\n// affects label start (image).\n// That will let us drop `tokenizePotentialGfmFootnote*`.\n// It currently has a `_hiddenFootnoteSupport`, which affects that and more.\n// That can be removed when `micromark-extension-footnote` is archived.\n\n/**\n * Create an extension for `micromark` to enable GFM footnote syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to\n *   enable GFM footnote syntax.\n */\nexport function gfmFootnote() {\n  /** @type {Extension} */\n  return {\n    document: {\n      [91]: {\n        name: 'gfmFootnoteDefinition',\n        tokenize: tokenizeDefinitionStart,\n        continuation: {\n          tokenize: tokenizeDefinitionContinuation\n        },\n        exit: gfmFootnoteDefinitionEnd\n      }\n    },\n    text: {\n      [91]: {\n        name: 'gfmFootnoteCall',\n        tokenize: tokenizeGfmFootnoteCall\n      },\n      [93]: {\n        name: 'gfmPotentialFootnoteCall',\n        add: 'after',\n        tokenize: tokenizePotentialGfmFootnoteCall,\n        resolveTo: resolveToPotentialGfmFootnoteCall\n      }\n    }\n  };\n}\n\n// To do: remove after micromark update.\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizePotentialGfmFootnoteCall(effects, ok, nok) {\n  const self = this;\n  let index = self.events.length;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  /** @type {Token} */\n  let labelStart;\n\n  // Find an opening.\n  while (index--) {\n    const token = self.events[index][1];\n    if (token.type === \"labelImage\") {\n      labelStart = token;\n      break;\n    }\n\n    // Exit if weâ€™ve walked far enough.\n    if (token.type === 'gfmFootnoteCall' || token.type === \"labelLink\" || token.type === \"label\" || token.type === \"image\" || token.type === \"link\") {\n      break;\n    }\n  }\n  return start;\n\n  /**\n   * @type {State}\n   */\n  function start(code) {\n    if (!labelStart || !labelStart._balanced) {\n      return nok(code);\n    }\n    const id = normalizeIdentifier(self.sliceSerialize({\n      start: labelStart.end,\n      end: self.now()\n    }));\n    if (id.codePointAt(0) !== 94 || !defined.includes(id.slice(1))) {\n      return nok(code);\n    }\n    effects.enter('gfmFootnoteCallLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallLabelMarker');\n    return ok(code);\n  }\n}\n\n// To do: remove after micromark update.\n/** @type {Resolver} */\nfunction resolveToPotentialGfmFootnoteCall(events, context) {\n  let index = events.length;\n  /** @type {Token | undefined} */\n  let labelStart;\n\n  // Find an opening.\n  while (index--) {\n    if (events[index][1].type === \"labelImage\" && events[index][0] === 'enter') {\n      labelStart = events[index][1];\n      break;\n    }\n  }\n  // Change the `labelImageMarker` to a `data`.\n  events[index + 1][1].type = \"data\";\n  events[index + 3][1].type = 'gfmFootnoteCallLabelMarker';\n\n  // The whole (without `!`):\n  /** @type {Token} */\n  const call = {\n    type: 'gfmFootnoteCall',\n    start: Object.assign({}, events[index + 3][1].start),\n    end: Object.assign({}, events[events.length - 1][1].end)\n  };\n  // The `^` marker\n  /** @type {Token} */\n  const marker = {\n    type: 'gfmFootnoteCallMarker',\n    start: Object.assign({}, events[index + 3][1].end),\n    end: Object.assign({}, events[index + 3][1].end)\n  };\n  // Increment the end 1 character.\n  marker.end.column++;\n  marker.end.offset++;\n  marker.end._bufferIndex++;\n  /** @type {Token} */\n  const string = {\n    type: 'gfmFootnoteCallString',\n    start: Object.assign({}, marker.end),\n    end: Object.assign({}, events[events.length - 1][1].start)\n  };\n  /** @type {Token} */\n  const chunk = {\n    type: \"chunkString\",\n    contentType: 'string',\n    start: Object.assign({}, string.start),\n    end: Object.assign({}, string.end)\n  };\n\n  /** @type {Array<Event>} */\n  const replacement = [\n  // Take the `labelImageMarker` (now `data`, the `!`)\n  events[index + 1], events[index + 2], ['enter', call, context],\n  // The `[`\n  events[index + 3], events[index + 4],\n  // The `^`.\n  ['enter', marker, context], ['exit', marker, context],\n  // Everything in between.\n  ['enter', string, context], ['enter', chunk, context], ['exit', chunk, context], ['exit', string, context],\n  // The ending (`]`, properly parsed and labelled).\n  events[events.length - 2], events[events.length - 1], ['exit', call, context]];\n  events.splice(index, events.length - index + 1, ...replacement);\n  return events;\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeGfmFootnoteCall(effects, ok, nok) {\n  const self = this;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  let size = 0;\n  /** @type {boolean} */\n  let data;\n\n  // Note: the implementation of `markdown-rs` is different, because it houses\n  // core *and* extensions in one project.\n  // Therefore, it can include footnote logic inside `label-end`.\n  // We canâ€™t do that, but luckily, we can parse footnotes in a simpler way than\n  // needed for labels.\n  return start;\n\n  /**\n   * Start of footnote label.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('gfmFootnoteCall');\n    effects.enter('gfmFootnoteCallLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallLabelMarker');\n    return callStart;\n  }\n\n  /**\n   * After `[`, at `^`.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callStart(code) {\n    if (code !== 94) return nok(code);\n    effects.enter('gfmFootnoteCallMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteCallMarker');\n    effects.enter('gfmFootnoteCallString');\n    effects.enter('chunkString').contentType = 'string';\n    return callData;\n  }\n\n  /**\n   * In label.\n   *\n   * ```markdown\n   * > | a [^b] c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callData(code) {\n    if (\n    // Too long.\n    size > 999 ||\n    // Closing brace with nothing.\n    code === 93 && !data ||\n    // Space or tab is not supported by GFM for some reason.\n    // `\\n` and `[` not being supported makes sense.\n    code === null || code === 91 || markdownLineEndingOrSpace(code)) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.exit('chunkString');\n      const token = effects.exit('gfmFootnoteCallString');\n      if (!defined.includes(normalizeIdentifier(self.sliceSerialize(token)))) {\n        return nok(code);\n      }\n      effects.enter('gfmFootnoteCallLabelMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteCallLabelMarker');\n      effects.exit('gfmFootnoteCall');\n      return ok;\n    }\n    if (!markdownLineEndingOrSpace(code)) {\n      data = true;\n    }\n    size++;\n    effects.consume(code);\n    return code === 92 ? callEscape : callData;\n  }\n\n  /**\n   * On character after escape.\n   *\n   * ```markdown\n   * > | a [^b\\c] d\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function callEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code);\n      size++;\n      return callData;\n    }\n    return callData(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinitionStart(effects, ok, nok) {\n  const self = this;\n  const defined = self.parser.gfmFootnotes || (self.parser.gfmFootnotes = []);\n  /** @type {string} */\n  let identifier;\n  let size = 0;\n  /** @type {boolean | undefined} */\n  let data;\n  return start;\n\n  /**\n   * Start of GFM footnote definition.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function start(code) {\n    effects.enter('gfmFootnoteDefinition')._container = true;\n    effects.enter('gfmFootnoteDefinitionLabel');\n    effects.enter('gfmFootnoteDefinitionLabelMarker');\n    effects.consume(code);\n    effects.exit('gfmFootnoteDefinitionLabelMarker');\n    return labelAtMarker;\n  }\n\n  /**\n   * In label, at caret.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAtMarker(code) {\n    if (code === 94) {\n      effects.enter('gfmFootnoteDefinitionMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteDefinitionMarker');\n      effects.enter('gfmFootnoteDefinitionLabelString');\n      effects.enter('chunkString').contentType = 'string';\n      return labelInside;\n    }\n    return nok(code);\n  }\n\n  /**\n   * In label.\n   *\n   * > ðŸ‘‰ **Note**: `cmark-gfm` prevents whitespace from occurring in footnote\n   * > definition labels.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelInside(code) {\n    if (\n    // Too long.\n    size > 999 ||\n    // Closing brace with nothing.\n    code === 93 && !data ||\n    // Space or tab is not supported by GFM for some reason.\n    // `\\n` and `[` not being supported makes sense.\n    code === null || code === 91 || markdownLineEndingOrSpace(code)) {\n      return nok(code);\n    }\n    if (code === 93) {\n      effects.exit('chunkString');\n      const token = effects.exit('gfmFootnoteDefinitionLabelString');\n      identifier = normalizeIdentifier(self.sliceSerialize(token));\n      effects.enter('gfmFootnoteDefinitionLabelMarker');\n      effects.consume(code);\n      effects.exit('gfmFootnoteDefinitionLabelMarker');\n      effects.exit('gfmFootnoteDefinitionLabel');\n      return labelAfter;\n    }\n    if (!markdownLineEndingOrSpace(code)) {\n      data = true;\n    }\n    size++;\n    effects.consume(code);\n    return code === 92 ? labelEscape : labelInside;\n  }\n\n  /**\n   * After `\\`, at a special character.\n   *\n   * > ðŸ‘‰ **Note**: `cmark-gfm` currently does not support escaped brackets:\n   * > <https://github.com/github/cmark-gfm/issues/240>\n   *\n   * ```markdown\n   * > | [^a\\*b]: c\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelEscape(code) {\n    if (code === 91 || code === 92 || code === 93) {\n      effects.consume(code);\n      size++;\n      return labelInside;\n    }\n    return labelInside(code);\n  }\n\n  /**\n   * After definition label.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function labelAfter(code) {\n    if (code === 58) {\n      effects.enter('definitionMarker');\n      effects.consume(code);\n      effects.exit('definitionMarker');\n      if (!defined.includes(identifier)) {\n        defined.push(identifier);\n      }\n\n      // Any whitespace after the marker is eaten, forming indented code\n      // is not possible.\n      // No space is also fine, just like a block quote marker.\n      return factorySpace(effects, whitespaceAfter, 'gfmFootnoteDefinitionWhitespace');\n    }\n    return nok(code);\n  }\n\n  /**\n   * After definition prefix.\n   *\n   * ```markdown\n   * > | [^a]: b\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function whitespaceAfter(code) {\n    // `markdown-rs` has a wrapping token for the prefix that is closed here.\n    return ok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeDefinitionContinuation(effects, ok, nok) {\n  /// Start of footnote definition continuation.\n  ///\n  /// ```markdown\n  ///   | [^a]: b\n  /// > |     c\n  ///     ^\n  /// ```\n  //\n  // Either a blank line, which is okay, or an indented thing.\n  return effects.check(blankLine, ok, effects.attempt(indent, ok, nok));\n}\n\n/** @type {Exiter} */\nfunction gfmFootnoteDefinitionEnd(effects) {\n  effects.exit('gfmFootnoteDefinition');\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeIndent(effects, ok, nok) {\n  const self = this;\n  return factorySpace(effects, afterPrefix, 'gfmFootnoteDefinitionIndent', 4 + 1);\n\n  /**\n   * @type {State}\n   */\n  function afterPrefix(code) {\n    const tail = self.events[self.events.length - 1];\n    return tail && tail[1].type === 'gfmFootnoteDefinitionIndent' && tail[2].sliceSerialize(tail[1], true).length === 4 ? ok(code) : nok(code);\n  }\n}","/**\n * @import {Options} from 'micromark-extension-gfm-strikethrough'\n * @import {Event, Extension, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { splice } from 'micromark-util-chunked';\nimport { classifyCharacter } from 'micromark-util-classify-character';\nimport { resolveAll } from 'micromark-util-resolve-all';\n/**\n * Create an extension for `micromark` to enable GFM strikethrough syntax.\n *\n * @param {Options | null | undefined} [options={}]\n *   Configuration.\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions`, to\n *   enable GFM strikethrough syntax.\n */\nexport function gfmStrikethrough(options) {\n  const options_ = options || {};\n  let single = options_.singleTilde;\n  const tokenizer = {\n    name: 'strikethrough',\n    tokenize: tokenizeStrikethrough,\n    resolveAll: resolveAllStrikethrough\n  };\n  if (single === null || single === undefined) {\n    single = true;\n  }\n  return {\n    text: {\n      [126]: tokenizer\n    },\n    insideSpan: {\n      null: [tokenizer]\n    },\n    attentionMarkers: {\n      null: [126]\n    }\n  };\n\n  /**\n   * Take events and resolve strikethrough.\n   *\n   * @type {Resolver}\n   */\n  function resolveAllStrikethrough(events, context) {\n    let index = -1;\n\n    // Walk through all events.\n    while (++index < events.length) {\n      // Find a token that can close.\n      if (events[index][0] === 'enter' && events[index][1].type === 'strikethroughSequenceTemporary' && events[index][1]._close) {\n        let open = index;\n\n        // Now walk back to find an opener.\n        while (open--) {\n          // Find a token that can open the closer.\n          if (events[open][0] === 'exit' && events[open][1].type === 'strikethroughSequenceTemporary' && events[open][1]._open &&\n          // If the sizes are the same:\n          events[index][1].end.offset - events[index][1].start.offset === events[open][1].end.offset - events[open][1].start.offset) {\n            events[index][1].type = 'strikethroughSequence';\n            events[open][1].type = 'strikethroughSequence';\n\n            /** @type {Token} */\n            const strikethrough = {\n              type: 'strikethrough',\n              start: Object.assign({}, events[open][1].start),\n              end: Object.assign({}, events[index][1].end)\n            };\n\n            /** @type {Token} */\n            const text = {\n              type: 'strikethroughText',\n              start: Object.assign({}, events[open][1].end),\n              end: Object.assign({}, events[index][1].start)\n            };\n\n            // Opening.\n            /** @type {Array<Event>} */\n            const nextEvents = [['enter', strikethrough, context], ['enter', events[open][1], context], ['exit', events[open][1], context], ['enter', text, context]];\n            const insideSpan = context.parser.constructs.insideSpan.null;\n            if (insideSpan) {\n              // Between.\n              splice(nextEvents, nextEvents.length, 0, resolveAll(insideSpan, events.slice(open + 1, index), context));\n            }\n\n            // Closing.\n            splice(nextEvents, nextEvents.length, 0, [['exit', text, context], ['enter', events[index][1], context], ['exit', events[index][1], context], ['exit', strikethrough, context]]);\n            splice(events, open - 1, index - open + 3, nextEvents);\n            index = open + nextEvents.length - 2;\n            break;\n          }\n        }\n      }\n    }\n    index = -1;\n    while (++index < events.length) {\n      if (events[index][1].type === 'strikethroughSequenceTemporary') {\n        events[index][1].type = \"data\";\n      }\n    }\n    return events;\n  }\n\n  /**\n   * @this {TokenizeContext}\n   * @type {Tokenizer}\n   */\n  function tokenizeStrikethrough(effects, ok, nok) {\n    const previous = this.previous;\n    const events = this.events;\n    let size = 0;\n    return start;\n\n    /** @type {State} */\n    function start(code) {\n      if (previous === 126 && events[events.length - 1][1].type !== \"characterEscape\") {\n        return nok(code);\n      }\n      effects.enter('strikethroughSequenceTemporary');\n      return more(code);\n    }\n\n    /** @type {State} */\n    function more(code) {\n      const before = classifyCharacter(previous);\n      if (code === 126) {\n        // If this is the third marker, exit.\n        if (size > 1) return nok(code);\n        effects.consume(code);\n        size++;\n        return more;\n      }\n      if (size < 2 && !single) return nok(code);\n      const token = effects.exit('strikethroughSequenceTemporary');\n      const after = classifyCharacter(code);\n      token._open = !after || after === 2 && Boolean(before);\n      token._close = !before || before === 2 && Boolean(after);\n      return ok(code);\n    }\n  }\n}","/**\n * @import {Event} from 'micromark-util-types'\n */\n\n// Port of `edit_map.rs` from `markdown-rs`.\n// This should move to `markdown-js` later.\n\n// Deal with several changes in events, batching them together.\n//\n// Preferably, changes should be kept to a minimum.\n// Sometimes, itâ€™s needed to change the list of events, because parsing can be\n// messy, and it helps to expose a cleaner interface of events to the compiler\n// and other users.\n// It can also help to merge many adjacent similar events.\n// And, in other cases, itâ€™s needed to parse subcontent: pass some events\n// through another tokenizer and inject the result.\n\n/**\n * @typedef {[number, number, Array<Event>]} Change\n * @typedef {[number, number, number]} Jump\n */\n\n/**\n * Tracks a bunch of edits.\n */\nexport class EditMap {\n  /**\n   * Create a new edit map.\n   */\n  constructor() {\n    /**\n     * Record of changes.\n     *\n     * @type {Array<Change>}\n     */\n    this.map = [];\n  }\n\n  /**\n   * Create an edit: a remove and/or add at a certain place.\n   *\n   * @param {number} index\n   * @param {number} remove\n   * @param {Array<Event>} add\n   * @returns {undefined}\n   */\n  add(index, remove, add) {\n    addImplementation(this, index, remove, add);\n  }\n\n  // To do: add this when moving to `micromark`.\n  // /**\n  //  * Create an edit: but insert `add` before existing additions.\n  //  *\n  //  * @param {number} index\n  //  * @param {number} remove\n  //  * @param {Array<Event>} add\n  //  * @returns {undefined}\n  //  */\n  // addBefore(index, remove, add) {\n  //   addImplementation(this, index, remove, add, true)\n  // }\n\n  /**\n   * Done, change the events.\n   *\n   * @param {Array<Event>} events\n   * @returns {undefined}\n   */\n  consume(events) {\n    this.map.sort(function (a, b) {\n      return a[0] - b[0];\n    });\n\n    /* c8 ignore next 3 -- `resolve` is never called without tables, so without edits. */\n    if (this.map.length === 0) {\n      return;\n    }\n\n    // To do: if links are added in events, like they are in `markdown-rs`,\n    // this is needed.\n    // // Calculate jumps: where items in the current list move to.\n    // /** @type {Array<Jump>} */\n    // const jumps = []\n    // let index = 0\n    // let addAcc = 0\n    // let removeAcc = 0\n    // while (index < this.map.length) {\n    //   const [at, remove, add] = this.map[index]\n    //   removeAcc += remove\n    //   addAcc += add.length\n    //   jumps.push([at, removeAcc, addAcc])\n    //   index += 1\n    // }\n    //\n    // . shiftLinks(events, jumps)\n\n    let index = this.map.length;\n    /** @type {Array<Array<Event>>} */\n    const vecs = [];\n    while (index > 0) {\n      index -= 1;\n      vecs.push(events.slice(this.map[index][0] + this.map[index][1]), this.map[index][2]);\n\n      // Truncate rest.\n      events.length = this.map[index][0];\n    }\n    vecs.push(events.slice());\n    events.length = 0;\n    let slice = vecs.pop();\n    while (slice) {\n      for (const element of slice) {\n        events.push(element);\n      }\n      slice = vecs.pop();\n    }\n\n    // Truncate everything.\n    this.map.length = 0;\n  }\n}\n\n/**\n * Create an edit.\n *\n * @param {EditMap} editMap\n * @param {number} at\n * @param {number} remove\n * @param {Array<Event>} add\n * @returns {undefined}\n */\nfunction addImplementation(editMap, at, remove, add) {\n  let index = 0;\n\n  /* c8 ignore next 3 -- `resolve` is never called without tables, so without edits. */\n  if (remove === 0 && add.length === 0) {\n    return;\n  }\n  while (index < editMap.map.length) {\n    if (editMap.map[index][0] === at) {\n      editMap.map[index][1] += remove;\n\n      // To do: before not used by tables, use when moving to micromark.\n      // if (before) {\n      //   add.push(...editMap.map[index][2])\n      //   editMap.map[index][2] = add\n      // } else {\n      editMap.map[index][2].push(...add);\n      // }\n\n      return;\n    }\n    index += 1;\n  }\n  editMap.map.push([at, remove, add]);\n}\n\n// /**\n//  * Shift `previous` and `next` links according to `jumps`.\n//  *\n//  * This fixes links in case there are events removed or added between them.\n//  *\n//  * @param {Array<Event>} events\n//  * @param {Array<Jump>} jumps\n//  */\n// function shiftLinks(events, jumps) {\n//   let jumpIndex = 0\n//   let index = 0\n//   let add = 0\n//   let rm = 0\n\n//   while (index < events.length) {\n//     const rmCurr = rm\n\n//     while (jumpIndex < jumps.length && jumps[jumpIndex][0] <= index) {\n//       add = jumps[jumpIndex][2]\n//       rm = jumps[jumpIndex][1]\n//       jumpIndex += 1\n//     }\n\n//     // Ignore items that will be removed.\n//     if (rm > rmCurr) {\n//       index += rm - rmCurr\n//     } else {\n//       // ?\n//       // if let Some(link) = &events[index].link {\n//       //     if let Some(next) = link.next {\n//       //         events[next].link.as_mut().unwrap().previous = Some(index + add - rm);\n//       //         while jumpIndex < jumps.len() && jumps[jumpIndex].0 <= next {\n//       //             add = jumps[jumpIndex].2;\n//       //             rm = jumps[jumpIndex].1;\n//       //             jumpIndex += 1;\n//       //         }\n//       //         events[index].link.as_mut().unwrap().next = Some(next + add - rm);\n//       //         index = next;\n//       //         continue;\n//       //     }\n//       // }\n//       index += 1\n//     }\n//   }\n// }","/**\n * @import {Event} from 'micromark-util-types'\n */\n\n/**\n * @typedef {'center' | 'left' | 'none' | 'right'} Align\n */\n\n/**\n * Figure out the alignment of a GFM table.\n *\n * @param {Readonly<Array<Event>>} events\n *   List of events.\n * @param {number} index\n *   Table enter event.\n * @returns {Array<Align>}\n *   List of aligns.\n */\nexport function gfmTableAlign(events, index) {\n  let inDelimiterRow = false;\n  /** @type {Array<Align>} */\n  const align = [];\n  while (index < events.length) {\n    const event = events[index];\n    if (inDelimiterRow) {\n      if (event[0] === 'enter') {\n        // Start of alignment value: set a new column.\n        // To do: `markdown-rs` uses `tableDelimiterCellValue`.\n        if (event[1].type === 'tableContent') {\n          align.push(events[index + 1][1].type === 'tableDelimiterMarker' ? 'left' : 'none');\n        }\n      }\n      // Exits:\n      // End of alignment value: change the column.\n      // To do: `markdown-rs` uses `tableDelimiterCellValue`.\n      else if (event[1].type === 'tableContent') {\n        if (events[index - 1][1].type === 'tableDelimiterMarker') {\n          const alignIndex = align.length - 1;\n          align[alignIndex] = align[alignIndex] === 'left' ? 'center' : 'right';\n        }\n      }\n      // Done!\n      else if (event[1].type === 'tableDelimiterRow') {\n        break;\n      }\n    } else if (event[0] === 'enter' && event[1].type === 'tableDelimiterRow') {\n      inDelimiterRow = true;\n    }\n    index += 1;\n  }\n  return align;\n}","/**\n * @import {Event, Extension, Point, Resolver, State, Token, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\n/**\n * @typedef {[number, number, number, number]} Range\n *   Cell info.\n *\n * @typedef {0 | 1 | 2 | 3} RowKind\n *   Where we are: `1` for head row, `2` for delimiter row, `3` for body row.\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownLineEndingOrSpace, markdownSpace } from 'micromark-util-character';\nimport { EditMap } from './edit-map.js';\nimport { gfmTableAlign } from './infer.js';\n\n/**\n * Create an HTML extension for `micromark` to support GitHub tables syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   table syntax.\n */\nexport function gfmTable() {\n  return {\n    flow: {\n      null: {\n        name: 'table',\n        tokenize: tokenizeTable,\n        resolveAll: resolveTable\n      }\n    }\n  };\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTable(effects, ok, nok) {\n  const self = this;\n  let size = 0;\n  let sizeB = 0;\n  /** @type {boolean | undefined} */\n  let seen;\n  return start;\n\n  /**\n   * Start of a GFM table.\n   *\n   * If there is a valid table row or table head before, then we try to parse\n   * another row.\n   * Otherwise, we try to parse a head.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   * > | | b |\n   *     ^\n   * ```\n   * @type {State}\n   */\n  function start(code) {\n    let index = self.events.length - 1;\n    while (index > -1) {\n      const type = self.events[index][1].type;\n      if (type === \"lineEnding\" ||\n      // Note: markdown-rs uses `whitespace` instead of `linePrefix`\n      type === \"linePrefix\") index--;else break;\n    }\n    const tail = index > -1 ? self.events[index][1].type : null;\n    const next = tail === 'tableHead' || tail === 'tableRow' ? bodyRowStart : headRowBefore;\n\n    // Donâ€™t allow lazy body rows.\n    if (next === bodyRowStart && self.parser.lazy[self.now().line]) {\n      return nok(code);\n    }\n    return next(code);\n  }\n\n  /**\n   * Before table head row.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowBefore(code) {\n    effects.enter('tableHead');\n    effects.enter('tableRow');\n    return headRowStart(code);\n  }\n\n  /**\n   * Before table head row, after whitespace.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowStart(code) {\n    if (code === 124) {\n      return headRowBreak(code);\n    }\n\n    // To do: micromark-js should let us parse our own whitespace in extensions,\n    // like `markdown-rs`:\n    //\n    // ```js\n    // // 4+ spaces.\n    // if (markdownSpace(code)) {\n    //   return nok(code)\n    // }\n    // ```\n\n    seen = true;\n    // Count the first character, that isnâ€™t a pipe, double.\n    sizeB += 1;\n    return headRowBreak(code);\n  }\n\n  /**\n   * At break in table head row.\n   *\n   * ```markdown\n   * > | | a |\n   *     ^\n   *       ^\n   *         ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowBreak(code) {\n    if (code === null) {\n      // Note: in `markdown-rs`, we need to reset, in `micromark-js` we donâ€˜t.\n      return nok(code);\n    }\n    if (markdownLineEnding(code)) {\n      // If anything other than one pipe (ignoring whitespace) was used, itâ€™s fine.\n      if (sizeB > 1) {\n        sizeB = 0;\n        // To do: check if this works.\n        // Feel free to interrupt:\n        self.interrupt = true;\n        effects.exit('tableRow');\n        effects.enter(\"lineEnding\");\n        effects.consume(code);\n        effects.exit(\"lineEnding\");\n        return headDelimiterStart;\n      }\n\n      // Note: in `markdown-rs`, we need to reset, in `micromark-js` we donâ€˜t.\n      return nok(code);\n    }\n    if (markdownSpace(code)) {\n      // To do: check if this is fine.\n      // effects.attempt(State::Next(StateName::GfmTableHeadRowBreak), State::Nok)\n      // State::Retry(space_or_tab(tokenizer))\n      return factorySpace(effects, headRowBreak, \"whitespace\")(code);\n    }\n    sizeB += 1;\n    if (seen) {\n      seen = false;\n      // Header cell count.\n      size += 1;\n    }\n    if (code === 124) {\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      // Whether a delimiter was seen.\n      seen = true;\n      return headRowBreak;\n    }\n\n    // Anything else is cell data.\n    effects.enter(\"data\");\n    return headRowData(code);\n  }\n\n  /**\n   * In table head row data.\n   *\n   * ```markdown\n   * > | | a |\n   *       ^\n   *   | | - |\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowData(code) {\n    if (code === null || code === 124 || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"data\");\n      return headRowBreak(code);\n    }\n    effects.consume(code);\n    return code === 92 ? headRowEscape : headRowData;\n  }\n\n  /**\n   * In table head row escape.\n   *\n   * ```markdown\n   * > | | a\\-b |\n   *         ^\n   *   | | ---- |\n   *   | | c    |\n   * ```\n   *\n   * @type {State}\n   */\n  function headRowEscape(code) {\n    if (code === 92 || code === 124) {\n      effects.consume(code);\n      return headRowData;\n    }\n    return headRowData(code);\n  }\n\n  /**\n   * Before delimiter row.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *     ^\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterStart(code) {\n    // Reset `interrupt`.\n    self.interrupt = false;\n\n    // Note: in `markdown-rs`, we need to handle piercing here too.\n    if (self.parser.lazy[self.now().line]) {\n      return nok(code);\n    }\n    effects.enter('tableDelimiterRow');\n    // Track if weâ€™ve seen a `:` or `|`.\n    seen = false;\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterBefore, \"linePrefix\", self.parser.constructs.disable.null.includes('codeIndented') ? undefined : 4)(code);\n    }\n    return headDelimiterBefore(code);\n  }\n\n  /**\n   * Before delimiter row, after optional whitespace.\n   *\n   * Reused when a `|` is found later, to parse another cell.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *     ^\n   *   | | b |\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterBefore(code) {\n    if (code === 45 || code === 58) {\n      return headDelimiterValueBefore(code);\n    }\n    if (code === 124) {\n      seen = true;\n      // If we start with a pipe, we open a cell marker.\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      return headDelimiterCellBefore;\n    }\n\n    // More whitespace / empty row not allowed at start.\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * After `|`, before delimiter cell.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *      ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterCellBefore(code) {\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterValueBefore, \"whitespace\")(code);\n    }\n    return headDelimiterValueBefore(code);\n  }\n\n  /**\n   * Before delimiter cell value.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterValueBefore(code) {\n    // Align: left.\n    if (code === 58) {\n      sizeB += 1;\n      seen = true;\n      effects.enter('tableDelimiterMarker');\n      effects.consume(code);\n      effects.exit('tableDelimiterMarker');\n      return headDelimiterLeftAlignmentAfter;\n    }\n\n    // Align: none.\n    if (code === 45) {\n      sizeB += 1;\n      // To do: seems weird that this *isnâ€™t* left aligned, but that state is used?\n      return headDelimiterLeftAlignmentAfter(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      return headDelimiterCellAfter(code);\n    }\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * After delimiter cell left alignment marker.\n   *\n   * ```markdown\n   *   | | a  |\n   * > | | :- |\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterLeftAlignmentAfter(code) {\n    if (code === 45) {\n      effects.enter('tableDelimiterFiller');\n      return headDelimiterFiller(code);\n    }\n\n    // Anything else is not ok after the left-align colon.\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * In delimiter cell filler.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | - |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterFiller(code) {\n    if (code === 45) {\n      effects.consume(code);\n      return headDelimiterFiller;\n    }\n\n    // Align is `center` if it was `left`, `right` otherwise.\n    if (code === 58) {\n      seen = true;\n      effects.exit('tableDelimiterFiller');\n      effects.enter('tableDelimiterMarker');\n      effects.consume(code);\n      effects.exit('tableDelimiterMarker');\n      return headDelimiterRightAlignmentAfter;\n    }\n    effects.exit('tableDelimiterFiller');\n    return headDelimiterRightAlignmentAfter(code);\n  }\n\n  /**\n   * After delimiter cell right alignment marker.\n   *\n   * ```markdown\n   *   | |  a |\n   * > | | -: |\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterRightAlignmentAfter(code) {\n    if (markdownSpace(code)) {\n      return factorySpace(effects, headDelimiterCellAfter, \"whitespace\")(code);\n    }\n    return headDelimiterCellAfter(code);\n  }\n\n  /**\n   * After delimiter cell.\n   *\n   * ```markdown\n   *   | |  a |\n   * > | | -: |\n   *          ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterCellAfter(code) {\n    if (code === 124) {\n      return headDelimiterBefore(code);\n    }\n    if (code === null || markdownLineEnding(code)) {\n      // Exit when:\n      // * there was no `:` or `|` at all (itâ€™s a thematic break or setext\n      //   underline instead)\n      // * the header cell count is not the delimiter cell count\n      if (!seen || size !== sizeB) {\n        return headDelimiterNok(code);\n      }\n\n      // Note: in markdown-rs`, a reset is needed here.\n      effects.exit('tableDelimiterRow');\n      effects.exit('tableHead');\n      // To do: in `markdown-rs`, resolvers need to be registered manually.\n      // effects.register_resolver(ResolveName::GfmTable)\n      return ok(code);\n    }\n    return headDelimiterNok(code);\n  }\n\n  /**\n   * In delimiter row, at a disallowed byte.\n   *\n   * ```markdown\n   *   | | a |\n   * > | | x |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function headDelimiterNok(code) {\n    // Note: in `markdown-rs`, we need to reset, in `micromark-js` we donâ€˜t.\n    return nok(code);\n  }\n\n  /**\n   * Before table body row.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *     ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowStart(code) {\n    // Note: in `markdown-rs` we need to manually take care of a prefix,\n    // but in `micromark-js` that is done for us, so if weâ€™re here, weâ€™re\n    // never at whitespace.\n    effects.enter('tableRow');\n    return bodyRowBreak(code);\n  }\n\n  /**\n   * At break in table body row.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *     ^\n   *       ^\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowBreak(code) {\n    if (code === 124) {\n      effects.enter('tableCellDivider');\n      effects.consume(code);\n      effects.exit('tableCellDivider');\n      return bodyRowBreak;\n    }\n    if (code === null || markdownLineEnding(code)) {\n      effects.exit('tableRow');\n      return ok(code);\n    }\n    if (markdownSpace(code)) {\n      return factorySpace(effects, bodyRowBreak, \"whitespace\")(code);\n    }\n\n    // Anything else is cell content.\n    effects.enter(\"data\");\n    return bodyRowData(code);\n  }\n\n  /**\n   * In table body row data.\n   *\n   * ```markdown\n   *   | | a |\n   *   | | - |\n   * > | | b |\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowData(code) {\n    if (code === null || code === 124 || markdownLineEndingOrSpace(code)) {\n      effects.exit(\"data\");\n      return bodyRowBreak(code);\n    }\n    effects.consume(code);\n    return code === 92 ? bodyRowEscape : bodyRowData;\n  }\n\n  /**\n   * In table body row escape.\n   *\n   * ```markdown\n   *   | | a    |\n   *   | | ---- |\n   * > | | b\\-c |\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function bodyRowEscape(code) {\n    if (code === 92 || code === 124) {\n      effects.consume(code);\n      return bodyRowData;\n    }\n    return bodyRowData(code);\n  }\n}\n\n/** @type {Resolver} */\n\nfunction resolveTable(events, context) {\n  let index = -1;\n  let inFirstCellAwaitingPipe = true;\n  /** @type {RowKind} */\n  let rowKind = 0;\n  /** @type {Range} */\n  let lastCell = [0, 0, 0, 0];\n  /** @type {Range} */\n  let cell = [0, 0, 0, 0];\n  let afterHeadAwaitingFirstBodyRow = false;\n  let lastTableEnd = 0;\n  /** @type {Token | undefined} */\n  let currentTable;\n  /** @type {Token | undefined} */\n  let currentBody;\n  /** @type {Token | undefined} */\n  let currentCell;\n  const map = new EditMap();\n  while (++index < events.length) {\n    const event = events[index];\n    const token = event[1];\n    if (event[0] === 'enter') {\n      // Start of head.\n      if (token.type === 'tableHead') {\n        afterHeadAwaitingFirstBodyRow = false;\n\n        // Inject previous (body end and) table end.\n        if (lastTableEnd !== 0) {\n          flushTableEnd(map, context, lastTableEnd, currentTable, currentBody);\n          currentBody = undefined;\n          lastTableEnd = 0;\n        }\n\n        // Inject table start.\n        currentTable = {\n          type: 'table',\n          start: Object.assign({}, token.start),\n          // Note: correct end is set later.\n          end: Object.assign({}, token.end)\n        };\n        map.add(index, 0, [['enter', currentTable, context]]);\n      } else if (token.type === 'tableRow' || token.type === 'tableDelimiterRow') {\n        inFirstCellAwaitingPipe = true;\n        currentCell = undefined;\n        lastCell = [0, 0, 0, 0];\n        cell = [0, index + 1, 0, 0];\n\n        // Inject table body start.\n        if (afterHeadAwaitingFirstBodyRow) {\n          afterHeadAwaitingFirstBodyRow = false;\n          currentBody = {\n            type: 'tableBody',\n            start: Object.assign({}, token.start),\n            // Note: correct end is set later.\n            end: Object.assign({}, token.end)\n          };\n          map.add(index, 0, [['enter', currentBody, context]]);\n        }\n        rowKind = token.type === 'tableDelimiterRow' ? 2 : currentBody ? 3 : 1;\n      }\n      // Cell data.\n      else if (rowKind && (token.type === \"data\" || token.type === 'tableDelimiterMarker' || token.type === 'tableDelimiterFiller')) {\n        inFirstCellAwaitingPipe = false;\n\n        // First value in cell.\n        if (cell[2] === 0) {\n          if (lastCell[1] !== 0) {\n            cell[0] = cell[1];\n            currentCell = flushCell(map, context, lastCell, rowKind, undefined, currentCell);\n            lastCell = [0, 0, 0, 0];\n          }\n          cell[2] = index;\n        }\n      } else if (token.type === 'tableCellDivider') {\n        if (inFirstCellAwaitingPipe) {\n          inFirstCellAwaitingPipe = false;\n        } else {\n          if (lastCell[1] !== 0) {\n            cell[0] = cell[1];\n            currentCell = flushCell(map, context, lastCell, rowKind, undefined, currentCell);\n          }\n          lastCell = cell;\n          cell = [lastCell[1], index, 0, 0];\n        }\n      }\n    }\n    // Exit events.\n    else if (token.type === 'tableHead') {\n      afterHeadAwaitingFirstBodyRow = true;\n      lastTableEnd = index;\n    } else if (token.type === 'tableRow' || token.type === 'tableDelimiterRow') {\n      lastTableEnd = index;\n      if (lastCell[1] !== 0) {\n        cell[0] = cell[1];\n        currentCell = flushCell(map, context, lastCell, rowKind, index, currentCell);\n      } else if (cell[1] !== 0) {\n        currentCell = flushCell(map, context, cell, rowKind, index, currentCell);\n      }\n      rowKind = 0;\n    } else if (rowKind && (token.type === \"data\" || token.type === 'tableDelimiterMarker' || token.type === 'tableDelimiterFiller')) {\n      cell[3] = index;\n    }\n  }\n  if (lastTableEnd !== 0) {\n    flushTableEnd(map, context, lastTableEnd, currentTable, currentBody);\n  }\n  map.consume(context.events);\n\n  // To do: move this into `html`, when events are exposed there.\n  // Thatâ€™s what `markdown-rs` does.\n  // That needs updates to `mdast-util-gfm-table`.\n  index = -1;\n  while (++index < context.events.length) {\n    const event = context.events[index];\n    if (event[0] === 'enter' && event[1].type === 'table') {\n      event[1]._align = gfmTableAlign(context.events, index);\n    }\n  }\n  return events;\n}\n\n/**\n * Generate a cell.\n *\n * @param {EditMap} map\n * @param {Readonly<TokenizeContext>} context\n * @param {Readonly<Range>} range\n * @param {RowKind} rowKind\n * @param {number | undefined} rowEnd\n * @param {Token | undefined} previousCell\n * @returns {Token | undefined}\n */\n// eslint-disable-next-line max-params\nfunction flushCell(map, context, range, rowKind, rowEnd, previousCell) {\n  // `markdown-rs` uses:\n  // rowKind === 2 ? 'tableDelimiterCell' : 'tableCell'\n  const groupName = rowKind === 1 ? 'tableHeader' : rowKind === 2 ? 'tableDelimiter' : 'tableData';\n  // `markdown-rs` uses:\n  // rowKind === 2 ? 'tableDelimiterCellValue' : 'tableCellText'\n  const valueName = 'tableContent';\n\n  // Insert an exit for the previous cell, if there is one.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //          ^-- exit\n  //           ^^^^-- this cell\n  // ```\n  if (range[0] !== 0) {\n    previousCell.end = Object.assign({}, getPoint(context.events, range[0]));\n    map.add(range[0], 0, [['exit', previousCell, context]]);\n  }\n\n  // Insert enter of this cell.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //           ^-- enter\n  //           ^^^^-- this cell\n  // ```\n  const now = getPoint(context.events, range[1]);\n  previousCell = {\n    type: groupName,\n    start: Object.assign({}, now),\n    // Note: correct end is set later.\n    end: Object.assign({}, now)\n  };\n  map.add(range[1], 0, [['enter', previousCell, context]]);\n\n  // Insert text start at first data start and end at last data end, and\n  // remove events between.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //            ^-- enter\n  //             ^-- exit\n  //           ^^^^-- this cell\n  // ```\n  if (range[2] !== 0) {\n    const relatedStart = getPoint(context.events, range[2]);\n    const relatedEnd = getPoint(context.events, range[3]);\n    /** @type {Token} */\n    const valueToken = {\n      type: valueName,\n      start: Object.assign({}, relatedStart),\n      end: Object.assign({}, relatedEnd)\n    };\n    map.add(range[2], 0, [['enter', valueToken, context]]);\n    if (rowKind !== 2) {\n      // Fix positional info on remaining events\n      const start = context.events[range[2]];\n      const end = context.events[range[3]];\n      start[1].end = Object.assign({}, end[1].end);\n      start[1].type = \"chunkText\";\n      start[1].contentType = \"text\";\n\n      // Remove if needed.\n      if (range[3] > range[2] + 1) {\n        const a = range[2] + 1;\n        const b = range[3] - range[2] - 1;\n        map.add(a, b, []);\n      }\n    }\n    map.add(range[3] + 1, 0, [['exit', valueToken, context]]);\n  }\n\n  // Insert an exit for the last cell, if at the row end.\n  //\n  // ```markdown\n  // > | | aa | bb | cc |\n  //                    ^-- exit\n  //               ^^^^^^-- this cell (the last one contains two â€œbetweenâ€ parts)\n  // ```\n  if (rowEnd !== undefined) {\n    previousCell.end = Object.assign({}, getPoint(context.events, rowEnd));\n    map.add(rowEnd, 0, [['exit', previousCell, context]]);\n    previousCell = undefined;\n  }\n  return previousCell;\n}\n\n/**\n * Generate table end (and table body end).\n *\n * @param {Readonly<EditMap>} map\n * @param {Readonly<TokenizeContext>} context\n * @param {number} index\n * @param {Token} table\n * @param {Token | undefined} tableBody\n */\n// eslint-disable-next-line max-params\nfunction flushTableEnd(map, context, index, table, tableBody) {\n  /** @type {Array<Event>} */\n  const exits = [];\n  const related = getPoint(context.events, index);\n  if (tableBody) {\n    tableBody.end = Object.assign({}, related);\n    exits.push(['exit', tableBody, context]);\n  }\n  table.end = Object.assign({}, related);\n  exits.push(['exit', table, context]);\n  map.add(index + 1, 0, exits);\n}\n\n/**\n * @param {Readonly<Array<Event>>} events\n * @param {number} index\n * @returns {Readonly<Point>}\n */\nfunction getPoint(events, index) {\n  const event = events[index];\n  const side = event[0] === 'enter' ? 'start' : 'end';\n  return event[1][side];\n}","/**\n * @import {Extension, State, TokenizeContext, Tokenizer} from 'micromark-util-types'\n */\n\nimport { factorySpace } from 'micromark-factory-space';\nimport { markdownLineEnding, markdownLineEndingOrSpace, markdownSpace } from 'micromark-util-character';\nconst tasklistCheck = {\n  name: 'tasklistCheck',\n  tokenize: tokenizeTasklistCheck\n};\n\n/**\n * Create an HTML extension for `micromark` to support GFM task list items\n * syntax.\n *\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `htmlExtensions` to\n *   support GFM task list items when serializing to HTML.\n */\nexport function gfmTaskListItem() {\n  return {\n    text: {\n      [91]: tasklistCheck\n    }\n  };\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction tokenizeTasklistCheck(effects, ok, nok) {\n  const self = this;\n  return open;\n\n  /**\n   * At start of task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *       ^\n   * ```\n   *\n   * @type {State}\n   */\n  function open(code) {\n    if (\n    // Exit if thereâ€™s stuff before.\n    self.previous !== null ||\n    // Exit if not in the first content that is the first child of a list\n    // item.\n    !self._gfmTasklistFirstContentOfListItem) {\n      return nok(code);\n    }\n    effects.enter('taskListCheck');\n    effects.enter('taskListCheckMarker');\n    effects.consume(code);\n    effects.exit('taskListCheckMarker');\n    return inside;\n  }\n\n  /**\n   * In task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *        ^\n   * ```\n   *\n   * @type {State}\n   */\n  function inside(code) {\n    // Currently we match how GH works in files.\n    // To match how GH works in comments, use `markdownSpace` (`[\\t ]`) instead\n    // of `markdownLineEndingOrSpace` (`[\\t\\n\\r ]`).\n    if (markdownLineEndingOrSpace(code)) {\n      effects.enter('taskListCheckValueUnchecked');\n      effects.consume(code);\n      effects.exit('taskListCheckValueUnchecked');\n      return close;\n    }\n    if (code === 88 || code === 120) {\n      effects.enter('taskListCheckValueChecked');\n      effects.consume(code);\n      effects.exit('taskListCheckValueChecked');\n      return close;\n    }\n    return nok(code);\n  }\n\n  /**\n   * At close of task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *         ^\n   * ```\n   *\n   * @type {State}\n   */\n  function close(code) {\n    if (code === 93) {\n      effects.enter('taskListCheckMarker');\n      effects.consume(code);\n      effects.exit('taskListCheckMarker');\n      effects.exit('taskListCheck');\n      return after;\n    }\n    return nok(code);\n  }\n\n  /**\n   * @type {State}\n   */\n  function after(code) {\n    // EOL in paragraph means there must be something else after it.\n    if (markdownLineEnding(code)) {\n      return ok(code);\n    }\n\n    // Space or tab?\n    // Check what comes after.\n    if (markdownSpace(code)) {\n      return effects.check({\n        tokenize: spaceThenNonSpace\n      }, ok, nok)(code);\n    }\n\n    // EOF, or non-whitespace, both wrong.\n    return nok(code);\n  }\n}\n\n/**\n * @this {TokenizeContext}\n * @type {Tokenizer}\n */\nfunction spaceThenNonSpace(effects, ok, nok) {\n  return factorySpace(effects, after, \"whitespace\");\n\n  /**\n   * After whitespace, after task list item check.\n   *\n   * ```markdown\n   * > | * [x] y.\n   *           ^\n   * ```\n   *\n   * @type {State}\n   */\n  function after(code) {\n    // EOF means there was nothing, so bad.\n    // EOL means thereâ€™s content after it, so good.\n    // Impossible to have more spaces.\n    // Anything else is good.\n    return code === null ? nok(code) : ok(code);\n  }\n}","/**\n * @typedef {import('micromark-extension-gfm-footnote').HtmlOptions} HtmlOptions\n * @typedef {import('micromark-extension-gfm-strikethrough').Options} Options\n * @typedef {import('micromark-util-types').Extension} Extension\n * @typedef {import('micromark-util-types').HtmlExtension} HtmlExtension\n */\n\nimport {\n  combineExtensions,\n  combineHtmlExtensions\n} from 'micromark-util-combine-extensions'\nimport {\n  gfmAutolinkLiteral,\n  gfmAutolinkLiteralHtml\n} from 'micromark-extension-gfm-autolink-literal'\nimport {gfmFootnote, gfmFootnoteHtml} from 'micromark-extension-gfm-footnote'\nimport {\n  gfmStrikethrough,\n  gfmStrikethroughHtml\n} from 'micromark-extension-gfm-strikethrough'\nimport {gfmTable, gfmTableHtml} from 'micromark-extension-gfm-table'\nimport {gfmTagfilterHtml} from 'micromark-extension-gfm-tagfilter'\nimport {\n  gfmTaskListItem,\n  gfmTaskListItemHtml\n} from 'micromark-extension-gfm-task-list-item'\n\n/**\n * Create an extension for `micromark` to enable GFM syntax.\n *\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n *\n *   Passed to `micromark-extens-gfm-strikethrough`.\n * @returns {Extension}\n *   Extension for `micromark` that can be passed in `extensions` to enable GFM\n *   syntax.\n */\nexport function gfm(options) {\n  return combineExtensions([\n    gfmAutolinkLiteral(),\n    gfmFootnote(),\n    gfmStrikethrough(options),\n    gfmTable(),\n    gfmTaskListItem()\n  ])\n}\n\n/**\n * Create an extension for `micromark` to support GFM when serializing to HTML.\n *\n * @param {HtmlOptions | null | undefined} [options]\n *   Configuration (optional).\n *\n *   Passed to `micromark-extens-gfm-footnote`.\n * @returns {HtmlExtension}\n *   Extension for `micromark` that can be passed in `htmlExtensions` to\n *   support GFM when serializing to HTML.\n */\nexport function gfmHtml(options) {\n  return combineHtmlExtensions([\n    gfmAutolinkLiteralHtml(),\n    gfmFootnoteHtml(options),\n    gfmStrikethroughHtml(),\n    gfmTableHtml(),\n    gfmTagfilterHtml(),\n    gfmTaskListItemHtml()\n  ])\n}\n","/**\n * @import {Root} from 'mdast'\n * @import {Options} from 'remark-gfm'\n * @import {} from 'remark-parse'\n * @import {} from 'remark-stringify'\n * @import {Processor} from 'unified'\n */\n\nimport {gfmFromMarkdown, gfmToMarkdown} from 'mdast-util-gfm'\nimport {gfm} from 'micromark-extension-gfm'\n\n/** @type {Options} */\nconst emptyOptions = {}\n\n/**\n * Add support GFM (autolink literals, footnotes, strikethrough, tables,\n * tasklists).\n *\n * @param {Options | null | undefined} [options]\n *   Configuration (optional).\n * @returns {undefined}\n *   Nothing.\n */\nexport default function remarkGfm(options) {\n  // @ts-expect-error: TS is wrong about `this`.\n  // eslint-disable-next-line unicorn/no-this-assignment\n  const self = /** @type {Processor<Root>} */ (this)\n  const settings = options || emptyOptions\n  const data = self.data()\n\n  const micromarkExtensions =\n    data.micromarkExtensions || (data.micromarkExtensions = [])\n  const fromMarkdownExtensions =\n    data.fromMarkdownExtensions || (data.fromMarkdownExtensions = [])\n  const toMarkdownExtensions =\n    data.toMarkdownExtensions || (data.toMarkdownExtensions = [])\n\n  micromarkExtensions.push(gfm(settings))\n  fromMarkdownExtensions.push(gfmFromMarkdown())\n  toMarkdownExtensions.push(gfmToMarkdown(settings))\n}\n","/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */\n\nconst {\n  entries,\n  setPrototypeOf,\n  isFrozen,\n  getPrototypeOf,\n  getOwnPropertyDescriptor\n} = Object;\nlet {\n  freeze,\n  seal,\n  create\n} = Object; // eslint-disable-line import/no-mutable-exports\nlet {\n  apply,\n  construct\n} = typeof Reflect !== 'undefined' && Reflect;\nif (!freeze) {\n  freeze = function freeze(x) {\n    return x;\n  };\n}\nif (!seal) {\n  seal = function seal(x) {\n    return x;\n  };\n}\nif (!apply) {\n  apply = function apply(fun, thisValue, args) {\n    return fun.apply(thisValue, args);\n  };\n}\nif (!construct) {\n  construct = function construct(Func, args) {\n    return new Func(...args);\n  };\n}\nconst arrayForEach = unapply(Array.prototype.forEach);\nconst arrayLastIndexOf = unapply(Array.prototype.lastIndexOf);\nconst arrayPop = unapply(Array.prototype.pop);\nconst arrayPush = unapply(Array.prototype.push);\nconst arraySplice = unapply(Array.prototype.splice);\nconst stringToLowerCase = unapply(String.prototype.toLowerCase);\nconst stringToString = unapply(String.prototype.toString);\nconst stringMatch = unapply(String.prototype.match);\nconst stringReplace = unapply(String.prototype.replace);\nconst stringIndexOf = unapply(String.prototype.indexOf);\nconst stringTrim = unapply(String.prototype.trim);\nconst objectHasOwnProperty = unapply(Object.prototype.hasOwnProperty);\nconst regExpTest = unapply(RegExp.prototype.test);\nconst typeErrorCreate = unconstruct(TypeError);\n/**\n * Creates a new function that calls the given function with a specified thisArg and arguments.\n *\n * @param func - The function to be wrapped and called.\n * @returns A new function that calls the given function with a specified thisArg and arguments.\n */\nfunction unapply(func) {\n  return function (thisArg) {\n    if (thisArg instanceof RegExp) {\n      thisArg.lastIndex = 0;\n    }\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    return apply(func, thisArg, args);\n  };\n}\n/**\n * Creates a new function that constructs an instance of the given constructor function with the provided arguments.\n *\n * @param func - The constructor function to be wrapped and called.\n * @returns A new function that constructs an instance of the given constructor function with the provided arguments.\n */\nfunction unconstruct(func) {\n  return function () {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    return construct(func, args);\n  };\n}\n/**\n * Add properties to a lookup table\n *\n * @param set - The set to which elements will be added.\n * @param array - The array containing elements to be added to the set.\n * @param transformCaseFunc - An optional function to transform the case of each element before adding to the set.\n * @returns The modified set with added elements.\n */\nfunction addToSet(set, array) {\n  let transformCaseFunc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : stringToLowerCase;\n  if (setPrototypeOf) {\n    // Make 'in' and truthy checks like Boolean(set.constructor)\n    // independent of any properties defined on Object.prototype.\n    // Prevent prototype setters from intercepting set as a this value.\n    setPrototypeOf(set, null);\n  }\n  let l = array.length;\n  while (l--) {\n    let element = array[l];\n    if (typeof element === 'string') {\n      const lcElement = transformCaseFunc(element);\n      if (lcElement !== element) {\n        // Config presets (e.g. tags.js, attrs.js) are immutable.\n        if (!isFrozen(array)) {\n          array[l] = lcElement;\n        }\n        element = lcElement;\n      }\n    }\n    set[element] = true;\n  }\n  return set;\n}\n/**\n * Clean up an array to harden against CSPP\n *\n * @param array - The array to be cleaned.\n * @returns The cleaned version of the array\n */\nfunction cleanArray(array) {\n  for (let index = 0; index < array.length; index++) {\n    const isPropertyExist = objectHasOwnProperty(array, index);\n    if (!isPropertyExist) {\n      array[index] = null;\n    }\n  }\n  return array;\n}\n/**\n * Shallow clone an object\n *\n * @param object - The object to be cloned.\n * @returns A new object that copies the original.\n */\nfunction clone(object) {\n  const newObject = create(null);\n  for (const [property, value] of entries(object)) {\n    const isPropertyExist = objectHasOwnProperty(object, property);\n    if (isPropertyExist) {\n      if (Array.isArray(value)) {\n        newObject[property] = cleanArray(value);\n      } else if (value && typeof value === 'object' && value.constructor === Object) {\n        newObject[property] = clone(value);\n      } else {\n        newObject[property] = value;\n      }\n    }\n  }\n  return newObject;\n}\n/**\n * This method automatically checks if the prop is function or getter and behaves accordingly.\n *\n * @param object - The object to look up the getter function in its prototype chain.\n * @param prop - The property name for which to find the getter function.\n * @returns The getter function found in the prototype chain or a fallback function.\n */\nfunction lookupGetter(object, prop) {\n  while (object !== null) {\n    const desc = getOwnPropertyDescriptor(object, prop);\n    if (desc) {\n      if (desc.get) {\n        return unapply(desc.get);\n      }\n      if (typeof desc.value === 'function') {\n        return unapply(desc.value);\n      }\n    }\n    object = getPrototypeOf(object);\n  }\n  function fallbackValue() {\n    return null;\n  }\n  return fallbackValue;\n}\n\nconst html$1 = freeze(['a', 'abbr', 'acronym', 'address', 'area', 'article', 'aside', 'audio', 'b', 'bdi', 'bdo', 'big', 'blink', 'blockquote', 'body', 'br', 'button', 'canvas', 'caption', 'center', 'cite', 'code', 'col', 'colgroup', 'content', 'data', 'datalist', 'dd', 'decorator', 'del', 'details', 'dfn', 'dialog', 'dir', 'div', 'dl', 'dt', 'element', 'em', 'fieldset', 'figcaption', 'figure', 'font', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'head', 'header', 'hgroup', 'hr', 'html', 'i', 'img', 'input', 'ins', 'kbd', 'label', 'legend', 'li', 'main', 'map', 'mark', 'marquee', 'menu', 'menuitem', 'meter', 'nav', 'nobr', 'ol', 'optgroup', 'option', 'output', 'p', 'picture', 'pre', 'progress', 'q', 'rp', 'rt', 'ruby', 's', 'samp', 'section', 'select', 'shadow', 'small', 'source', 'spacer', 'span', 'strike', 'strong', 'style', 'sub', 'summary', 'sup', 'table', 'tbody', 'td', 'template', 'textarea', 'tfoot', 'th', 'thead', 'time', 'tr', 'track', 'tt', 'u', 'ul', 'var', 'video', 'wbr']);\nconst svg$1 = freeze(['svg', 'a', 'altglyph', 'altglyphdef', 'altglyphitem', 'animatecolor', 'animatemotion', 'animatetransform', 'circle', 'clippath', 'defs', 'desc', 'ellipse', 'filter', 'font', 'g', 'glyph', 'glyphref', 'hkern', 'image', 'line', 'lineargradient', 'marker', 'mask', 'metadata', 'mpath', 'path', 'pattern', 'polygon', 'polyline', 'radialgradient', 'rect', 'stop', 'style', 'switch', 'symbol', 'text', 'textpath', 'title', 'tref', 'tspan', 'view', 'vkern']);\nconst svgFilters = freeze(['feBlend', 'feColorMatrix', 'feComponentTransfer', 'feComposite', 'feConvolveMatrix', 'feDiffuseLighting', 'feDisplacementMap', 'feDistantLight', 'feDropShadow', 'feFlood', 'feFuncA', 'feFuncB', 'feFuncG', 'feFuncR', 'feGaussianBlur', 'feImage', 'feMerge', 'feMergeNode', 'feMorphology', 'feOffset', 'fePointLight', 'feSpecularLighting', 'feSpotLight', 'feTile', 'feTurbulence']);\n// List of SVG elements that are disallowed by default.\n// We still need to know them so that we can do namespace\n// checks properly in case one wants to add them to\n// allow-list.\nconst svgDisallowed = freeze(['animate', 'color-profile', 'cursor', 'discard', 'font-face', 'font-face-format', 'font-face-name', 'font-face-src', 'font-face-uri', 'foreignobject', 'hatch', 'hatchpath', 'mesh', 'meshgradient', 'meshpatch', 'meshrow', 'missing-glyph', 'script', 'set', 'solidcolor', 'unknown', 'use']);\nconst mathMl$1 = freeze(['math', 'menclose', 'merror', 'mfenced', 'mfrac', 'mglyph', 'mi', 'mlabeledtr', 'mmultiscripts', 'mn', 'mo', 'mover', 'mpadded', 'mphantom', 'mroot', 'mrow', 'ms', 'mspace', 'msqrt', 'mstyle', 'msub', 'msup', 'msubsup', 'mtable', 'mtd', 'mtext', 'mtr', 'munder', 'munderover', 'mprescripts']);\n// Similarly to SVG, we want to know all MathML elements,\n// even those that we disallow by default.\nconst mathMlDisallowed = freeze(['maction', 'maligngroup', 'malignmark', 'mlongdiv', 'mscarries', 'mscarry', 'msgroup', 'mstack', 'msline', 'msrow', 'semantics', 'annotation', 'annotation-xml', 'mprescripts', 'none']);\nconst text = freeze(['#text']);\n\nconst html = freeze(['accept', 'action', 'align', 'alt', 'autocapitalize', 'autocomplete', 'autopictureinpicture', 'autoplay', 'background', 'bgcolor', 'border', 'capture', 'cellpadding', 'cellspacing', 'checked', 'cite', 'class', 'clear', 'color', 'cols', 'colspan', 'controls', 'controlslist', 'coords', 'crossorigin', 'datetime', 'decoding', 'default', 'dir', 'disabled', 'disablepictureinpicture', 'disableremoteplayback', 'download', 'draggable', 'enctype', 'enterkeyhint', 'face', 'for', 'headers', 'height', 'hidden', 'high', 'href', 'hreflang', 'id', 'inputmode', 'integrity', 'ismap', 'kind', 'label', 'lang', 'list', 'loading', 'loop', 'low', 'max', 'maxlength', 'media', 'method', 'min', 'minlength', 'multiple', 'muted', 'name', 'nonce', 'noshade', 'novalidate', 'nowrap', 'open', 'optimum', 'pattern', 'placeholder', 'playsinline', 'popover', 'popovertarget', 'popovertargetaction', 'poster', 'preload', 'pubdate', 'radiogroup', 'readonly', 'rel', 'required', 'rev', 'reversed', 'role', 'rows', 'rowspan', 'spellcheck', 'scope', 'selected', 'shape', 'size', 'sizes', 'span', 'srclang', 'start', 'src', 'srcset', 'step', 'style', 'summary', 'tabindex', 'title', 'translate', 'type', 'usemap', 'valign', 'value', 'width', 'wrap', 'xmlns', 'slot']);\nconst svg = freeze(['accent-height', 'accumulate', 'additive', 'alignment-baseline', 'amplitude', 'ascent', 'attributename', 'attributetype', 'azimuth', 'basefrequency', 'baseline-shift', 'begin', 'bias', 'by', 'class', 'clip', 'clippathunits', 'clip-path', 'clip-rule', 'color', 'color-interpolation', 'color-interpolation-filters', 'color-profile', 'color-rendering', 'cx', 'cy', 'd', 'dx', 'dy', 'diffuseconstant', 'direction', 'display', 'divisor', 'dur', 'edgemode', 'elevation', 'end', 'exponent', 'fill', 'fill-opacity', 'fill-rule', 'filter', 'filterunits', 'flood-color', 'flood-opacity', 'font-family', 'font-size', 'font-size-adjust', 'font-stretch', 'font-style', 'font-variant', 'font-weight', 'fx', 'fy', 'g1', 'g2', 'glyph-name', 'glyphref', 'gradientunits', 'gradienttransform', 'height', 'href', 'id', 'image-rendering', 'in', 'in2', 'intercept', 'k', 'k1', 'k2', 'k3', 'k4', 'kerning', 'keypoints', 'keysplines', 'keytimes', 'lang', 'lengthadjust', 'letter-spacing', 'kernelmatrix', 'kernelunitlength', 'lighting-color', 'local', 'marker-end', 'marker-mid', 'marker-start', 'markerheight', 'markerunits', 'markerwidth', 'maskcontentunits', 'maskunits', 'max', 'mask', 'media', 'method', 'mode', 'min', 'name', 'numoctaves', 'offset', 'operator', 'opacity', 'order', 'orient', 'orientation', 'origin', 'overflow', 'paint-order', 'path', 'pathlength', 'patterncontentunits', 'patterntransform', 'patternunits', 'points', 'preservealpha', 'preserveaspectratio', 'primitiveunits', 'r', 'rx', 'ry', 'radius', 'refx', 'refy', 'repeatcount', 'repeatdur', 'restart', 'result', 'rotate', 'scale', 'seed', 'shape-rendering', 'slope', 'specularconstant', 'specularexponent', 'spreadmethod', 'startoffset', 'stddeviation', 'stitchtiles', 'stop-color', 'stop-opacity', 'stroke-dasharray', 'stroke-dashoffset', 'stroke-linecap', 'stroke-linejoin', 'stroke-miterlimit', 'stroke-opacity', 'stroke', 'stroke-width', 'style', 'surfacescale', 'systemlanguage', 'tabindex', 'tablevalues', 'targetx', 'targety', 'transform', 'transform-origin', 'text-anchor', 'text-decoration', 'text-rendering', 'textlength', 'type', 'u1', 'u2', 'unicode', 'values', 'viewbox', 'visibility', 'version', 'vert-adv-y', 'vert-origin-x', 'vert-origin-y', 'width', 'word-spacing', 'wrap', 'writing-mode', 'xchannelselector', 'ychannelselector', 'x', 'x1', 'x2', 'xmlns', 'y', 'y1', 'y2', 'z', 'zoomandpan']);\nconst mathMl = freeze(['accent', 'accentunder', 'align', 'bevelled', 'close', 'columnsalign', 'columnlines', 'columnspan', 'denomalign', 'depth', 'dir', 'display', 'displaystyle', 'encoding', 'fence', 'frame', 'height', 'href', 'id', 'largeop', 'length', 'linethickness', 'lspace', 'lquote', 'mathbackground', 'mathcolor', 'mathsize', 'mathvariant', 'maxsize', 'minsize', 'movablelimits', 'notation', 'numalign', 'open', 'rowalign', 'rowlines', 'rowspacing', 'rowspan', 'rspace', 'rquote', 'scriptlevel', 'scriptminsize', 'scriptsizemultiplier', 'selection', 'separator', 'separators', 'stretchy', 'subscriptshift', 'supscriptshift', 'symmetric', 'voffset', 'width', 'xmlns']);\nconst xml = freeze(['xlink:href', 'xml:id', 'xlink:title', 'xml:space', 'xmlns:xlink']);\n\n// eslint-disable-next-line unicorn/better-regex\nconst MUSTACHE_EXPR = seal(/\\{\\{[\\w\\W]*|[\\w\\W]*\\}\\}/gm); // Specify template detection regex for SAFE_FOR_TEMPLATES mode\nconst ERB_EXPR = seal(/<%[\\w\\W]*|[\\w\\W]*%>/gm);\nconst TMPLIT_EXPR = seal(/\\$\\{[\\w\\W]*/gm); // eslint-disable-line unicorn/better-regex\nconst DATA_ATTR = seal(/^data-[\\-\\w.\\u00B7-\\uFFFF]+$/); // eslint-disable-line no-useless-escape\nconst ARIA_ATTR = seal(/^aria-[\\-\\w]+$/); // eslint-disable-line no-useless-escape\nconst IS_ALLOWED_URI = seal(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\\-]+(?:[^a-z+.\\-:]|$))/i // eslint-disable-line no-useless-escape\n);\nconst IS_SCRIPT_OR_DATA = seal(/^(?:\\w+script|data):/i);\nconst ATTR_WHITESPACE = seal(/[\\u0000-\\u0020\\u00A0\\u1680\\u180E\\u2000-\\u2029\\u205F\\u3000]/g // eslint-disable-line no-control-regex\n);\nconst DOCTYPE_NAME = seal(/^html$/i);\nconst CUSTOM_ELEMENT = seal(/^[a-z][.\\w]*(-[.\\w]+)+$/i);\n\nvar EXPRESSIONS = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  ARIA_ATTR: ARIA_ATTR,\n  ATTR_WHITESPACE: ATTR_WHITESPACE,\n  CUSTOM_ELEMENT: CUSTOM_ELEMENT,\n  DATA_ATTR: DATA_ATTR,\n  DOCTYPE_NAME: DOCTYPE_NAME,\n  ERB_EXPR: ERB_EXPR,\n  IS_ALLOWED_URI: IS_ALLOWED_URI,\n  IS_SCRIPT_OR_DATA: IS_SCRIPT_OR_DATA,\n  MUSTACHE_EXPR: MUSTACHE_EXPR,\n  TMPLIT_EXPR: TMPLIT_EXPR\n});\n\n/* eslint-disable @typescript-eslint/indent */\n// https://developer.mozilla.org/en-US/docs/Web/API/Node/nodeType\nconst NODE_TYPE = {\n  element: 1,\n  attribute: 2,\n  text: 3,\n  cdataSection: 4,\n  entityReference: 5,\n  // Deprecated\n  entityNode: 6,\n  // Deprecated\n  progressingInstruction: 7,\n  comment: 8,\n  document: 9,\n  documentType: 10,\n  documentFragment: 11,\n  notation: 12 // Deprecated\n};\nconst getGlobal = function getGlobal() {\n  return typeof window === 'undefined' ? null : window;\n};\n/**\n * Creates a no-op policy for internal use only.\n * Don't export this function outside this module!\n * @param trustedTypes The policy factory.\n * @param purifyHostElement The Script element used to load DOMPurify (to determine policy name suffix).\n * @return The policy created (or null, if Trusted Types\n * are not supported or creating the policy failed).\n */\nconst _createTrustedTypesPolicy = function _createTrustedTypesPolicy(trustedTypes, purifyHostElement) {\n  if (typeof trustedTypes !== 'object' || typeof trustedTypes.createPolicy !== 'function') {\n    return null;\n  }\n  // Allow the callers to control the unique policy name\n  // by adding a data-tt-policy-suffix to the script element with the DOMPurify.\n  // Policy creation with duplicate names throws in Trusted Types.\n  let suffix = null;\n  const ATTR_NAME = 'data-tt-policy-suffix';\n  if (purifyHostElement && purifyHostElement.hasAttribute(ATTR_NAME)) {\n    suffix = purifyHostElement.getAttribute(ATTR_NAME);\n  }\n  const policyName = 'dompurify' + (suffix ? '#' + suffix : '');\n  try {\n    return trustedTypes.createPolicy(policyName, {\n      createHTML(html) {\n        return html;\n      },\n      createScriptURL(scriptUrl) {\n        return scriptUrl;\n      }\n    });\n  } catch (_) {\n    // Policy creation failed (most likely another DOMPurify script has\n    // already run). Skip creating the policy, as this will only cause errors\n    // if TT are enforced.\n    console.warn('TrustedTypes policy ' + policyName + ' could not be created.');\n    return null;\n  }\n};\nconst _createHooksMap = function _createHooksMap() {\n  return {\n    afterSanitizeAttributes: [],\n    afterSanitizeElements: [],\n    afterSanitizeShadowDOM: [],\n    beforeSanitizeAttributes: [],\n    beforeSanitizeElements: [],\n    beforeSanitizeShadowDOM: [],\n    uponSanitizeAttribute: [],\n    uponSanitizeElement: [],\n    uponSanitizeShadowNode: []\n  };\n};\nfunction createDOMPurify() {\n  let window = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : getGlobal();\n  const DOMPurify = root => createDOMPurify(root);\n  DOMPurify.version = '3.2.6';\n  DOMPurify.removed = [];\n  if (!window || !window.document || window.document.nodeType !== NODE_TYPE.document || !window.Element) {\n    // Not running in a browser, provide a factory function\n    // so that you can pass your own Window\n    DOMPurify.isSupported = false;\n    return DOMPurify;\n  }\n  let {\n    document\n  } = window;\n  const originalDocument = document;\n  const currentScript = originalDocument.currentScript;\n  const {\n    DocumentFragment,\n    HTMLTemplateElement,\n    Node,\n    Element,\n    NodeFilter,\n    NamedNodeMap = window.NamedNodeMap || window.MozNamedAttrMap,\n    HTMLFormElement,\n    DOMParser,\n    trustedTypes\n  } = window;\n  const ElementPrototype = Element.prototype;\n  const cloneNode = lookupGetter(ElementPrototype, 'cloneNode');\n  const remove = lookupGetter(ElementPrototype, 'remove');\n  const getNextSibling = lookupGetter(ElementPrototype, 'nextSibling');\n  const getChildNodes = lookupGetter(ElementPrototype, 'childNodes');\n  const getParentNode = lookupGetter(ElementPrototype, 'parentNode');\n  // As per issue #47, the web-components registry is inherited by a\n  // new document created via createHTMLDocument. As per the spec\n  // (http://w3c.github.io/webcomponents/spec/custom/#creating-and-passing-registries)\n  // a new empty registry is used when creating a template contents owner\n  // document, so we use that as our parent document to ensure nothing\n  // is inherited.\n  if (typeof HTMLTemplateElement === 'function') {\n    const template = document.createElement('template');\n    if (template.content && template.content.ownerDocument) {\n      document = template.content.ownerDocument;\n    }\n  }\n  let trustedTypesPolicy;\n  let emptyHTML = '';\n  const {\n    implementation,\n    createNodeIterator,\n    createDocumentFragment,\n    getElementsByTagName\n  } = document;\n  const {\n    importNode\n  } = originalDocument;\n  let hooks = _createHooksMap();\n  /**\n   * Expose whether this browser supports running the full DOMPurify.\n   */\n  DOMPurify.isSupported = typeof entries === 'function' && typeof getParentNode === 'function' && implementation && implementation.createHTMLDocument !== undefined;\n  const {\n    MUSTACHE_EXPR,\n    ERB_EXPR,\n    TMPLIT_EXPR,\n    DATA_ATTR,\n    ARIA_ATTR,\n    IS_SCRIPT_OR_DATA,\n    ATTR_WHITESPACE,\n    CUSTOM_ELEMENT\n  } = EXPRESSIONS;\n  let {\n    IS_ALLOWED_URI: IS_ALLOWED_URI$1\n  } = EXPRESSIONS;\n  /**\n   * We consider the elements and attributes below to be safe. Ideally\n   * don't add any new ones but feel free to remove unwanted ones.\n   */\n  /* allowed element names */\n  let ALLOWED_TAGS = null;\n  const DEFAULT_ALLOWED_TAGS = addToSet({}, [...html$1, ...svg$1, ...svgFilters, ...mathMl$1, ...text]);\n  /* Allowed attribute names */\n  let ALLOWED_ATTR = null;\n  const DEFAULT_ALLOWED_ATTR = addToSet({}, [...html, ...svg, ...mathMl, ...xml]);\n  /*\n   * Configure how DOMPurify should handle custom elements and their attributes as well as customized built-in elements.\n   * @property {RegExp|Function|null} tagNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any custom elements)\n   * @property {RegExp|Function|null} attributeNameCheck one of [null, regexPattern, predicate]. Default: `null` (disallow any attributes not on the allow list)\n   * @property {boolean} allowCustomizedBuiltInElements allow custom elements derived from built-ins if they pass CUSTOM_ELEMENT_HANDLING.tagNameCheck. Default: `false`.\n   */\n  let CUSTOM_ELEMENT_HANDLING = Object.seal(create(null, {\n    tagNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    attributeNameCheck: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: null\n    },\n    allowCustomizedBuiltInElements: {\n      writable: true,\n      configurable: false,\n      enumerable: true,\n      value: false\n    }\n  }));\n  /* Explicitly forbidden tags (overrides ALLOWED_TAGS/ADD_TAGS) */\n  let FORBID_TAGS = null;\n  /* Explicitly forbidden attributes (overrides ALLOWED_ATTR/ADD_ATTR) */\n  let FORBID_ATTR = null;\n  /* Decide if ARIA attributes are okay */\n  let ALLOW_ARIA_ATTR = true;\n  /* Decide if custom data attributes are okay */\n  let ALLOW_DATA_ATTR = true;\n  /* Decide if unknown protocols are okay */\n  let ALLOW_UNKNOWN_PROTOCOLS = false;\n  /* Decide if self-closing tags in attributes are allowed.\n   * Usually removed due to a mXSS issue in jQuery 3.0 */\n  let ALLOW_SELF_CLOSE_IN_ATTR = true;\n  /* Output should be safe for common template engines.\n   * This means, DOMPurify removes data attributes, mustaches and ERB\n   */\n  let SAFE_FOR_TEMPLATES = false;\n  /* Output should be safe even for XML used within HTML and alike.\n   * This means, DOMPurify removes comments when containing risky content.\n   */\n  let SAFE_FOR_XML = true;\n  /* Decide if document with <html>... should be returned */\n  let WHOLE_DOCUMENT = false;\n  /* Track whether config is already set on this instance of DOMPurify. */\n  let SET_CONFIG = false;\n  /* Decide if all elements (e.g. style, script) must be children of\n   * document.body. By default, browsers might move them to document.head */\n  let FORCE_BODY = false;\n  /* Decide if a DOM `HTMLBodyElement` should be returned, instead of a html\n   * string (or a TrustedHTML object if Trusted Types are supported).\n   * If `WHOLE_DOCUMENT` is enabled a `HTMLHtmlElement` will be returned instead\n   */\n  let RETURN_DOM = false;\n  /* Decide if a DOM `DocumentFragment` should be returned, instead of a html\n   * string  (or a TrustedHTML object if Trusted Types are supported) */\n  let RETURN_DOM_FRAGMENT = false;\n  /* Try to return a Trusted Type object instead of a string, return a string in\n   * case Trusted Types are not supported  */\n  let RETURN_TRUSTED_TYPE = false;\n  /* Output should be free from DOM clobbering attacks?\n   * This sanitizes markups named with colliding, clobberable built-in DOM APIs.\n   */\n  let SANITIZE_DOM = true;\n  /* Achieve full DOM Clobbering protection by isolating the namespace of named\n   * properties and JS variables, mitigating attacks that abuse the HTML/DOM spec rules.\n   *\n   * HTML/DOM spec rules that enable DOM Clobbering:\n   *   - Named Access on Window (Â§7.3.3)\n   *   - DOM Tree Accessors (Â§3.1.5)\n   *   - Form Element Parent-Child Relations (Â§4.10.3)\n   *   - Iframe srcdoc / Nested WindowProxies (Â§4.8.5)\n   *   - HTMLCollection (Â§4.2.10.2)\n   *\n   * Namespace isolation is implemented by prefixing `id` and `name` attributes\n   * with a constant string, i.e., `user-content-`\n   */\n  let SANITIZE_NAMED_PROPS = false;\n  const SANITIZE_NAMED_PROPS_PREFIX = 'user-content-';\n  /* Keep element content when removing element? */\n  let KEEP_CONTENT = true;\n  /* If a `Node` is passed to sanitize(), then performs sanitization in-place instead\n   * of importing it into a new Document and returning a sanitized copy */\n  let IN_PLACE = false;\n  /* Allow usage of profiles like html, svg and mathMl */\n  let USE_PROFILES = {};\n  /* Tags to ignore content of when KEEP_CONTENT is true */\n  let FORBID_CONTENTS = null;\n  const DEFAULT_FORBID_CONTENTS = addToSet({}, ['annotation-xml', 'audio', 'colgroup', 'desc', 'foreignobject', 'head', 'iframe', 'math', 'mi', 'mn', 'mo', 'ms', 'mtext', 'noembed', 'noframes', 'noscript', 'plaintext', 'script', 'style', 'svg', 'template', 'thead', 'title', 'video', 'xmp']);\n  /* Tags that are safe for data: URIs */\n  let DATA_URI_TAGS = null;\n  const DEFAULT_DATA_URI_TAGS = addToSet({}, ['audio', 'video', 'img', 'source', 'image', 'track']);\n  /* Attributes safe for values like \"javascript:\" */\n  let URI_SAFE_ATTRIBUTES = null;\n  const DEFAULT_URI_SAFE_ATTRIBUTES = addToSet({}, ['alt', 'class', 'for', 'id', 'label', 'name', 'pattern', 'placeholder', 'role', 'summary', 'title', 'value', 'style', 'xmlns']);\n  const MATHML_NAMESPACE = 'http://www.w3.org/1998/Math/MathML';\n  const SVG_NAMESPACE = 'http://www.w3.org/2000/svg';\n  const HTML_NAMESPACE = 'http://www.w3.org/1999/xhtml';\n  /* Document namespace */\n  let NAMESPACE = HTML_NAMESPACE;\n  let IS_EMPTY_INPUT = false;\n  /* Allowed XHTML+XML namespaces */\n  let ALLOWED_NAMESPACES = null;\n  const DEFAULT_ALLOWED_NAMESPACES = addToSet({}, [MATHML_NAMESPACE, SVG_NAMESPACE, HTML_NAMESPACE], stringToString);\n  let MATHML_TEXT_INTEGRATION_POINTS = addToSet({}, ['mi', 'mo', 'mn', 'ms', 'mtext']);\n  let HTML_INTEGRATION_POINTS = addToSet({}, ['annotation-xml']);\n  // Certain elements are allowed in both SVG and HTML\n  // namespace. We need to specify them explicitly\n  // so that they don't get erroneously deleted from\n  // HTML namespace.\n  const COMMON_SVG_AND_HTML_ELEMENTS = addToSet({}, ['title', 'style', 'font', 'a', 'script']);\n  /* Parsing of strict XHTML documents */\n  let PARSER_MEDIA_TYPE = null;\n  const SUPPORTED_PARSER_MEDIA_TYPES = ['application/xhtml+xml', 'text/html'];\n  const DEFAULT_PARSER_MEDIA_TYPE = 'text/html';\n  let transformCaseFunc = null;\n  /* Keep a reference to config to pass to hooks */\n  let CONFIG = null;\n  /* Ideally, do not touch anything below this line */\n  /* ______________________________________________ */\n  const formElement = document.createElement('form');\n  const isRegexOrFunction = function isRegexOrFunction(testValue) {\n    return testValue instanceof RegExp || testValue instanceof Function;\n  };\n  /**\n   * _parseConfig\n   *\n   * @param cfg optional config literal\n   */\n  // eslint-disable-next-line complexity\n  const _parseConfig = function _parseConfig() {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    if (CONFIG && CONFIG === cfg) {\n      return;\n    }\n    /* Shield configuration object from tampering */\n    if (!cfg || typeof cfg !== 'object') {\n      cfg = {};\n    }\n    /* Shield configuration object from prototype pollution */\n    cfg = clone(cfg);\n    PARSER_MEDIA_TYPE =\n    // eslint-disable-next-line unicorn/prefer-includes\n    SUPPORTED_PARSER_MEDIA_TYPES.indexOf(cfg.PARSER_MEDIA_TYPE) === -1 ? DEFAULT_PARSER_MEDIA_TYPE : cfg.PARSER_MEDIA_TYPE;\n    // HTML tags and attributes are not case-sensitive, converting to lowercase. Keeping XHTML as is.\n    transformCaseFunc = PARSER_MEDIA_TYPE === 'application/xhtml+xml' ? stringToString : stringToLowerCase;\n    /* Set configuration parameters */\n    ALLOWED_TAGS = objectHasOwnProperty(cfg, 'ALLOWED_TAGS') ? addToSet({}, cfg.ALLOWED_TAGS, transformCaseFunc) : DEFAULT_ALLOWED_TAGS;\n    ALLOWED_ATTR = objectHasOwnProperty(cfg, 'ALLOWED_ATTR') ? addToSet({}, cfg.ALLOWED_ATTR, transformCaseFunc) : DEFAULT_ALLOWED_ATTR;\n    ALLOWED_NAMESPACES = objectHasOwnProperty(cfg, 'ALLOWED_NAMESPACES') ? addToSet({}, cfg.ALLOWED_NAMESPACES, stringToString) : DEFAULT_ALLOWED_NAMESPACES;\n    URI_SAFE_ATTRIBUTES = objectHasOwnProperty(cfg, 'ADD_URI_SAFE_ATTR') ? addToSet(clone(DEFAULT_URI_SAFE_ATTRIBUTES), cfg.ADD_URI_SAFE_ATTR, transformCaseFunc) : DEFAULT_URI_SAFE_ATTRIBUTES;\n    DATA_URI_TAGS = objectHasOwnProperty(cfg, 'ADD_DATA_URI_TAGS') ? addToSet(clone(DEFAULT_DATA_URI_TAGS), cfg.ADD_DATA_URI_TAGS, transformCaseFunc) : DEFAULT_DATA_URI_TAGS;\n    FORBID_CONTENTS = objectHasOwnProperty(cfg, 'FORBID_CONTENTS') ? addToSet({}, cfg.FORBID_CONTENTS, transformCaseFunc) : DEFAULT_FORBID_CONTENTS;\n    FORBID_TAGS = objectHasOwnProperty(cfg, 'FORBID_TAGS') ? addToSet({}, cfg.FORBID_TAGS, transformCaseFunc) : clone({});\n    FORBID_ATTR = objectHasOwnProperty(cfg, 'FORBID_ATTR') ? addToSet({}, cfg.FORBID_ATTR, transformCaseFunc) : clone({});\n    USE_PROFILES = objectHasOwnProperty(cfg, 'USE_PROFILES') ? cfg.USE_PROFILES : false;\n    ALLOW_ARIA_ATTR = cfg.ALLOW_ARIA_ATTR !== false; // Default true\n    ALLOW_DATA_ATTR = cfg.ALLOW_DATA_ATTR !== false; // Default true\n    ALLOW_UNKNOWN_PROTOCOLS = cfg.ALLOW_UNKNOWN_PROTOCOLS || false; // Default false\n    ALLOW_SELF_CLOSE_IN_ATTR = cfg.ALLOW_SELF_CLOSE_IN_ATTR !== false; // Default true\n    SAFE_FOR_TEMPLATES = cfg.SAFE_FOR_TEMPLATES || false; // Default false\n    SAFE_FOR_XML = cfg.SAFE_FOR_XML !== false; // Default true\n    WHOLE_DOCUMENT = cfg.WHOLE_DOCUMENT || false; // Default false\n    RETURN_DOM = cfg.RETURN_DOM || false; // Default false\n    RETURN_DOM_FRAGMENT = cfg.RETURN_DOM_FRAGMENT || false; // Default false\n    RETURN_TRUSTED_TYPE = cfg.RETURN_TRUSTED_TYPE || false; // Default false\n    FORCE_BODY = cfg.FORCE_BODY || false; // Default false\n    SANITIZE_DOM = cfg.SANITIZE_DOM !== false; // Default true\n    SANITIZE_NAMED_PROPS = cfg.SANITIZE_NAMED_PROPS || false; // Default false\n    KEEP_CONTENT = cfg.KEEP_CONTENT !== false; // Default true\n    IN_PLACE = cfg.IN_PLACE || false; // Default false\n    IS_ALLOWED_URI$1 = cfg.ALLOWED_URI_REGEXP || IS_ALLOWED_URI;\n    NAMESPACE = cfg.NAMESPACE || HTML_NAMESPACE;\n    MATHML_TEXT_INTEGRATION_POINTS = cfg.MATHML_TEXT_INTEGRATION_POINTS || MATHML_TEXT_INTEGRATION_POINTS;\n    HTML_INTEGRATION_POINTS = cfg.HTML_INTEGRATION_POINTS || HTML_INTEGRATION_POINTS;\n    CUSTOM_ELEMENT_HANDLING = cfg.CUSTOM_ELEMENT_HANDLING || {};\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.tagNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.tagNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && isRegexOrFunction(cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)) {\n      CUSTOM_ELEMENT_HANDLING.attributeNameCheck = cfg.CUSTOM_ELEMENT_HANDLING.attributeNameCheck;\n    }\n    if (cfg.CUSTOM_ELEMENT_HANDLING && typeof cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements === 'boolean') {\n      CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements = cfg.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements;\n    }\n    if (SAFE_FOR_TEMPLATES) {\n      ALLOW_DATA_ATTR = false;\n    }\n    if (RETURN_DOM_FRAGMENT) {\n      RETURN_DOM = true;\n    }\n    /* Parse profile info */\n    if (USE_PROFILES) {\n      ALLOWED_TAGS = addToSet({}, text);\n      ALLOWED_ATTR = [];\n      if (USE_PROFILES.html === true) {\n        addToSet(ALLOWED_TAGS, html$1);\n        addToSet(ALLOWED_ATTR, html);\n      }\n      if (USE_PROFILES.svg === true) {\n        addToSet(ALLOWED_TAGS, svg$1);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.svgFilters === true) {\n        addToSet(ALLOWED_TAGS, svgFilters);\n        addToSet(ALLOWED_ATTR, svg);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n      if (USE_PROFILES.mathMl === true) {\n        addToSet(ALLOWED_TAGS, mathMl$1);\n        addToSet(ALLOWED_ATTR, mathMl);\n        addToSet(ALLOWED_ATTR, xml);\n      }\n    }\n    /* Merge configuration parameters */\n    if (cfg.ADD_TAGS) {\n      if (ALLOWED_TAGS === DEFAULT_ALLOWED_TAGS) {\n        ALLOWED_TAGS = clone(ALLOWED_TAGS);\n      }\n      addToSet(ALLOWED_TAGS, cfg.ADD_TAGS, transformCaseFunc);\n    }\n    if (cfg.ADD_ATTR) {\n      if (ALLOWED_ATTR === DEFAULT_ALLOWED_ATTR) {\n        ALLOWED_ATTR = clone(ALLOWED_ATTR);\n      }\n      addToSet(ALLOWED_ATTR, cfg.ADD_ATTR, transformCaseFunc);\n    }\n    if (cfg.ADD_URI_SAFE_ATTR) {\n      addToSet(URI_SAFE_ATTRIBUTES, cfg.ADD_URI_SAFE_ATTR, transformCaseFunc);\n    }\n    if (cfg.FORBID_CONTENTS) {\n      if (FORBID_CONTENTS === DEFAULT_FORBID_CONTENTS) {\n        FORBID_CONTENTS = clone(FORBID_CONTENTS);\n      }\n      addToSet(FORBID_CONTENTS, cfg.FORBID_CONTENTS, transformCaseFunc);\n    }\n    /* Add #text in case KEEP_CONTENT is set to true */\n    if (KEEP_CONTENT) {\n      ALLOWED_TAGS['#text'] = true;\n    }\n    /* Add html, head and body to ALLOWED_TAGS in case WHOLE_DOCUMENT is true */\n    if (WHOLE_DOCUMENT) {\n      addToSet(ALLOWED_TAGS, ['html', 'head', 'body']);\n    }\n    /* Add tbody to ALLOWED_TAGS in case tables are permitted, see #286, #365 */\n    if (ALLOWED_TAGS.table) {\n      addToSet(ALLOWED_TAGS, ['tbody']);\n      delete FORBID_TAGS.tbody;\n    }\n    if (cfg.TRUSTED_TYPES_POLICY) {\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createHTML !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createHTML\" hook.');\n      }\n      if (typeof cfg.TRUSTED_TYPES_POLICY.createScriptURL !== 'function') {\n        throw typeErrorCreate('TRUSTED_TYPES_POLICY configuration option must provide a \"createScriptURL\" hook.');\n      }\n      // Overwrite existing TrustedTypes policy.\n      trustedTypesPolicy = cfg.TRUSTED_TYPES_POLICY;\n      // Sign local variables required by `sanitize`.\n      emptyHTML = trustedTypesPolicy.createHTML('');\n    } else {\n      // Uninitialized policy, attempt to initialize the internal dompurify policy.\n      if (trustedTypesPolicy === undefined) {\n        trustedTypesPolicy = _createTrustedTypesPolicy(trustedTypes, currentScript);\n      }\n      // If creating the internal policy succeeded sign internal variables.\n      if (trustedTypesPolicy !== null && typeof emptyHTML === 'string') {\n        emptyHTML = trustedTypesPolicy.createHTML('');\n      }\n    }\n    // Prevent further manipulation of configuration.\n    // Not available in IE8, Safari 5, etc.\n    if (freeze) {\n      freeze(cfg);\n    }\n    CONFIG = cfg;\n  };\n  /* Keep track of all possible SVG and MathML tags\n   * so that we can perform the namespace checks\n   * correctly. */\n  const ALL_SVG_TAGS = addToSet({}, [...svg$1, ...svgFilters, ...svgDisallowed]);\n  const ALL_MATHML_TAGS = addToSet({}, [...mathMl$1, ...mathMlDisallowed]);\n  /**\n   * @param element a DOM element whose namespace is being checked\n   * @returns Return false if the element has a\n   *  namespace that a spec-compliant parser would never\n   *  return. Return true otherwise.\n   */\n  const _checkValidNamespace = function _checkValidNamespace(element) {\n    let parent = getParentNode(element);\n    // In JSDOM, if we're inside shadow DOM, then parentNode\n    // can be null. We just simulate parent in this case.\n    if (!parent || !parent.tagName) {\n      parent = {\n        namespaceURI: NAMESPACE,\n        tagName: 'template'\n      };\n    }\n    const tagName = stringToLowerCase(element.tagName);\n    const parentTagName = stringToLowerCase(parent.tagName);\n    if (!ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return false;\n    }\n    if (element.namespaceURI === SVG_NAMESPACE) {\n      // The only way to switch from HTML namespace to SVG\n      // is via <svg>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'svg';\n      }\n      // The only way to switch from MathML to SVG is via`\n      // svg if parent is either <annotation-xml> or MathML\n      // text integration points.\n      if (parent.namespaceURI === MATHML_NAMESPACE) {\n        return tagName === 'svg' && (parentTagName === 'annotation-xml' || MATHML_TEXT_INTEGRATION_POINTS[parentTagName]);\n      }\n      // We only allow elements that are defined in SVG\n      // spec. All others are disallowed in SVG namespace.\n      return Boolean(ALL_SVG_TAGS[tagName]);\n    }\n    if (element.namespaceURI === MATHML_NAMESPACE) {\n      // The only way to switch from HTML namespace to MathML\n      // is via <math>. If it happens via any other tag, then\n      // it should be killed.\n      if (parent.namespaceURI === HTML_NAMESPACE) {\n        return tagName === 'math';\n      }\n      // The only way to switch from SVG to MathML is via\n      // <math> and HTML integration points\n      if (parent.namespaceURI === SVG_NAMESPACE) {\n        return tagName === 'math' && HTML_INTEGRATION_POINTS[parentTagName];\n      }\n      // We only allow elements that are defined in MathML\n      // spec. All others are disallowed in MathML namespace.\n      return Boolean(ALL_MATHML_TAGS[tagName]);\n    }\n    if (element.namespaceURI === HTML_NAMESPACE) {\n      // The only way to switch from SVG to HTML is via\n      // HTML integration points, and from MathML to HTML\n      // is via MathML text integration points\n      if (parent.namespaceURI === SVG_NAMESPACE && !HTML_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      if (parent.namespaceURI === MATHML_NAMESPACE && !MATHML_TEXT_INTEGRATION_POINTS[parentTagName]) {\n        return false;\n      }\n      // We disallow tags that are specific for MathML\n      // or SVG and should never appear in HTML namespace\n      return !ALL_MATHML_TAGS[tagName] && (COMMON_SVG_AND_HTML_ELEMENTS[tagName] || !ALL_SVG_TAGS[tagName]);\n    }\n    // For XHTML and XML documents that support custom namespaces\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && ALLOWED_NAMESPACES[element.namespaceURI]) {\n      return true;\n    }\n    // The code should never reach this place (this means\n    // that the element somehow got namespace that is not\n    // HTML, SVG, MathML or allowed via ALLOWED_NAMESPACES).\n    // Return false just in case.\n    return false;\n  };\n  /**\n   * _forceRemove\n   *\n   * @param node a DOM node\n   */\n  const _forceRemove = function _forceRemove(node) {\n    arrayPush(DOMPurify.removed, {\n      element: node\n    });\n    try {\n      // eslint-disable-next-line unicorn/prefer-dom-node-remove\n      getParentNode(node).removeChild(node);\n    } catch (_) {\n      remove(node);\n    }\n  };\n  /**\n   * _removeAttribute\n   *\n   * @param name an Attribute name\n   * @param element a DOM node\n   */\n  const _removeAttribute = function _removeAttribute(name, element) {\n    try {\n      arrayPush(DOMPurify.removed, {\n        attribute: element.getAttributeNode(name),\n        from: element\n      });\n    } catch (_) {\n      arrayPush(DOMPurify.removed, {\n        attribute: null,\n        from: element\n      });\n    }\n    element.removeAttribute(name);\n    // We void attribute values for unremovable \"is\" attributes\n    if (name === 'is') {\n      if (RETURN_DOM || RETURN_DOM_FRAGMENT) {\n        try {\n          _forceRemove(element);\n        } catch (_) {}\n      } else {\n        try {\n          element.setAttribute(name, '');\n        } catch (_) {}\n      }\n    }\n  };\n  /**\n   * _initDocument\n   *\n   * @param dirty - a string of dirty markup\n   * @return a DOM, filled with the dirty markup\n   */\n  const _initDocument = function _initDocument(dirty) {\n    /* Create a HTML document */\n    let doc = null;\n    let leadingWhitespace = null;\n    if (FORCE_BODY) {\n      dirty = '<remove></remove>' + dirty;\n    } else {\n      /* If FORCE_BODY isn't used, leading whitespace needs to be preserved manually */\n      const matches = stringMatch(dirty, /^[\\r\\n\\t ]+/);\n      leadingWhitespace = matches && matches[0];\n    }\n    if (PARSER_MEDIA_TYPE === 'application/xhtml+xml' && NAMESPACE === HTML_NAMESPACE) {\n      // Root of XHTML doc must contain xmlns declaration (see https://www.w3.org/TR/xhtml1/normative.html#strict)\n      dirty = '<html xmlns=\"http://www.w3.org/1999/xhtml\"><head></head><body>' + dirty + '</body></html>';\n    }\n    const dirtyPayload = trustedTypesPolicy ? trustedTypesPolicy.createHTML(dirty) : dirty;\n    /*\n     * Use the DOMParser API by default, fallback later if needs be\n     * DOMParser not work for svg when has multiple root element.\n     */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      try {\n        doc = new DOMParser().parseFromString(dirtyPayload, PARSER_MEDIA_TYPE);\n      } catch (_) {}\n    }\n    /* Use createHTMLDocument in case DOMParser is not available */\n    if (!doc || !doc.documentElement) {\n      doc = implementation.createDocument(NAMESPACE, 'template', null);\n      try {\n        doc.documentElement.innerHTML = IS_EMPTY_INPUT ? emptyHTML : dirtyPayload;\n      } catch (_) {\n        // Syntax error if dirtyPayload is invalid xml\n      }\n    }\n    const body = doc.body || doc.documentElement;\n    if (dirty && leadingWhitespace) {\n      body.insertBefore(document.createTextNode(leadingWhitespace), body.childNodes[0] || null);\n    }\n    /* Work on whole document or just its body */\n    if (NAMESPACE === HTML_NAMESPACE) {\n      return getElementsByTagName.call(doc, WHOLE_DOCUMENT ? 'html' : 'body')[0];\n    }\n    return WHOLE_DOCUMENT ? doc.documentElement : body;\n  };\n  /**\n   * Creates a NodeIterator object that you can use to traverse filtered lists of nodes or elements in a document.\n   *\n   * @param root The root element or node to start traversing on.\n   * @return The created NodeIterator\n   */\n  const _createNodeIterator = function _createNodeIterator(root) {\n    return createNodeIterator.call(root.ownerDocument || root, root,\n    // eslint-disable-next-line no-bitwise\n    NodeFilter.SHOW_ELEMENT | NodeFilter.SHOW_COMMENT | NodeFilter.SHOW_TEXT | NodeFilter.SHOW_PROCESSING_INSTRUCTION | NodeFilter.SHOW_CDATA_SECTION, null);\n  };\n  /**\n   * _isClobbered\n   *\n   * @param element element to check for clobbering attacks\n   * @return true if clobbered, false if safe\n   */\n  const _isClobbered = function _isClobbered(element) {\n    return element instanceof HTMLFormElement && (typeof element.nodeName !== 'string' || typeof element.textContent !== 'string' || typeof element.removeChild !== 'function' || !(element.attributes instanceof NamedNodeMap) || typeof element.removeAttribute !== 'function' || typeof element.setAttribute !== 'function' || typeof element.namespaceURI !== 'string' || typeof element.insertBefore !== 'function' || typeof element.hasChildNodes !== 'function');\n  };\n  /**\n   * Checks whether the given object is a DOM node.\n   *\n   * @param value object to check whether it's a DOM node\n   * @return true is object is a DOM node\n   */\n  const _isNode = function _isNode(value) {\n    return typeof Node === 'function' && value instanceof Node;\n  };\n  function _executeHooks(hooks, currentNode, data) {\n    arrayForEach(hooks, hook => {\n      hook.call(DOMPurify, currentNode, data, CONFIG);\n    });\n  }\n  /**\n   * _sanitizeElements\n   *\n   * @protect nodeName\n   * @protect textContent\n   * @protect removeChild\n   * @param currentNode to check for permission to exist\n   * @return true if node was killed, false if left alive\n   */\n  const _sanitizeElements = function _sanitizeElements(currentNode) {\n    let content = null;\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeElements, currentNode, null);\n    /* Check if element is clobbered or can clobber */\n    if (_isClobbered(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Now let's check the element's type and name */\n    const tagName = transformCaseFunc(currentNode.nodeName);\n    /* Execute a hook if present */\n    _executeHooks(hooks.uponSanitizeElement, currentNode, {\n      tagName,\n      allowedTags: ALLOWED_TAGS\n    });\n    /* Detect mXSS attempts abusing namespace confusion */\n    if (SAFE_FOR_XML && currentNode.hasChildNodes() && !_isNode(currentNode.firstElementChild) && regExpTest(/<[/\\w!]/g, currentNode.innerHTML) && regExpTest(/<[/\\w!]/g, currentNode.textContent)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any occurrence of processing instructions */\n    if (currentNode.nodeType === NODE_TYPE.progressingInstruction) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove any kind of possibly harmful comments */\n    if (SAFE_FOR_XML && currentNode.nodeType === NODE_TYPE.comment && regExpTest(/<[/\\w]/g, currentNode.data)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Remove element if anything forbids its presence */\n    if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n      /* Check if we have a custom element to handle */\n      if (!FORBID_TAGS[tagName] && _isBasicCustomElement(tagName)) {\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, tagName)) {\n          return false;\n        }\n        if (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(tagName)) {\n          return false;\n        }\n      }\n      /* Keep content except for bad-listed elements */\n      if (KEEP_CONTENT && !FORBID_CONTENTS[tagName]) {\n        const parentNode = getParentNode(currentNode) || currentNode.parentNode;\n        const childNodes = getChildNodes(currentNode) || currentNode.childNodes;\n        if (childNodes && parentNode) {\n          const childCount = childNodes.length;\n          for (let i = childCount - 1; i >= 0; --i) {\n            const childClone = cloneNode(childNodes[i], true);\n            childClone.__removalCount = (currentNode.__removalCount || 0) + 1;\n            parentNode.insertBefore(childClone, getNextSibling(currentNode));\n          }\n        }\n      }\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Check whether element has a valid namespace */\n    if (currentNode instanceof Element && !_checkValidNamespace(currentNode)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Make sure that older browsers don't get fallback-tag mXSS */\n    if ((tagName === 'noscript' || tagName === 'noembed' || tagName === 'noframes') && regExpTest(/<\\/no(script|embed|frames)/i, currentNode.innerHTML)) {\n      _forceRemove(currentNode);\n      return true;\n    }\n    /* Sanitize element content to be template-safe */\n    if (SAFE_FOR_TEMPLATES && currentNode.nodeType === NODE_TYPE.text) {\n      /* Get the element's text content */\n      content = currentNode.textContent;\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        content = stringReplace(content, expr, ' ');\n      });\n      if (currentNode.textContent !== content) {\n        arrayPush(DOMPurify.removed, {\n          element: currentNode.cloneNode()\n        });\n        currentNode.textContent = content;\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeElements, currentNode, null);\n    return false;\n  };\n  /**\n   * _isValidAttribute\n   *\n   * @param lcTag Lowercase tag name of containing element.\n   * @param lcName Lowercase attribute name.\n   * @param value Attribute value.\n   * @return Returns true if `value` is valid, otherwise false.\n   */\n  // eslint-disable-next-line complexity\n  const _isValidAttribute = function _isValidAttribute(lcTag, lcName, value) {\n    /* Make sure attribute cannot clobber */\n    if (SANITIZE_DOM && (lcName === 'id' || lcName === 'name') && (value in document || value in formElement)) {\n      return false;\n    }\n    /* Allow valid data-* attributes: At least one character after \"-\"\n        (https://html.spec.whatwg.org/multipage/dom.html#embedding-custom-non-visible-data-with-the-data-*-attributes)\n        XML-compatible (https://html.spec.whatwg.org/multipage/infrastructure.html#xml-compatible and http://www.w3.org/TR/xml/#d0e804)\n        We don't need to check the value; it's always URI safe. */\n    if (ALLOW_DATA_ATTR && !FORBID_ATTR[lcName] && regExpTest(DATA_ATTR, lcName)) ; else if (ALLOW_ARIA_ATTR && regExpTest(ARIA_ATTR, lcName)) ; else if (!ALLOWED_ATTR[lcName] || FORBID_ATTR[lcName]) {\n      if (\n      // First condition does a very basic check if a) it's basically a valid custom element tagname AND\n      // b) if the tagName passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      // and c) if the attribute name passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.attributeNameCheck\n      _isBasicCustomElement(lcTag) && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, lcTag) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(lcTag)) && (CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.attributeNameCheck, lcName) || CUSTOM_ELEMENT_HANDLING.attributeNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.attributeNameCheck(lcName)) ||\n      // Alternative, second condition checks if it's an `is`-attribute, AND\n      // the value passes whatever the user has configured for CUSTOM_ELEMENT_HANDLING.tagNameCheck\n      lcName === 'is' && CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements && (CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof RegExp && regExpTest(CUSTOM_ELEMENT_HANDLING.tagNameCheck, value) || CUSTOM_ELEMENT_HANDLING.tagNameCheck instanceof Function && CUSTOM_ELEMENT_HANDLING.tagNameCheck(value))) ; else {\n        return false;\n      }\n      /* Check value is safe. First, is attr inert? If so, is safe */\n    } else if (URI_SAFE_ATTRIBUTES[lcName]) ; else if (regExpTest(IS_ALLOWED_URI$1, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if ((lcName === 'src' || lcName === 'xlink:href' || lcName === 'href') && lcTag !== 'script' && stringIndexOf(value, 'data:') === 0 && DATA_URI_TAGS[lcTag]) ; else if (ALLOW_UNKNOWN_PROTOCOLS && !regExpTest(IS_SCRIPT_OR_DATA, stringReplace(value, ATTR_WHITESPACE, ''))) ; else if (value) {\n      return false;\n    } else ;\n    return true;\n  };\n  /**\n   * _isBasicCustomElement\n   * checks if at least one dash is included in tagName, and it's not the first char\n   * for more sophisticated checking see https://github.com/sindresorhus/validate-element-name\n   *\n   * @param tagName name of the tag of the node to sanitize\n   * @returns Returns true if the tag name meets the basic criteria for a custom element, otherwise false.\n   */\n  const _isBasicCustomElement = function _isBasicCustomElement(tagName) {\n    return tagName !== 'annotation-xml' && stringMatch(tagName, CUSTOM_ELEMENT);\n  };\n  /**\n   * _sanitizeAttributes\n   *\n   * @protect attributes\n   * @protect nodeName\n   * @protect removeAttribute\n   * @protect setAttribute\n   *\n   * @param currentNode to sanitize\n   */\n  const _sanitizeAttributes = function _sanitizeAttributes(currentNode) {\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeAttributes, currentNode, null);\n    const {\n      attributes\n    } = currentNode;\n    /* Check if we have attributes; if not we might have a text node */\n    if (!attributes || _isClobbered(currentNode)) {\n      return;\n    }\n    const hookEvent = {\n      attrName: '',\n      attrValue: '',\n      keepAttr: true,\n      allowedAttributes: ALLOWED_ATTR,\n      forceKeepAttr: undefined\n    };\n    let l = attributes.length;\n    /* Go backwards over all attributes; safely remove bad ones */\n    while (l--) {\n      const attr = attributes[l];\n      const {\n        name,\n        namespaceURI,\n        value: attrValue\n      } = attr;\n      const lcName = transformCaseFunc(name);\n      const initValue = attrValue;\n      let value = name === 'value' ? initValue : stringTrim(initValue);\n      /* Execute a hook if present */\n      hookEvent.attrName = lcName;\n      hookEvent.attrValue = value;\n      hookEvent.keepAttr = true;\n      hookEvent.forceKeepAttr = undefined; // Allows developers to see this is a property they can set\n      _executeHooks(hooks.uponSanitizeAttribute, currentNode, hookEvent);\n      value = hookEvent.attrValue;\n      /* Full DOM Clobbering protection via namespace isolation,\n       * Prefix id and name attributes with `user-content-`\n       */\n      if (SANITIZE_NAMED_PROPS && (lcName === 'id' || lcName === 'name')) {\n        // Remove the attribute with this value\n        _removeAttribute(name, currentNode);\n        // Prefix the value and later re-create the attribute with the sanitized value\n        value = SANITIZE_NAMED_PROPS_PREFIX + value;\n      }\n      /* Work around a security issue with comments inside attributes */\n      if (SAFE_FOR_XML && regExpTest(/((--!?|])>)|<\\/(style|title)/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (hookEvent.forceKeepAttr) {\n        continue;\n      }\n      /* Did the hooks approve of the attribute? */\n      if (!hookEvent.keepAttr) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Work around a security issue in jQuery 3.0 */\n      if (!ALLOW_SELF_CLOSE_IN_ATTR && regExpTest(/\\/>/i, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Sanitize attribute content to be template-safe */\n      if (SAFE_FOR_TEMPLATES) {\n        arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n          value = stringReplace(value, expr, ' ');\n        });\n      }\n      /* Is `value` valid for this attribute? */\n      const lcTag = transformCaseFunc(currentNode.nodeName);\n      if (!_isValidAttribute(lcTag, lcName, value)) {\n        _removeAttribute(name, currentNode);\n        continue;\n      }\n      /* Handle attributes that require Trusted Types */\n      if (trustedTypesPolicy && typeof trustedTypes === 'object' && typeof trustedTypes.getAttributeType === 'function') {\n        if (namespaceURI) ; else {\n          switch (trustedTypes.getAttributeType(lcTag, lcName)) {\n            case 'TrustedHTML':\n              {\n                value = trustedTypesPolicy.createHTML(value);\n                break;\n              }\n            case 'TrustedScriptURL':\n              {\n                value = trustedTypesPolicy.createScriptURL(value);\n                break;\n              }\n          }\n        }\n      }\n      /* Handle invalid data-* attribute set by try-catching it */\n      if (value !== initValue) {\n        try {\n          if (namespaceURI) {\n            currentNode.setAttributeNS(namespaceURI, name, value);\n          } else {\n            /* Fallback to setAttribute() for browser-unrecognized namespaces e.g. \"x-schema\". */\n            currentNode.setAttribute(name, value);\n          }\n          if (_isClobbered(currentNode)) {\n            _forceRemove(currentNode);\n          } else {\n            arrayPop(DOMPurify.removed);\n          }\n        } catch (_) {\n          _removeAttribute(name, currentNode);\n        }\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeAttributes, currentNode, null);\n  };\n  /**\n   * _sanitizeShadowDOM\n   *\n   * @param fragment to iterate over recursively\n   */\n  const _sanitizeShadowDOM = function _sanitizeShadowDOM(fragment) {\n    let shadowNode = null;\n    const shadowIterator = _createNodeIterator(fragment);\n    /* Execute a hook if present */\n    _executeHooks(hooks.beforeSanitizeShadowDOM, fragment, null);\n    while (shadowNode = shadowIterator.nextNode()) {\n      /* Execute a hook if present */\n      _executeHooks(hooks.uponSanitizeShadowNode, shadowNode, null);\n      /* Sanitize tags and elements */\n      _sanitizeElements(shadowNode);\n      /* Check attributes next */\n      _sanitizeAttributes(shadowNode);\n      /* Deep shadow DOM detected */\n      if (shadowNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(shadowNode.content);\n      }\n    }\n    /* Execute a hook if present */\n    _executeHooks(hooks.afterSanitizeShadowDOM, fragment, null);\n  };\n  // eslint-disable-next-line complexity\n  DOMPurify.sanitize = function (dirty) {\n    let cfg = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let body = null;\n    let importedNode = null;\n    let currentNode = null;\n    let returnNode = null;\n    /* Make sure we have a string to sanitize.\n      DO NOT return early, as this will return the wrong type if\n      the user has requested a DOM object rather than a string */\n    IS_EMPTY_INPUT = !dirty;\n    if (IS_EMPTY_INPUT) {\n      dirty = '<!-->';\n    }\n    /* Stringify, in case dirty is an object */\n    if (typeof dirty !== 'string' && !_isNode(dirty)) {\n      if (typeof dirty.toString === 'function') {\n        dirty = dirty.toString();\n        if (typeof dirty !== 'string') {\n          throw typeErrorCreate('dirty is not a string, aborting');\n        }\n      } else {\n        throw typeErrorCreate('toString is not a function');\n      }\n    }\n    /* Return dirty HTML if DOMPurify cannot run */\n    if (!DOMPurify.isSupported) {\n      return dirty;\n    }\n    /* Assign config vars */\n    if (!SET_CONFIG) {\n      _parseConfig(cfg);\n    }\n    /* Clean up removed elements */\n    DOMPurify.removed = [];\n    /* Check if dirty is correctly typed for IN_PLACE */\n    if (typeof dirty === 'string') {\n      IN_PLACE = false;\n    }\n    if (IN_PLACE) {\n      /* Do some early pre-sanitization to avoid unsafe root nodes */\n      if (dirty.nodeName) {\n        const tagName = transformCaseFunc(dirty.nodeName);\n        if (!ALLOWED_TAGS[tagName] || FORBID_TAGS[tagName]) {\n          throw typeErrorCreate('root node is forbidden and cannot be sanitized in-place');\n        }\n      }\n    } else if (dirty instanceof Node) {\n      /* If dirty is a DOM element, append to an empty document to avoid\n         elements being stripped by the parser */\n      body = _initDocument('<!---->');\n      importedNode = body.ownerDocument.importNode(dirty, true);\n      if (importedNode.nodeType === NODE_TYPE.element && importedNode.nodeName === 'BODY') {\n        /* Node is already a body, use as is */\n        body = importedNode;\n      } else if (importedNode.nodeName === 'HTML') {\n        body = importedNode;\n      } else {\n        // eslint-disable-next-line unicorn/prefer-dom-node-append\n        body.appendChild(importedNode);\n      }\n    } else {\n      /* Exit directly if we have nothing to do */\n      if (!RETURN_DOM && !SAFE_FOR_TEMPLATES && !WHOLE_DOCUMENT &&\n      // eslint-disable-next-line unicorn/prefer-includes\n      dirty.indexOf('<') === -1) {\n        return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(dirty) : dirty;\n      }\n      /* Initialize the document to work on */\n      body = _initDocument(dirty);\n      /* Check we have a DOM node from the data */\n      if (!body) {\n        return RETURN_DOM ? null : RETURN_TRUSTED_TYPE ? emptyHTML : '';\n      }\n    }\n    /* Remove first element node (ours) if FORCE_BODY is set */\n    if (body && FORCE_BODY) {\n      _forceRemove(body.firstChild);\n    }\n    /* Get node iterator */\n    const nodeIterator = _createNodeIterator(IN_PLACE ? dirty : body);\n    /* Now start iterating over the created document */\n    while (currentNode = nodeIterator.nextNode()) {\n      /* Sanitize tags and elements */\n      _sanitizeElements(currentNode);\n      /* Check attributes next */\n      _sanitizeAttributes(currentNode);\n      /* Shadow DOM detected, sanitize it */\n      if (currentNode.content instanceof DocumentFragment) {\n        _sanitizeShadowDOM(currentNode.content);\n      }\n    }\n    /* If we sanitized `dirty` in-place, return it. */\n    if (IN_PLACE) {\n      return dirty;\n    }\n    /* Return sanitized string or DOM */\n    if (RETURN_DOM) {\n      if (RETURN_DOM_FRAGMENT) {\n        returnNode = createDocumentFragment.call(body.ownerDocument);\n        while (body.firstChild) {\n          // eslint-disable-next-line unicorn/prefer-dom-node-append\n          returnNode.appendChild(body.firstChild);\n        }\n      } else {\n        returnNode = body;\n      }\n      if (ALLOWED_ATTR.shadowroot || ALLOWED_ATTR.shadowrootmode) {\n        /*\n          AdoptNode() is not used because internal state is not reset\n          (e.g. the past names map of a HTMLFormElement), this is safe\n          in theory but we would rather not risk another attack vector.\n          The state that is cloned by importNode() is explicitly defined\n          by the specs.\n        */\n        returnNode = importNode.call(originalDocument, returnNode, true);\n      }\n      return returnNode;\n    }\n    let serializedHTML = WHOLE_DOCUMENT ? body.outerHTML : body.innerHTML;\n    /* Serialize doctype if allowed */\n    if (WHOLE_DOCUMENT && ALLOWED_TAGS['!doctype'] && body.ownerDocument && body.ownerDocument.doctype && body.ownerDocument.doctype.name && regExpTest(DOCTYPE_NAME, body.ownerDocument.doctype.name)) {\n      serializedHTML = '<!DOCTYPE ' + body.ownerDocument.doctype.name + '>\\n' + serializedHTML;\n    }\n    /* Sanitize final string template-safe */\n    if (SAFE_FOR_TEMPLATES) {\n      arrayForEach([MUSTACHE_EXPR, ERB_EXPR, TMPLIT_EXPR], expr => {\n        serializedHTML = stringReplace(serializedHTML, expr, ' ');\n      });\n    }\n    return trustedTypesPolicy && RETURN_TRUSTED_TYPE ? trustedTypesPolicy.createHTML(serializedHTML) : serializedHTML;\n  };\n  DOMPurify.setConfig = function () {\n    let cfg = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    _parseConfig(cfg);\n    SET_CONFIG = true;\n  };\n  DOMPurify.clearConfig = function () {\n    CONFIG = null;\n    SET_CONFIG = false;\n  };\n  DOMPurify.isValidAttribute = function (tag, attr, value) {\n    /* Initialize shared config vars if necessary. */\n    if (!CONFIG) {\n      _parseConfig({});\n    }\n    const lcTag = transformCaseFunc(tag);\n    const lcName = transformCaseFunc(attr);\n    return _isValidAttribute(lcTag, lcName, value);\n  };\n  DOMPurify.addHook = function (entryPoint, hookFunction) {\n    if (typeof hookFunction !== 'function') {\n      return;\n    }\n    arrayPush(hooks[entryPoint], hookFunction);\n  };\n  DOMPurify.removeHook = function (entryPoint, hookFunction) {\n    if (hookFunction !== undefined) {\n      const index = arrayLastIndexOf(hooks[entryPoint], hookFunction);\n      return index === -1 ? undefined : arraySplice(hooks[entryPoint], index, 1)[0];\n    }\n    return arrayPop(hooks[entryPoint]);\n  };\n  DOMPurify.removeHooks = function (entryPoint) {\n    hooks[entryPoint] = [];\n  };\n  DOMPurify.removeAllHooks = function () {\n    hooks = _createHooksMap();\n  };\n  return DOMPurify;\n}\nvar purify = createDOMPurify();\n\nexport { purify as default };\n//# sourceMappingURL=purify.es.mjs.map\n","'use client'\n\nimport React from 'react'\nimport ReactMarkdown from 'react-markdown'\nimport remarkGfm from 'remark-gfm'\nimport remarkMath from 'remark-math'\nimport rehypeKatex from 'rehype-katex'\nimport DOMPurify from 'dompurify'\n\n// Import proper types for ReactMarkdown components\nimport { Components } from 'react-markdown'\n\n// Utility function to generate image URLs\nconst getImageSrc = (src: string, knowledge_id: string) => {\n  return `https://onyibiwnfwxatadlkygz.supabase.co/storage/v1/object/public/media/image/${knowledge_id}/${src}`\n}\n\n// Markdown Viewer Component\nconst MarkdownViewer: React.FC<{\n  content: string\n  images?: string[]\n  knowledge_id: string\n}> = ({ content, knowledge_id }) => {\n  const slide = content.replace('```markdown', '')\n  // Sanitize content\n  const sanitizedContent = React.useMemo(() => {\n    try {\n      return DOMPurify.sanitize(slide || '')\n    } catch (err) {\n      console.error('Content sanitization failed:', err)\n      return 'Error: Unable to render content.'\n    }\n  }, [slide])\n\n  // Validate input\n  if (typeof slide !== 'string') {\n    console.warn('Invalid content passed to MarkdownViewer:', slide)\n    return <div>Error: Invalid content format. Expected a string.</div>\n  }\n\n  return (\n    <div className='h-full'>\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm, remarkMath]}\n        rehypePlugins={[rehypeKatex]}\n        components={{\n          h1: ({ children, ...props }) => (\n            <h1\n              className='mb-4 mt-8 text-3xl font-extrabold text-green-400'\n              {...props}\n            >\n              {children}\n            </h1>\n          ),\n          h2: ({ children, ...props }) => (\n            <h2\n              className='mb-3 mt-6 border-b border-green-700 text-2xl font-bold text-green-300'\n              {...props}\n            >\n              {children}\n            </h2>\n          ),\n          h3: ({ children, ...props }) => (\n            <h3\n              className='mb-2 mt-4 text-xl font-semibold text-green-200'\n              {...props}\n            >\n              {children}\n            </h3>\n          ),\n          p: ({ children, ...props }) => (\n            <p\n              className='my-4 whitespace-normal leading-relaxed text-gray-300'\n              {...props}\n            >\n              {children}\n            </p>\n          ),\n          ul: ({ children, ...props }) => (\n            <ul\n              className='my-4 ml-6 list-disc space-y-2 text-gray-300'\n              {...props}\n            >\n              {children}\n            </ul>\n          ),\n          ol: ({ children, ...props }) => (\n            <ol\n              className='my-4 ml-6 list-decimal space-y-2 text-gray-300'\n              {...props}\n            >\n              {children}\n            </ol>\n          ),\n          li: ({ children, ...props }) => (\n            <li className='ml-2' {...props}>\n              {children}\n            </li>\n          ),\n          table: ({ children, ...props }) => (\n            <div className='my-6 overflow-x-auto'>\n              <table\n                className='min-w-full divide-y divide-green-600 border border-green-600 text-gray-200'\n                {...props}\n              >\n                {children}\n              </table>\n            </div>\n          ),\n          th: ({ children, ...props }) => (\n            <th\n              className='border-b border-green-600 px-4 py-2 text-left font-semibold text-green-300'\n              {...props}\n            >\n              {children}\n            </th>\n          ),\n          td: ({ children, ...props }) => (\n            <td className='border-b border-green-600 px-4 py-2' {...props}>\n              {children}\n            </td>\n          ),\n          blockquote: ({ children, ...props }) => (\n            <blockquote\n              className='border-l-4 border-green-500 pl-4 italic text-green-300'\n              {...props}\n            >\n              {children}\n            </blockquote>\n          ),\n          code: ({ children, ...props }) => (\n            <code\n              className='whitespace-normal rounded bg-gray-700 px-2 py-1 font-mono text-sm text-green-400'\n              {...props}\n            >\n              {children}\n            </code>\n          ),\n          img: ({ src, alt, ...props }) => {\n            const resolvedSrc = src ? getImageSrc(src, knowledge_id) : ''\n            return (\n              <img\n                src={resolvedSrc}\n                alt={alt || ''}\n                style={{\n                  maxWidth: '100%',\n                  border: '1px solid #ddd',\n                  margin: '10px 0',\n                }}\n              />\n            )\n          },\n          hr: (props: React.HTMLProps<HTMLHRElement>) => (\n            <hr className='my-8 border-t border-green-700' {...props} />\n          ),\n        }}\n      >\n        {sanitizedContent}\n      </ReactMarkdown>\n    </div>\n  )\n}\n\nexport default MarkdownViewer\n","import React from 'react'\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\n\ninterface SlideshowControlsProps {\n  currentSlide: number\n  totalSlides: number\n  onNext: () => void\n  onPrevious: () => void\n  showProgressIndicator?: boolean\n  variant?: 'default' | 'minimal' | 'text-only'\n  className?: string\n}\n\n/**\n * Slideshow navigation controls component\n * Provides next/previous buttons and optional progress indicator\n */\nconst SlideshowControls: React.FC<SlideshowControlsProps> = ({\n  currentSlide,\n  totalSlides,\n  onNext,\n  onPrevious,\n  showProgressIndicator = true,\n  variant = 'default',\n  className = '',\n}) => {\n  const hasNextSlide = currentSlide < totalSlides - 1\n  const hasPreviousSlide = currentSlide > 0\n\n  // Render different button styles based on variant\n  const renderButtons = () => {\n    switch (variant) {\n      case 'minimal':\n        return (\n          <>\n            <button\n              onClick={onPrevious}\n              disabled={!hasPreviousSlide}\n              className='rounded-full bg-gray-700 p-2 text-white hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Previous slide'\n            >\n              <ChevronLeft size={20} />\n            </button>\n            <button\n              onClick={onNext}\n              disabled={!hasNextSlide}\n              className='rounded-full bg-gray-700 p-2 text-white hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Next slide'\n            >\n              <ChevronRight size={20} />\n            </button>\n          </>\n        )\n      case 'text-only':\n        return (\n          <>\n            <button\n              onClick={onPrevious}\n              disabled={!hasPreviousSlide}\n              className='px-4 py-2 text-gray-600 hover:text-blue-600 focus:underline focus:outline-none disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Previous slide'\n            >\n              Previous\n            </button>\n            <button\n              onClick={onNext}\n              disabled={!hasNextSlide}\n              className='px-4 py-2 text-gray-600 hover:text-blue-600 focus:underline focus:outline-none disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Next slide'\n            >\n              Next\n            </button>\n          </>\n        )\n      default:\n        return (\n          <>\n            <button\n              onClick={onPrevious}\n              disabled={!hasPreviousSlide}\n              className='rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-400'\n              aria-label='Previous slide'\n            >\n              Previous\n            </button>\n            <button\n              onClick={onNext}\n              disabled={!hasNextSlide}\n              className='rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:cursor-not-allowed disabled:bg-gray-400'\n              aria-label='Next slide'\n            >\n              Next\n            </button>\n          </>\n        )\n    }\n  }\n\n  // Render progress indicator\n  const renderProgressIndicator = () => {\n    if (!showProgressIndicator) return null\n\n    return (\n      <div className='flex items-center space-x-1'>\n        <span className='text-sm text-gray-500' aria-live='polite'>\n          {`Slide ${currentSlide + 1} of ${totalSlides}`}\n        </span>\n        <div className='h-1 w-24 overflow-hidden rounded-full bg-gray-200'>\n          <div\n            className='h-full bg-blue-500'\n            style={{ width: `${((currentSlide + 1) / totalSlides) * 100}%` }}\n            role='progressbar'\n            aria-valuenow={currentSlide + 1}\n            aria-valuemin={1}\n            aria-valuemax={totalSlides}\n          ></div>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className={`flex items-center justify-between py-3 ${className}`}>\n      <div className='flex space-x-2'>{renderButtons()}</div>\n      {renderProgressIndicator()}\n    </div>\n  )\n}\n\nexport default SlideshowControls\n","import React, { useState, useEffect, useCallback } from 'react'\nimport MarkdownViewer from '../MarkDownViewer'\nimport SlideshowControls from './SlideshowControls'\nimport { ChevronLeft, ChevronRight } from 'lucide-react'\n\ninterface ModernMarkdownSlideshowProps {\n  /**\n   * Array of markdown content strings, one for each slide\n   */\n  content: string[]\n\n  /**\n   * Optional array of image URLs that can be referenced in the markdown\n   */\n  images?: string[]\n\n  /**\n   * Knowledge ID for the content\n   */\n  knowledge_id: string\n\n  /**\n   * Optional initial slide index\n   */\n  currentIndex?: number\n\n  /**\n   * Optional callback fired when the slide changes\n   */\n  onSlideChange?: (index: number) => void\n\n  /**\n   * Optional theme for the slideshow\n   */\n  theme?: 'light' | 'dark' | 'system'\n\n  /**\n   * Optional controls variant\n   */\n  controlsVariant?: 'default' | 'minimal' | 'text-only'\n\n  /**\n   * Optional class name for styling\n   */\n  className?: string\n}\n\n/**\n * Modern Markdown Slideshow component with enhanced accessibility and theming\n *\n * Features:\n * - Keyboard navigation (arrow keys)\n * - Theme support (light/dark)\n * - Various control styles\n * - Proper ARIA attributes for accessibility\n * - Progress indicator\n */\nconst ModernMarkdownSlideshow: React.FC<ModernMarkdownSlideshowProps> = ({\n  content,\n  images = [],\n  knowledge_id,\n  currentIndex = 0,\n  onSlideChange,\n  theme = 'system',\n  controlsVariant = 'default',\n  className = '',\n}) => {\n  const [currentSlide, setCurrentSlide] = useState(currentIndex)\n  const hasNextSlide = currentSlide < content.length - 1\n  const hasPreviousSlide = currentSlide > 0\n\n  // Determine theme class based on prop or system setting\n  const getThemeClass = () => {\n    if (theme === 'system') {\n      const prefersDark =\n        window.matchMedia &&\n        window.matchMedia('(prefers-color-scheme: dark)').matches\n      return prefersDark ? 'dark' : 'light'\n    }\n    return theme\n  }\n\n  const [themeClass, setThemeClass] = useState(getThemeClass())\n\n  // Update theme when system preference changes\n  useEffect(() => {\n    if (theme === 'system') {\n      const mediaQuery = window.matchMedia('(prefers-color-scheme: dark)')\n      const handleChange = () =>\n        setThemeClass(mediaQuery.matches ? 'dark' : 'light')\n\n      mediaQuery.addEventListener('change', handleChange)\n      return () => mediaQuery.removeEventListener('change', handleChange)\n    } else {\n      setThemeClass(theme)\n    }\n    // Return undefined for the else case\n    return undefined\n  }, [theme])\n\n  // Sync with external control\n  useEffect(() => {\n    if (currentIndex !== undefined && currentIndex !== currentSlide) {\n      setCurrentSlide(currentIndex)\n    }\n  }, [currentIndex, currentSlide])\n\n  // Navigate to next slide\n  const nextSlide = useCallback(() => {\n    if (hasNextSlide) {\n      const newIndex = currentSlide + 1\n      setCurrentSlide(newIndex)\n      if (onSlideChange) {\n        onSlideChange(newIndex)\n      }\n    }\n  }, [currentSlide, hasNextSlide, onSlideChange])\n\n  // Navigate to previous slide\n  const previousSlide = useCallback(() => {\n    if (hasPreviousSlide) {\n      const newIndex = currentSlide - 1\n      setCurrentSlide(newIndex)\n      if (onSlideChange) {\n        onSlideChange(newIndex)\n      }\n    }\n  }, [currentSlide, hasPreviousSlide, onSlideChange])\n\n  // Handle keyboard navigation\n  useEffect(() => {\n    const handleKeyDown = (e: KeyboardEvent) => {\n      if (e.key === 'ArrowRight' || e.key === 'ArrowDown') {\n        nextSlide()\n      } else if (e.key === 'ArrowLeft' || e.key === 'ArrowUp') {\n        previousSlide()\n      }\n    }\n\n    window.addEventListener('keydown', handleKeyDown)\n    return () => window.removeEventListener('keydown', handleKeyDown)\n  }, [nextSlide, previousSlide])\n\n  // Styles based on theme\n  const getContainerStyles = () => {\n    return themeClass === 'dark'\n      ? 'bg-gray-800 text-white border-gray-700'\n      : 'bg-white text-gray-800 border-gray-200'\n  }\n\n  return (\n    <div\n      className={`markdown-slideshow flex w-full flex-col overflow-hidden rounded-lg border-2 ${getContainerStyles()} ${className}`}\n      role='region'\n      aria-label='Slideshow'\n    >\n      {/* Content Area */}\n      <div className='relative w-full'>\n        {/* Side Navigation for Larger Screens */}\n        <div className='absolute inset-y-0 left-0 z-10 hidden items-center px-2 sm:flex'>\n          {hasPreviousSlide && (\n            <button\n              onClick={previousSlide}\n              className='rounded-full bg-black bg-opacity-30 p-1 text-white hover:bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-white'\n              aria-label='Previous slide'\n            >\n              <ChevronLeft size={24} />\n            </button>\n          )}\n        </div>\n\n        {/* Slide Content */}\n        <div\n          className='max-h-[calc(100vh-10rem)] w-full overflow-auto rounded-lg p-6 shadow'\n          aria-live='polite'\n        >\n          <MarkdownViewer\n            key={currentSlide}\n            content={content[currentSlide] || ''}\n            images={images}\n            knowledge_id={knowledge_id}\n          />\n        </div>\n\n        {/* Side Navigation for Larger Screens */}\n        <div className='absolute inset-y-0 right-0 z-10 hidden items-center px-2 sm:flex'>\n          {hasNextSlide && (\n            <button\n              onClick={nextSlide}\n              className='rounded-full bg-black bg-opacity-30 p-1 text-white hover:bg-opacity-50 focus:outline-none focus:ring-2 focus:ring-white'\n              aria-label='Next slide'\n            >\n              <ChevronRight size={24} />\n            </button>\n          )}\n        </div>\n      </div>\n\n      {/* Controls at bottom */}\n      <SlideshowControls\n        currentSlide={currentSlide}\n        totalSlides={content.length}\n        onNext={nextSlide}\n        onPrevious={previousSlide}\n        variant={controlsVariant}\n        className={\n          themeClass === 'dark'\n            ? 'border-t border-gray-700 px-4'\n            : 'border-t border-gray-200 px-4'\n        }\n      />\n    </div>\n  )\n}\n\nexport default ModernMarkdownSlideshow\n","'use client'\n\nimport React, { useState, useEffect } from 'react'\n\ninterface Question {\n  question: string\n  options: string[]\n  answer: string\n  points?: number // Optional points per question\n}\n\ninterface QuizProps {\n  questions: Question[]\n  negativeMarking?: number // Fraction of points deducted for wrong answers (0.25 = 25%)\n}\n\nconst Quiz: React.FC<QuizProps> = ({\n  questions,\n  negativeMarking = 0.25, // Default to 25% negative marking\n}) => {\n  const [selectedAnswers, setSelectedAnswers] = useState<{\n    [key: number]: string\n  }>({})\n  const [showResults, setShowResults] = useState(false)\n  const [score, setScore] = useState<number>(0)\n  const [maxScore, setMaxScore] = useState<number>(0)\n  const [attempted, setAttempted] = useState<number>(0)\n  const [correctAnswers, setCorrectAnswers] = useState<number>(0)\n  const [incorrectAnswers, setIncorrectAnswers] = useState<number>(0)\n  const [currentQuestionIndex, setCurrentQuestionIndex] = useState<number>(0)\n\n  // Calculate maximum possible score\n  useEffect(() => {\n    const total = questions.reduce(\n      (sum, question) => sum + (question.points || 1),\n      0\n    )\n    setMaxScore(total)\n  }, [questions])\n\n  // Handle answer selection\n  const handleAnswerSelect = (questionIndex: number, option: string) => {\n    setSelectedAnswers(prev => ({ ...prev, [questionIndex]: option }))\n  }\n\n  // Calculate score and show results with negative marking\n  const handleSubmit = () => {\n    let newScore = 0\n    let correct = 0\n    let incorrect = 0\n    let attempted = 0\n\n    questions.forEach((question, index) => {\n      const pointsForQuestion = question.points || 1\n\n      // If question was attempted\n      if (selectedAnswers[index]) {\n        attempted++\n\n        if (selectedAnswers[index] === question.answer) {\n          // Correct answer\n          newScore += pointsForQuestion\n          correct++\n        } else {\n          // Incorrect answer - apply negative marking\n          newScore -= pointsForQuestion * negativeMarking\n          incorrect++\n        }\n      }\n    })\n\n    // Ensure score doesn't go below zero\n    newScore = Math.max(0, newScore)\n\n    setScore(newScore)\n    setShowResults(true)\n    setAttempted(attempted)\n    setCorrectAnswers(correct)\n    setIncorrectAnswers(incorrect)\n  }\n\n  // Navigation functions\n  const goToNextQuestion = () => {\n    if (currentQuestionIndex < questions.length - 1) {\n      setCurrentQuestionIndex(prev => prev + 1)\n    }\n  }\n\n  const goToPreviousQuestion = () => {\n    if (currentQuestionIndex > 0) {\n      setCurrentQuestionIndex(prev => prev - 1)\n    }\n  }\n\n  // Reset quiz\n  const handleReset = () => {\n    setSelectedAnswers({})\n    setShowResults(false)\n    setScore(0)\n    setAttempted(0)\n    setCorrectAnswers(0)\n    setIncorrectAnswers(0)\n    setCurrentQuestionIndex(0)\n  }\n\n  // Calculate percentage score\n  const percentageScore = Math.round((score / maxScore) * 100)\n\n  return (\n    <div className='mx-auto mt-6 flex min-h-[600px] max-w-xl flex-col rounded-lg bg-gray-800 p-6 text-white shadow-lg'>\n      <h2 className='mb-4 text-center text-2xl font-bold'>Interactive Quiz</h2>\n\n      {!showResults ? (\n        <>\n          {/* Progress indicator */}\n          <div className='mb-4'>\n            <div className='mb-1 flex justify-between text-sm text-gray-300'>\n              <span>\n                Question {currentQuestionIndex + 1} of {questions.length}\n              </span>\n              <span>{Object.keys(selectedAnswers).length} answered</span>\n            </div>\n            <div className='h-2.5 w-full rounded-full bg-gray-700'>\n              <div\n                className='h-2.5 rounded-full bg-blue-500 transition-all duration-300'\n                style={{\n                  width: `${(Object.keys(selectedAnswers).length / questions.length) * 100}%`,\n                }}\n              ></div>\n            </div>\n          </div>\n\n          {/* Current Question */}\n          <div className='flex flex-grow flex-col'>\n            <div className='mb-4 flex-grow rounded-lg bg-gray-700 p-4'>\n              <p className='mb-4 text-lg font-semibold'>\n                {questions[currentQuestionIndex]?.question}\n                <span className='ml-2 text-sm text-gray-300'>\n                  ({questions[currentQuestionIndex]?.points || 1} point\n                  {(questions[currentQuestionIndex]?.points || 1) !== 1\n                    ? 's'\n                    : ''}\n                  )\n                </span>\n              </p>\n              <div className='space-y-3'>\n                {questions[currentQuestionIndex]?.options?.map((option, i) => {\n                  const isSelected =\n                    selectedAnswers[currentQuestionIndex] === option\n                  return (\n                    <button\n                      key={i}\n                      onClick={() =>\n                        handleAnswerSelect(currentQuestionIndex, option)\n                      }\n                      className={`w-full rounded-md p-3 text-left transition-all duration-200 ${\n                        isSelected\n                          ? 'border border-blue-400 bg-blue-600'\n                          : 'bg-gray-600 hover:bg-gray-500'\n                      }`}\n                    >\n                      {option}\n                    </button>\n                  )\n                })}\n              </div>\n            </div>\n\n            {/* Navigation Controls */}\n            <div className='mt-auto flex items-center justify-between'>\n              <button\n                onClick={goToPreviousQuestion}\n                disabled={currentQuestionIndex === 0}\n                className='rounded-lg bg-gray-600 px-4 py-2 hover:bg-gray-500 disabled:cursor-not-allowed disabled:opacity-50'\n              >\n                Previous\n              </button>\n              {currentQuestionIndex === questions.length - 1 ? (\n                <button\n                  onClick={handleSubmit}\n                  className='rounded-lg bg-blue-500 px-6 py-2 font-semibold hover:bg-blue-600'\n                >\n                  Submit Quiz\n                </button>\n              ) : (\n                <button\n                  onClick={goToNextQuestion}\n                  className='rounded-lg bg-gray-600 px-4 py-2 hover:bg-gray-500'\n                >\n                  Next\n                </button>\n              )}\n            </div>\n          </div>\n        </>\n      ) : (\n        // Results view\n        <div className='flex flex-grow flex-col'>\n          <div className='mb-6 rounded-lg bg-gray-700 p-6'>\n            <h3 className='mb-4 text-center text-2xl font-bold'>\n              Quiz Results\n            </h3>\n            <div className='grid grid-cols-2 gap-6'>\n              <div className='rounded-lg bg-gray-600 p-4 text-center'>\n                <p className='mb-1 text-3xl font-bold text-blue-300'>\n                  {percentageScore}%\n                </p>\n                <p className='text-sm'>Score</p>\n              </div>\n              <div className='rounded-lg bg-gray-600 p-4 text-center'>\n                <p className='mb-1 text-3xl font-bold'>\n                  {score.toFixed(1)}/{maxScore}\n                </p>\n                <p className='text-sm'>Points</p>\n              </div>\n              <div className='rounded-lg bg-gray-600 p-4 text-center'>\n                <p className='mb-1 text-3xl font-bold text-green-400'>\n                  {correctAnswers}\n                </p>\n                <p className='text-sm'>Correct</p>\n              </div>\n              <div className='rounded-lg bg-gray-600 p-4 text-center'>\n                <p className='mb-1 text-3xl font-bold text-red-400'>\n                  {incorrectAnswers}\n                </p>\n                <p className='text-sm'>Incorrect</p>\n              </div>\n            </div>\n          </div>\n          <button\n            onClick={handleReset}\n            className='w-full rounded-lg bg-green-500 px-6 py-3 font-semibold text-white transition duration-150 hover:bg-green-600'\n          >\n            Try Again\n          </button>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default Quiz\n","export default function cc(names) {\n  if (typeof names === \"string\" || typeof names === \"number\") return \"\" + names\n\n  let out = \"\"\n\n  if (Array.isArray(names)) {\n    for (let i = 0, tmp; i < names.length; i++) {\n      if ((tmp = cc(names[i])) !== \"\") {\n        out += (out && \" \") + tmp\n      }\n    }\n  } else {\n    for (let k in names) {\n      if (names[k]) out += (out && \" \") + k\n    }\n  }\n\n  return out\n}\n","var noop = {value: () => {}};\n\nfunction dispatch() {\n  for (var i = 0, n = arguments.length, _ = {}, t; i < n; ++i) {\n    if (!(t = arguments[i] + \"\") || (t in _) || /[\\s.]/.test(t)) throw new Error(\"illegal type: \" + t);\n    _[t] = [];\n  }\n  return new Dispatch(_);\n}\n\nfunction Dispatch(_) {\n  this._ = _;\n}\n\nfunction parseTypenames(typenames, types) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    if (t && !types.hasOwnProperty(t)) throw new Error(\"unknown type: \" + t);\n    return {type: t, name: name};\n  });\n}\n\nDispatch.prototype = dispatch.prototype = {\n  constructor: Dispatch,\n  on: function(typename, callback) {\n    var _ = this._,\n        T = parseTypenames(typename + \"\", _),\n        t,\n        i = -1,\n        n = T.length;\n\n    // If no callback was specified, return the callback of the given type and name.\n    if (arguments.length < 2) {\n      while (++i < n) if ((t = (typename = T[i]).type) && (t = get(_[t], typename.name))) return t;\n      return;\n    }\n\n    // If a type was specified, set the callback for the given type and name.\n    // Otherwise, if a null callback was specified, remove callbacks of the given name.\n    if (callback != null && typeof callback !== \"function\") throw new Error(\"invalid callback: \" + callback);\n    while (++i < n) {\n      if (t = (typename = T[i]).type) _[t] = set(_[t], typename.name, callback);\n      else if (callback == null) for (t in _) _[t] = set(_[t], typename.name, null);\n    }\n\n    return this;\n  },\n  copy: function() {\n    var copy = {}, _ = this._;\n    for (var t in _) copy[t] = _[t].slice();\n    return new Dispatch(copy);\n  },\n  call: function(type, that) {\n    if ((n = arguments.length - 2) > 0) for (var args = new Array(n), i = 0, n, t; i < n; ++i) args[i] = arguments[i + 2];\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  },\n  apply: function(type, that, args) {\n    if (!this._.hasOwnProperty(type)) throw new Error(\"unknown type: \" + type);\n    for (var t = this._[type], i = 0, n = t.length; i < n; ++i) t[i].value.apply(that, args);\n  }\n};\n\nfunction get(type, name) {\n  for (var i = 0, n = type.length, c; i < n; ++i) {\n    if ((c = type[i]).name === name) {\n      return c.value;\n    }\n  }\n}\n\nfunction set(type, name, callback) {\n  for (var i = 0, n = type.length; i < n; ++i) {\n    if (type[i].name === name) {\n      type[i] = noop, type = type.slice(0, i).concat(type.slice(i + 1));\n      break;\n    }\n  }\n  if (callback != null) type.push({name: name, value: callback});\n  return type;\n}\n\nexport default dispatch;\n","export var xhtml = \"http://www.w3.org/1999/xhtml\";\n\nexport default {\n  svg: \"http://www.w3.org/2000/svg\",\n  xhtml: xhtml,\n  xlink: \"http://www.w3.org/1999/xlink\",\n  xml: \"http://www.w3.org/XML/1998/namespace\",\n  xmlns: \"http://www.w3.org/2000/xmlns/\"\n};\n","import namespaces from \"./namespaces.js\";\n\nexport default function(name) {\n  var prefix = name += \"\", i = prefix.indexOf(\":\");\n  if (i >= 0 && (prefix = name.slice(0, i)) !== \"xmlns\") name = name.slice(i + 1);\n  return namespaces.hasOwnProperty(prefix) ? {space: namespaces[prefix], local: name} : name; // eslint-disable-line no-prototype-builtins\n}\n","import namespace from \"./namespace.js\";\nimport {xhtml} from \"./namespaces.js\";\n\nfunction creatorInherit(name) {\n  return function() {\n    var document = this.ownerDocument,\n        uri = this.namespaceURI;\n    return uri === xhtml && document.documentElement.namespaceURI === xhtml\n        ? document.createElement(name)\n        : document.createElementNS(uri, name);\n  };\n}\n\nfunction creatorFixed(fullname) {\n  return function() {\n    return this.ownerDocument.createElementNS(fullname.space, fullname.local);\n  };\n}\n\nexport default function(name) {\n  var fullname = namespace(name);\n  return (fullname.local\n      ? creatorFixed\n      : creatorInherit)(fullname);\n}\n","function none() {}\n\nexport default function(selector) {\n  return selector == null ? none : function() {\n    return this.querySelector(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport selector from \"../selector.js\";\n\nexport default function(select) {\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","// Given something array like (or null), returns something that is strictly an\n// array. This is used to ensure that array-like objects passed to d3.selectAll\n// or selection.selectAll are converted into proper arrays when creating a\n// selection; we donâ€™t ever want to create a selection backed by a live\n// HTMLCollection or NodeList. However, note that selection.selectAll will use a\n// static NodeList as a group, since it safely derived from querySelectorAll.\nexport default function array(x) {\n  return x == null ? [] : Array.isArray(x) ? x : Array.from(x);\n}\n","function empty() {\n  return [];\n}\n\nexport default function(selector) {\n  return selector == null ? empty : function() {\n    return this.querySelectorAll(selector);\n  };\n}\n","import {Selection} from \"./index.js\";\nimport array from \"../array.js\";\nimport selectorAll from \"../selectorAll.js\";\n\nfunction arrayAll(select) {\n  return function() {\n    return array(select.apply(this, arguments));\n  };\n}\n\nexport default function(select) {\n  if (typeof select === \"function\") select = arrayAll(select);\n  else select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        subgroups.push(select.call(node, node.__data__, i, group));\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, parents);\n}\n","export default function(selector) {\n  return function() {\n    return this.matches(selector);\n  };\n}\n\nexport function childMatcher(selector) {\n  return function(node) {\n    return node.matches(selector);\n  };\n}\n\n","import {childMatcher} from \"../matcher.js\";\n\nvar find = Array.prototype.find;\n\nfunction childFind(match) {\n  return function() {\n    return find.call(this.children, match);\n  };\n}\n\nfunction childFirst() {\n  return this.firstElementChild;\n}\n\nexport default function(match) {\n  return this.select(match == null ? childFirst\n      : childFind(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {childMatcher} from \"../matcher.js\";\n\nvar filter = Array.prototype.filter;\n\nfunction children() {\n  return Array.from(this.children);\n}\n\nfunction childrenFilter(match) {\n  return function() {\n    return filter.call(this.children, match);\n  };\n}\n\nexport default function(match) {\n  return this.selectAll(match == null ? children\n      : childrenFilter(typeof match === \"function\" ? match : childMatcher(match)));\n}\n","import {Selection} from \"./index.js\";\nimport matcher from \"../matcher.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Selection(subgroups, this._parents);\n}\n","export default function(update) {\n  return new Array(update.length);\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._enter || this._groups.map(sparse), this._parents);\n}\n\nexport function EnterNode(parent, datum) {\n  this.ownerDocument = parent.ownerDocument;\n  this.namespaceURI = parent.namespaceURI;\n  this._next = null;\n  this._parent = parent;\n  this.__data__ = datum;\n}\n\nEnterNode.prototype = {\n  constructor: EnterNode,\n  appendChild: function(child) { return this._parent.insertBefore(child, this._next); },\n  insertBefore: function(child, next) { return this._parent.insertBefore(child, next); },\n  querySelector: function(selector) { return this._parent.querySelector(selector); },\n  querySelectorAll: function(selector) { return this._parent.querySelectorAll(selector); }\n};\n","export default function(x) {\n  return function() {\n    return x;\n  };\n}\n","import {Selection} from \"./index.js\";\nimport {EnterNode} from \"./enter.js\";\nimport constant from \"../constant.js\";\n\nfunction bindIndex(parent, group, enter, update, exit, data) {\n  var i = 0,\n      node,\n      groupLength = group.length,\n      dataLength = data.length;\n\n  // Put any non-null nodes that fit into update.\n  // Put any null nodes into enter.\n  // Put any remaining data into enter.\n  for (; i < dataLength; ++i) {\n    if (node = group[i]) {\n      node.__data__ = data[i];\n      update[i] = node;\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Put any non-null nodes that donâ€™t fit into exit.\n  for (; i < groupLength; ++i) {\n    if (node = group[i]) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction bindKey(parent, group, enter, update, exit, data, key) {\n  var i,\n      node,\n      nodeByKeyValue = new Map,\n      groupLength = group.length,\n      dataLength = data.length,\n      keyValues = new Array(groupLength),\n      keyValue;\n\n  // Compute the key for each node.\n  // If multiple nodes have the same key, the duplicates are added to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if (node = group[i]) {\n      keyValues[i] = keyValue = key.call(node, node.__data__, i, group) + \"\";\n      if (nodeByKeyValue.has(keyValue)) {\n        exit[i] = node;\n      } else {\n        nodeByKeyValue.set(keyValue, node);\n      }\n    }\n  }\n\n  // Compute the key for each datum.\n  // If there a node associated with this key, join and add it to update.\n  // If there is not (or the key is a duplicate), add it to enter.\n  for (i = 0; i < dataLength; ++i) {\n    keyValue = key.call(parent, data[i], i, data) + \"\";\n    if (node = nodeByKeyValue.get(keyValue)) {\n      update[i] = node;\n      node.__data__ = data[i];\n      nodeByKeyValue.delete(keyValue);\n    } else {\n      enter[i] = new EnterNode(parent, data[i]);\n    }\n  }\n\n  // Add any remaining nodes that were not bound to data to exit.\n  for (i = 0; i < groupLength; ++i) {\n    if ((node = group[i]) && (nodeByKeyValue.get(keyValues[i]) === node)) {\n      exit[i] = node;\n    }\n  }\n}\n\nfunction datum(node) {\n  return node.__data__;\n}\n\nexport default function(value, key) {\n  if (!arguments.length) return Array.from(this, datum);\n\n  var bind = key ? bindKey : bindIndex,\n      parents = this._parents,\n      groups = this._groups;\n\n  if (typeof value !== \"function\") value = constant(value);\n\n  for (var m = groups.length, update = new Array(m), enter = new Array(m), exit = new Array(m), j = 0; j < m; ++j) {\n    var parent = parents[j],\n        group = groups[j],\n        groupLength = group.length,\n        data = arraylike(value.call(parent, parent && parent.__data__, j, parents)),\n        dataLength = data.length,\n        enterGroup = enter[j] = new Array(dataLength),\n        updateGroup = update[j] = new Array(dataLength),\n        exitGroup = exit[j] = new Array(groupLength);\n\n    bind(parent, group, enterGroup, updateGroup, exitGroup, data, key);\n\n    // Now connect the enter nodes to their following update node, such that\n    // appendChild can insert the materialized enter node before this node,\n    // rather than at the end of the parent node.\n    for (var i0 = 0, i1 = 0, previous, next; i0 < dataLength; ++i0) {\n      if (previous = enterGroup[i0]) {\n        if (i0 >= i1) i1 = i0 + 1;\n        while (!(next = updateGroup[i1]) && ++i1 < dataLength);\n        previous._next = next || null;\n      }\n    }\n  }\n\n  update = new Selection(update, parents);\n  update._enter = enter;\n  update._exit = exit;\n  return update;\n}\n\n// Given some data, this returns an array-like view of it: an object that\n// exposes a length property and allows numeric indexing. Note that unlike\n// selectAll, this isnâ€™t worried about â€œliveâ€ collections because the resulting\n// array will only be used briefly while data is being bound. (It is possible to\n// cause the data to change while iterating by using a key function, but please\n// donâ€™t; weâ€™d rather avoid a gratuitous copy.)\nfunction arraylike(data) {\n  return typeof data === \"object\" && \"length\" in data\n    ? data // Array, TypedArray, NodeList, array-like\n    : Array.from(data); // Map, Set, iterable, string, or anything else\n}\n","import sparse from \"./sparse.js\";\nimport {Selection} from \"./index.js\";\n\nexport default function() {\n  return new Selection(this._exit || this._groups.map(sparse), this._parents);\n}\n","export default function(onenter, onupdate, onexit) {\n  var enter = this.enter(), update = this, exit = this.exit();\n  if (typeof onenter === \"function\") {\n    enter = onenter(enter);\n    if (enter) enter = enter.selection();\n  } else {\n    enter = enter.append(onenter + \"\");\n  }\n  if (onupdate != null) {\n    update = onupdate(update);\n    if (update) update = update.selection();\n  }\n  if (onexit == null) exit.remove(); else onexit(exit);\n  return enter && update ? enter.merge(update).order() : update;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(context) {\n  var selection = context.selection ? context.selection() : context;\n\n  for (var groups0 = this._groups, groups1 = selection._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Selection(merges, this._parents);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = -1, m = groups.length; ++j < m;) {\n    for (var group = groups[j], i = group.length - 1, next = group[i], node; --i >= 0;) {\n      if (node = group[i]) {\n        if (next && node.compareDocumentPosition(next) ^ 4) next.parentNode.insertBefore(node, next);\n        next = node;\n      }\n    }\n  }\n\n  return this;\n}\n","import {Selection} from \"./index.js\";\n\nexport default function(compare) {\n  if (!compare) compare = ascending;\n\n  function compareNode(a, b) {\n    return a && b ? compare(a.__data__, b.__data__) : !a - !b;\n  }\n\n  for (var groups = this._groups, m = groups.length, sortgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, sortgroup = sortgroups[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        sortgroup[i] = node;\n      }\n    }\n    sortgroup.sort(compareNode);\n  }\n\n  return new Selection(sortgroups, this._parents).order();\n}\n\nfunction ascending(a, b) {\n  return a < b ? -1 : a > b ? 1 : a >= b ? 0 : NaN;\n}\n","export default function() {\n  var callback = arguments[0];\n  arguments[0] = this;\n  callback.apply(null, arguments);\n  return this;\n}\n","export default function() {\n  return Array.from(this);\n}\n","export default function() {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length; i < n; ++i) {\n      var node = group[i];\n      if (node) return node;\n    }\n  }\n\n  return null;\n}\n","export default function() {\n  let size = 0;\n  for (const node of this) ++size; // eslint-disable-line no-unused-vars\n  return size;\n}\n","export default function() {\n  return !this.node();\n}\n","export default function(callback) {\n\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) callback.call(node, node.__data__, i, group);\n    }\n  }\n\n  return this;\n}\n","import namespace from \"../namespace.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, value) {\n  return function() {\n    this.setAttribute(name, value);\n  };\n}\n\nfunction attrConstantNS(fullname, value) {\n  return function() {\n    this.setAttributeNS(fullname.space, fullname.local, value);\n  };\n}\n\nfunction attrFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttribute(name);\n    else this.setAttribute(name, v);\n  };\n}\n\nfunction attrFunctionNS(fullname, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.removeAttributeNS(fullname.space, fullname.local);\n    else this.setAttributeNS(fullname.space, fullname.local, v);\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name);\n\n  if (arguments.length < 2) {\n    var node = this.node();\n    return fullname.local\n        ? node.getAttributeNS(fullname.space, fullname.local)\n        : node.getAttribute(fullname);\n  }\n\n  return this.each((value == null\n      ? (fullname.local ? attrRemoveNS : attrRemove) : (typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)\n      : (fullname.local ? attrConstantNS : attrConstant)))(fullname, value));\n}\n","export default function(node) {\n  return (node.ownerDocument && node.ownerDocument.defaultView) // node is a Node\n      || (node.document && node) // node is a Window\n      || node.defaultView; // node is a Document\n}\n","import defaultView from \"../window.js\";\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, value, priority) {\n  return function() {\n    this.style.setProperty(name, value, priority);\n  };\n}\n\nfunction styleFunction(name, value, priority) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) this.style.removeProperty(name);\n    else this.style.setProperty(name, v, priority);\n  };\n}\n\nexport default function(name, value, priority) {\n  return arguments.length > 1\n      ? this.each((value == null\n            ? styleRemove : typeof value === \"function\"\n            ? styleFunction\n            : styleConstant)(name, value, priority == null ? \"\" : priority))\n      : styleValue(this.node(), name);\n}\n\nexport function styleValue(node, name) {\n  return node.style.getPropertyValue(name)\n      || defaultView(node).getComputedStyle(node, null).getPropertyValue(name);\n}\n","function propertyRemove(name) {\n  return function() {\n    delete this[name];\n  };\n}\n\nfunction propertyConstant(name, value) {\n  return function() {\n    this[name] = value;\n  };\n}\n\nfunction propertyFunction(name, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (v == null) delete this[name];\n    else this[name] = v;\n  };\n}\n\nexport default function(name, value) {\n  return arguments.length > 1\n      ? this.each((value == null\n          ? propertyRemove : typeof value === \"function\"\n          ? propertyFunction\n          : propertyConstant)(name, value))\n      : this.node()[name];\n}\n","function classArray(string) {\n  return string.trim().split(/^|\\s+/);\n}\n\nfunction classList(node) {\n  return node.classList || new ClassList(node);\n}\n\nfunction ClassList(node) {\n  this._node = node;\n  this._names = classArray(node.getAttribute(\"class\") || \"\");\n}\n\nClassList.prototype = {\n  add: function(name) {\n    var i = this._names.indexOf(name);\n    if (i < 0) {\n      this._names.push(name);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  remove: function(name) {\n    var i = this._names.indexOf(name);\n    if (i >= 0) {\n      this._names.splice(i, 1);\n      this._node.setAttribute(\"class\", this._names.join(\" \"));\n    }\n  },\n  contains: function(name) {\n    return this._names.indexOf(name) >= 0;\n  }\n};\n\nfunction classedAdd(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.add(names[i]);\n}\n\nfunction classedRemove(node, names) {\n  var list = classList(node), i = -1, n = names.length;\n  while (++i < n) list.remove(names[i]);\n}\n\nfunction classedTrue(names) {\n  return function() {\n    classedAdd(this, names);\n  };\n}\n\nfunction classedFalse(names) {\n  return function() {\n    classedRemove(this, names);\n  };\n}\n\nfunction classedFunction(names, value) {\n  return function() {\n    (value.apply(this, arguments) ? classedAdd : classedRemove)(this, names);\n  };\n}\n\nexport default function(name, value) {\n  var names = classArray(name + \"\");\n\n  if (arguments.length < 2) {\n    var list = classList(this.node()), i = -1, n = names.length;\n    while (++i < n) if (!list.contains(names[i])) return false;\n    return true;\n  }\n\n  return this.each((typeof value === \"function\"\n      ? classedFunction : value\n      ? classedTrue\n      : classedFalse)(names, value));\n}\n","function textRemove() {\n  this.textContent = \"\";\n}\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.textContent = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? textRemove : (typeof value === \"function\"\n          ? textFunction\n          : textConstant)(value))\n      : this.node().textContent;\n}\n","function htmlRemove() {\n  this.innerHTML = \"\";\n}\n\nfunction htmlConstant(value) {\n  return function() {\n    this.innerHTML = value;\n  };\n}\n\nfunction htmlFunction(value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    this.innerHTML = v == null ? \"\" : v;\n  };\n}\n\nexport default function(value) {\n  return arguments.length\n      ? this.each(value == null\n          ? htmlRemove : (typeof value === \"function\"\n          ? htmlFunction\n          : htmlConstant)(value))\n      : this.node().innerHTML;\n}\n","function raise() {\n  if (this.nextSibling) this.parentNode.appendChild(this);\n}\n\nexport default function() {\n  return this.each(raise);\n}\n","function lower() {\n  if (this.previousSibling) this.parentNode.insertBefore(this, this.parentNode.firstChild);\n}\n\nexport default function() {\n  return this.each(lower);\n}\n","import creator from \"../creator.js\";\n\nexport default function(name) {\n  var create = typeof name === \"function\" ? name : creator(name);\n  return this.select(function() {\n    return this.appendChild(create.apply(this, arguments));\n  });\n}\n","import creator from \"../creator.js\";\nimport selector from \"../selector.js\";\n\nfunction constantNull() {\n  return null;\n}\n\nexport default function(name, before) {\n  var create = typeof name === \"function\" ? name : creator(name),\n      select = before == null ? constantNull : typeof before === \"function\" ? before : selector(before);\n  return this.select(function() {\n    return this.insertBefore(create.apply(this, arguments), select.apply(this, arguments) || null);\n  });\n}\n","function remove() {\n  var parent = this.parentNode;\n  if (parent) parent.removeChild(this);\n}\n\nexport default function() {\n  return this.each(remove);\n}\n","function selection_cloneShallow() {\n  var clone = this.cloneNode(false), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nfunction selection_cloneDeep() {\n  var clone = this.cloneNode(true), parent = this.parentNode;\n  return parent ? parent.insertBefore(clone, this.nextSibling) : clone;\n}\n\nexport default function(deep) {\n  return this.select(deep ? selection_cloneDeep : selection_cloneShallow);\n}\n","export default function(value) {\n  return arguments.length\n      ? this.property(\"__data__\", value)\n      : this.node().__data__;\n}\n","function contextListener(listener) {\n  return function(event) {\n    listener.call(this, event, this.__data__);\n  };\n}\n\nfunction parseTypenames(typenames) {\n  return typenames.trim().split(/^|\\s+/).map(function(t) {\n    var name = \"\", i = t.indexOf(\".\");\n    if (i >= 0) name = t.slice(i + 1), t = t.slice(0, i);\n    return {type: t, name: name};\n  });\n}\n\nfunction onRemove(typename) {\n  return function() {\n    var on = this.__on;\n    if (!on) return;\n    for (var j = 0, i = -1, m = on.length, o; j < m; ++j) {\n      if (o = on[j], (!typename.type || o.type === typename.type) && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n      } else {\n        on[++i] = o;\n      }\n    }\n    if (++i) on.length = i;\n    else delete this.__on;\n  };\n}\n\nfunction onAdd(typename, value, options) {\n  return function() {\n    var on = this.__on, o, listener = contextListener(value);\n    if (on) for (var j = 0, m = on.length; j < m; ++j) {\n      if ((o = on[j]).type === typename.type && o.name === typename.name) {\n        this.removeEventListener(o.type, o.listener, o.options);\n        this.addEventListener(o.type, o.listener = listener, o.options = options);\n        o.value = value;\n        return;\n      }\n    }\n    this.addEventListener(typename.type, listener, options);\n    o = {type: typename.type, name: typename.name, value: value, listener: listener, options: options};\n    if (!on) this.__on = [o];\n    else on.push(o);\n  };\n}\n\nexport default function(typename, value, options) {\n  var typenames = parseTypenames(typename + \"\"), i, n = typenames.length, t;\n\n  if (arguments.length < 2) {\n    var on = this.node().__on;\n    if (on) for (var j = 0, m = on.length, o; j < m; ++j) {\n      for (i = 0, o = on[j]; i < n; ++i) {\n        if ((t = typenames[i]).type === o.type && t.name === o.name) {\n          return o.value;\n        }\n      }\n    }\n    return;\n  }\n\n  on = value ? onAdd : onRemove;\n  for (i = 0; i < n; ++i) this.each(on(typenames[i], value, options));\n  return this;\n}\n","import defaultView from \"../window.js\";\n\nfunction dispatchEvent(node, type, params) {\n  var window = defaultView(node),\n      event = window.CustomEvent;\n\n  if (typeof event === \"function\") {\n    event = new event(type, params);\n  } else {\n    event = window.document.createEvent(\"Event\");\n    if (params) event.initEvent(type, params.bubbles, params.cancelable), event.detail = params.detail;\n    else event.initEvent(type, false, false);\n  }\n\n  node.dispatchEvent(event);\n}\n\nfunction dispatchConstant(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params);\n  };\n}\n\nfunction dispatchFunction(type, params) {\n  return function() {\n    return dispatchEvent(this, type, params.apply(this, arguments));\n  };\n}\n\nexport default function(type, params) {\n  return this.each((typeof params === \"function\"\n      ? dispatchFunction\n      : dispatchConstant)(type, params));\n}\n","export default function*() {\n  for (var groups = this._groups, j = 0, m = groups.length; j < m; ++j) {\n    for (var group = groups[j], i = 0, n = group.length, node; i < n; ++i) {\n      if (node = group[i]) yield node;\n    }\n  }\n}\n","import selection_select from \"./select.js\";\nimport selection_selectAll from \"./selectAll.js\";\nimport selection_selectChild from \"./selectChild.js\";\nimport selection_selectChildren from \"./selectChildren.js\";\nimport selection_filter from \"./filter.js\";\nimport selection_data from \"./data.js\";\nimport selection_enter from \"./enter.js\";\nimport selection_exit from \"./exit.js\";\nimport selection_join from \"./join.js\";\nimport selection_merge from \"./merge.js\";\nimport selection_order from \"./order.js\";\nimport selection_sort from \"./sort.js\";\nimport selection_call from \"./call.js\";\nimport selection_nodes from \"./nodes.js\";\nimport selection_node from \"./node.js\";\nimport selection_size from \"./size.js\";\nimport selection_empty from \"./empty.js\";\nimport selection_each from \"./each.js\";\nimport selection_attr from \"./attr.js\";\nimport selection_style from \"./style.js\";\nimport selection_property from \"./property.js\";\nimport selection_classed from \"./classed.js\";\nimport selection_text from \"./text.js\";\nimport selection_html from \"./html.js\";\nimport selection_raise from \"./raise.js\";\nimport selection_lower from \"./lower.js\";\nimport selection_append from \"./append.js\";\nimport selection_insert from \"./insert.js\";\nimport selection_remove from \"./remove.js\";\nimport selection_clone from \"./clone.js\";\nimport selection_datum from \"./datum.js\";\nimport selection_on from \"./on.js\";\nimport selection_dispatch from \"./dispatch.js\";\nimport selection_iterator from \"./iterator.js\";\n\nexport var root = [null];\n\nexport function Selection(groups, parents) {\n  this._groups = groups;\n  this._parents = parents;\n}\n\nfunction selection() {\n  return new Selection([[document.documentElement]], root);\n}\n\nfunction selection_selection() {\n  return this;\n}\n\nSelection.prototype = selection.prototype = {\n  constructor: Selection,\n  select: selection_select,\n  selectAll: selection_selectAll,\n  selectChild: selection_selectChild,\n  selectChildren: selection_selectChildren,\n  filter: selection_filter,\n  data: selection_data,\n  enter: selection_enter,\n  exit: selection_exit,\n  join: selection_join,\n  merge: selection_merge,\n  selection: selection_selection,\n  order: selection_order,\n  sort: selection_sort,\n  call: selection_call,\n  nodes: selection_nodes,\n  node: selection_node,\n  size: selection_size,\n  empty: selection_empty,\n  each: selection_each,\n  attr: selection_attr,\n  style: selection_style,\n  property: selection_property,\n  classed: selection_classed,\n  text: selection_text,\n  html: selection_html,\n  raise: selection_raise,\n  lower: selection_lower,\n  append: selection_append,\n  insert: selection_insert,\n  remove: selection_remove,\n  clone: selection_clone,\n  datum: selection_datum,\n  on: selection_on,\n  dispatch: selection_dispatch,\n  [Symbol.iterator]: selection_iterator\n};\n\nexport default selection;\n","import {Selection, root} from \"./selection/index.js\";\n\nexport default function(selector) {\n  return typeof selector === \"string\"\n      ? new Selection([[document.querySelector(selector)]], [document.documentElement])\n      : new Selection([[selector]], root);\n}\n","export default function(event) {\n  let sourceEvent;\n  while (sourceEvent = event.sourceEvent) event = sourceEvent;\n  return event;\n}\n","import sourceEvent from \"./sourceEvent.js\";\n\nexport default function(event, node) {\n  event = sourceEvent(event);\n  if (node === undefined) node = event.currentTarget;\n  if (node) {\n    var svg = node.ownerSVGElement || node;\n    if (svg.createSVGPoint) {\n      var point = svg.createSVGPoint();\n      point.x = event.clientX, point.y = event.clientY;\n      point = point.matrixTransform(node.getScreenCTM().inverse());\n      return [point.x, point.y];\n    }\n    if (node.getBoundingClientRect) {\n      var rect = node.getBoundingClientRect();\n      return [event.clientX - rect.left - node.clientLeft, event.clientY - rect.top - node.clientTop];\n    }\n  }\n  return [event.pageX, event.pageY];\n}\n","// These are typically used in conjunction with noevent to ensure that we can\n// preventDefault on the event.\nexport const nonpassive = {passive: false};\nexport const nonpassivecapture = {capture: true, passive: false};\n\nexport function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {select} from \"d3-selection\";\nimport noevent, {nonpassivecapture} from \"./noevent.js\";\n\nexport default function(view) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", noevent, nonpassivecapture);\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", noevent, nonpassivecapture);\n  } else {\n    root.__noselect = root.style.MozUserSelect;\n    root.style.MozUserSelect = \"none\";\n  }\n}\n\nexport function yesdrag(view, noclick) {\n  var root = view.document.documentElement,\n      selection = select(view).on(\"dragstart.drag\", null);\n  if (noclick) {\n    selection.on(\"click.drag\", noevent, nonpassivecapture);\n    setTimeout(function() { selection.on(\"click.drag\", null); }, 0);\n  }\n  if (\"onselectstart\" in root) {\n    selection.on(\"selectstart.drag\", null);\n  } else {\n    root.style.MozUserSelect = root.__noselect;\n    delete root.__noselect;\n  }\n}\n","export default x => () => x;\n","export default function DragEvent(type, {\n  sourceEvent,\n  subject,\n  target,\n  identifier,\n  active,\n  x, y, dx, dy,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    subject: {value: subject, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    identifier: {value: identifier, enumerable: true, configurable: true},\n    active: {value: active, enumerable: true, configurable: true},\n    x: {value: x, enumerable: true, configurable: true},\n    y: {value: y, enumerable: true, configurable: true},\n    dx: {value: dx, enumerable: true, configurable: true},\n    dy: {value: dy, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n\nDragEvent.prototype.on = function() {\n  var value = this._.on.apply(this._, arguments);\n  return value === this._ ? this : value;\n};\n","import {dispatch} from \"d3-dispatch\";\nimport {select, pointer} from \"d3-selection\";\nimport nodrag, {yesdrag} from \"./nodrag.js\";\nimport noevent, {nonpassive, nonpassivecapture, nopropagation} from \"./noevent.js\";\nimport constant from \"./constant.js\";\nimport DragEvent from \"./event.js\";\n\n// Ignore right-click, since that should open the context menu.\nfunction defaultFilter(event) {\n  return !event.ctrlKey && !event.button;\n}\n\nfunction defaultContainer() {\n  return this.parentNode;\n}\n\nfunction defaultSubject(event, d) {\n  return d == null ? {x: event.x, y: event.y} : d;\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      container = defaultContainer,\n      subject = defaultSubject,\n      touchable = defaultTouchable,\n      gestures = {},\n      listeners = dispatch(\"start\", \"drag\", \"end\"),\n      active = 0,\n      mousedownx,\n      mousedowny,\n      mousemoving,\n      touchending,\n      clickDistance2 = 0;\n\n  function drag(selection) {\n    selection\n        .on(\"mousedown.drag\", mousedowned)\n      .filter(touchable)\n        .on(\"touchstart.drag\", touchstarted)\n        .on(\"touchmove.drag\", touchmoved, nonpassive)\n        .on(\"touchend.drag touchcancel.drag\", touchended)\n        .style(\"touch-action\", \"none\")\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  function mousedowned(event, d) {\n    if (touchending || !filter.call(this, event, d)) return;\n    var gesture = beforestart(this, container.call(this, event, d), event, d, \"mouse\");\n    if (!gesture) return;\n    select(event.view)\n      .on(\"mousemove.drag\", mousemoved, nonpassivecapture)\n      .on(\"mouseup.drag\", mouseupped, nonpassivecapture);\n    nodrag(event.view);\n    nopropagation(event);\n    mousemoving = false;\n    mousedownx = event.clientX;\n    mousedowny = event.clientY;\n    gesture(\"start\", event);\n  }\n\n  function mousemoved(event) {\n    noevent(event);\n    if (!mousemoving) {\n      var dx = event.clientX - mousedownx, dy = event.clientY - mousedowny;\n      mousemoving = dx * dx + dy * dy > clickDistance2;\n    }\n    gestures.mouse(\"drag\", event);\n  }\n\n  function mouseupped(event) {\n    select(event.view).on(\"mousemove.drag mouseup.drag\", null);\n    yesdrag(event.view, mousemoving);\n    noevent(event);\n    gestures.mouse(\"end\", event);\n  }\n\n  function touchstarted(event, d) {\n    if (!filter.call(this, event, d)) return;\n    var touches = event.changedTouches,\n        c = container.call(this, event, d),\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = beforestart(this, c, event, d, touches[i].identifier, touches[i])) {\n        nopropagation(event);\n        gesture(\"start\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchmoved(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        noevent(event);\n        gesture(\"drag\", event, touches[i]);\n      }\n    }\n  }\n\n  function touchended(event) {\n    var touches = event.changedTouches,\n        n = touches.length, i, gesture;\n\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, 500); // Ghost clicks are delayed!\n    for (i = 0; i < n; ++i) {\n      if (gesture = gestures[touches[i].identifier]) {\n        nopropagation(event);\n        gesture(\"end\", event, touches[i]);\n      }\n    }\n  }\n\n  function beforestart(that, container, event, d, identifier, touch) {\n    var dispatch = listeners.copy(),\n        p = pointer(touch || event, container), dx, dy,\n        s;\n\n    if ((s = subject.call(that, new DragEvent(\"beforestart\", {\n        sourceEvent: event,\n        target: drag,\n        identifier,\n        active,\n        x: p[0],\n        y: p[1],\n        dx: 0,\n        dy: 0,\n        dispatch\n      }), d)) == null) return;\n\n    dx = s.x - p[0] || 0;\n    dy = s.y - p[1] || 0;\n\n    return function gesture(type, event, touch) {\n      var p0 = p, n;\n      switch (type) {\n        case \"start\": gestures[identifier] = gesture, n = active++; break;\n        case \"end\": delete gestures[identifier], --active; // falls through\n        case \"drag\": p = pointer(touch || event, container), n = active; break;\n      }\n      dispatch.call(\n        type,\n        that,\n        new DragEvent(type, {\n          sourceEvent: event,\n          subject: s,\n          target: drag,\n          identifier,\n          active: n,\n          x: p[0] + dx,\n          y: p[1] + dy,\n          dx: p[0] - p0[0],\n          dy: p[1] - p0[1],\n          dispatch\n        }),\n        d\n      );\n    };\n  }\n\n  drag.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), drag) : filter;\n  };\n\n  drag.container = function(_) {\n    return arguments.length ? (container = typeof _ === \"function\" ? _ : constant(_), drag) : container;\n  };\n\n  drag.subject = function(_) {\n    return arguments.length ? (subject = typeof _ === \"function\" ? _ : constant(_), drag) : subject;\n  };\n\n  drag.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), drag) : touchable;\n  };\n\n  drag.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? drag : value;\n  };\n\n  drag.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, drag) : Math.sqrt(clickDistance2);\n  };\n\n  return drag;\n}\n","var frame = 0, // is an animation frame pending?\n    timeout = 0, // is a timeout pending?\n    interval = 0, // are any timers active?\n    pokeDelay = 1000, // how frequently we check for clock skew\n    taskHead,\n    taskTail,\n    clockLast = 0,\n    clockNow = 0,\n    clockSkew = 0,\n    clock = typeof performance === \"object\" && performance.now ? performance : Date,\n    setFrame = typeof window === \"object\" && window.requestAnimationFrame ? window.requestAnimationFrame.bind(window) : function(f) { setTimeout(f, 17); };\n\nexport function now() {\n  return clockNow || (setFrame(clearNow), clockNow = clock.now() + clockSkew);\n}\n\nfunction clearNow() {\n  clockNow = 0;\n}\n\nexport function Timer() {\n  this._call =\n  this._time =\n  this._next = null;\n}\n\nTimer.prototype = timer.prototype = {\n  constructor: Timer,\n  restart: function(callback, delay, time) {\n    if (typeof callback !== \"function\") throw new TypeError(\"callback is not a function\");\n    time = (time == null ? now() : +time) + (delay == null ? 0 : +delay);\n    if (!this._next && taskTail !== this) {\n      if (taskTail) taskTail._next = this;\n      else taskHead = this;\n      taskTail = this;\n    }\n    this._call = callback;\n    this._time = time;\n    sleep();\n  },\n  stop: function() {\n    if (this._call) {\n      this._call = null;\n      this._time = Infinity;\n      sleep();\n    }\n  }\n};\n\nexport function timer(callback, delay, time) {\n  var t = new Timer;\n  t.restart(callback, delay, time);\n  return t;\n}\n\nexport function timerFlush() {\n  now(); // Get the current time, if not already set.\n  ++frame; // Pretend weâ€™ve set an alarm, if we havenâ€™t already.\n  var t = taskHead, e;\n  while (t) {\n    if ((e = clockNow - t._time) >= 0) t._call.call(undefined, e);\n    t = t._next;\n  }\n  --frame;\n}\n\nfunction wake() {\n  clockNow = (clockLast = clock.now()) + clockSkew;\n  frame = timeout = 0;\n  try {\n    timerFlush();\n  } finally {\n    frame = 0;\n    nap();\n    clockNow = 0;\n  }\n}\n\nfunction poke() {\n  var now = clock.now(), delay = now - clockLast;\n  if (delay > pokeDelay) clockSkew -= delay, clockLast = now;\n}\n\nfunction nap() {\n  var t0, t1 = taskHead, t2, time = Infinity;\n  while (t1) {\n    if (t1._call) {\n      if (time > t1._time) time = t1._time;\n      t0 = t1, t1 = t1._next;\n    } else {\n      t2 = t1._next, t1._next = null;\n      t1 = t0 ? t0._next = t2 : taskHead = t2;\n    }\n  }\n  taskTail = t0;\n  sleep(time);\n}\n\nfunction sleep(time) {\n  if (frame) return; // Soonest alarm already set, or will be.\n  if (timeout) timeout = clearTimeout(timeout);\n  var delay = time - clockNow; // Strictly less than if we recomputed clockNow.\n  if (delay > 24) {\n    if (time < Infinity) timeout = setTimeout(wake, time - clock.now() - clockSkew);\n    if (interval) interval = clearInterval(interval);\n  } else {\n    if (!interval) clockLast = clock.now(), interval = setInterval(poke, pokeDelay);\n    frame = 1, setFrame(wake);\n  }\n}\n","import {Timer} from \"./timer.js\";\n\nexport default function(callback, delay, time) {\n  var t = new Timer;\n  delay = delay == null ? 0 : +delay;\n  t.restart(elapsed => {\n    t.stop();\n    callback(elapsed + delay);\n  }, delay, time);\n  return t;\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {timer, timeout} from \"d3-timer\";\n\nvar emptyOn = dispatch(\"start\", \"end\", \"cancel\", \"interrupt\");\nvar emptyTween = [];\n\nexport var CREATED = 0;\nexport var SCHEDULED = 1;\nexport var STARTING = 2;\nexport var STARTED = 3;\nexport var RUNNING = 4;\nexport var ENDING = 5;\nexport var ENDED = 6;\n\nexport default function(node, name, id, index, group, timing) {\n  var schedules = node.__transition;\n  if (!schedules) node.__transition = {};\n  else if (id in schedules) return;\n  create(node, id, {\n    name: name,\n    index: index, // For context during callback.\n    group: group, // For context during callback.\n    on: emptyOn,\n    tween: emptyTween,\n    time: timing.time,\n    delay: timing.delay,\n    duration: timing.duration,\n    ease: timing.ease,\n    timer: null,\n    state: CREATED\n  });\n}\n\nexport function init(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > CREATED) throw new Error(\"too late; already scheduled\");\n  return schedule;\n}\n\nexport function set(node, id) {\n  var schedule = get(node, id);\n  if (schedule.state > STARTED) throw new Error(\"too late; already running\");\n  return schedule;\n}\n\nexport function get(node, id) {\n  var schedule = node.__transition;\n  if (!schedule || !(schedule = schedule[id])) throw new Error(\"transition not found\");\n  return schedule;\n}\n\nfunction create(node, id, self) {\n  var schedules = node.__transition,\n      tween;\n\n  // Initialize the self timer when the transition is created.\n  // Note the actual delay is not known until the first callback!\n  schedules[id] = self;\n  self.timer = timer(schedule, 0, self.time);\n\n  function schedule(elapsed) {\n    self.state = SCHEDULED;\n    self.timer.restart(start, self.delay, self.time);\n\n    // If the elapsed delay is less than our first sleep, start immediately.\n    if (self.delay <= elapsed) start(elapsed - self.delay);\n  }\n\n  function start(elapsed) {\n    var i, j, n, o;\n\n    // If the state is not SCHEDULED, then we previously errored on start.\n    if (self.state !== SCHEDULED) return stop();\n\n    for (i in schedules) {\n      o = schedules[i];\n      if (o.name !== self.name) continue;\n\n      // While this element already has a starting transition during this frame,\n      // defer starting an interrupting transition until that transition has a\n      // chance to tick (and possibly end); see d3/d3-transition#54!\n      if (o.state === STARTED) return timeout(start);\n\n      // Interrupt the active transition, if any.\n      if (o.state === RUNNING) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"interrupt\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n\n      // Cancel any pre-empted transitions.\n      else if (+i < id) {\n        o.state = ENDED;\n        o.timer.stop();\n        o.on.call(\"cancel\", node, node.__data__, o.index, o.group);\n        delete schedules[i];\n      }\n    }\n\n    // Defer the first tick to end of the current frame; see d3/d3#1576.\n    // Note the transition may be canceled after start and before the first tick!\n    // Note this must be scheduled before the start event; see d3/d3-transition#16!\n    // Assuming this is successful, subsequent callbacks go straight to tick.\n    timeout(function() {\n      if (self.state === STARTED) {\n        self.state = RUNNING;\n        self.timer.restart(tick, self.delay, self.time);\n        tick(elapsed);\n      }\n    });\n\n    // Dispatch the start event.\n    // Note this must be done before the tween are initialized.\n    self.state = STARTING;\n    self.on.call(\"start\", node, node.__data__, self.index, self.group);\n    if (self.state !== STARTING) return; // interrupted\n    self.state = STARTED;\n\n    // Initialize the tween, deleting null tween.\n    tween = new Array(n = self.tween.length);\n    for (i = 0, j = -1; i < n; ++i) {\n      if (o = self.tween[i].value.call(node, node.__data__, self.index, self.group)) {\n        tween[++j] = o;\n      }\n    }\n    tween.length = j + 1;\n  }\n\n  function tick(elapsed) {\n    var t = elapsed < self.duration ? self.ease.call(null, elapsed / self.duration) : (self.timer.restart(stop), self.state = ENDING, 1),\n        i = -1,\n        n = tween.length;\n\n    while (++i < n) {\n      tween[i].call(node, t);\n    }\n\n    // Dispatch the end event.\n    if (self.state === ENDING) {\n      self.on.call(\"end\", node, node.__data__, self.index, self.group);\n      stop();\n    }\n  }\n\n  function stop() {\n    self.state = ENDED;\n    self.timer.stop();\n    delete schedules[id];\n    for (var i in schedules) return; // eslint-disable-line no-unused-vars\n    delete node.__transition;\n  }\n}\n","import {STARTING, ENDING, ENDED} from \"./transition/schedule.js\";\n\nexport default function(node, name) {\n  var schedules = node.__transition,\n      schedule,\n      active,\n      empty = true,\n      i;\n\n  if (!schedules) return;\n\n  name = name == null ? null : name + \"\";\n\n  for (i in schedules) {\n    if ((schedule = schedules[i]).name !== name) { empty = false; continue; }\n    active = schedule.state > STARTING && schedule.state < ENDING;\n    schedule.state = ENDED;\n    schedule.timer.stop();\n    schedule.on.call(active ? \"interrupt\" : \"cancel\", node, node.__data__, schedule.index, schedule.group);\n    delete schedules[i];\n  }\n\n  if (empty) delete node.__transition;\n}\n","import interrupt from \"../interrupt.js\";\n\nexport default function(name) {\n  return this.each(function() {\n    interrupt(this, name);\n  });\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction tweenRemove(id, name) {\n  var tween0, tween1;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = tween0 = tween;\n      for (var i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1 = tween1.slice();\n          tween1.splice(i, 1);\n          break;\n        }\n      }\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nfunction tweenFunction(id, name, value) {\n  var tween0, tween1;\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    var schedule = set(this, id),\n        tween = schedule.tween;\n\n    // If this node shared tween with the previous node,\n    // just assign the updated shared tween and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (tween !== tween0) {\n      tween1 = (tween0 = tween).slice();\n      for (var t = {name: name, value: value}, i = 0, n = tween1.length; i < n; ++i) {\n        if (tween1[i].name === name) {\n          tween1[i] = t;\n          break;\n        }\n      }\n      if (i === n) tween1.push(t);\n    }\n\n    schedule.tween = tween1;\n  };\n}\n\nexport default function(name, value) {\n  var id = this._id;\n\n  name += \"\";\n\n  if (arguments.length < 2) {\n    var tween = get(this.node(), id).tween;\n    for (var i = 0, n = tween.length, t; i < n; ++i) {\n      if ((t = tween[i]).name === name) {\n        return t.value;\n      }\n    }\n    return null;\n  }\n\n  return this.each((value == null ? tweenRemove : tweenFunction)(id, name, value));\n}\n\nexport function tweenValue(transition, name, value) {\n  var id = transition._id;\n\n  transition.each(function() {\n    var schedule = set(this, id);\n    (schedule.value || (schedule.value = {}))[name] = value.apply(this, arguments);\n  });\n\n  return function(node) {\n    return get(node, id).value[name];\n  };\n}\n","import {color} from \"d3-color\";\nimport {interpolateNumber, interpolateRgb, interpolateString} from \"d3-interpolate\";\n\nexport default function(a, b) {\n  var c;\n  return (typeof b === \"number\" ? interpolateNumber\n      : b instanceof color ? interpolateRgb\n      : (c = color(b)) ? (b = c, interpolateRgb)\n      : interpolateString)(a, b);\n}\n","import {interpolateTransformSvg as interpolateTransform} from \"d3-interpolate\";\nimport {namespace} from \"d3-selection\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction attrRemove(name) {\n  return function() {\n    this.removeAttribute(name);\n  };\n}\n\nfunction attrRemoveNS(fullname) {\n  return function() {\n    this.removeAttributeNS(fullname.space, fullname.local);\n  };\n}\n\nfunction attrConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttribute(name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrConstantNS(fullname, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = this.getAttributeNS(fullname.space, fullname.local);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction attrFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttribute(name);\n    string0 = this.getAttribute(name);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction attrFunctionNS(fullname, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0, value1 = value(this), string1;\n    if (value1 == null) return void this.removeAttributeNS(fullname.space, fullname.local);\n    string0 = this.getAttributeNS(fullname.space, fullname.local);\n    string1 = value1 + \"\";\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nexport default function(name, value) {\n  var fullname = namespace(name), i = fullname === \"transform\" ? interpolateTransform : interpolate;\n  return this.attrTween(name, typeof value === \"function\"\n      ? (fullname.local ? attrFunctionNS : attrFunction)(fullname, i, tweenValue(this, \"attr.\" + name, value))\n      : value == null ? (fullname.local ? attrRemoveNS : attrRemove)(fullname)\n      : (fullname.local ? attrConstantNS : attrConstant)(fullname, i, value));\n}\n","import {namespace} from \"d3-selection\";\n\nfunction attrInterpolate(name, i) {\n  return function(t) {\n    this.setAttribute(name, i.call(this, t));\n  };\n}\n\nfunction attrInterpolateNS(fullname, i) {\n  return function(t) {\n    this.setAttributeNS(fullname.space, fullname.local, i.call(this, t));\n  };\n}\n\nfunction attrTweenNS(fullname, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolateNS(fullname, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nfunction attrTween(name, value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && attrInterpolate(name, i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value) {\n  var key = \"attr.\" + name;\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  var fullname = namespace(name);\n  return this.tween(key, (fullname.local ? attrTweenNS : attrTween)(fullname, value));\n}\n","import {get, init} from \"./schedule.js\";\n\nfunction delayFunction(id, value) {\n  return function() {\n    init(this, id).delay = +value.apply(this, arguments);\n  };\n}\n\nfunction delayConstant(id, value) {\n  return value = +value, function() {\n    init(this, id).delay = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? delayFunction\n          : delayConstant)(id, value))\n      : get(this.node(), id).delay;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction durationFunction(id, value) {\n  return function() {\n    set(this, id).duration = +value.apply(this, arguments);\n  };\n}\n\nfunction durationConstant(id, value) {\n  return value = +value, function() {\n    set(this, id).duration = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each((typeof value === \"function\"\n          ? durationFunction\n          : durationConstant)(id, value))\n      : get(this.node(), id).duration;\n}\n","import {get, set} from \"./schedule.js\";\n\nfunction easeConstant(id, value) {\n  if (typeof value !== \"function\") throw new Error;\n  return function() {\n    set(this, id).ease = value;\n  };\n}\n\nexport default function(value) {\n  var id = this._id;\n\n  return arguments.length\n      ? this.each(easeConstant(id, value))\n      : get(this.node(), id).ease;\n}\n","import {set} from \"./schedule.js\";\n\nfunction easeVarying(id, value) {\n  return function() {\n    var v = value.apply(this, arguments);\n    if (typeof v !== \"function\") throw new Error;\n    set(this, id).ease = v;\n  };\n}\n\nexport default function(value) {\n  if (typeof value !== \"function\") throw new Error;\n  return this.each(easeVarying(this._id, value));\n}\n","import {matcher} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\n\nexport default function(match) {\n  if (typeof match !== \"function\") match = matcher(match);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = [], node, i = 0; i < n; ++i) {\n      if ((node = group[i]) && match.call(node, node.__data__, i, group)) {\n        subgroup.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, this._name, this._id);\n}\n","import {Transition} from \"./index.js\";\n\nexport default function(transition) {\n  if (transition._id !== this._id) throw new Error;\n\n  for (var groups0 = this._groups, groups1 = transition._groups, m0 = groups0.length, m1 = groups1.length, m = Math.min(m0, m1), merges = new Array(m0), j = 0; j < m; ++j) {\n    for (var group0 = groups0[j], group1 = groups1[j], n = group0.length, merge = merges[j] = new Array(n), node, i = 0; i < n; ++i) {\n      if (node = group0[i] || group1[i]) {\n        merge[i] = node;\n      }\n    }\n  }\n\n  for (; j < m0; ++j) {\n    merges[j] = groups0[j];\n  }\n\n  return new Transition(merges, this._parents, this._name, this._id);\n}\n","import {get, set, init} from \"./schedule.js\";\n\nfunction start(name) {\n  return (name + \"\").trim().split(/^|\\s+/).every(function(t) {\n    var i = t.indexOf(\".\");\n    if (i >= 0) t = t.slice(0, i);\n    return !t || t === \"start\";\n  });\n}\n\nfunction onFunction(id, name, listener) {\n  var on0, on1, sit = start(name) ? init : set;\n  return function() {\n    var schedule = sit(this, id),\n        on = schedule.on;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0) (on1 = (on0 = on).copy()).on(name, listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, listener) {\n  var id = this._id;\n\n  return arguments.length < 2\n      ? get(this.node(), id).on.on(name)\n      : this.each(onFunction(id, name, listener));\n}\n","function removeFunction(id) {\n  return function() {\n    var parent = this.parentNode;\n    for (var i in this.__transition) if (+i !== id) return;\n    if (parent) parent.removeChild(this);\n  };\n}\n\nexport default function() {\n  return this.on(\"end.remove\", removeFunction(this._id));\n}\n","import {selector} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selector(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = new Array(m), j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, subgroup = subgroups[j] = new Array(n), node, subnode, i = 0; i < n; ++i) {\n      if ((node = group[i]) && (subnode = select.call(node, node.__data__, i, group))) {\n        if (\"__data__\" in node) subnode.__data__ = node.__data__;\n        subgroup[i] = subnode;\n        schedule(subgroup[i], name, id, i, subgroup, get(node, id));\n      }\n    }\n  }\n\n  return new Transition(subgroups, this._parents, name, id);\n}\n","import {selectorAll} from \"d3-selection\";\nimport {Transition} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function(select) {\n  var name = this._name,\n      id = this._id;\n\n  if (typeof select !== \"function\") select = selectorAll(select);\n\n  for (var groups = this._groups, m = groups.length, subgroups = [], parents = [], j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        for (var children = select.call(node, node.__data__, i, group), child, inherit = get(node, id), k = 0, l = children.length; k < l; ++k) {\n          if (child = children[k]) {\n            schedule(child, name, id, k, children, inherit);\n          }\n        }\n        subgroups.push(children);\n        parents.push(node);\n      }\n    }\n  }\n\n  return new Transition(subgroups, parents, name, id);\n}\n","import {selection} from \"d3-selection\";\n\nvar Selection = selection.prototype.constructor;\n\nexport default function() {\n  return new Selection(this._groups, this._parents);\n}\n","import {interpolateTransformCss as interpolateTransform} from \"d3-interpolate\";\nimport {style} from \"d3-selection\";\nimport {set} from \"./schedule.js\";\nimport {tweenValue} from \"./tween.js\";\nimport interpolate from \"./interpolate.js\";\n\nfunction styleNull(name, interpolate) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        string1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, string10 = string1);\n  };\n}\n\nfunction styleRemove(name) {\n  return function() {\n    this.style.removeProperty(name);\n  };\n}\n\nfunction styleConstant(name, interpolate, value1) {\n  var string00,\n      string1 = value1 + \"\",\n      interpolate0;\n  return function() {\n    var string0 = style(this, name);\n    return string0 === string1 ? null\n        : string0 === string00 ? interpolate0\n        : interpolate0 = interpolate(string00 = string0, value1);\n  };\n}\n\nfunction styleFunction(name, interpolate, value) {\n  var string00,\n      string10,\n      interpolate0;\n  return function() {\n    var string0 = style(this, name),\n        value1 = value(this),\n        string1 = value1 + \"\";\n    if (value1 == null) string1 = value1 = (this.style.removeProperty(name), style(this, name));\n    return string0 === string1 ? null\n        : string0 === string00 && string1 === string10 ? interpolate0\n        : (string10 = string1, interpolate0 = interpolate(string00 = string0, value1));\n  };\n}\n\nfunction styleMaybeRemove(id, name) {\n  var on0, on1, listener0, key = \"style.\" + name, event = \"end.\" + key, remove;\n  return function() {\n    var schedule = set(this, id),\n        on = schedule.on,\n        listener = schedule.value[key] == null ? remove || (remove = styleRemove(name)) : undefined;\n\n    // If this node shared a dispatch with the previous node,\n    // just assign the updated shared dispatch and weâ€™re done!\n    // Otherwise, copy-on-write.\n    if (on !== on0 || listener0 !== listener) (on1 = (on0 = on).copy()).on(event, listener0 = listener);\n\n    schedule.on = on1;\n  };\n}\n\nexport default function(name, value, priority) {\n  var i = (name += \"\") === \"transform\" ? interpolateTransform : interpolate;\n  return value == null ? this\n      .styleTween(name, styleNull(name, i))\n      .on(\"end.style.\" + name, styleRemove(name))\n    : typeof value === \"function\" ? this\n      .styleTween(name, styleFunction(name, i, tweenValue(this, \"style.\" + name, value)))\n      .each(styleMaybeRemove(this._id, name))\n    : this\n      .styleTween(name, styleConstant(name, i, value), priority)\n      .on(\"end.style.\" + name, null);\n}\n","function styleInterpolate(name, i, priority) {\n  return function(t) {\n    this.style.setProperty(name, i.call(this, t), priority);\n  };\n}\n\nfunction styleTween(name, value, priority) {\n  var t, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t = (i0 = i) && styleInterpolate(name, i, priority);\n    return t;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(name, value, priority) {\n  var key = \"style.\" + (name += \"\");\n  if (arguments.length < 2) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, styleTween(name, value, priority == null ? \"\" : priority));\n}\n","import {tweenValue} from \"./tween.js\";\n\nfunction textConstant(value) {\n  return function() {\n    this.textContent = value;\n  };\n}\n\nfunction textFunction(value) {\n  return function() {\n    var value1 = value(this);\n    this.textContent = value1 == null ? \"\" : value1;\n  };\n}\n\nexport default function(value) {\n  return this.tween(\"text\", typeof value === \"function\"\n      ? textFunction(tweenValue(this, \"text\", value))\n      : textConstant(value == null ? \"\" : value + \"\"));\n}\n","function textInterpolate(i) {\n  return function(t) {\n    this.textContent = i.call(this, t);\n  };\n}\n\nfunction textTween(value) {\n  var t0, i0;\n  function tween() {\n    var i = value.apply(this, arguments);\n    if (i !== i0) t0 = (i0 = i) && textInterpolate(i);\n    return t0;\n  }\n  tween._value = value;\n  return tween;\n}\n\nexport default function(value) {\n  var key = \"text\";\n  if (arguments.length < 1) return (key = this.tween(key)) && key._value;\n  if (value == null) return this.tween(key, null);\n  if (typeof value !== \"function\") throw new Error;\n  return this.tween(key, textTween(value));\n}\n","import {Transition, newId} from \"./index.js\";\nimport schedule, {get} from \"./schedule.js\";\n\nexport default function() {\n  var name = this._name,\n      id0 = this._id,\n      id1 = newId();\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        var inherit = get(node, id0);\n        schedule(node, name, id1, i, group, {\n          time: inherit.time + inherit.delay + inherit.duration,\n          delay: 0,\n          duration: inherit.duration,\n          ease: inherit.ease\n        });\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id1);\n}\n","import {set} from \"./schedule.js\";\n\nexport default function() {\n  var on0, on1, that = this, id = that._id, size = that.size();\n  return new Promise(function(resolve, reject) {\n    var cancel = {value: reject},\n        end = {value: function() { if (--size === 0) resolve(); }};\n\n    that.each(function() {\n      var schedule = set(this, id),\n          on = schedule.on;\n\n      // If this node shared a dispatch with the previous node,\n      // just assign the updated shared dispatch and weâ€™re done!\n      // Otherwise, copy-on-write.\n      if (on !== on0) {\n        on1 = (on0 = on).copy();\n        on1._.cancel.push(cancel);\n        on1._.interrupt.push(cancel);\n        on1._.end.push(end);\n      }\n\n      schedule.on = on1;\n    });\n\n    // The selection was empty, resolve end immediately\n    if (size === 0) resolve();\n  });\n}\n","import {selection} from \"d3-selection\";\nimport transition_attr from \"./attr.js\";\nimport transition_attrTween from \"./attrTween.js\";\nimport transition_delay from \"./delay.js\";\nimport transition_duration from \"./duration.js\";\nimport transition_ease from \"./ease.js\";\nimport transition_easeVarying from \"./easeVarying.js\";\nimport transition_filter from \"./filter.js\";\nimport transition_merge from \"./merge.js\";\nimport transition_on from \"./on.js\";\nimport transition_remove from \"./remove.js\";\nimport transition_select from \"./select.js\";\nimport transition_selectAll from \"./selectAll.js\";\nimport transition_selection from \"./selection.js\";\nimport transition_style from \"./style.js\";\nimport transition_styleTween from \"./styleTween.js\";\nimport transition_text from \"./text.js\";\nimport transition_textTween from \"./textTween.js\";\nimport transition_transition from \"./transition.js\";\nimport transition_tween from \"./tween.js\";\nimport transition_end from \"./end.js\";\n\nvar id = 0;\n\nexport function Transition(groups, parents, name, id) {\n  this._groups = groups;\n  this._parents = parents;\n  this._name = name;\n  this._id = id;\n}\n\nexport default function transition(name) {\n  return selection().transition(name);\n}\n\nexport function newId() {\n  return ++id;\n}\n\nvar selection_prototype = selection.prototype;\n\nTransition.prototype = transition.prototype = {\n  constructor: Transition,\n  select: transition_select,\n  selectAll: transition_selectAll,\n  selectChild: selection_prototype.selectChild,\n  selectChildren: selection_prototype.selectChildren,\n  filter: transition_filter,\n  merge: transition_merge,\n  selection: transition_selection,\n  transition: transition_transition,\n  call: selection_prototype.call,\n  nodes: selection_prototype.nodes,\n  node: selection_prototype.node,\n  size: selection_prototype.size,\n  empty: selection_prototype.empty,\n  each: selection_prototype.each,\n  on: transition_on,\n  attr: transition_attr,\n  attrTween: transition_attrTween,\n  style: transition_style,\n  styleTween: transition_styleTween,\n  text: transition_text,\n  textTween: transition_textTween,\n  remove: transition_remove,\n  tween: transition_tween,\n  delay: transition_delay,\n  duration: transition_duration,\n  ease: transition_ease,\n  easeVarying: transition_easeVarying,\n  end: transition_end,\n  [Symbol.iterator]: selection_prototype[Symbol.iterator]\n};\n","export function cubicIn(t) {\n  return t * t * t;\n}\n\nexport function cubicOut(t) {\n  return --t * t * t + 1;\n}\n\nexport function cubicInOut(t) {\n  return ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\n}\n","import {Transition, newId} from \"../transition/index.js\";\nimport schedule from \"../transition/schedule.js\";\nimport {easeCubicInOut} from \"d3-ease\";\nimport {now} from \"d3-timer\";\n\nvar defaultTiming = {\n  time: null, // Set on use.\n  delay: 0,\n  duration: 250,\n  ease: easeCubicInOut\n};\n\nfunction inherit(node, id) {\n  var timing;\n  while (!(timing = node.__transition) || !(timing = timing[id])) {\n    if (!(node = node.parentNode)) {\n      throw new Error(`transition ${id} not found`);\n    }\n  }\n  return timing;\n}\n\nexport default function(name) {\n  var id,\n      timing;\n\n  if (name instanceof Transition) {\n    id = name._id, name = name._name;\n  } else {\n    id = newId(), (timing = defaultTiming).time = now(), name = name == null ? null : name + \"\";\n  }\n\n  for (var groups = this._groups, m = groups.length, j = 0; j < m; ++j) {\n    for (var group = groups[j], n = group.length, node, i = 0; i < n; ++i) {\n      if (node = group[i]) {\n        schedule(node, name, id, i, group, timing || inherit(node, id));\n      }\n    }\n  }\n\n  return new Transition(groups, this._parents, name, id);\n}\n","import {selection} from \"d3-selection\";\nimport selection_interrupt from \"./interrupt.js\";\nimport selection_transition from \"./transition.js\";\n\nselection.prototype.interrupt = selection_interrupt;\nselection.prototype.transition = selection_transition;\n","export default x => () => x;\n","export default function ZoomEvent(type, {\n  sourceEvent,\n  target,\n  transform,\n  dispatch\n}) {\n  Object.defineProperties(this, {\n    type: {value: type, enumerable: true, configurable: true},\n    sourceEvent: {value: sourceEvent, enumerable: true, configurable: true},\n    target: {value: target, enumerable: true, configurable: true},\n    transform: {value: transform, enumerable: true, configurable: true},\n    _: {value: dispatch}\n  });\n}\n","export function Transform(k, x, y) {\n  this.k = k;\n  this.x = x;\n  this.y = y;\n}\n\nTransform.prototype = {\n  constructor: Transform,\n  scale: function(k) {\n    return k === 1 ? this : new Transform(this.k * k, this.x, this.y);\n  },\n  translate: function(x, y) {\n    return x === 0 & y === 0 ? this : new Transform(this.k, this.x + this.k * x, this.y + this.k * y);\n  },\n  apply: function(point) {\n    return [point[0] * this.k + this.x, point[1] * this.k + this.y];\n  },\n  applyX: function(x) {\n    return x * this.k + this.x;\n  },\n  applyY: function(y) {\n    return y * this.k + this.y;\n  },\n  invert: function(location) {\n    return [(location[0] - this.x) / this.k, (location[1] - this.y) / this.k];\n  },\n  invertX: function(x) {\n    return (x - this.x) / this.k;\n  },\n  invertY: function(y) {\n    return (y - this.y) / this.k;\n  },\n  rescaleX: function(x) {\n    return x.copy().domain(x.range().map(this.invertX, this).map(x.invert, x));\n  },\n  rescaleY: function(y) {\n    return y.copy().domain(y.range().map(this.invertY, this).map(y.invert, y));\n  },\n  toString: function() {\n    return \"translate(\" + this.x + \",\" + this.y + \") scale(\" + this.k + \")\";\n  }\n};\n\nexport var identity = new Transform(1, 0, 0);\n\ntransform.prototype = Transform.prototype;\n\nexport default function transform(node) {\n  while (!node.__zoom) if (!(node = node.parentNode)) return identity;\n  return node.__zoom;\n}\n","export function nopropagation(event) {\n  event.stopImmediatePropagation();\n}\n\nexport default function(event) {\n  event.preventDefault();\n  event.stopImmediatePropagation();\n}\n","import {dispatch} from \"d3-dispatch\";\nimport {dragDisable, dragEnable} from \"d3-drag\";\nimport {interpolateZoom} from \"d3-interpolate\";\nimport {select, pointer} from \"d3-selection\";\nimport {interrupt} from \"d3-transition\";\nimport constant from \"./constant.js\";\nimport ZoomEvent from \"./event.js\";\nimport {Transform, identity} from \"./transform.js\";\nimport noevent, {nopropagation} from \"./noevent.js\";\n\n// Ignore right-click, since that should open the context menu.\n// except for pinch-to-zoom, which is sent as a wheel+ctrlKey event\nfunction defaultFilter(event) {\n  return (!event.ctrlKey || event.type === 'wheel') && !event.button;\n}\n\nfunction defaultExtent() {\n  var e = this;\n  if (e instanceof SVGElement) {\n    e = e.ownerSVGElement || e;\n    if (e.hasAttribute(\"viewBox\")) {\n      e = e.viewBox.baseVal;\n      return [[e.x, e.y], [e.x + e.width, e.y + e.height]];\n    }\n    return [[0, 0], [e.width.baseVal.value, e.height.baseVal.value]];\n  }\n  return [[0, 0], [e.clientWidth, e.clientHeight]];\n}\n\nfunction defaultTransform() {\n  return this.__zoom || identity;\n}\n\nfunction defaultWheelDelta(event) {\n  return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * (event.ctrlKey ? 10 : 1);\n}\n\nfunction defaultTouchable() {\n  return navigator.maxTouchPoints || (\"ontouchstart\" in this);\n}\n\nfunction defaultConstrain(transform, extent, translateExtent) {\n  var dx0 = transform.invertX(extent[0][0]) - translateExtent[0][0],\n      dx1 = transform.invertX(extent[1][0]) - translateExtent[1][0],\n      dy0 = transform.invertY(extent[0][1]) - translateExtent[0][1],\n      dy1 = transform.invertY(extent[1][1]) - translateExtent[1][1];\n  return transform.translate(\n    dx1 > dx0 ? (dx0 + dx1) / 2 : Math.min(0, dx0) || Math.max(0, dx1),\n    dy1 > dy0 ? (dy0 + dy1) / 2 : Math.min(0, dy0) || Math.max(0, dy1)\n  );\n}\n\nexport default function() {\n  var filter = defaultFilter,\n      extent = defaultExtent,\n      constrain = defaultConstrain,\n      wheelDelta = defaultWheelDelta,\n      touchable = defaultTouchable,\n      scaleExtent = [0, Infinity],\n      translateExtent = [[-Infinity, -Infinity], [Infinity, Infinity]],\n      duration = 250,\n      interpolate = interpolateZoom,\n      listeners = dispatch(\"start\", \"zoom\", \"end\"),\n      touchstarting,\n      touchfirst,\n      touchending,\n      touchDelay = 500,\n      wheelDelay = 150,\n      clickDistance2 = 0,\n      tapDistance = 10;\n\n  function zoom(selection) {\n    selection\n        .property(\"__zoom\", defaultTransform)\n        .on(\"wheel.zoom\", wheeled, {passive: false})\n        .on(\"mousedown.zoom\", mousedowned)\n        .on(\"dblclick.zoom\", dblclicked)\n      .filter(touchable)\n        .on(\"touchstart.zoom\", touchstarted)\n        .on(\"touchmove.zoom\", touchmoved)\n        .on(\"touchend.zoom touchcancel.zoom\", touchended)\n        .style(\"-webkit-tap-highlight-color\", \"rgba(0,0,0,0)\");\n  }\n\n  zoom.transform = function(collection, transform, point, event) {\n    var selection = collection.selection ? collection.selection() : collection;\n    selection.property(\"__zoom\", defaultTransform);\n    if (collection !== selection) {\n      schedule(collection, transform, point, event);\n    } else {\n      selection.interrupt().each(function() {\n        gesture(this, arguments)\n          .event(event)\n          .start()\n          .zoom(null, typeof transform === \"function\" ? transform.apply(this, arguments) : transform)\n          .end();\n      });\n    }\n  };\n\n  zoom.scaleBy = function(selection, k, p, event) {\n    zoom.scaleTo(selection, function() {\n      var k0 = this.__zoom.k,\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return k0 * k1;\n    }, p, event);\n  };\n\n  zoom.scaleTo = function(selection, k, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t0 = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p,\n          p1 = t0.invert(p0),\n          k1 = typeof k === \"function\" ? k.apply(this, arguments) : k;\n      return constrain(translate(scale(t0, k1), p0, p1), e, translateExtent);\n    }, p, event);\n  };\n\n  zoom.translateBy = function(selection, x, y, event) {\n    zoom.transform(selection, function() {\n      return constrain(this.__zoom.translate(\n        typeof x === \"function\" ? x.apply(this, arguments) : x,\n        typeof y === \"function\" ? y.apply(this, arguments) : y\n      ), extent.apply(this, arguments), translateExtent);\n    }, null, event);\n  };\n\n  zoom.translateTo = function(selection, x, y, p, event) {\n    zoom.transform(selection, function() {\n      var e = extent.apply(this, arguments),\n          t = this.__zoom,\n          p0 = p == null ? centroid(e) : typeof p === \"function\" ? p.apply(this, arguments) : p;\n      return constrain(identity.translate(p0[0], p0[1]).scale(t.k).translate(\n        typeof x === \"function\" ? -x.apply(this, arguments) : -x,\n        typeof y === \"function\" ? -y.apply(this, arguments) : -y\n      ), e, translateExtent);\n    }, p, event);\n  };\n\n  function scale(transform, k) {\n    k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], k));\n    return k === transform.k ? transform : new Transform(k, transform.x, transform.y);\n  }\n\n  function translate(transform, p0, p1) {\n    var x = p0[0] - p1[0] * transform.k, y = p0[1] - p1[1] * transform.k;\n    return x === transform.x && y === transform.y ? transform : new Transform(transform.k, x, y);\n  }\n\n  function centroid(extent) {\n    return [(+extent[0][0] + +extent[1][0]) / 2, (+extent[0][1] + +extent[1][1]) / 2];\n  }\n\n  function schedule(transition, transform, point, event) {\n    transition\n        .on(\"start.zoom\", function() { gesture(this, arguments).event(event).start(); })\n        .on(\"interrupt.zoom end.zoom\", function() { gesture(this, arguments).event(event).end(); })\n        .tween(\"zoom\", function() {\n          var that = this,\n              args = arguments,\n              g = gesture(that, args).event(event),\n              e = extent.apply(that, args),\n              p = point == null ? centroid(e) : typeof point === \"function\" ? point.apply(that, args) : point,\n              w = Math.max(e[1][0] - e[0][0], e[1][1] - e[0][1]),\n              a = that.__zoom,\n              b = typeof transform === \"function\" ? transform.apply(that, args) : transform,\n              i = interpolate(a.invert(p).concat(w / a.k), b.invert(p).concat(w / b.k));\n          return function(t) {\n            if (t === 1) t = b; // Avoid rounding error on end.\n            else { var l = i(t), k = w / l[2]; t = new Transform(k, p[0] - l[0] * k, p[1] - l[1] * k); }\n            g.zoom(null, t);\n          };\n        });\n  }\n\n  function gesture(that, args, clean) {\n    return (!clean && that.__zooming) || new Gesture(that, args);\n  }\n\n  function Gesture(that, args) {\n    this.that = that;\n    this.args = args;\n    this.active = 0;\n    this.sourceEvent = null;\n    this.extent = extent.apply(that, args);\n    this.taps = 0;\n  }\n\n  Gesture.prototype = {\n    event: function(event) {\n      if (event) this.sourceEvent = event;\n      return this;\n    },\n    start: function() {\n      if (++this.active === 1) {\n        this.that.__zooming = this;\n        this.emit(\"start\");\n      }\n      return this;\n    },\n    zoom: function(key, transform) {\n      if (this.mouse && key !== \"mouse\") this.mouse[1] = transform.invert(this.mouse[0]);\n      if (this.touch0 && key !== \"touch\") this.touch0[1] = transform.invert(this.touch0[0]);\n      if (this.touch1 && key !== \"touch\") this.touch1[1] = transform.invert(this.touch1[0]);\n      this.that.__zoom = transform;\n      this.emit(\"zoom\");\n      return this;\n    },\n    end: function() {\n      if (--this.active === 0) {\n        delete this.that.__zooming;\n        this.emit(\"end\");\n      }\n      return this;\n    },\n    emit: function(type) {\n      var d = select(this.that).datum();\n      listeners.call(\n        type,\n        this.that,\n        new ZoomEvent(type, {\n          sourceEvent: this.sourceEvent,\n          target: zoom,\n          type,\n          transform: this.that.__zoom,\n          dispatch: listeners\n        }),\n        d\n      );\n    }\n  };\n\n  function wheeled(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var g = gesture(this, args).event(event),\n        t = this.__zoom,\n        k = Math.max(scaleExtent[0], Math.min(scaleExtent[1], t.k * Math.pow(2, wheelDelta.apply(this, arguments)))),\n        p = pointer(event);\n\n    // If the mouse is in the same location as before, reuse it.\n    // If there were recent wheel events, reset the wheel idle timeout.\n    if (g.wheel) {\n      if (g.mouse[0][0] !== p[0] || g.mouse[0][1] !== p[1]) {\n        g.mouse[1] = t.invert(g.mouse[0] = p);\n      }\n      clearTimeout(g.wheel);\n    }\n\n    // If this wheel event wonâ€™t trigger a transform change, ignore it.\n    else if (t.k === k) return;\n\n    // Otherwise, capture the mouse point and location at the start.\n    else {\n      g.mouse = [p, t.invert(p)];\n      interrupt(this);\n      g.start();\n    }\n\n    noevent(event);\n    g.wheel = setTimeout(wheelidled, wheelDelay);\n    g.zoom(\"mouse\", constrain(translate(scale(t, k), g.mouse[0], g.mouse[1]), g.extent, translateExtent));\n\n    function wheelidled() {\n      g.wheel = null;\n      g.end();\n    }\n  }\n\n  function mousedowned(event, ...args) {\n    if (touchending || !filter.apply(this, arguments)) return;\n    var currentTarget = event.currentTarget,\n        g = gesture(this, args, true).event(event),\n        v = select(event.view).on(\"mousemove.zoom\", mousemoved, true).on(\"mouseup.zoom\", mouseupped, true),\n        p = pointer(event, currentTarget),\n        x0 = event.clientX,\n        y0 = event.clientY;\n\n    dragDisable(event.view);\n    nopropagation(event);\n    g.mouse = [p, this.__zoom.invert(p)];\n    interrupt(this);\n    g.start();\n\n    function mousemoved(event) {\n      noevent(event);\n      if (!g.moved) {\n        var dx = event.clientX - x0, dy = event.clientY - y0;\n        g.moved = dx * dx + dy * dy > clickDistance2;\n      }\n      g.event(event)\n       .zoom(\"mouse\", constrain(translate(g.that.__zoom, g.mouse[0] = pointer(event, currentTarget), g.mouse[1]), g.extent, translateExtent));\n    }\n\n    function mouseupped(event) {\n      v.on(\"mousemove.zoom mouseup.zoom\", null);\n      dragEnable(event.view, g.moved);\n      noevent(event);\n      g.event(event).end();\n    }\n  }\n\n  function dblclicked(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var t0 = this.__zoom,\n        p0 = pointer(event.changedTouches ? event.changedTouches[0] : event, this),\n        p1 = t0.invert(p0),\n        k1 = t0.k * (event.shiftKey ? 0.5 : 2),\n        t1 = constrain(translate(scale(t0, k1), p0, p1), extent.apply(this, args), translateExtent);\n\n    noevent(event);\n    if (duration > 0) select(this).transition().duration(duration).call(schedule, t1, p0, event);\n    else select(this).call(zoom.transform, t1, p0, event);\n  }\n\n  function touchstarted(event, ...args) {\n    if (!filter.apply(this, arguments)) return;\n    var touches = event.touches,\n        n = touches.length,\n        g = gesture(this, args, event.changedTouches.length === n).event(event),\n        started, i, t, p;\n\n    nopropagation(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      p = [p, this.__zoom.invert(p), t.identifier];\n      if (!g.touch0) g.touch0 = p, started = true, g.taps = 1 + !!touchstarting;\n      else if (!g.touch1 && g.touch0[2] !== p[2]) g.touch1 = p, g.taps = 0;\n    }\n\n    if (touchstarting) touchstarting = clearTimeout(touchstarting);\n\n    if (started) {\n      if (g.taps < 2) touchfirst = p[0], touchstarting = setTimeout(function() { touchstarting = null; }, touchDelay);\n      interrupt(this);\n      g.start();\n    }\n  }\n\n  function touchmoved(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t, p, l;\n\n    noevent(event);\n    for (i = 0; i < n; ++i) {\n      t = touches[i], p = pointer(t, this);\n      if (g.touch0 && g.touch0[2] === t.identifier) g.touch0[0] = p;\n      else if (g.touch1 && g.touch1[2] === t.identifier) g.touch1[0] = p;\n    }\n    t = g.that.__zoom;\n    if (g.touch1) {\n      var p0 = g.touch0[0], l0 = g.touch0[1],\n          p1 = g.touch1[0], l1 = g.touch1[1],\n          dp = (dp = p1[0] - p0[0]) * dp + (dp = p1[1] - p0[1]) * dp,\n          dl = (dl = l1[0] - l0[0]) * dl + (dl = l1[1] - l0[1]) * dl;\n      t = scale(t, Math.sqrt(dp / dl));\n      p = [(p0[0] + p1[0]) / 2, (p0[1] + p1[1]) / 2];\n      l = [(l0[0] + l1[0]) / 2, (l0[1] + l1[1]) / 2];\n    }\n    else if (g.touch0) p = g.touch0[0], l = g.touch0[1];\n    else return;\n\n    g.zoom(\"touch\", constrain(translate(t, p, l), g.extent, translateExtent));\n  }\n\n  function touchended(event, ...args) {\n    if (!this.__zooming) return;\n    var g = gesture(this, args).event(event),\n        touches = event.changedTouches,\n        n = touches.length, i, t;\n\n    nopropagation(event);\n    if (touchending) clearTimeout(touchending);\n    touchending = setTimeout(function() { touchending = null; }, touchDelay);\n    for (i = 0; i < n; ++i) {\n      t = touches[i];\n      if (g.touch0 && g.touch0[2] === t.identifier) delete g.touch0;\n      else if (g.touch1 && g.touch1[2] === t.identifier) delete g.touch1;\n    }\n    if (g.touch1 && !g.touch0) g.touch0 = g.touch1, delete g.touch1;\n    if (g.touch0) g.touch0[1] = this.__zoom.invert(g.touch0[0]);\n    else {\n      g.end();\n      // If this was a dbltap, reroute to the (optional) dblclick.zoom handler.\n      if (g.taps === 2) {\n        t = pointer(t, this);\n        if (Math.hypot(touchfirst[0] - t[0], touchfirst[1] - t[1]) < tapDistance) {\n          var p = select(this).on(\"dblclick.zoom\");\n          if (p) p.apply(this, arguments);\n        }\n      }\n    }\n  }\n\n  zoom.wheelDelta = function(_) {\n    return arguments.length ? (wheelDelta = typeof _ === \"function\" ? _ : constant(+_), zoom) : wheelDelta;\n  };\n\n  zoom.filter = function(_) {\n    return arguments.length ? (filter = typeof _ === \"function\" ? _ : constant(!!_), zoom) : filter;\n  };\n\n  zoom.touchable = function(_) {\n    return arguments.length ? (touchable = typeof _ === \"function\" ? _ : constant(!!_), zoom) : touchable;\n  };\n\n  zoom.extent = function(_) {\n    return arguments.length ? (extent = typeof _ === \"function\" ? _ : constant([[+_[0][0], +_[0][1]], [+_[1][0], +_[1][1]]]), zoom) : extent;\n  };\n\n  zoom.scaleExtent = function(_) {\n    return arguments.length ? (scaleExtent[0] = +_[0], scaleExtent[1] = +_[1], zoom) : [scaleExtent[0], scaleExtent[1]];\n  };\n\n  zoom.translateExtent = function(_) {\n    return arguments.length ? (translateExtent[0][0] = +_[0][0], translateExtent[1][0] = +_[1][0], translateExtent[0][1] = +_[0][1], translateExtent[1][1] = +_[1][1], zoom) : [[translateExtent[0][0], translateExtent[0][1]], [translateExtent[1][0], translateExtent[1][1]]];\n  };\n\n  zoom.constrain = function(_) {\n    return arguments.length ? (constrain = _, zoom) : constrain;\n  };\n\n  zoom.duration = function(_) {\n    return arguments.length ? (duration = +_, zoom) : duration;\n  };\n\n  zoom.interpolate = function(_) {\n    return arguments.length ? (interpolate = _, zoom) : interpolate;\n  };\n\n  zoom.on = function() {\n    var value = listeners.on.apply(listeners, arguments);\n    return value === listeners ? zoom : value;\n  };\n\n  zoom.clickDistance = function(_) {\n    return arguments.length ? (clickDistance2 = (_ = +_) * _, zoom) : Math.sqrt(clickDistance2);\n  };\n\n  zoom.tapDistance = function(_) {\n    return arguments.length ? (tapDistance = +_, zoom) : tapDistance;\n  };\n\n  return zoom;\n}\n","import { drag } from 'd3-drag';\nimport { select, pointer } from 'd3-selection';\nimport { zoom, zoomIdentity, zoomTransform } from 'd3-zoom';\nimport { interpolateZoom, interpolate } from 'd3-interpolate';\n\nconst errorMessages = {\n    error001: () => '[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001',\n    error002: () => \"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.\",\n    error003: (nodeType) => `Node type \"${nodeType}\" not found. Using fallback type \"default\".`,\n    error004: () => 'The React Flow parent container needs a width and a height to render the graph.',\n    error005: () => 'Only child nodes can use a parent extent.',\n    error006: () => \"Can't create edge. An edge needs a source and a target.\",\n    error007: (id) => `The old edge with id=${id} does not exist.`,\n    error009: (type) => `Marker type \"${type}\" doesn't exist.`,\n    error008: (handleType, { id, sourceHandle, targetHandle }) => `Couldn't create edge for ${handleType} handle id: \"${handleType === 'source' ? sourceHandle : targetHandle}\", edge id: ${id}.`,\n    error010: () => 'Handle: No node id found. Make sure to only use a Handle inside a custom Node.',\n    error011: (edgeType) => `Edge type \"${edgeType}\" not found. Using fallback type \"default\".`,\n    error012: (id) => `Node with id \"${id}\" does not exist, it may have been removed. This can happen when a node is deleted before the \"onNodeClick\" handler is called.`,\n    error013: (lib = 'react') => `It seems that you haven't loaded the styles. Please import '@xyflow/${lib}/dist/style.css' or base.css to make sure everything is working properly.`,\n    error014: () => 'useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.',\n    error015: () => 'It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs.',\n};\nconst infiniteExtent = [\n    [Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY],\n    [Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY],\n];\nconst elementSelectionKeys = ['Enter', ' ', 'Escape'];\nconst defaultAriaLabelConfig = {\n    'node.a11yDescription.default': 'Press enter or space to select a node. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.keyboardDisabled': 'Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.',\n    'node.a11yDescription.ariaLiveMessage': ({ direction, x, y }) => `Moved selected node ${direction}. New position, x: ${x}, y: ${y}`,\n    'edge.a11yDescription.default': 'Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.',\n    // Control elements\n    'controls.ariaLabel': 'Control Panel',\n    'controls.zoomIn.ariaLabel': 'Zoom In',\n    'controls.zoomOut.ariaLabel': 'Zoom Out',\n    'controls.fitView.ariaLabel': 'Fit View',\n    'controls.interactive.ariaLabel': 'Toggle Interactivity',\n    // Mini map\n    'minimap.ariaLabel': 'Mini Map',\n    // Handle\n    'handle.ariaLabel': 'Handle',\n};\n\n/**\n * The `ConnectionMode` is used to set the mode of connection between nodes.\n * The `Strict` mode is the default one and only allows source to target edges.\n * `Loose` mode allows source to source and target to target edges as well.\n *\n * @public\n */\nvar ConnectionMode;\n(function (ConnectionMode) {\n    ConnectionMode[\"Strict\"] = \"strict\";\n    ConnectionMode[\"Loose\"] = \"loose\";\n})(ConnectionMode || (ConnectionMode = {}));\n/**\n * This enum is used to set the different modes of panning the viewport when the\n * user scrolls. The `Free` mode allows the user to pan in any direction by scrolling\n * with a device like a trackpad. The `Vertical` and `Horizontal` modes restrict\n * scroll panning to only the vertical or horizontal axis, respectively.\n *\n * @public\n */\nvar PanOnScrollMode;\n(function (PanOnScrollMode) {\n    PanOnScrollMode[\"Free\"] = \"free\";\n    PanOnScrollMode[\"Vertical\"] = \"vertical\";\n    PanOnScrollMode[\"Horizontal\"] = \"horizontal\";\n})(PanOnScrollMode || (PanOnScrollMode = {}));\nvar SelectionMode;\n(function (SelectionMode) {\n    SelectionMode[\"Partial\"] = \"partial\";\n    SelectionMode[\"Full\"] = \"full\";\n})(SelectionMode || (SelectionMode = {}));\nconst initialConnection = {\n    inProgress: false,\n    isValid: null,\n    from: null,\n    fromHandle: null,\n    fromPosition: null,\n    fromNode: null,\n    to: null,\n    toHandle: null,\n    toPosition: null,\n    toNode: null,\n};\n\n/**\n * If you set the `connectionLineType` prop on your [`<ReactFlow />`](/api-reference/react-flow#connection-connectionLineType)\n *component, it will dictate the style of connection line rendered when creating\n *new edges.\n *\n * @public\n *\n * @remarks If you choose to render a custom connection line component, this value will be\n *passed to your component as part of its [`ConnectionLineComponentProps`](/api-reference/types/connection-line-component-props).\n */\nvar ConnectionLineType;\n(function (ConnectionLineType) {\n    ConnectionLineType[\"Bezier\"] = \"default\";\n    ConnectionLineType[\"Straight\"] = \"straight\";\n    ConnectionLineType[\"Step\"] = \"step\";\n    ConnectionLineType[\"SmoothStep\"] = \"smoothstep\";\n    ConnectionLineType[\"SimpleBezier\"] = \"simplebezier\";\n})(ConnectionLineType || (ConnectionLineType = {}));\n/**\n * Edges may optionally have a marker on either end. The MarkerType type enumerates\n * the options available to you when configuring a given marker.\n *\n * @public\n */\nvar MarkerType;\n(function (MarkerType) {\n    MarkerType[\"Arrow\"] = \"arrow\";\n    MarkerType[\"ArrowClosed\"] = \"arrowclosed\";\n})(MarkerType || (MarkerType = {}));\n\n/**\n * While [`PanelPosition`](/api-reference/types/panel-position) can be used to place a\n * component in the corners of a container, the `Position` enum is less precise and used\n * primarily in relation to edges and handles.\n *\n * @public\n */\nvar Position;\n(function (Position) {\n    Position[\"Left\"] = \"left\";\n    Position[\"Top\"] = \"top\";\n    Position[\"Right\"] = \"right\";\n    Position[\"Bottom\"] = \"bottom\";\n})(Position || (Position = {}));\nconst oppositePosition = {\n    [Position.Left]: Position.Right,\n    [Position.Right]: Position.Left,\n    [Position.Top]: Position.Bottom,\n    [Position.Bottom]: Position.Top,\n};\n\n/**\n * @internal\n */\nfunction areConnectionMapsEqual(a, b) {\n    if (!a && !b) {\n        return true;\n    }\n    if (!a || !b || a.size !== b.size) {\n        return false;\n    }\n    if (!a.size && !b.size) {\n        return true;\n    }\n    for (const key of a.keys()) {\n        if (!b.has(key)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * We call the callback for all connections in a that are not in b\n *\n * @internal\n */\nfunction handleConnectionChange(a, b, cb) {\n    if (!cb) {\n        return;\n    }\n    const diff = [];\n    a.forEach((connection, key) => {\n        if (!b?.has(key)) {\n            diff.push(connection);\n        }\n    });\n    if (diff.length) {\n        cb(diff);\n    }\n}\nfunction getConnectionStatus(isValid) {\n    return isValid === null ? null : isValid ? 'valid' : 'invalid';\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\n/**\n * Test whether an object is usable as an Edge\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Edge\n */\nconst isEdgeBase = (element) => 'id' in element && 'source' in element && 'target' in element;\n/**\n * Test whether an object is usable as a Node\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test\n * @returns A boolean indicating whether the element is an Node\n */\nconst isNodeBase = (element) => 'id' in element && 'position' in element && !('source' in element) && !('target' in element);\nconst isInternalNodeBase = (element) => 'id' in element && 'internals' in element && !('source' in element) && !('target' in element);\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _target_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the source is the given node.\n *\n * @example\n * ```ts\n *import { getOutgoers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const outgoers = getOutgoers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getOutgoers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const outgoerIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.source === node.id) {\n            outgoerIds.add(edge.target);\n        }\n    });\n    return nodes.filter((n) => outgoerIds.has(n.id));\n};\n/**\n * This util is used to tell you what nodes, if any, are connected to the given node\n * as the _source_ of an edge.\n * @public\n * @param node - The node to get the connected nodes from.\n * @param nodes - The array of all nodes.\n * @param edges - The array of all edges.\n * @returns An array of nodes that are connected over edges where the target is the given node.\n *\n * @example\n * ```ts\n *import { getIncomers } from '@xyflow/react';\n *\n *const nodes = [];\n *const edges = [];\n *\n *const incomers = getIncomers(\n *  { id: '1', position: { x: 0, y: 0 }, data: { label: 'node' } },\n *  nodes,\n *  edges,\n *);\n *```\n */\nconst getIncomers = (node, nodes, edges) => {\n    if (!node.id) {\n        return [];\n    }\n    const incomersIds = new Set();\n    edges.forEach((edge) => {\n        if (edge.target === node.id) {\n            incomersIds.add(edge.source);\n        }\n    });\n    return nodes.filter((n) => incomersIds.has(n.id));\n};\nconst getNodePositionWithOrigin = (node, nodeOrigin = [0, 0]) => {\n    const { width, height } = getNodeDimensions(node);\n    const origin = node.origin ?? nodeOrigin;\n    const offsetX = width * origin[0];\n    const offsetY = height * origin[1];\n    return {\n        x: node.position.x - offsetX,\n        y: node.position.y - offsetY,\n    };\n};\n/**\n * Returns the bounding box that contains all the given nodes in an array. This can\n * be useful when combined with [`getViewportForBounds`](/api-reference/utils/get-viewport-for-bounds)\n * to calculate the correct transform to fit the given nodes in a viewport.\n * @public\n * @remarks Useful when combined with {@link getViewportForBounds} to calculate the correct transform to fit the given nodes in a viewport.\n * @param nodes - Nodes to calculate the bounds for.\n * @returns Bounding box enclosing all nodes.\n *\n * @remarks This function was previously called `getRectOfNodes`\n *\n * @example\n * ```js\n *import { getNodesBounds } from '@xyflow/react';\n *\n *const nodes = [\n *  {\n *    id: 'a',\n *    position: { x: 0, y: 0 },\n *    data: { label: 'a' },\n *    width: 50,\n *    height: 25,\n *  },\n *  {\n *    id: 'b',\n *    position: { x: 100, y: 100 },\n *    data: { label: 'b' },\n *    width: 50,\n *    height: 25,\n *  },\n *];\n *\n *const bounds = getNodesBounds(nodes);\n *```\n */\nconst getNodesBounds = (nodes, params = { nodeOrigin: [0, 0] }) => {\n    if (process.env.NODE_ENV === 'development' && !params.nodeLookup) {\n        console.warn('Please use `getNodesBounds` from `useReactFlow`/`useSvelteFlow` hook to ensure correct values for sub flows. If not possible, you have to provide a nodeLookup to support sub flows.');\n    }\n    if (nodes.length === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    const box = nodes.reduce((currBox, nodeOrId) => {\n        const isId = typeof nodeOrId === 'string';\n        let currentNode = !params.nodeLookup && !isId ? nodeOrId : undefined;\n        if (params.nodeLookup) {\n            currentNode = isId\n                ? params.nodeLookup.get(nodeOrId)\n                : !isInternalNodeBase(nodeOrId)\n                    ? params.nodeLookup.get(nodeOrId.id)\n                    : nodeOrId;\n        }\n        const nodeBox = currentNode ? nodeToBox(currentNode, params.nodeOrigin) : { x: 0, y: 0, x2: 0, y2: 0 };\n        return getBoundsOfBoxes(currBox, nodeBox);\n    }, { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity });\n    return boxToRect(box);\n};\n/**\n * Determines a bounding box that contains all given nodes in an array\n * @internal\n */\nconst getInternalNodesBounds = (nodeLookup, params = {}) => {\n    if (nodeLookup.size === 0) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n    let box = { x: Infinity, y: Infinity, x2: -Infinity, y2: -Infinity };\n    nodeLookup.forEach((node) => {\n        if (params.filter === undefined || params.filter(node)) {\n            const nodeBox = nodeToBox(node);\n            box = getBoundsOfBoxes(box, nodeBox);\n        }\n    });\n    return boxToRect(box);\n};\nconst getNodesInside = (nodes, rect, [tx, ty, tScale] = [0, 0, 1], partially = false, \n// set excludeNonSelectableNodes if you want to pay attention to the nodes \"selectable\" attribute\nexcludeNonSelectableNodes = false) => {\n    const paneRect = {\n        ...pointToRendererPoint(rect, [tx, ty, tScale]),\n        width: rect.width / tScale,\n        height: rect.height / tScale,\n    };\n    const visibleNodes = [];\n    for (const node of nodes.values()) {\n        const { measured, selectable = true, hidden = false } = node;\n        if ((excludeNonSelectableNodes && !selectable) || hidden) {\n            continue;\n        }\n        const width = measured.width ?? node.width ?? node.initialWidth ?? null;\n        const height = measured.height ?? node.height ?? node.initialHeight ?? null;\n        const overlappingArea = getOverlappingArea(paneRect, nodeToRect(node));\n        const area = (width ?? 0) * (height ?? 0);\n        const partiallyVisible = partially && overlappingArea > 0;\n        const forceInitialRender = !node.internals.handleBounds;\n        const isVisible = forceInitialRender || partiallyVisible || overlappingArea >= area;\n        if (isVisible || node.dragging) {\n            visibleNodes.push(node);\n        }\n    }\n    return visibleNodes;\n};\n/**\n * This utility filters an array of edges, keeping only those where either the source or target\n * node is present in the given array of nodes.\n * @public\n * @param nodes - Nodes you want to get the connected edges for.\n * @param edges - All edges.\n * @returns Array of edges that connect any of the given nodes with each other.\n *\n * @example\n * ```js\n *import { getConnectedEdges } from '@xyflow/react';\n *\n *const nodes = [\n *  { id: 'a', position: { x: 0, y: 0 } },\n *  { id: 'b', position: { x: 100, y: 0 } },\n *];\n *\n *const edges = [\n *  { id: 'a->c', source: 'a', target: 'c' },\n *  { id: 'c->d', source: 'c', target: 'd' },\n *];\n *\n *const connectedEdges = getConnectedEdges(nodes, edges);\n * // => [{ id: 'a->c', source: 'a', target: 'c' }]\n *```\n */\nconst getConnectedEdges = (nodes, edges) => {\n    const nodeIds = new Set();\n    nodes.forEach((node) => {\n        nodeIds.add(node.id);\n    });\n    return edges.filter((edge) => nodeIds.has(edge.source) || nodeIds.has(edge.target));\n};\nfunction getFitViewNodes(nodeLookup, options) {\n    const fitViewNodes = new Map();\n    const optionNodeIds = options?.nodes ? new Set(options.nodes.map((node) => node.id)) : null;\n    nodeLookup.forEach((n) => {\n        const isVisible = n.measured.width && n.measured.height && (options?.includeHiddenNodes || !n.hidden);\n        if (isVisible && (!optionNodeIds || optionNodeIds.has(n.id))) {\n            fitViewNodes.set(n.id, n);\n        }\n    });\n    return fitViewNodes;\n}\nasync function fitViewport({ nodes, width, height, panZoom, minZoom, maxZoom }, options) {\n    if (nodes.size === 0) {\n        return Promise.resolve(true);\n    }\n    const nodesToFit = getFitViewNodes(nodes, options);\n    const bounds = getInternalNodesBounds(nodesToFit);\n    const viewport = getViewportForBounds(bounds, width, height, options?.minZoom ?? minZoom, options?.maxZoom ?? maxZoom, options?.padding ?? 0.1);\n    await panZoom.setViewport(viewport, {\n        duration: options?.duration,\n        ease: options?.ease,\n        interpolate: options?.interpolate,\n    });\n    return Promise.resolve(true);\n}\n/**\n * This function calculates the next position of a node, taking into account the node's extent, parent node, and origin.\n *\n * @internal\n * @returns position, positionAbsolute\n */\nfunction calculateNodePosition({ nodeId, nextPosition, nodeLookup, nodeOrigin = [0, 0], nodeExtent, onError, }) {\n    const node = nodeLookup.get(nodeId);\n    const parentNode = node.parentId ? nodeLookup.get(node.parentId) : undefined;\n    const { x: parentX, y: parentY } = parentNode ? parentNode.internals.positionAbsolute : { x: 0, y: 0 };\n    const origin = node.origin ?? nodeOrigin;\n    let extent = nodeExtent;\n    if (node.extent === 'parent' && !node.expandParent) {\n        if (!parentNode) {\n            onError?.('005', errorMessages['error005']());\n        }\n        else {\n            const parentWidth = parentNode.measured.width;\n            const parentHeight = parentNode.measured.height;\n            if (parentWidth && parentHeight) {\n                extent = [\n                    [parentX, parentY],\n                    [parentX + parentWidth, parentY + parentHeight],\n                ];\n            }\n        }\n    }\n    else if (parentNode && isCoordinateExtent(node.extent)) {\n        extent = [\n            [node.extent[0][0] + parentX, node.extent[0][1] + parentY],\n            [node.extent[1][0] + parentX, node.extent[1][1] + parentY],\n        ];\n    }\n    const positionAbsolute = isCoordinateExtent(extent)\n        ? clampPosition(nextPosition, extent, node.measured)\n        : nextPosition;\n    if (node.measured.width === undefined || node.measured.height === undefined) {\n        onError?.('015', errorMessages['error015']());\n    }\n    return {\n        position: {\n            x: positionAbsolute.x - parentX + (node.measured.width ?? 0) * origin[0],\n            y: positionAbsolute.y - parentY + (node.measured.height ?? 0) * origin[1],\n        },\n        positionAbsolute,\n    };\n}\n/**\n * Pass in nodes & edges to delete, get arrays of nodes and edges that actually can be deleted\n * @internal\n * @param param.nodesToRemove - The nodes to remove\n * @param param.edgesToRemove - The edges to remove\n * @param param.nodes - All nodes\n * @param param.edges - All edges\n * @param param.onBeforeDelete - Callback to check which nodes and edges can be deleted\n * @returns nodes: nodes that can be deleted, edges: edges that can be deleted\n */\nasync function getElementsToRemove({ nodesToRemove = [], edgesToRemove = [], nodes, edges, onBeforeDelete, }) {\n    const nodeIds = new Set(nodesToRemove.map((node) => node.id));\n    const matchingNodes = [];\n    for (const node of nodes) {\n        if (node.deletable === false) {\n            continue;\n        }\n        const isIncluded = nodeIds.has(node.id);\n        const parentHit = !isIncluded && node.parentId && matchingNodes.find((n) => n.id === node.parentId);\n        if (isIncluded || parentHit) {\n            matchingNodes.push(node);\n        }\n    }\n    const edgeIds = new Set(edgesToRemove.map((edge) => edge.id));\n    const deletableEdges = edges.filter((edge) => edge.deletable !== false);\n    const connectedEdges = getConnectedEdges(matchingNodes, deletableEdges);\n    const matchingEdges = connectedEdges;\n    for (const edge of deletableEdges) {\n        const isIncluded = edgeIds.has(edge.id);\n        if (isIncluded && !matchingEdges.find((e) => e.id === edge.id)) {\n            matchingEdges.push(edge);\n        }\n    }\n    if (!onBeforeDelete) {\n        return {\n            edges: matchingEdges,\n            nodes: matchingNodes,\n        };\n    }\n    const onBeforeDeleteResult = await onBeforeDelete({\n        nodes: matchingNodes,\n        edges: matchingEdges,\n    });\n    if (typeof onBeforeDeleteResult === 'boolean') {\n        return onBeforeDeleteResult ? { edges: matchingEdges, nodes: matchingNodes } : { edges: [], nodes: [] };\n    }\n    return onBeforeDeleteResult;\n}\n\nconst clamp = (val, min = 0, max = 1) => Math.min(Math.max(val, min), max);\nconst clampPosition = (position = { x: 0, y: 0 }, extent, dimensions) => ({\n    x: clamp(position.x, extent[0][0], extent[1][0] - (dimensions?.width ?? 0)),\n    y: clamp(position.y, extent[0][1], extent[1][1] - (dimensions?.height ?? 0)),\n});\nfunction clampPositionToParent(childPosition, childDimensions, parent) {\n    const { width: parentWidth, height: parentHeight } = getNodeDimensions(parent);\n    const { x: parentX, y: parentY } = parent.internals.positionAbsolute;\n    return clampPosition(childPosition, [\n        [parentX, parentY],\n        [parentX + parentWidth, parentY + parentHeight],\n    ], childDimensions);\n}\n/**\n * Calculates the velocity of panning when the mouse is close to the edge of the canvas\n * @internal\n * @param value - One dimensional poition of the mouse (x or y)\n * @param min - Minimal position on canvas before panning starts\n * @param max - Maximal position on canvas before panning starts\n * @returns - A number between 0 and 1 that represents the velocity of panning\n */\nconst calcAutoPanVelocity = (value, min, max) => {\n    if (value < min) {\n        return clamp(Math.abs(value - min), 1, min) / min;\n    }\n    else if (value > max) {\n        return -clamp(Math.abs(value - max), 1, min) / min;\n    }\n    return 0;\n};\nconst calcAutoPan = (pos, bounds, speed = 15, distance = 40) => {\n    const xMovement = calcAutoPanVelocity(pos.x, distance, bounds.width - distance) * speed;\n    const yMovement = calcAutoPanVelocity(pos.y, distance, bounds.height - distance) * speed;\n    return [xMovement, yMovement];\n};\nconst getBoundsOfBoxes = (box1, box2) => ({\n    x: Math.min(box1.x, box2.x),\n    y: Math.min(box1.y, box2.y),\n    x2: Math.max(box1.x2, box2.x2),\n    y2: Math.max(box1.y2, box2.y2),\n});\nconst rectToBox = ({ x, y, width, height }) => ({\n    x,\n    y,\n    x2: x + width,\n    y2: y + height,\n});\nconst boxToRect = ({ x, y, x2, y2 }) => ({\n    x,\n    y,\n    width: x2 - x,\n    height: y2 - y,\n});\nconst nodeToRect = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n};\nconst nodeToBox = (node, nodeOrigin = [0, 0]) => {\n    const { x, y } = isInternalNodeBase(node)\n        ? node.internals.positionAbsolute\n        : getNodePositionWithOrigin(node, nodeOrigin);\n    return {\n        x,\n        y,\n        x2: x + (node.measured?.width ?? node.width ?? node.initialWidth ?? 0),\n        y2: y + (node.measured?.height ?? node.height ?? node.initialHeight ?? 0),\n    };\n};\nconst getBoundsOfRects = (rect1, rect2) => boxToRect(getBoundsOfBoxes(rectToBox(rect1), rectToBox(rect2)));\nconst getOverlappingArea = (rectA, rectB) => {\n    const xOverlap = Math.max(0, Math.min(rectA.x + rectA.width, rectB.x + rectB.width) - Math.max(rectA.x, rectB.x));\n    const yOverlap = Math.max(0, Math.min(rectA.y + rectA.height, rectB.y + rectB.height) - Math.max(rectA.y, rectB.y));\n    return Math.ceil(xOverlap * yOverlap);\n};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nconst isRectObject = (obj) => isNumeric(obj.width) && isNumeric(obj.height) && isNumeric(obj.x) && isNumeric(obj.y);\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\nconst isNumeric = (n) => !isNaN(n) && isFinite(n);\n// used for a11y key board controls for nodes and edges\nconst devWarn = (id, message) => {\n    if (process.env.NODE_ENV === 'development') {\n        console.warn(`[React Flow]: ${message} Help: https://reactflow.dev/error#${id}`);\n    }\n};\nconst snapPosition = (position, snapGrid = [1, 1]) => {\n    return {\n        x: snapGrid[0] * Math.round(position.x / snapGrid[0]),\n        y: snapGrid[1] * Math.round(position.y / snapGrid[1]),\n    };\n};\nconst pointToRendererPoint = ({ x, y }, [tx, ty, tScale], snapToGrid = false, snapGrid = [1, 1]) => {\n    const position = {\n        x: (x - tx) / tScale,\n        y: (y - ty) / tScale,\n    };\n    return snapToGrid ? snapPosition(position, snapGrid) : position;\n};\nconst rendererPointToPoint = ({ x, y }, [tx, ty, tScale]) => {\n    return {\n        x: x * tScale + tx,\n        y: y * tScale + ty,\n    };\n};\n/**\n * Parses a single padding value to a number\n * @internal\n * @param padding - Padding to parse\n * @param viewport - Width or height of the viewport\n * @returns The padding in pixels\n */\nfunction parsePadding(padding, viewport) {\n    if (typeof padding === 'number') {\n        return Math.floor((viewport - viewport / (1 + padding)) * 0.5);\n    }\n    if (typeof padding === 'string' && padding.endsWith('px')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(paddingValue);\n        }\n    }\n    if (typeof padding === 'string' && padding.endsWith('%')) {\n        const paddingValue = parseFloat(padding);\n        if (!Number.isNaN(paddingValue)) {\n            return Math.floor(viewport * paddingValue * 0.01);\n        }\n    }\n    console.error(`[React Flow] The padding value \"${padding}\" is invalid. Please provide a number or a string with a valid unit (px or %).`);\n    return 0;\n}\n/**\n * Parses the paddings to an object with top, right, bottom, left, x and y paddings\n * @internal\n * @param padding - Padding to parse\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the paddings in pixels\n */\nfunction parsePaddings(padding, width, height) {\n    if (typeof padding === 'string' || typeof padding === 'number') {\n        const paddingY = parsePadding(padding, height);\n        const paddingX = parsePadding(padding, width);\n        return {\n            top: paddingY,\n            right: paddingX,\n            bottom: paddingY,\n            left: paddingX,\n            x: paddingX * 2,\n            y: paddingY * 2,\n        };\n    }\n    if (typeof padding === 'object') {\n        const top = parsePadding(padding.top ?? padding.y ?? 0, height);\n        const bottom = parsePadding(padding.bottom ?? padding.y ?? 0, height);\n        const left = parsePadding(padding.left ?? padding.x ?? 0, width);\n        const right = parsePadding(padding.right ?? padding.x ?? 0, width);\n        return { top, right, bottom, left, x: left + right, y: top + bottom };\n    }\n    return { top: 0, right: 0, bottom: 0, left: 0, x: 0, y: 0 };\n}\n/**\n * Calculates the resulting paddings if the new viewport is applied\n * @internal\n * @param bounds - Bounds to fit inside viewport\n * @param x - X position of the viewport\n * @param y - Y position of the viewport\n * @param zoom - Zoom level of the viewport\n * @param width - Width of the viewport\n * @param height - Height of the viewport\n * @returns An object with the minimum padding required to fit the bounds inside the viewport\n */\nfunction calculateAppliedPaddings(bounds, x, y, zoom, width, height) {\n    const { x: left, y: top } = rendererPointToPoint(bounds, [x, y, zoom]);\n    const { x: boundRight, y: boundBottom } = rendererPointToPoint({ x: bounds.x + bounds.width, y: bounds.y + bounds.height }, [x, y, zoom]);\n    const right = width - boundRight;\n    const bottom = height - boundBottom;\n    return {\n        left: Math.floor(left),\n        top: Math.floor(top),\n        right: Math.floor(right),\n        bottom: Math.floor(bottom),\n    };\n}\n/**\n * Returns a viewport that encloses the given bounds with padding.\n * @public\n * @remarks You can determine bounds of nodes with {@link getNodesBounds} and {@link getBoundsOfRects}\n * @param bounds - Bounds to fit inside viewport.\n * @param width - Width of the viewport.\n * @param height  - Height of the viewport.\n * @param minZoom - Minimum zoom level of the resulting viewport.\n * @param maxZoom - Maximum zoom level of the resulting viewport.\n * @param padding - Padding around the bounds.\n * @returns A transformed {@link Viewport} that encloses the given bounds which you can pass to e.g. {@link setViewport}.\n * @example\n * const { x, y, zoom } = getViewportForBounds(\n * { x: 0, y: 0, width: 100, height: 100},\n * 1200, 800, 0.5, 2);\n */\nconst getViewportForBounds = (bounds, width, height, minZoom, maxZoom, padding) => {\n    // First we resolve all the paddings to actual pixel values\n    const p = parsePaddings(padding, width, height);\n    const xZoom = (width - p.x) / bounds.width;\n    const yZoom = (height - p.y) / bounds.height;\n    // We calculate the new x, y, zoom for a centered view\n    const zoom = Math.min(xZoom, yZoom);\n    const clampedZoom = clamp(zoom, minZoom, maxZoom);\n    const boundsCenterX = bounds.x + bounds.width / 2;\n    const boundsCenterY = bounds.y + bounds.height / 2;\n    const x = width / 2 - boundsCenterX * clampedZoom;\n    const y = height / 2 - boundsCenterY * clampedZoom;\n    // Then we calculate the minimum padding, to respect asymmetric paddings\n    const newPadding = calculateAppliedPaddings(bounds, x, y, clampedZoom, width, height);\n    // We only want to have an offset if the newPadding is smaller than the required padding\n    const offset = {\n        left: Math.min(newPadding.left - p.left, 0),\n        top: Math.min(newPadding.top - p.top, 0),\n        right: Math.min(newPadding.right - p.right, 0),\n        bottom: Math.min(newPadding.bottom - p.bottom, 0),\n    };\n    return {\n        x: x - offset.left + offset.right,\n        y: y - offset.top + offset.bottom,\n        zoom: clampedZoom,\n    };\n};\nconst isMacOs = () => typeof navigator !== 'undefined' && navigator?.userAgent?.indexOf('Mac') >= 0;\nfunction isCoordinateExtent(extent) {\n    return extent !== undefined && extent !== 'parent';\n}\nfunction getNodeDimensions(node) {\n    return {\n        width: node.measured?.width ?? node.width ?? node.initialWidth ?? 0,\n        height: node.measured?.height ?? node.height ?? node.initialHeight ?? 0,\n    };\n}\nfunction nodeHasDimensions(node) {\n    return ((node.measured?.width ?? node.width ?? node.initialWidth) !== undefined &&\n        (node.measured?.height ?? node.height ?? node.initialHeight) !== undefined);\n}\n/**\n * Convert child position to aboslute position\n *\n * @internal\n * @param position\n * @param parentId\n * @param nodeLookup\n * @param nodeOrigin\n * @returns an internal node with an absolute position\n */\nfunction evaluateAbsolutePosition(position, dimensions = { width: 0, height: 0 }, parentId, nodeLookup, nodeOrigin) {\n    const positionAbsolute = { ...position };\n    const parent = nodeLookup.get(parentId);\n    if (parent) {\n        const origin = parent.origin || nodeOrigin;\n        positionAbsolute.x += parent.internals.positionAbsolute.x - (dimensions.width ?? 0) * origin[0];\n        positionAbsolute.y += parent.internals.positionAbsolute.y - (dimensions.height ?? 0) * origin[1];\n    }\n    return positionAbsolute;\n}\nfunction areSetsEqual(a, b) {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const item of a) {\n        if (!b.has(item)) {\n            return false;\n        }\n    }\n    return true;\n}\n/**\n * Polyfill for Promise.withResolvers until we can use it in all browsers\n * @internal\n */\nfunction withResolvers() {\n    let resolve;\n    let reject;\n    const promise = new Promise((res, rej) => {\n        resolve = res;\n        reject = rej;\n    });\n    return { promise, resolve, reject };\n}\nfunction mergeAriaLabelConfig(partial) {\n    return { ...defaultAriaLabelConfig, ...(partial || {}) };\n}\n\nfunction getPointerPosition(event, { snapGrid = [0, 0], snapToGrid = false, transform, containerBounds }) {\n    const { x, y } = getEventPosition(event);\n    const pointerPos = pointToRendererPoint({ x: x - (containerBounds?.left ?? 0), y: y - (containerBounds?.top ?? 0) }, transform);\n    const { x: xSnapped, y: ySnapped } = snapToGrid ? snapPosition(pointerPos, snapGrid) : pointerPos;\n    // we need the snapped position in order to be able to skip unnecessary drag events\n    return {\n        xSnapped,\n        ySnapped,\n        ...pointerPos,\n    };\n}\nconst getDimensions = (node) => ({\n    width: node.offsetWidth,\n    height: node.offsetHeight,\n});\nconst getHostForElement = (element) => element?.getRootNode?.() || window?.document;\nconst inputTags = ['INPUT', 'SELECT', 'TEXTAREA'];\nfunction isInputDOMNode(event) {\n    // using composed path for handling shadow dom\n    const target = (event.composedPath?.()?.[0] || event.target);\n    if (target?.nodeType !== 1 /* Node.ELEMENT_NODE */)\n        return false;\n    const isInput = inputTags.includes(target.nodeName) || target.hasAttribute('contenteditable');\n    // when an input field is focused we don't want to trigger deletion or movement of nodes\n    return isInput || !!target.closest('.nokey');\n}\nconst isMouseEvent = (event) => 'clientX' in event;\nconst getEventPosition = (event, bounds) => {\n    const isMouse = isMouseEvent(event);\n    const evtX = isMouse ? event.clientX : event.touches?.[0].clientX;\n    const evtY = isMouse ? event.clientY : event.touches?.[0].clientY;\n    return {\n        x: evtX - (bounds?.left ?? 0),\n        y: evtY - (bounds?.top ?? 0),\n    };\n};\n/*\n * The handle bounds are calculated relative to the node element.\n * We store them in the internals object of the node in order to avoid\n * unnecessary recalculations.\n */\nconst getHandleBounds = (type, nodeElement, nodeBounds, zoom, nodeId) => {\n    const handles = nodeElement.querySelectorAll(`.${type}`);\n    if (!handles || !handles.length) {\n        return null;\n    }\n    return Array.from(handles).map((handle) => {\n        const handleBounds = handle.getBoundingClientRect();\n        return {\n            id: handle.getAttribute('data-handleid'),\n            type,\n            nodeId,\n            position: handle.getAttribute('data-handlepos'),\n            x: (handleBounds.left - nodeBounds.left) / zoom,\n            y: (handleBounds.top - nodeBounds.top) / zoom,\n            ...getDimensions(handle),\n        };\n    });\n};\n\nfunction getBezierEdgeCenter({ sourceX, sourceY, targetX, targetY, sourceControlX, sourceControlY, targetControlX, targetControlY, }) {\n    /*\n     * cubic bezier t=0.5 mid point, not the actual mid point, but easy to calculate\n     * https://stackoverflow.com/questions/67516101/how-to-find-distance-mid-point-of-bezier-curve\n     */\n    const centerX = sourceX * 0.125 + sourceControlX * 0.375 + targetControlX * 0.375 + targetX * 0.125;\n    const centerY = sourceY * 0.125 + sourceControlY * 0.375 + targetControlY * 0.375 + targetY * 0.125;\n    const offsetX = Math.abs(centerX - sourceX);\n    const offsetY = Math.abs(centerY - sourceY);\n    return [centerX, centerY, offsetX, offsetY];\n}\nfunction calculateControlOffset(distance, curvature) {\n    if (distance >= 0) {\n        return 0.5 * distance;\n    }\n    return curvature * 25 * Math.sqrt(-distance);\n}\nfunction getControlWithCurvature({ pos, x1, y1, x2, y2, c }) {\n    switch (pos) {\n        case Position.Left:\n            return [x1 - calculateControlOffset(x1 - x2, c), y1];\n        case Position.Right:\n            return [x1 + calculateControlOffset(x2 - x1, c), y1];\n        case Position.Top:\n            return [x1, y1 - calculateControlOffset(y1 - y2, c)];\n        case Position.Bottom:\n            return [x1, y1 + calculateControlOffset(y2 - y1, c)];\n    }\n}\n/**\n * The `getBezierPath` util returns everything you need to render a bezier edge\n *between two nodes.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getBezierPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *});\n *```\n *\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to\n *work with multiple edge paths at once.\n */\nfunction getBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, curvature = 0.25, }) {\n    const [sourceControlX, sourceControlY] = getControlWithCurvature({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n        c: curvature,\n    });\n    const [targetControlX, targetControlY] = getControlWithCurvature({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n        c: curvature,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\n\n// this is used for straight edges and simple smoothstep edges (LTR, RTL, BTT, TTB)\nfunction getEdgeCenter({ sourceX, sourceY, targetX, targetY, }) {\n    const xOffset = Math.abs(targetX - sourceX) / 2;\n    const centerX = targetX < sourceX ? targetX + xOffset : targetX - xOffset;\n    const yOffset = Math.abs(targetY - sourceY) / 2;\n    const centerY = targetY < sourceY ? targetY + yOffset : targetY - yOffset;\n    return [centerX, centerY, xOffset, yOffset];\n}\n/**\n * Returns the z-index for an edge based on the node it connects and whether it is selected.\n * By default, edges are rendered below nodes. This behaviour is different for edges that are\n * connected to nodes with a parent, as they are rendered above the parent node.\n */\nfunction getElevatedEdgeZIndex({ sourceNode, targetNode, selected = false, zIndex, elevateOnSelect = false, }) {\n    if (zIndex !== undefined) {\n        return zIndex;\n    }\n    const edgeZ = elevateOnSelect && selected ? 1000 : 0;\n    const nodeZ = Math.max(sourceNode.parentId ? sourceNode.internals.z : 0, targetNode.parentId ? targetNode.internals.z : 0);\n    return edgeZ + nodeZ;\n}\nfunction isEdgeVisible({ sourceNode, targetNode, width, height, transform }) {\n    const edgeBox = getBoundsOfBoxes(nodeToBox(sourceNode), nodeToBox(targetNode));\n    if (edgeBox.x === edgeBox.x2) {\n        edgeBox.x2 += 1;\n    }\n    if (edgeBox.y === edgeBox.y2) {\n        edgeBox.y2 += 1;\n    }\n    const viewRect = {\n        x: -transform[0] / transform[2],\n        y: -transform[1] / transform[2],\n        width: width / transform[2],\n        height: height / transform[2],\n    };\n    return getOverlappingArea(viewRect, boxToRect(edgeBox)) > 0;\n}\nconst getEdgeId = ({ source, sourceHandle, target, targetHandle }) => `xy-edge__${source}${sourceHandle || ''}-${target}${targetHandle || ''}`;\nconst connectionExists = (edge, edges) => {\n    return edges.some((el) => el.source === edge.source &&\n        el.target === edge.target &&\n        (el.sourceHandle === edge.sourceHandle || (!el.sourceHandle && !edge.sourceHandle)) &&\n        (el.targetHandle === edge.targetHandle || (!el.targetHandle && !edge.targetHandle)));\n};\n/**\n * This util is a convenience function to add a new Edge to an array of edges. It also performs some validation to make sure you don't add an invalid edge or duplicate an existing one.\n * @public\n * @param edgeParams - Either an `Edge` or a `Connection` you want to add.\n * @param edges - The array of all current edges.\n * @returns A new array of edges with the new edge added.\n *\n * @remarks If an edge with the same `target` and `source` already exists (and the same\n *`targetHandle` and `sourceHandle` if those are set), then this util won't add\n *a new edge even if the `id` property is different.\n *\n */\nconst addEdge = (edgeParams, edges) => {\n    if (!edgeParams.source || !edgeParams.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    let edge;\n    if (isEdgeBase(edgeParams)) {\n        edge = { ...edgeParams };\n    }\n    else {\n        edge = {\n            ...edgeParams,\n            id: getEdgeId(edgeParams),\n        };\n    }\n    if (connectionExists(edge, edges)) {\n        return edges;\n    }\n    if (edge.sourceHandle === null) {\n        delete edge.sourceHandle;\n    }\n    if (edge.targetHandle === null) {\n        delete edge.targetHandle;\n    }\n    return edges.concat(edge);\n};\n/**\n * A handy utility to update an existing [`Edge`](/api-reference/types/edge) with new properties.\n *This searches your edge array for an edge with a matching `id` and updates its\n *properties with the connection you provide.\n * @public\n * @param oldEdge - The edge you want to update.\n * @param newConnection - The new connection you want to update the edge with.\n * @param edges - The array of all current edges.\n * @returns The updated edges array.\n *\n * @example\n * ```js\n *const onReconnect = useCallback(\n *  (oldEdge: Edge, newConnection: Connection) => setEdges((els) => reconnectEdge(oldEdge, newConnection, els)),[]);\n *```\n */\nconst reconnectEdge = (oldEdge, newConnection, edges, options = { shouldReplaceId: true }) => {\n    const { id: oldEdgeId, ...rest } = oldEdge;\n    if (!newConnection.source || !newConnection.target) {\n        devWarn('006', errorMessages['error006']());\n        return edges;\n    }\n    const foundEdge = edges.find((e) => e.id === oldEdge.id);\n    if (!foundEdge) {\n        devWarn('007', errorMessages['error007'](oldEdgeId));\n        return edges;\n    }\n    // Remove old edge and create the new edge with parameters of old edge.\n    const edge = {\n        ...rest,\n        id: options.shouldReplaceId ? getEdgeId(newConnection) : oldEdgeId,\n        source: newConnection.source,\n        target: newConnection.target,\n        sourceHandle: newConnection.sourceHandle,\n        targetHandle: newConnection.targetHandle,\n    };\n    return edges.filter((e) => e.id !== oldEdgeId).concat(edge);\n};\n\n/**\n * Calculates the straight line path between two points.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getStraightPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getStraightPath({ sourceX, sourceY, targetX, targetY, }) {\n    const [labelX, labelY, offsetX, offsetY] = getEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n    });\n    return [`M ${sourceX},${sourceY}L ${targetX},${targetY}`, labelX, labelY, offsetX, offsetY];\n}\n\nconst handleDirections = {\n    [Position.Left]: { x: -1, y: 0 },\n    [Position.Right]: { x: 1, y: 0 },\n    [Position.Top]: { x: 0, y: -1 },\n    [Position.Bottom]: { x: 0, y: 1 },\n};\nconst getDirection = ({ source, sourcePosition = Position.Bottom, target, }) => {\n    if (sourcePosition === Position.Left || sourcePosition === Position.Right) {\n        return source.x < target.x ? { x: 1, y: 0 } : { x: -1, y: 0 };\n    }\n    return source.y < target.y ? { x: 0, y: 1 } : { x: 0, y: -1 };\n};\nconst distance = (a, b) => Math.sqrt(Math.pow(b.x - a.x, 2) + Math.pow(b.y - a.y, 2));\n/*\n * With this function we try to mimic an orthogonal edge routing behaviour\n * It's not as good as a real orthogonal edge routing, but it's faster and good enough as a default for step and smooth step edges\n */\nfunction getPoints({ source, sourcePosition = Position.Bottom, target, targetPosition = Position.Top, center, offset, }) {\n    const sourceDir = handleDirections[sourcePosition];\n    const targetDir = handleDirections[targetPosition];\n    const sourceGapped = { x: source.x + sourceDir.x * offset, y: source.y + sourceDir.y * offset };\n    const targetGapped = { x: target.x + targetDir.x * offset, y: target.y + targetDir.y * offset };\n    const dir = getDirection({\n        source: sourceGapped,\n        sourcePosition,\n        target: targetGapped,\n    });\n    const dirAccessor = dir.x !== 0 ? 'x' : 'y';\n    const currDir = dir[dirAccessor];\n    let points = [];\n    let centerX, centerY;\n    const sourceGapOffset = { x: 0, y: 0 };\n    const targetGapOffset = { x: 0, y: 0 };\n    const [defaultCenterX, defaultCenterY, defaultOffsetX, defaultOffsetY] = getEdgeCenter({\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n    });\n    // opposite handle positions, default case\n    if (sourceDir[dirAccessor] * targetDir[dirAccessor] === -1) {\n        centerX = center.x ?? defaultCenterX;\n        centerY = center.y ?? defaultCenterY;\n        /*\n         *    --->\n         *    |\n         * >---\n         */\n        const verticalSplit = [\n            { x: centerX, y: sourceGapped.y },\n            { x: centerX, y: targetGapped.y },\n        ];\n        /*\n         *    |\n         *  ---\n         *  |\n         */\n        const horizontalSplit = [\n            { x: sourceGapped.x, y: centerY },\n            { x: targetGapped.x, y: centerY },\n        ];\n        if (sourceDir[dirAccessor] === currDir) {\n            points = dirAccessor === 'x' ? verticalSplit : horizontalSplit;\n        }\n        else {\n            points = dirAccessor === 'x' ? horizontalSplit : verticalSplit;\n        }\n    }\n    else {\n        // sourceTarget means we take x from source and y from target, targetSource is the opposite\n        const sourceTarget = [{ x: sourceGapped.x, y: targetGapped.y }];\n        const targetSource = [{ x: targetGapped.x, y: sourceGapped.y }];\n        // this handles edges with same handle positions\n        if (dirAccessor === 'x') {\n            points = sourceDir.x === currDir ? targetSource : sourceTarget;\n        }\n        else {\n            points = sourceDir.y === currDir ? sourceTarget : targetSource;\n        }\n        if (sourcePosition === targetPosition) {\n            const diff = Math.abs(source[dirAccessor] - target[dirAccessor]);\n            // if an edge goes from right to right for example (sourcePosition === targetPosition) and the distance between source.x and target.x is less than the offset, the added point and the gapped source/target will overlap. This leads to a weird edge path. To avoid this we add a gapOffset to the source/target\n            if (diff <= offset) {\n                const gapOffset = Math.min(offset - 1, offset - diff);\n                if (sourceDir[dirAccessor] === currDir) {\n                    sourceGapOffset[dirAccessor] = (sourceGapped[dirAccessor] > source[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n                else {\n                    targetGapOffset[dirAccessor] = (targetGapped[dirAccessor] > target[dirAccessor] ? -1 : 1) * gapOffset;\n                }\n            }\n        }\n        // these are conditions for handling mixed handle positions like Right -> Bottom for example\n        if (sourcePosition !== targetPosition) {\n            const dirAccessorOpposite = dirAccessor === 'x' ? 'y' : 'x';\n            const isSameDir = sourceDir[dirAccessor] === targetDir[dirAccessorOpposite];\n            const sourceGtTargetOppo = sourceGapped[dirAccessorOpposite] > targetGapped[dirAccessorOpposite];\n            const sourceLtTargetOppo = sourceGapped[dirAccessorOpposite] < targetGapped[dirAccessorOpposite];\n            const flipSourceTarget = (sourceDir[dirAccessor] === 1 && ((!isSameDir && sourceGtTargetOppo) || (isSameDir && sourceLtTargetOppo))) ||\n                (sourceDir[dirAccessor] !== 1 && ((!isSameDir && sourceLtTargetOppo) || (isSameDir && sourceGtTargetOppo)));\n            if (flipSourceTarget) {\n                points = dirAccessor === 'x' ? sourceTarget : targetSource;\n            }\n        }\n        const sourceGapPoint = { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y };\n        const targetGapPoint = { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y };\n        const maxXDistance = Math.max(Math.abs(sourceGapPoint.x - points[0].x), Math.abs(targetGapPoint.x - points[0].x));\n        const maxYDistance = Math.max(Math.abs(sourceGapPoint.y - points[0].y), Math.abs(targetGapPoint.y - points[0].y));\n        // we want to place the label on the longest segment of the edge\n        if (maxXDistance >= maxYDistance) {\n            centerX = (sourceGapPoint.x + targetGapPoint.x) / 2;\n            centerY = points[0].y;\n        }\n        else {\n            centerX = points[0].x;\n            centerY = (sourceGapPoint.y + targetGapPoint.y) / 2;\n        }\n    }\n    const pathPoints = [\n        source,\n        { x: sourceGapped.x + sourceGapOffset.x, y: sourceGapped.y + sourceGapOffset.y },\n        ...points,\n        { x: targetGapped.x + targetGapOffset.x, y: targetGapped.y + targetGapOffset.y },\n        target,\n    ];\n    return [pathPoints, centerX, centerY, defaultOffsetX, defaultOffsetY];\n}\nfunction getBend(a, b, c, size) {\n    const bendSize = Math.min(distance(a, b) / 2, distance(b, c) / 2, size);\n    const { x, y } = b;\n    // no bend\n    if ((a.x === x && x === c.x) || (a.y === y && y === c.y)) {\n        return `L${x} ${y}`;\n    }\n    // first segment is horizontal\n    if (a.y === y) {\n        const xDir = a.x < c.x ? -1 : 1;\n        const yDir = a.y < c.y ? 1 : -1;\n        return `L ${x + bendSize * xDir},${y}Q ${x},${y} ${x},${y + bendSize * yDir}`;\n    }\n    const xDir = a.x < c.x ? 1 : -1;\n    const yDir = a.y < c.y ? -1 : 1;\n    return `L ${x},${y + bendSize * yDir}Q ${x},${y} ${x + bendSize * xDir},${y}`;\n}\n/**\n * The `getSmoothStepPath` util returns everything you need to render a stepped path\n * between two nodes. The `borderRadius` property can be used to choose how rounded\n * the corners of those steps are.\n * @public\n * @returns A path string you can use in an SVG, the `labelX` and `labelY` position (center of path)\n * and `offsetX`, `offsetY` between source handle and label.\n *\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n * @example\n * ```js\n *  const source = { x: 0, y: 20 };\n *  const target = { x: 150, y: 100 };\n *\n *  const [path, labelX, labelY, offsetX, offsetY] = getSmoothStepPath({\n *    sourceX: source.x,\n *    sourceY: source.y,\n *    sourcePosition: Position.Right,\n *    targetX: target.x,\n *    targetY: target.y,\n *    targetPosition: Position.Left,\n *  });\n * ```\n * @remarks This function returns a tuple (aka a fixed-size array) to make it easier to work with multiple edge paths at once.\n */\nfunction getSmoothStepPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, borderRadius = 5, centerX, centerY, offset = 20, }) {\n    const [points, labelX, labelY, offsetX, offsetY] = getPoints({\n        source: { x: sourceX, y: sourceY },\n        sourcePosition,\n        target: { x: targetX, y: targetY },\n        targetPosition,\n        center: { x: centerX, y: centerY },\n        offset,\n    });\n    const path = points.reduce((res, p, i) => {\n        let segment = '';\n        if (i > 0 && i < points.length - 1) {\n            segment = getBend(points[i - 1], p, points[i + 1], borderRadius);\n        }\n        else {\n            segment = `${i === 0 ? 'M' : 'L'}${p.x} ${p.y}`;\n        }\n        res += segment;\n        return res;\n    }, '');\n    return [path, labelX, labelY, offsetX, offsetY];\n}\n\nfunction isNodeInitialized(node) {\n    return (node &&\n        !!(node.internals.handleBounds || node.handles?.length) &&\n        !!(node.measured.width || node.width || node.initialWidth));\n}\nfunction getEdgePosition(params) {\n    const { sourceNode, targetNode } = params;\n    if (!isNodeInitialized(sourceNode) || !isNodeInitialized(targetNode)) {\n        return null;\n    }\n    const sourceHandleBounds = sourceNode.internals.handleBounds || toHandleBounds(sourceNode.handles);\n    const targetHandleBounds = targetNode.internals.handleBounds || toHandleBounds(targetNode.handles);\n    const sourceHandle = getHandle$1(sourceHandleBounds?.source ?? [], params.sourceHandle);\n    const targetHandle = getHandle$1(\n    // when connection type is loose we can define all handles as sources and connect source -> source\n    params.connectionMode === ConnectionMode.Strict\n        ? targetHandleBounds?.target ?? []\n        : (targetHandleBounds?.target ?? []).concat(targetHandleBounds?.source ?? []), params.targetHandle);\n    if (!sourceHandle || !targetHandle) {\n        params.onError?.('008', errorMessages['error008'](!sourceHandle ? 'source' : 'target', {\n            id: params.id,\n            sourceHandle: params.sourceHandle,\n            targetHandle: params.targetHandle,\n        }));\n        return null;\n    }\n    const sourcePosition = sourceHandle?.position || Position.Bottom;\n    const targetPosition = targetHandle?.position || Position.Top;\n    const source = getHandlePosition(sourceNode, sourceHandle, sourcePosition);\n    const target = getHandlePosition(targetNode, targetHandle, targetPosition);\n    return {\n        sourceX: source.x,\n        sourceY: source.y,\n        targetX: target.x,\n        targetY: target.y,\n        sourcePosition,\n        targetPosition,\n    };\n}\nfunction toHandleBounds(handles) {\n    if (!handles) {\n        return null;\n    }\n    const source = [];\n    const target = [];\n    for (const handle of handles) {\n        handle.width = handle.width ?? 1;\n        handle.height = handle.height ?? 1;\n        if (handle.type === 'source') {\n            source.push(handle);\n        }\n        else if (handle.type === 'target') {\n            target.push(handle);\n        }\n    }\n    return {\n        source,\n        target,\n    };\n}\nfunction getHandlePosition(node, handle, fallbackPosition = Position.Left, center = false) {\n    const x = (handle?.x ?? 0) + node.internals.positionAbsolute.x;\n    const y = (handle?.y ?? 0) + node.internals.positionAbsolute.y;\n    const { width, height } = handle ?? getNodeDimensions(node);\n    if (center) {\n        return { x: x + width / 2, y: y + height / 2 };\n    }\n    const position = handle?.position ?? fallbackPosition;\n    switch (position) {\n        case Position.Top:\n            return { x: x + width / 2, y };\n        case Position.Right:\n            return { x: x + width, y: y + height / 2 };\n        case Position.Bottom:\n            return { x: x + width / 2, y: y + height };\n        case Position.Left:\n            return { x, y: y + height / 2 };\n    }\n}\nfunction getHandle$1(bounds, handleId) {\n    if (!bounds) {\n        return null;\n    }\n    // if no handleId is given, we use the first handle, otherwise we check for the id\n    return (!handleId ? bounds[0] : bounds.find((d) => d.id === handleId)) || null;\n}\n\nfunction getMarkerId(marker, id) {\n    if (!marker) {\n        return '';\n    }\n    if (typeof marker === 'string') {\n        return marker;\n    }\n    const idPrefix = id ? `${id}__` : '';\n    return `${idPrefix}${Object.keys(marker)\n        .sort()\n        .map((key) => `${key}=${marker[key]}`)\n        .join('&')}`;\n}\nfunction createMarkerIds(edges, { id, defaultColor, defaultMarkerStart, defaultMarkerEnd, }) {\n    const ids = new Set();\n    return edges\n        .reduce((markers, edge) => {\n        [edge.markerStart || defaultMarkerStart, edge.markerEnd || defaultMarkerEnd].forEach((marker) => {\n            if (marker && typeof marker === 'object') {\n                const markerId = getMarkerId(marker, id);\n                if (!ids.has(markerId)) {\n                    markers.push({ id: markerId, color: marker.color || defaultColor, ...marker });\n                    ids.add(markerId);\n                }\n            }\n        });\n        return markers;\n    }, [])\n        .sort((a, b) => a.id.localeCompare(b.id));\n}\n\nfunction getNodeToolbarTransform(nodeRect, viewport, position, offset, align) {\n    let alignmentOffset = 0.5;\n    if (align === 'start') {\n        alignmentOffset = 0;\n    }\n    else if (align === 'end') {\n        alignmentOffset = 1;\n    }\n    /*\n     * position === Position.Top\n     * we set the x any y position of the toolbar based on the nodes position\n     */\n    let pos = [\n        (nodeRect.x + nodeRect.width * alignmentOffset) * viewport.zoom + viewport.x,\n        nodeRect.y * viewport.zoom + viewport.y - offset,\n    ];\n    // and than shift it based on the alignment. The shift values are in %.\n    let shift = [-100 * alignmentOffset, -100];\n    switch (position) {\n        case Position.Right:\n            pos = [\n                (nodeRect.x + nodeRect.width) * viewport.zoom + viewport.x + offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [0, -100 * alignmentOffset];\n            break;\n        case Position.Bottom:\n            pos[1] = (nodeRect.y + nodeRect.height) * viewport.zoom + viewport.y + offset;\n            shift[1] = 0;\n            break;\n        case Position.Left:\n            pos = [\n                nodeRect.x * viewport.zoom + viewport.x - offset,\n                (nodeRect.y + nodeRect.height * alignmentOffset) * viewport.zoom + viewport.y,\n            ];\n            shift = [-100, -100 * alignmentOffset];\n            break;\n    }\n    return `translate(${pos[0]}px, ${pos[1]}px) translate(${shift[0]}%, ${shift[1]}%)`;\n}\n\nconst defaultOptions = {\n    nodeOrigin: [0, 0],\n    nodeExtent: infiniteExtent,\n    elevateNodesOnSelect: true,\n    defaults: {},\n};\nconst adoptUserNodesDefaultOptions = {\n    ...defaultOptions,\n    checkEquality: true,\n};\nfunction mergeObjects(base, incoming) {\n    const result = { ...base };\n    for (const key in incoming) {\n        if (incoming[key] !== undefined) {\n            // typecast is safe here, because we check for undefined\n            result[key] = incoming[key];\n        }\n    }\n    return result;\n}\nfunction updateAbsolutePositions(nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(defaultOptions, options);\n    for (const node of nodeLookup.values()) {\n        if (node.parentId) {\n            updateChildNode(node, nodeLookup, parentLookup, _options);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(node, _options.nodeOrigin);\n            const extent = isCoordinateExtent(node.extent) ? node.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(node));\n            node.internals.positionAbsolute = clampedPosition;\n        }\n    }\n}\nfunction adoptUserNodes(nodes, nodeLookup, parentLookup, options) {\n    const _options = mergeObjects(adoptUserNodesDefaultOptions, options);\n    let nodesInitialized = nodes.length > 0;\n    const tmpLookup = new Map(nodeLookup);\n    const selectedNodeZ = _options?.elevateNodesOnSelect ? 1000 : 0;\n    nodeLookup.clear();\n    parentLookup.clear();\n    for (const userNode of nodes) {\n        let internalNode = tmpLookup.get(userNode.id);\n        if (_options.checkEquality && userNode === internalNode?.internals.userNode) {\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        else {\n            const positionWithOrigin = getNodePositionWithOrigin(userNode, _options.nodeOrigin);\n            const extent = isCoordinateExtent(userNode.extent) ? userNode.extent : _options.nodeExtent;\n            const clampedPosition = clampPosition(positionWithOrigin, extent, getNodeDimensions(userNode));\n            internalNode = {\n                ..._options.defaults,\n                ...userNode,\n                measured: {\n                    width: userNode.measured?.width,\n                    height: userNode.measured?.height,\n                },\n                internals: {\n                    positionAbsolute: clampedPosition,\n                    // if user re-initializes the node or removes `measured` for whatever reason, we reset the handleBounds so that the node gets re-measured\n                    handleBounds: !userNode.measured ? undefined : internalNode?.internals.handleBounds,\n                    z: calculateZ(userNode, selectedNodeZ),\n                    userNode,\n                },\n            };\n            nodeLookup.set(userNode.id, internalNode);\n        }\n        if ((internalNode.measured === undefined ||\n            internalNode.measured.width === undefined ||\n            internalNode.measured.height === undefined) &&\n            !internalNode.hidden) {\n            nodesInitialized = false;\n        }\n        if (userNode.parentId) {\n            updateChildNode(internalNode, nodeLookup, parentLookup, options);\n        }\n    }\n    return nodesInitialized;\n}\nfunction updateParentLookup(node, parentLookup) {\n    if (!node.parentId) {\n        return;\n    }\n    const childNodes = parentLookup.get(node.parentId);\n    if (childNodes) {\n        childNodes.set(node.id, node);\n    }\n    else {\n        parentLookup.set(node.parentId, new Map([[node.id, node]]));\n    }\n}\n/**\n * Updates positionAbsolute and zIndex of a child node and the parentLookup.\n */\nfunction updateChildNode(node, nodeLookup, parentLookup, options) {\n    const { elevateNodesOnSelect, nodeOrigin, nodeExtent } = mergeObjects(defaultOptions, options);\n    const parentId = node.parentId;\n    const parentNode = nodeLookup.get(parentId);\n    if (!parentNode) {\n        console.warn(`Parent node ${parentId} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);\n        return;\n    }\n    updateParentLookup(node, parentLookup);\n    const selectedNodeZ = elevateNodesOnSelect ? 1000 : 0;\n    const { x, y, z } = calculateChildXYZ(node, parentNode, nodeOrigin, nodeExtent, selectedNodeZ);\n    const { positionAbsolute } = node.internals;\n    const positionChanged = x !== positionAbsolute.x || y !== positionAbsolute.y;\n    if (positionChanged || z !== node.internals.z) {\n        // we create a new object to mark the node as updated\n        nodeLookup.set(node.id, {\n            ...node,\n            internals: {\n                ...node.internals,\n                positionAbsolute: positionChanged ? { x, y } : positionAbsolute,\n                z,\n            },\n        });\n    }\n}\nfunction calculateZ(node, selectedNodeZ) {\n    return (isNumeric(node.zIndex) ? node.zIndex : 0) + (node.selected ? selectedNodeZ : 0);\n}\nfunction calculateChildXYZ(childNode, parentNode, nodeOrigin, nodeExtent, selectedNodeZ) {\n    const { x: parentX, y: parentY } = parentNode.internals.positionAbsolute;\n    const childDimensions = getNodeDimensions(childNode);\n    const positionWithOrigin = getNodePositionWithOrigin(childNode, nodeOrigin);\n    const clampedPosition = isCoordinateExtent(childNode.extent)\n        ? clampPosition(positionWithOrigin, childNode.extent, childDimensions)\n        : positionWithOrigin;\n    let absolutePosition = clampPosition({ x: parentX + clampedPosition.x, y: parentY + clampedPosition.y }, nodeExtent, childDimensions);\n    if (childNode.extent === 'parent') {\n        absolutePosition = clampPositionToParent(absolutePosition, childDimensions, parentNode);\n    }\n    const childZ = calculateZ(childNode, selectedNodeZ);\n    const parentZ = parentNode.internals.z ?? 0;\n    return {\n        x: absolutePosition.x,\n        y: absolutePosition.y,\n        z: parentZ >= childZ ? parentZ + 1 : childZ,\n    };\n}\nfunction handleExpandParent(children, nodeLookup, parentLookup, nodeOrigin = [0, 0]) {\n    const changes = [];\n    const parentExpansions = new Map();\n    // determine the expanded rectangle the child nodes would take for each parent\n    for (const child of children) {\n        const parent = nodeLookup.get(child.parentId);\n        if (!parent) {\n            continue;\n        }\n        const parentRect = parentExpansions.get(child.parentId)?.expandedRect ?? nodeToRect(parent);\n        const expandedRect = getBoundsOfRects(parentRect, child.rect);\n        parentExpansions.set(child.parentId, { expandedRect, parent });\n    }\n    if (parentExpansions.size > 0) {\n        parentExpansions.forEach(({ expandedRect, parent }, parentId) => {\n            // determine the position & dimensions of the parent\n            const positionAbsolute = parent.internals.positionAbsolute;\n            const dimensions = getNodeDimensions(parent);\n            const origin = parent.origin ?? nodeOrigin;\n            // determine how much the parent expands in width and position\n            const xChange = expandedRect.x < positionAbsolute.x ? Math.round(Math.abs(positionAbsolute.x - expandedRect.x)) : 0;\n            const yChange = expandedRect.y < positionAbsolute.y ? Math.round(Math.abs(positionAbsolute.y - expandedRect.y)) : 0;\n            const newWidth = Math.max(dimensions.width, Math.round(expandedRect.width));\n            const newHeight = Math.max(dimensions.height, Math.round(expandedRect.height));\n            const widthChange = (newWidth - dimensions.width) * origin[0];\n            const heightChange = (newHeight - dimensions.height) * origin[1];\n            // We need to correct the position of the parent node if the origin is not [0,0]\n            if (xChange > 0 || yChange > 0 || widthChange || heightChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'position',\n                    position: {\n                        x: parent.position.x - xChange + widthChange,\n                        y: parent.position.y - yChange + heightChange,\n                    },\n                });\n                /*\n                 * We move all child nodes in the oppsite direction\n                 * so the x,y changes of the parent do not move the children\n                 */\n                parentLookup.get(parentId)?.forEach((childNode) => {\n                    if (!children.some((child) => child.id === childNode.id)) {\n                        changes.push({\n                            id: childNode.id,\n                            type: 'position',\n                            position: {\n                                x: childNode.position.x + xChange,\n                                y: childNode.position.y + yChange,\n                            },\n                        });\n                    }\n                });\n            }\n            // We need to correct the dimensions of the parent node if the origin is not [0,0]\n            if (dimensions.width < expandedRect.width || dimensions.height < expandedRect.height || xChange || yChange) {\n                changes.push({\n                    id: parentId,\n                    type: 'dimensions',\n                    setAttributes: true,\n                    dimensions: {\n                        width: newWidth + (xChange ? origin[0] * xChange - widthChange : 0),\n                        height: newHeight + (yChange ? origin[1] * yChange - heightChange : 0),\n                    },\n                });\n            }\n        });\n    }\n    return changes;\n}\nfunction updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent) {\n    const viewportNode = domNode?.querySelector('.xyflow__viewport');\n    let updatedInternals = false;\n    if (!viewportNode) {\n        return { changes: [], updatedInternals };\n    }\n    const changes = [];\n    const style = window.getComputedStyle(viewportNode);\n    const { m22: zoom } = new window.DOMMatrixReadOnly(style.transform);\n    // in this array we collect nodes, that might trigger changes (like expanding parent)\n    const parentExpandChildren = [];\n    for (const update of updates.values()) {\n        const node = nodeLookup.get(update.id);\n        if (!node) {\n            continue;\n        }\n        if (node.hidden) {\n            nodeLookup.set(node.id, {\n                ...node,\n                internals: {\n                    ...node.internals,\n                    handleBounds: undefined,\n                },\n            });\n            updatedInternals = true;\n            continue;\n        }\n        const dimensions = getDimensions(update.nodeElement);\n        const dimensionChanged = node.measured.width !== dimensions.width || node.measured.height !== dimensions.height;\n        const doUpdate = !!(dimensions.width &&\n            dimensions.height &&\n            (dimensionChanged || !node.internals.handleBounds || update.force));\n        if (doUpdate) {\n            const nodeBounds = update.nodeElement.getBoundingClientRect();\n            const extent = isCoordinateExtent(node.extent) ? node.extent : nodeExtent;\n            let { positionAbsolute } = node.internals;\n            if (node.parentId && node.extent === 'parent') {\n                positionAbsolute = clampPositionToParent(positionAbsolute, dimensions, nodeLookup.get(node.parentId));\n            }\n            else if (extent) {\n                positionAbsolute = clampPosition(positionAbsolute, extent, dimensions);\n            }\n            const newNode = {\n                ...node,\n                measured: dimensions,\n                internals: {\n                    ...node.internals,\n                    positionAbsolute,\n                    handleBounds: {\n                        source: getHandleBounds('source', update.nodeElement, nodeBounds, zoom, node.id),\n                        target: getHandleBounds('target', update.nodeElement, nodeBounds, zoom, node.id),\n                    },\n                },\n            };\n            nodeLookup.set(node.id, newNode);\n            if (node.parentId) {\n                updateChildNode(newNode, nodeLookup, parentLookup, { nodeOrigin });\n            }\n            updatedInternals = true;\n            if (dimensionChanged) {\n                changes.push({\n                    id: node.id,\n                    type: 'dimensions',\n                    dimensions,\n                });\n                if (node.expandParent && node.parentId) {\n                    parentExpandChildren.push({\n                        id: node.id,\n                        parentId: node.parentId,\n                        rect: nodeToRect(newNode, nodeOrigin),\n                    });\n                }\n            }\n        }\n    }\n    if (parentExpandChildren.length > 0) {\n        const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n        changes.push(...parentExpandChanges);\n    }\n    return { changes, updatedInternals };\n}\nasync function panBy({ delta, panZoom, transform, translateExtent, width, height, }) {\n    if (!panZoom || (!delta.x && !delta.y)) {\n        return Promise.resolve(false);\n    }\n    const nextViewport = await panZoom.setViewportConstrained({\n        x: transform[0] + delta.x,\n        y: transform[1] + delta.y,\n        zoom: transform[2],\n    }, [\n        [0, 0],\n        [width, height],\n    ], translateExtent);\n    const transformChanged = !!nextViewport &&\n        (nextViewport.x !== transform[0] || nextViewport.y !== transform[1] || nextViewport.k !== transform[2]);\n    return Promise.resolve(transformChanged);\n}\n/**\n * this function adds the connection to the connectionLookup\n * at the following keys: nodeId-type-handleId, nodeId-type and nodeId\n * @param type type of the connection\n * @param connection connection that should be added to the lookup\n * @param connectionKey at which key the connection should be added\n * @param connectionLookup reference to the connection lookup\n * @param nodeId nodeId of the connection\n * @param handleId handleId of the conneciton\n */\nfunction addConnectionToLookup(type, connection, connectionKey, connectionLookup, nodeId, handleId) {\n    /*\n     * We add the connection to the connectionLookup at the following keys\n     * 1. nodeId, 2. nodeId-type, 3. nodeId-type-handleId\n     * If the key already exists, we add the connection to the existing map\n     */\n    let key = nodeId;\n    const nodeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, nodeMap.set(connectionKey, connection));\n    key = `${nodeId}-${type}`;\n    const typeMap = connectionLookup.get(key) || new Map();\n    connectionLookup.set(key, typeMap.set(connectionKey, connection));\n    if (handleId) {\n        key = `${nodeId}-${type}-${handleId}`;\n        const handleMap = connectionLookup.get(key) || new Map();\n        connectionLookup.set(key, handleMap.set(connectionKey, connection));\n    }\n}\nfunction updateConnectionLookup(connectionLookup, edgeLookup, edges) {\n    connectionLookup.clear();\n    edgeLookup.clear();\n    for (const edge of edges) {\n        const { source: sourceNode, target: targetNode, sourceHandle = null, targetHandle = null } = edge;\n        const connection = { edgeId: edge.id, source: sourceNode, target: targetNode, sourceHandle, targetHandle };\n        const sourceKey = `${sourceNode}-${sourceHandle}--${targetNode}-${targetHandle}`;\n        const targetKey = `${targetNode}-${targetHandle}--${sourceNode}-${sourceHandle}`;\n        addConnectionToLookup('source', connection, targetKey, connectionLookup, sourceNode, sourceHandle);\n        addConnectionToLookup('target', connection, sourceKey, connectionLookup, targetNode, targetHandle);\n        edgeLookup.set(edge.id, edge);\n    }\n}\n\nfunction shallowNodeData(a, b) {\n    if (a === null || b === null) {\n        return false;\n    }\n    const _a = Array.isArray(a) ? a : [a];\n    const _b = Array.isArray(b) ? b : [b];\n    if (_a.length !== _b.length) {\n        return false;\n    }\n    for (let i = 0; i < _a.length; i++) {\n        if (_a[i].id !== _b[i].id || _a[i].type !== _b[i].type || !Object.is(_a[i].data, _b[i].data)) {\n            return false;\n        }\n    }\n    return true;\n}\n\nfunction isParentSelected(node, nodeLookup) {\n    if (!node.parentId) {\n        return false;\n    }\n    const parentNode = nodeLookup.get(node.parentId);\n    if (!parentNode) {\n        return false;\n    }\n    if (parentNode.selected) {\n        return true;\n    }\n    return isParentSelected(parentNode, nodeLookup);\n}\nfunction hasSelector(target, selector, domNode) {\n    let current = target;\n    do {\n        if (current?.matches?.(selector))\n            return true;\n        if (current === domNode)\n            return false;\n        current = current?.parentElement;\n    } while (current);\n    return false;\n}\n// looks for all selected nodes and created a NodeDragItem for each of them\nfunction getDragItems(nodeLookup, nodesDraggable, mousePos, nodeId) {\n    const dragItems = new Map();\n    for (const [id, node] of nodeLookup) {\n        if ((node.selected || node.id === nodeId) &&\n            (!node.parentId || !isParentSelected(node, nodeLookup)) &&\n            (node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'))) {\n            const internalNode = nodeLookup.get(id);\n            if (internalNode) {\n                dragItems.set(id, {\n                    id,\n                    position: internalNode.position || { x: 0, y: 0 },\n                    distance: {\n                        x: mousePos.x - internalNode.internals.positionAbsolute.x,\n                        y: mousePos.y - internalNode.internals.positionAbsolute.y,\n                    },\n                    extent: internalNode.extent,\n                    parentId: internalNode.parentId,\n                    origin: internalNode.origin,\n                    expandParent: internalNode.expandParent,\n                    internals: {\n                        positionAbsolute: internalNode.internals.positionAbsolute || { x: 0, y: 0 },\n                    },\n                    measured: {\n                        width: internalNode.measured.width ?? 0,\n                        height: internalNode.measured.height ?? 0,\n                    },\n                });\n            }\n        }\n    }\n    return dragItems;\n}\n/*\n * returns two params:\n * 1. the dragged node (or the first of the list, if we are dragging a node selection)\n * 2. array of selected nodes (for multi selections)\n */\nfunction getEventHandlerParams({ nodeId, dragItems, nodeLookup, dragging = true, }) {\n    const nodesFromDragItems = [];\n    for (const [id, dragItem] of dragItems) {\n        const node = nodeLookup.get(id)?.internals.userNode;\n        if (node) {\n            nodesFromDragItems.push({\n                ...node,\n                position: dragItem.position,\n                dragging,\n            });\n        }\n    }\n    if (!nodeId) {\n        return [nodesFromDragItems[0], nodesFromDragItems];\n    }\n    const node = nodeLookup.get(nodeId)?.internals.userNode;\n    return [\n        !node\n            ? nodesFromDragItems[0]\n            : {\n                ...node,\n                position: dragItems.get(nodeId)?.position || node.position,\n                dragging,\n            },\n        nodesFromDragItems,\n    ];\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction XYDrag({ onNodeMouseDown, getStoreItems, onDragStart, onDrag, onDragStop, }) {\n    let lastPos = { x: null, y: null };\n    let autoPanId = 0;\n    let dragItems = new Map();\n    let autoPanStarted = false;\n    let mousePosition = { x: 0, y: 0 };\n    let containerBounds = null;\n    let dragStarted = false;\n    let d3Selection = null;\n    let abortDrag = false; // prevents unintentional dragging on multitouch\n    let nodePositionsChanged = false;\n    // public functions\n    function update({ noDragClassName, handleSelector, domNode, isSelectable, nodeId, nodeClickDistance = 0, }) {\n        d3Selection = select(domNode);\n        function updateNodes({ x, y }, dragEvent) {\n            const { nodeLookup, nodeExtent, snapGrid, snapToGrid, nodeOrigin, onNodeDrag, onSelectionDrag, onError, updateNodePositions, } = getStoreItems();\n            lastPos = { x, y };\n            let hasChange = false;\n            let nodesBox = { x: 0, y: 0, x2: 0, y2: 0 };\n            if (dragItems.size > 1 && nodeExtent) {\n                const rect = getInternalNodesBounds(dragItems);\n                nodesBox = rectToBox(rect);\n            }\n            for (const [id, dragItem] of dragItems) {\n                if (!nodeLookup.has(id)) {\n                    /*\n                     * if the node is not in the nodeLookup anymore, it was probably deleted while dragging\n                     * and we don't need to update it anymore\n                     */\n                    continue;\n                }\n                let nextPosition = { x: x - dragItem.distance.x, y: y - dragItem.distance.y };\n                if (snapToGrid) {\n                    nextPosition = snapPosition(nextPosition, snapGrid);\n                }\n                /*\n                 * if there is selection with multiple nodes and a node extent is set, we need to adjust the node extent for each node\n                 * based on its position so that the node stays at it's position relative to the selection.\n                 */\n                let adjustedNodeExtent = [\n                    [nodeExtent[0][0], nodeExtent[0][1]],\n                    [nodeExtent[1][0], nodeExtent[1][1]],\n                ];\n                if (dragItems.size > 1 && nodeExtent && !dragItem.extent) {\n                    const { positionAbsolute } = dragItem.internals;\n                    const x1 = positionAbsolute.x - nodesBox.x + nodeExtent[0][0];\n                    const x2 = positionAbsolute.x + dragItem.measured.width - nodesBox.x2 + nodeExtent[1][0];\n                    const y1 = positionAbsolute.y - nodesBox.y + nodeExtent[0][1];\n                    const y2 = positionAbsolute.y + dragItem.measured.height - nodesBox.y2 + nodeExtent[1][1];\n                    adjustedNodeExtent = [\n                        [x1, y1],\n                        [x2, y2],\n                    ];\n                }\n                const { position, positionAbsolute } = calculateNodePosition({\n                    nodeId: id,\n                    nextPosition,\n                    nodeLookup,\n                    nodeExtent: adjustedNodeExtent,\n                    nodeOrigin,\n                    onError,\n                });\n                // we want to make sure that we only fire a change event when there is a change\n                hasChange = hasChange || dragItem.position.x !== position.x || dragItem.position.y !== position.y;\n                dragItem.position = position;\n                dragItem.internals.positionAbsolute = positionAbsolute;\n            }\n            nodePositionsChanged = nodePositionsChanged || hasChange;\n            if (!hasChange) {\n                return;\n            }\n            updateNodePositions(dragItems, true);\n            if (dragEvent && (onDrag || onNodeDrag || (!nodeId && onSelectionDrag))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDrag?.(dragEvent, dragItems, currentNode, currentNodes);\n                onNodeDrag?.(dragEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDrag?.(dragEvent, currentNodes);\n                }\n            }\n        }\n        async function autoPan() {\n            if (!containerBounds) {\n                return;\n            }\n            const { transform, panBy, autoPanSpeed, autoPanOnNodeDrag } = getStoreItems();\n            if (!autoPanOnNodeDrag) {\n                autoPanStarted = false;\n                cancelAnimationFrame(autoPanId);\n                return;\n            }\n            const [xMovement, yMovement] = calcAutoPan(mousePosition, containerBounds, autoPanSpeed);\n            if (xMovement !== 0 || yMovement !== 0) {\n                lastPos.x = (lastPos.x ?? 0) - xMovement / transform[2];\n                lastPos.y = (lastPos.y ?? 0) - yMovement / transform[2];\n                if (await panBy({ x: xMovement, y: yMovement })) {\n                    updateNodes(lastPos, null);\n                }\n            }\n            autoPanId = requestAnimationFrame(autoPan);\n        }\n        function startDrag(event) {\n            const { nodeLookup, multiSelectionActive, nodesDraggable, transform, snapGrid, snapToGrid, selectNodesOnDrag, onNodeDragStart, onSelectionDragStart, unselectNodesAndEdges, } = getStoreItems();\n            dragStarted = true;\n            if ((!selectNodesOnDrag || !isSelectable) && !multiSelectionActive && nodeId) {\n                if (!nodeLookup.get(nodeId)?.selected) {\n                    // we need to reset selected nodes when selectNodesOnDrag=false\n                    unselectNodesAndEdges();\n                }\n            }\n            if (isSelectable && selectNodesOnDrag && nodeId) {\n                onNodeMouseDown?.(nodeId);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            dragItems = getDragItems(nodeLookup, nodesDraggable, pointerPos, nodeId);\n            if (dragItems.size > 0 && (onDragStart || onNodeDragStart || (!nodeId && onSelectionDragStart))) {\n                const [currentNode, currentNodes] = getEventHandlerParams({\n                    nodeId,\n                    dragItems,\n                    nodeLookup,\n                });\n                onDragStart?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                onNodeDragStart?.(event.sourceEvent, currentNode, currentNodes);\n                if (!nodeId) {\n                    onSelectionDragStart?.(event.sourceEvent, currentNodes);\n                }\n            }\n        }\n        const d3DragInstance = drag()\n            .clickDistance(nodeClickDistance)\n            .on('start', (event) => {\n            const { domNode, nodeDragThreshold, transform, snapGrid, snapToGrid } = getStoreItems();\n            containerBounds = domNode?.getBoundingClientRect() || null;\n            abortDrag = false;\n            nodePositionsChanged = false;\n            if (nodeDragThreshold === 0) {\n                startDrag(event);\n            }\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            lastPos = pointerPos;\n            mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n        })\n            .on('drag', (event) => {\n            const { autoPanOnNodeDrag, transform, snapGrid, snapToGrid, nodeDragThreshold, nodeLookup } = getStoreItems();\n            const pointerPos = getPointerPosition(event.sourceEvent, { transform, snapGrid, snapToGrid, containerBounds });\n            if ((event.sourceEvent.type === 'touchmove' && event.sourceEvent.touches.length > 1) ||\n                // if user deletes a node while dragging, we need to abort the drag to prevent errors\n                (nodeId && !nodeLookup.has(nodeId))) {\n                abortDrag = true;\n            }\n            if (abortDrag) {\n                return;\n            }\n            if (!autoPanStarted && autoPanOnNodeDrag && dragStarted) {\n                autoPanStarted = true;\n                autoPan();\n            }\n            if (!dragStarted) {\n                const x = pointerPos.xSnapped - (lastPos.x ?? 0);\n                const y = pointerPos.ySnapped - (lastPos.y ?? 0);\n                const distance = Math.sqrt(x * x + y * y);\n                if (distance > nodeDragThreshold) {\n                    startDrag(event);\n                }\n            }\n            // skip events without movement\n            if ((lastPos.x !== pointerPos.xSnapped || lastPos.y !== pointerPos.ySnapped) && dragItems && dragStarted) {\n                // dragEvent = event.sourceEvent as MouseEvent;\n                mousePosition = getEventPosition(event.sourceEvent, containerBounds);\n                updateNodes(pointerPos, event.sourceEvent);\n            }\n        })\n            .on('end', (event) => {\n            if (!dragStarted || abortDrag) {\n                return;\n            }\n            autoPanStarted = false;\n            dragStarted = false;\n            cancelAnimationFrame(autoPanId);\n            if (dragItems.size > 0) {\n                const { nodeLookup, updateNodePositions, onNodeDragStop, onSelectionDragStop } = getStoreItems();\n                if (nodePositionsChanged) {\n                    updateNodePositions(dragItems, false);\n                    nodePositionsChanged = false;\n                }\n                if (onDragStop || onNodeDragStop || (!nodeId && onSelectionDragStop)) {\n                    const [currentNode, currentNodes] = getEventHandlerParams({\n                        nodeId,\n                        dragItems,\n                        nodeLookup,\n                        dragging: false,\n                    });\n                    onDragStop?.(event.sourceEvent, dragItems, currentNode, currentNodes);\n                    onNodeDragStop?.(event.sourceEvent, currentNode, currentNodes);\n                    if (!nodeId) {\n                        onSelectionDragStop?.(event.sourceEvent, currentNodes);\n                    }\n                }\n            }\n        })\n            .filter((event) => {\n            const target = event.target;\n            const isDraggable = !event.button &&\n                (!noDragClassName || !hasSelector(target, `.${noDragClassName}`, domNode)) &&\n                (!handleSelector || hasSelector(target, handleSelector, domNode));\n            return isDraggable;\n        });\n        d3Selection.call(d3DragInstance);\n    }\n    function destroy() {\n        d3Selection?.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nfunction getNodesWithinDistance(position, nodeLookup, distance) {\n    const nodes = [];\n    const rect = {\n        x: position.x - distance,\n        y: position.y - distance,\n        width: distance * 2,\n        height: distance * 2,\n    };\n    for (const node of nodeLookup.values()) {\n        if (getOverlappingArea(rect, nodeToRect(node)) > 0) {\n            nodes.push(node);\n        }\n    }\n    return nodes;\n}\n/*\n * this distance is used for the area around the user pointer\n * while doing a connection for finding the closest nodes\n */\nconst ADDITIONAL_DISTANCE = 250;\nfunction getClosestHandle(position, connectionRadius, nodeLookup, fromHandle) {\n    let closestHandles = [];\n    let minDistance = Infinity;\n    const closeNodes = getNodesWithinDistance(position, nodeLookup, connectionRadius + ADDITIONAL_DISTANCE);\n    for (const node of closeNodes) {\n        const allHandles = [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n        for (const handle of allHandles) {\n            // if the handle is the same as the fromHandle we skip it\n            if (fromHandle.nodeId === handle.nodeId && fromHandle.type === handle.type && fromHandle.id === handle.id) {\n                continue;\n            }\n            // determine absolute position of the handle\n            const { x, y } = getHandlePosition(node, handle, handle.position, true);\n            const distance = Math.sqrt(Math.pow(x - position.x, 2) + Math.pow(y - position.y, 2));\n            if (distance > connectionRadius) {\n                continue;\n            }\n            if (distance < minDistance) {\n                closestHandles = [{ ...handle, x, y }];\n                minDistance = distance;\n            }\n            else if (distance === minDistance) {\n                // when multiple handles are on the same distance we collect all of them\n                closestHandles.push({ ...handle, x, y });\n            }\n        }\n    }\n    if (!closestHandles.length) {\n        return null;\n    }\n    // when multiple handles overlay each other we prefer the opposite handle\n    if (closestHandles.length > 1) {\n        const oppositeHandleType = fromHandle.type === 'source' ? 'target' : 'source';\n        return closestHandles.find((handle) => handle.type === oppositeHandleType) ?? closestHandles[0];\n    }\n    return closestHandles[0];\n}\nfunction getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode, withAbsolutePosition = false) {\n    const node = nodeLookup.get(nodeId);\n    if (!node) {\n        return null;\n    }\n    const handles = connectionMode === 'strict'\n        ? node.internals.handleBounds?.[handleType]\n        : [...(node.internals.handleBounds?.source ?? []), ...(node.internals.handleBounds?.target ?? [])];\n    const handle = (handleId ? handles?.find((h) => h.id === handleId) : handles?.[0]) ?? null;\n    return handle && withAbsolutePosition\n        ? { ...handle, ...getHandlePosition(node, handle, handle.position, true) }\n        : handle;\n}\nfunction getHandleType(edgeUpdaterType, handleDomNode) {\n    if (edgeUpdaterType) {\n        return edgeUpdaterType;\n    }\n    else if (handleDomNode?.classList.contains('target')) {\n        return 'target';\n    }\n    else if (handleDomNode?.classList.contains('source')) {\n        return 'source';\n    }\n    return null;\n}\nfunction isConnectionValid(isInsideConnectionRadius, isHandleValid) {\n    let isValid = null;\n    if (isHandleValid) {\n        isValid = true;\n    }\n    else if (isInsideConnectionRadius && !isHandleValid) {\n        isValid = false;\n    }\n    return isValid;\n}\n\nconst alwaysValid = () => true;\nfunction onPointerDown(event, { connectionMode, connectionRadius, handleId, nodeId, edgeUpdaterType, isTarget, domNode, nodeLookup, lib, autoPanOnConnect, flowId, panBy, cancelConnection, onConnectStart, onConnect, onConnectEnd, isValidConnection = alwaysValid, onReconnectEnd, updateConnection, getTransform, getFromHandle, autoPanSpeed, dragThreshold = 1, }) {\n    // when xyflow is used inside a shadow root we can't use document\n    const doc = getHostForElement(event.target);\n    let autoPanId = 0;\n    let closestHandle;\n    const { x, y } = getEventPosition(event);\n    const clickedHandle = doc?.elementFromPoint(x, y);\n    const handleType = getHandleType(edgeUpdaterType, clickedHandle);\n    const containerBounds = domNode?.getBoundingClientRect();\n    let connectionStarted = false;\n    if (!containerBounds || !handleType) {\n        return;\n    }\n    const fromHandleInternal = getHandle(nodeId, handleType, handleId, nodeLookup, connectionMode);\n    if (!fromHandleInternal) {\n        return;\n    }\n    let position = getEventPosition(event, containerBounds);\n    let autoPanStarted = false;\n    let connection = null;\n    let isValid = false;\n    let handleDomNode = null;\n    // when the user is moving the mouse close to the edge of the canvas while connecting we move the canvas\n    function autoPan() {\n        if (!autoPanOnConnect || !containerBounds) {\n            return;\n        }\n        const [x, y] = calcAutoPan(position, containerBounds, autoPanSpeed);\n        panBy({ x, y });\n        autoPanId = requestAnimationFrame(autoPan);\n    }\n    // Stays the same for all consecutive pointermove events\n    const fromHandle = {\n        ...fromHandleInternal,\n        nodeId,\n        type: handleType,\n        position: fromHandleInternal.position,\n    };\n    const fromNodeInternal = nodeLookup.get(nodeId);\n    const from = getHandlePosition(fromNodeInternal, fromHandle, Position.Left, true);\n    let previousConnection = {\n        inProgress: true,\n        isValid: null,\n        from,\n        fromHandle,\n        fromPosition: fromHandle.position,\n        fromNode: fromNodeInternal,\n        to: position,\n        toHandle: null,\n        toPosition: oppositePosition[fromHandle.position],\n        toNode: null,\n    };\n    function startConnection() {\n        connectionStarted = true;\n        updateConnection(previousConnection);\n        onConnectStart?.(event, { nodeId, handleId, handleType });\n    }\n    if (dragThreshold === 0) {\n        startConnection();\n    }\n    function onPointerMove(event) {\n        if (!connectionStarted) {\n            const { x: evtX, y: evtY } = getEventPosition(event);\n            const dx = evtX - x;\n            const dy = evtY - y;\n            const nextConnectionStarted = dx * dx + dy * dy > dragThreshold * dragThreshold;\n            if (!nextConnectionStarted) {\n                return;\n            }\n            startConnection();\n        }\n        if (!getFromHandle() || !fromHandle) {\n            onPointerUp(event);\n            return;\n        }\n        const transform = getTransform();\n        position = getEventPosition(event, containerBounds);\n        closestHandle = getClosestHandle(pointToRendererPoint(position, transform, false, [1, 1]), connectionRadius, nodeLookup, fromHandle);\n        if (!autoPanStarted) {\n            autoPan();\n            autoPanStarted = true;\n        }\n        const result = isValidHandle(event, {\n            handle: closestHandle,\n            connectionMode,\n            fromNodeId: nodeId,\n            fromHandleId: handleId,\n            fromType: isTarget ? 'target' : 'source',\n            isValidConnection,\n            doc,\n            lib,\n            flowId,\n            nodeLookup,\n        });\n        handleDomNode = result.handleDomNode;\n        connection = result.connection;\n        isValid = isConnectionValid(!!closestHandle, result.isValid);\n        const newConnection = {\n            // from stays the same\n            ...previousConnection,\n            isValid,\n            to: result.toHandle && isValid\n                ? rendererPointToPoint({ x: result.toHandle.x, y: result.toHandle.y }, transform)\n                : position,\n            toHandle: result.toHandle,\n            toPosition: isValid && result.toHandle ? result.toHandle.position : oppositePosition[fromHandle.position],\n            toNode: result.toHandle ? nodeLookup.get(result.toHandle.nodeId) : null,\n        };\n        /*\n         * we don't want to trigger an update when the connection\n         * is snapped to the same handle as before\n         */\n        if (isValid &&\n            closestHandle &&\n            previousConnection.toHandle &&\n            newConnection.toHandle &&\n            previousConnection.toHandle.type === newConnection.toHandle.type &&\n            previousConnection.toHandle.nodeId === newConnection.toHandle.nodeId &&\n            previousConnection.toHandle.id === newConnection.toHandle.id &&\n            previousConnection.to.x === newConnection.to.x &&\n            previousConnection.to.y === newConnection.to.y) {\n            return;\n        }\n        updateConnection(newConnection);\n        previousConnection = newConnection;\n    }\n    function onPointerUp(event) {\n        if (connectionStarted) {\n            if ((closestHandle || handleDomNode) && connection && isValid) {\n                onConnect?.(connection);\n            }\n            /*\n             * it's important to get a fresh reference from the store here\n             * in order to get the latest state of onConnectEnd\n             */\n            // eslint-disable-next-line @typescript-eslint/no-unused-vars\n            const { inProgress, ...connectionState } = previousConnection;\n            const finalConnectionState = {\n                ...connectionState,\n                toPosition: previousConnection.toHandle ? previousConnection.toPosition : null,\n            };\n            onConnectEnd?.(event, finalConnectionState);\n            if (edgeUpdaterType) {\n                onReconnectEnd?.(event, finalConnectionState);\n            }\n        }\n        cancelConnection();\n        cancelAnimationFrame(autoPanId);\n        autoPanStarted = false;\n        isValid = false;\n        connection = null;\n        handleDomNode = null;\n        doc.removeEventListener('mousemove', onPointerMove);\n        doc.removeEventListener('mouseup', onPointerUp);\n        doc.removeEventListener('touchmove', onPointerMove);\n        doc.removeEventListener('touchend', onPointerUp);\n    }\n    doc.addEventListener('mousemove', onPointerMove);\n    doc.addEventListener('mouseup', onPointerUp);\n    doc.addEventListener('touchmove', onPointerMove);\n    doc.addEventListener('touchend', onPointerUp);\n}\n// checks if  and returns connection in fom of an object { source: 123, target: 312 }\nfunction isValidHandle(event, { handle, connectionMode, fromNodeId, fromHandleId, fromType, doc, lib, flowId, isValidConnection = alwaysValid, nodeLookup, }) {\n    const isTarget = fromType === 'target';\n    const handleDomNode = handle\n        ? doc.querySelector(`.${lib}-flow__handle[data-id=\"${flowId}-${handle?.nodeId}-${handle?.id}-${handle?.type}\"]`)\n        : null;\n    const { x, y } = getEventPosition(event);\n    const handleBelow = doc.elementFromPoint(x, y);\n    /*\n     * we always want to prioritize the handle below the mouse cursor over the closest distance handle,\n     * because it could be that the center of another handle is closer to the mouse pointer than the handle below the cursor\n     */\n    const handleToCheck = handleBelow?.classList.contains(`${lib}-flow__handle`) ? handleBelow : handleDomNode;\n    const result = {\n        handleDomNode: handleToCheck,\n        isValid: false,\n        connection: null,\n        toHandle: null,\n    };\n    if (handleToCheck) {\n        const handleType = getHandleType(undefined, handleToCheck);\n        const handleNodeId = handleToCheck.getAttribute('data-nodeid');\n        const handleId = handleToCheck.getAttribute('data-handleid');\n        const connectable = handleToCheck.classList.contains('connectable');\n        const connectableEnd = handleToCheck.classList.contains('connectableend');\n        if (!handleNodeId || !handleType) {\n            return result;\n        }\n        const connection = {\n            source: isTarget ? handleNodeId : fromNodeId,\n            sourceHandle: isTarget ? handleId : fromHandleId,\n            target: isTarget ? fromNodeId : handleNodeId,\n            targetHandle: isTarget ? fromHandleId : handleId,\n        };\n        result.connection = connection;\n        const isConnectable = connectable && connectableEnd;\n        // in strict mode we don't allow target to target or source to source connections\n        const isValid = isConnectable &&\n            (connectionMode === ConnectionMode.Strict\n                ? (isTarget && handleType === 'source') || (!isTarget && handleType === 'target')\n                : handleNodeId !== fromNodeId || handleId !== fromHandleId);\n        result.isValid = isValid && isValidConnection(connection);\n        result.toHandle = getHandle(handleNodeId, handleType, handleId, nodeLookup, connectionMode, true);\n    }\n    return result;\n}\nconst XYHandle = {\n    onPointerDown,\n    isValid: isValidHandle,\n};\n\nfunction XYMinimap({ domNode, panZoom, getTransform, getViewScale }) {\n    const selection = select(domNode);\n    function update({ translateExtent, width, height, zoomStep = 10, pannable = true, zoomable = true, inversePan = false, }) {\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const zoomHandler = (event) => {\n            const transform = getTransform();\n            if (event.sourceEvent.type !== 'wheel' || !panZoom) {\n                return;\n            }\n            const pinchDelta = -event.sourceEvent.deltaY *\n                (event.sourceEvent.deltaMode === 1 ? 0.05 : event.sourceEvent.deltaMode ? 1 : 0.002) *\n                zoomStep;\n            const nextZoom = transform[2] * Math.pow(2, pinchDelta);\n            panZoom.scaleTo(nextZoom);\n        };\n        let panStart = [0, 0];\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panStartHandler = (event) => {\n            if (event.sourceEvent.type === 'mousedown' || event.sourceEvent.type === 'touchstart') {\n                panStart = [\n                    event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                    event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n                ];\n            }\n        };\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        const panHandler = (event) => {\n            const transform = getTransform();\n            if ((event.sourceEvent.type !== 'mousemove' && event.sourceEvent.type !== 'touchmove') || !panZoom) {\n                return;\n            }\n            const panCurrent = [\n                event.sourceEvent.clientX ?? event.sourceEvent.touches[0].clientX,\n                event.sourceEvent.clientY ?? event.sourceEvent.touches[0].clientY,\n            ];\n            const panDelta = [panCurrent[0] - panStart[0], panCurrent[1] - panStart[1]];\n            panStart = panCurrent;\n            const moveScale = getViewScale() * Math.max(transform[2], Math.log(transform[2])) * (inversePan ? -1 : 1);\n            const position = {\n                x: transform[0] - panDelta[0] * moveScale,\n                y: transform[1] - panDelta[1] * moveScale,\n            };\n            const extent = [\n                [0, 0],\n                [width, height],\n            ];\n            panZoom.setViewportConstrained({\n                x: position.x,\n                y: position.y,\n                zoom: transform[2],\n            }, extent, translateExtent);\n        };\n        const zoomAndPanHandler = zoom()\n            .on('start', panStartHandler)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom', pannable ? panHandler : null)\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            .on('zoom.wheel', zoomable ? zoomHandler : null);\n        selection.call(zoomAndPanHandler, {});\n    }\n    function destroy() {\n        selection.on('zoom', null);\n    }\n    return {\n        update,\n        destroy,\n        pointer,\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst viewChanged = (prevViewport, eventViewport) => prevViewport.x !== eventViewport.x || prevViewport.y !== eventViewport.y || prevViewport.zoom !== eventViewport.k;\nconst transformToViewport = (transform) => ({\n    x: transform.x,\n    y: transform.y,\n    zoom: transform.k,\n});\nconst viewportToTransform = ({ x, y, zoom }) => zoomIdentity.translate(x, y).scale(zoom);\nconst isWrappedWithClass = (event, className) => event.target.closest(`.${className}`);\nconst isRightClickPan = (panOnDrag, usedButton) => usedButton === 2 && Array.isArray(panOnDrag) && panOnDrag.includes(2);\n// taken from d3-ease: https://github.com/d3/d3-ease/blob/main/src/cubic.js\nconst defaultEase = (t) => ((t *= 2) <= 1 ? t * t * t : (t -= 2) * t * t + 2) / 2;\nconst getD3Transition = (selection, duration = 0, ease = defaultEase, onEnd = () => { }) => {\n    const hasDuration = typeof duration === 'number' && duration > 0;\n    if (!hasDuration) {\n        onEnd();\n    }\n    return hasDuration ? selection.transition().duration(duration).ease(ease).on('end', onEnd) : selection;\n};\nconst wheelDelta = (event) => {\n    const factor = event.ctrlKey && isMacOs() ? 10 : 1;\n    return -event.deltaY * (event.deltaMode === 1 ? 0.05 : event.deltaMode ? 1 : 0.002) * factor;\n};\n\nfunction createPanOnScrollHandler({ zoomPanValues, noWheelClassName, d3Selection, d3Zoom, panOnScrollMode, panOnScrollSpeed, zoomOnPinch, onPanZoomStart, onPanZoom, onPanZoomEnd, }) {\n    return (event) => {\n        if (isWrappedWithClass(event, noWheelClassName)) {\n            return false;\n        }\n        event.preventDefault();\n        event.stopImmediatePropagation();\n        const currentZoom = d3Selection.property('__zoom').k || 1;\n        // macos sets ctrlKey=true for pinch gesture on a trackpad\n        if (event.ctrlKey && zoomOnPinch) {\n            const point = pointer(event);\n            const pinchDelta = wheelDelta(event);\n            const zoom = currentZoom * Math.pow(2, pinchDelta);\n            // @ts-ignore\n            d3Zoom.scaleTo(d3Selection, zoom, point, event);\n            return;\n        }\n        /*\n         * increase scroll speed in firefox\n         * firefox: deltaMode === 1; chrome: deltaMode === 0\n         */\n        const deltaNormalize = event.deltaMode === 1 ? 20 : 1;\n        let deltaX = panOnScrollMode === PanOnScrollMode.Vertical ? 0 : event.deltaX * deltaNormalize;\n        let deltaY = panOnScrollMode === PanOnScrollMode.Horizontal ? 0 : event.deltaY * deltaNormalize;\n        // this enables vertical scrolling with shift + scroll on windows\n        if (!isMacOs() && event.shiftKey && panOnScrollMode !== PanOnScrollMode.Vertical) {\n            deltaX = event.deltaY * deltaNormalize;\n            deltaY = 0;\n        }\n        d3Zoom.translateBy(d3Selection, -(deltaX / currentZoom) * panOnScrollSpeed, -(deltaY / currentZoom) * panOnScrollSpeed, \n        // @ts-ignore\n        { internal: true });\n        const nextViewport = transformToViewport(d3Selection.property('__zoom'));\n        clearTimeout(zoomPanValues.panScrollTimeout);\n        /*\n         * for pan on scroll we need to handle the event calls on our own\n         * we can't use the start, zoom and end events from d3-zoom\n         * because start and move gets called on every scroll event and not once at the beginning\n         */\n        if (!zoomPanValues.isPanScrolling) {\n            zoomPanValues.isPanScrolling = true;\n            onPanZoomStart?.(event, nextViewport);\n        }\n        if (zoomPanValues.isPanScrolling) {\n            onPanZoom?.(event, nextViewport);\n            zoomPanValues.panScrollTimeout = setTimeout(() => {\n                onPanZoomEnd?.(event, nextViewport);\n                zoomPanValues.isPanScrolling = false;\n            }, 150);\n        }\n    };\n}\nfunction createZoomOnScrollHandler({ noWheelClassName, preventScrolling, d3ZoomHandler }) {\n    return function (event, d) {\n        const isWheel = event.type === 'wheel';\n        // we still want to enable pinch zooming even if preventScrolling is set to false\n        const preventZoom = !preventScrolling && isWheel && !event.ctrlKey;\n        const hasNoWheelClass = isWrappedWithClass(event, noWheelClassName);\n        // if user is pinch zooming above a nowheel element, we don't want the browser to zoom\n        if (event.ctrlKey && isWheel && hasNoWheelClass) {\n            event.preventDefault();\n        }\n        if (preventZoom || hasNoWheelClass) {\n            return null;\n        }\n        event.preventDefault();\n        d3ZoomHandler.call(this, event, d);\n    };\n}\nfunction createPanZoomStartHandler({ zoomPanValues, onDraggingChange, onPanZoomStart }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        const viewport = transformToViewport(event.transform);\n        // we need to remember it here, because it's always 0 in the \"zoom\" event\n        zoomPanValues.mouseButton = event.sourceEvent?.button || 0;\n        zoomPanValues.isZoomingOrPanning = true;\n        zoomPanValues.prevViewport = viewport;\n        if (event.sourceEvent?.type === 'mousedown') {\n            onDraggingChange(true);\n        }\n        if (onPanZoomStart) {\n            onPanZoomStart?.(event.sourceEvent, viewport);\n        }\n    };\n}\nfunction createPanZoomHandler({ zoomPanValues, panOnDrag, onPaneContextMenu, onTransformChange, onPanZoom, }) {\n    return (event) => {\n        zoomPanValues.usedRightMouseButton = !!(onPaneContextMenu && isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0));\n        if (!event.sourceEvent?.sync) {\n            onTransformChange([event.transform.x, event.transform.y, event.transform.k]);\n        }\n        if (onPanZoom && !event.sourceEvent?.internal) {\n            onPanZoom?.(event.sourceEvent, transformToViewport(event.transform));\n        }\n    };\n}\nfunction createPanZoomEndHandler({ zoomPanValues, panOnDrag, panOnScroll, onDraggingChange, onPanZoomEnd, onPaneContextMenu, }) {\n    return (event) => {\n        if (event.sourceEvent?.internal) {\n            return;\n        }\n        zoomPanValues.isZoomingOrPanning = false;\n        if (onPaneContextMenu &&\n            isRightClickPan(panOnDrag, zoomPanValues.mouseButton ?? 0) &&\n            !zoomPanValues.usedRightMouseButton &&\n            event.sourceEvent) {\n            onPaneContextMenu(event.sourceEvent);\n        }\n        zoomPanValues.usedRightMouseButton = false;\n        onDraggingChange(false);\n        if (onPanZoomEnd && viewChanged(zoomPanValues.prevViewport, event.transform)) {\n            const viewport = transformToViewport(event.transform);\n            zoomPanValues.prevViewport = viewport;\n            clearTimeout(zoomPanValues.timerId);\n            zoomPanValues.timerId = setTimeout(() => {\n                onPanZoomEnd?.(event.sourceEvent, viewport);\n            }, \n            // we need a setTimeout for panOnScroll to supress multiple end events fired during scroll\n            panOnScroll ? 150 : 0);\n        }\n    };\n}\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nfunction createFilter({ zoomActivationKeyPressed, zoomOnScroll, zoomOnPinch, panOnDrag, panOnScroll, zoomOnDoubleClick, userSelectionActive, noWheelClassName, noPanClassName, lib, }) {\n    return (event) => {\n        const zoomScroll = zoomActivationKeyPressed || zoomOnScroll;\n        const pinchZoom = zoomOnPinch && event.ctrlKey;\n        if (event.button === 1 &&\n            event.type === 'mousedown' &&\n            (isWrappedWithClass(event, `${lib}-flow__node`) || isWrappedWithClass(event, `${lib}-flow__edge`))) {\n            return true;\n        }\n        // if all interactions are disabled, we prevent all zoom events\n        if (!panOnDrag && !zoomScroll && !panOnScroll && !zoomOnDoubleClick && !zoomOnPinch) {\n            return false;\n        }\n        // during a selection we prevent all other interactions\n        if (userSelectionActive) {\n            return false;\n        }\n        // if the target element is inside an element with the nowheel class, we prevent zooming\n        if (isWrappedWithClass(event, noWheelClassName) && event.type === 'wheel') {\n            return false;\n        }\n        // if the target element is inside an element with the nopan class, we prevent panning\n        if (isWrappedWithClass(event, noPanClassName) &&\n            (event.type !== 'wheel' || (panOnScroll && event.type === 'wheel' && !zoomActivationKeyPressed))) {\n            return false;\n        }\n        if (!zoomOnPinch && event.ctrlKey && event.type === 'wheel') {\n            return false;\n        }\n        if (!zoomOnPinch && event.type === 'touchstart' && event.touches?.length > 1) {\n            event.preventDefault(); // if you manage to start with 2 touches, we prevent native zoom\n            return false;\n        }\n        // when there is no scroll handling enabled, we prevent all wheel events\n        if (!zoomScroll && !panOnScroll && !pinchZoom && event.type === 'wheel') {\n            return false;\n        }\n        // if the pane is not movable, we prevent dragging it with mousestart or touchstart\n        if (!panOnDrag && (event.type === 'mousedown' || event.type === 'touchstart')) {\n            return false;\n        }\n        // if the pane is only movable using allowed clicks\n        if (Array.isArray(panOnDrag) && !panOnDrag.includes(event.button) && event.type === 'mousedown') {\n            return false;\n        }\n        // We only allow right clicks if pan on drag is set to right click\n        const buttonAllowed = (Array.isArray(panOnDrag) && panOnDrag.includes(event.button)) || !event.button || event.button <= 1;\n        // default filter for d3-zoom\n        return (!event.ctrlKey || event.type === 'wheel') && buttonAllowed;\n    };\n}\n\nfunction XYPanZoom({ domNode, minZoom, maxZoom, paneClickDistance, translateExtent, viewport, onPanZoom, onPanZoomStart, onPanZoomEnd, onDraggingChange, }) {\n    const zoomPanValues = {\n        isZoomingOrPanning: false,\n        usedRightMouseButton: false,\n        prevViewport: { x: 0, y: 0, zoom: 0 },\n        mouseButton: 0,\n        timerId: undefined,\n        panScrollTimeout: undefined,\n        isPanScrolling: false,\n    };\n    const bbox = domNode.getBoundingClientRect();\n    const d3ZoomInstance = zoom()\n        .clickDistance(!isNumeric(paneClickDistance) || paneClickDistance < 0 ? 0 : paneClickDistance)\n        .scaleExtent([minZoom, maxZoom])\n        .translateExtent(translateExtent);\n    const d3Selection = select(domNode).call(d3ZoomInstance);\n    setViewportConstrained({\n        x: viewport.x,\n        y: viewport.y,\n        zoom: clamp(viewport.zoom, minZoom, maxZoom),\n    }, [\n        [0, 0],\n        [bbox.width, bbox.height],\n    ], translateExtent);\n    const d3ZoomHandler = d3Selection.on('wheel.zoom');\n    const d3DblClickZoomHandler = d3Selection.on('dblclick.zoom');\n    d3ZoomInstance.wheelDelta(wheelDelta);\n    function setTransform(transform, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).transform(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), transform);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    // public functions\n    function update({ noWheelClassName, noPanClassName, onPaneContextMenu, userSelectionActive, panOnScroll, panOnDrag, panOnScrollMode, panOnScrollSpeed, preventScrolling, zoomOnPinch, zoomOnScroll, zoomOnDoubleClick, zoomActivationKeyPressed, lib, onTransformChange, }) {\n        if (userSelectionActive && !zoomPanValues.isZoomingOrPanning) {\n            destroy();\n        }\n        const isPanOnScroll = panOnScroll && !zoomActivationKeyPressed && !userSelectionActive;\n        const wheelHandler = isPanOnScroll\n            ? createPanOnScrollHandler({\n                zoomPanValues,\n                noWheelClassName,\n                d3Selection,\n                d3Zoom: d3ZoomInstance,\n                panOnScrollMode,\n                panOnScrollSpeed,\n                zoomOnPinch,\n                onPanZoomStart,\n                onPanZoom,\n                onPanZoomEnd,\n            })\n            : createZoomOnScrollHandler({\n                noWheelClassName,\n                preventScrolling,\n                d3ZoomHandler,\n            });\n        d3Selection.on('wheel.zoom', wheelHandler, { passive: false });\n        if (!userSelectionActive) {\n            // pan zoom start\n            const startHandler = createPanZoomStartHandler({\n                zoomPanValues,\n                onDraggingChange,\n                onPanZoomStart,\n            });\n            d3ZoomInstance.on('start', startHandler);\n            // pan zoom\n            const panZoomHandler = createPanZoomHandler({\n                zoomPanValues,\n                panOnDrag,\n                onPaneContextMenu: !!onPaneContextMenu,\n                onPanZoom,\n                onTransformChange,\n            });\n            d3ZoomInstance.on('zoom', panZoomHandler);\n            // pan zoom end\n            const panZoomEndHandler = createPanZoomEndHandler({\n                zoomPanValues,\n                panOnDrag,\n                panOnScroll,\n                onPaneContextMenu,\n                onPanZoomEnd,\n                onDraggingChange,\n            });\n            d3ZoomInstance.on('end', panZoomEndHandler);\n        }\n        const filter = createFilter({\n            zoomActivationKeyPressed,\n            panOnDrag,\n            zoomOnScroll,\n            panOnScroll,\n            zoomOnDoubleClick,\n            zoomOnPinch,\n            userSelectionActive,\n            noPanClassName,\n            noWheelClassName,\n            lib,\n        });\n        d3ZoomInstance.filter(filter);\n        /*\n         * We cannot add zoomOnDoubleClick to the filter above because\n         * double tapping on touch screens circumvents the filter and\n         * dblclick.zoom is fired on the selection directly\n         */\n        if (zoomOnDoubleClick) {\n            d3Selection.on('dblclick.zoom', d3DblClickZoomHandler);\n        }\n        else {\n            d3Selection.on('dblclick.zoom', null);\n        }\n    }\n    function destroy() {\n        d3ZoomInstance.on('zoom', null);\n    }\n    async function setViewportConstrained(viewport, extent, translateExtent) {\n        const nextTransform = viewportToTransform(viewport);\n        const contrainedTransform = d3ZoomInstance?.constrain()(nextTransform, extent, translateExtent);\n        if (contrainedTransform) {\n            await setTransform(contrainedTransform);\n        }\n        return new Promise((resolve) => resolve(contrainedTransform));\n    }\n    async function setViewport(viewport, options) {\n        const nextTransform = viewportToTransform(viewport);\n        await setTransform(nextTransform, options);\n        return new Promise((resolve) => resolve(nextTransform));\n    }\n    function syncViewport(viewport) {\n        if (d3Selection) {\n            const nextTransform = viewportToTransform(viewport);\n            const currentTransform = d3Selection.property('__zoom');\n            if (currentTransform.k !== viewport.zoom ||\n                currentTransform.x !== viewport.x ||\n                currentTransform.y !== viewport.y) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                d3ZoomInstance?.transform(d3Selection, nextTransform, null, { sync: true });\n            }\n        }\n    }\n    function getViewport() {\n        const transform = d3Selection ? zoomTransform(d3Selection.node()) : { x: 0, y: 0, k: 1 };\n        return { x: transform.x, y: transform.y, zoom: transform.k };\n    }\n    function scaleTo(zoom, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleTo(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), zoom);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function scaleBy(factor, options) {\n        if (d3Selection) {\n            return new Promise((resolve) => {\n                d3ZoomInstance?.interpolate(options?.interpolate === 'linear' ? interpolate : interpolateZoom).scaleBy(getD3Transition(d3Selection, options?.duration, options?.ease, () => resolve(true)), factor);\n            });\n        }\n        return Promise.resolve(false);\n    }\n    function setScaleExtent(scaleExtent) {\n        d3ZoomInstance?.scaleExtent(scaleExtent);\n    }\n    function setTranslateExtent(translateExtent) {\n        d3ZoomInstance?.translateExtent(translateExtent);\n    }\n    function setClickDistance(distance) {\n        const validDistance = !isNumeric(distance) || distance < 0 ? 0 : distance;\n        d3ZoomInstance?.clickDistance(validDistance);\n    }\n    return {\n        update,\n        destroy,\n        setViewport,\n        setViewportConstrained,\n        getViewport,\n        scaleTo,\n        scaleBy,\n        setScaleExtent,\n        setTranslateExtent,\n        syncViewport,\n        setClickDistance,\n    };\n}\n\n/**\n * Used to determine the variant of the resize control\n *\n * @public\n */\nvar ResizeControlVariant;\n(function (ResizeControlVariant) {\n    ResizeControlVariant[\"Line\"] = \"line\";\n    ResizeControlVariant[\"Handle\"] = \"handle\";\n})(ResizeControlVariant || (ResizeControlVariant = {}));\nconst XY_RESIZER_HANDLE_POSITIONS = ['top-left', 'top-right', 'bottom-left', 'bottom-right'];\nconst XY_RESIZER_LINE_POSITIONS = ['top', 'right', 'bottom', 'left'];\n\n/**\n * Get all connecting edges for a given set of nodes\n * @param width - new width of the node\n * @param prevWidth - previous width of the node\n * @param height - new height of the node\n * @param prevHeight - previous height of the node\n * @param affectsX - whether to invert the resize direction for the x axis\n * @param affectsY - whether to invert the resize direction for the y axis\n * @returns array of two numbers representing the direction of the resize for each axis, 0 = no change, 1 = increase, -1 = decrease\n */\nfunction getResizeDirection({ width, prevWidth, height, prevHeight, affectsX, affectsY, }) {\n    const deltaWidth = width - prevWidth;\n    const deltaHeight = height - prevHeight;\n    const direction = [deltaWidth > 0 ? 1 : deltaWidth < 0 ? -1 : 0, deltaHeight > 0 ? 1 : deltaHeight < 0 ? -1 : 0];\n    if (deltaWidth && affectsX) {\n        direction[0] = direction[0] * -1;\n    }\n    if (deltaHeight && affectsY) {\n        direction[1] = direction[1] * -1;\n    }\n    return direction;\n}\n/**\n * Parses the control position that is being dragged to dimensions that are being resized\n * @param controlPosition - position of the control that is being dragged\n * @returns isHorizontal, isVertical, affectsX, affectsY,\n */\nfunction getControlDirection(controlPosition) {\n    const isHorizontal = controlPosition.includes('right') || controlPosition.includes('left');\n    const isVertical = controlPosition.includes('bottom') || controlPosition.includes('top');\n    const affectsX = controlPosition.includes('left');\n    const affectsY = controlPosition.includes('top');\n    return {\n        isHorizontal,\n        isVertical,\n        affectsX,\n        affectsY,\n    };\n}\nfunction getLowerExtentClamp(lowerExtent, lowerBound) {\n    return Math.max(0, lowerBound - lowerExtent);\n}\nfunction getUpperExtentClamp(upperExtent, upperBound) {\n    return Math.max(0, upperExtent - upperBound);\n}\nfunction getSizeClamp(size, minSize, maxSize) {\n    return Math.max(0, minSize - size, size - maxSize);\n}\nfunction xor(a, b) {\n    return a ? !b : b;\n}\n/**\n * Calculates new width & height and x & y of node after resize based on pointer position\n * @description - Buckle up, this is a chunky one... If you want to determine the new dimensions of a node after a resize,\n * you have to account for all possible restrictions: min/max width/height of the node, the maximum extent the node is allowed\n * to move in (in this case: resize into) determined by the parent node, the minimal extent determined by child nodes\n * with expandParent or extent: 'parent' set and oh yeah, these things also have to work with keepAspectRatio!\n * The way this is done is by determining how much each of these restricting actually restricts the resize and then applying the\n * strongest restriction. Because the resize affects x, y and width, height and width, height of a opposing side with keepAspectRatio,\n * the resize amount is always kept in distX & distY amount (the distance in mouse movement)\n * Instead of clamping each value, we first calculate the biggest 'clamp' (for the lack of a better name) and then apply it to all values.\n * To complicate things nodeOrigin has to be taken into account as well. This is done by offsetting the nodes as if their origin is [0, 0],\n * then calculating the restrictions as usual\n * @param startValues - starting values of resize\n * @param controlDirection - dimensions affected by the resize\n * @param pointerPosition - the current pointer position corrected for snapping\n * @param boundaries - minimum and maximum dimensions of the node\n * @param keepAspectRatio - prevent changes of asprect ratio\n * @returns x, y, width and height of the node after resize\n */\nfunction getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, extent, childExtent) {\n    let { affectsX, affectsY } = controlDirection;\n    const { isHorizontal, isVertical } = controlDirection;\n    const isDiagonal = isHorizontal && isVertical;\n    const { xSnapped, ySnapped } = pointerPosition;\n    const { minWidth, maxWidth, minHeight, maxHeight } = boundaries;\n    const { x: startX, y: startY, width: startWidth, height: startHeight, aspectRatio } = startValues;\n    let distX = Math.floor(isHorizontal ? xSnapped - startValues.pointerX : 0);\n    let distY = Math.floor(isVertical ? ySnapped - startValues.pointerY : 0);\n    const newWidth = startWidth + (affectsX ? -distX : distX);\n    const newHeight = startHeight + (affectsY ? -distY : distY);\n    const originOffsetX = -nodeOrigin[0] * startWidth;\n    const originOffsetY = -nodeOrigin[1] * startHeight;\n    // Check if maxWidth, minWWidth, maxHeight, minHeight are restricting the resize\n    let clampX = getSizeClamp(newWidth, minWidth, maxWidth);\n    let clampY = getSizeClamp(newHeight, minHeight, maxHeight);\n    // Check if extent is restricting the resize\n    if (extent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + distX + originOffsetX, extent[0][0]);\n        }\n        else if (!affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + newWidth + originOffsetX, extent[1][0]);\n        }\n        if (affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + distY + originOffsetY, extent[0][1]);\n        }\n        else if (!affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + newHeight + originOffsetY, extent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the child extent is restricting the resize\n    if (childExtent) {\n        let xExtentClamp = 0;\n        let yExtentClamp = 0;\n        if (affectsX && distX > 0) {\n            xExtentClamp = getUpperExtentClamp(startX + distX, childExtent[0][0]);\n        }\n        else if (!affectsX && distX < 0) {\n            xExtentClamp = getLowerExtentClamp(startX + newWidth, childExtent[1][0]);\n        }\n        if (affectsY && distY > 0) {\n            yExtentClamp = getUpperExtentClamp(startY + distY, childExtent[0][1]);\n        }\n        else if (!affectsY && distY < 0) {\n            yExtentClamp = getLowerExtentClamp(startY + newHeight, childExtent[1][1]);\n        }\n        clampX = Math.max(clampX, xExtentClamp);\n        clampY = Math.max(clampY, yExtentClamp);\n    }\n    // Check if the aspect ratio resizing of the other side is restricting the resize\n    if (keepAspectRatio) {\n        if (isHorizontal) {\n            // Check if the max dimensions might be restricting the resize\n            const aspectHeightClamp = getSizeClamp(newWidth / aspectRatio, minHeight, maxHeight) * aspectRatio;\n            clampX = Math.max(clampX, aspectHeightClamp);\n            // Check if the extent is restricting the resize\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + originOffsetY + newWidth / aspectRatio, extent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startY + originOffsetY + (affectsX ? distX : -distX) / aspectRatio, extent[0][1]) *\n                            aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n            // Check if the child extent is restricting the resize\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsX && !affectsY && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startY + newWidth / aspectRatio, childExtent[1][1]) * aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startY + (affectsX ? distX : -distX) / aspectRatio, childExtent[0][1]) * aspectRatio;\n                }\n                clampX = Math.max(clampX, aspectExtentClamp);\n            }\n        }\n        // Do the same thing for vertical resizing\n        if (isVertical) {\n            const aspectWidthClamp = getSizeClamp(newHeight * aspectRatio, minWidth, maxWidth) / aspectRatio;\n            clampY = Math.max(clampY, aspectWidthClamp);\n            if (extent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + newHeight * aspectRatio + originOffsetX, extent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getLowerExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio + originOffsetX, extent[0][0]) /\n                            aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n            if (childExtent) {\n                let aspectExtentClamp = 0;\n                if ((!affectsX && !affectsY) || (affectsY && !affectsX && isDiagonal)) {\n                    aspectExtentClamp = getLowerExtentClamp(startX + newHeight * aspectRatio, childExtent[1][0]) / aspectRatio;\n                }\n                else {\n                    aspectExtentClamp =\n                        getUpperExtentClamp(startX + (affectsY ? distY : -distY) * aspectRatio, childExtent[0][0]) / aspectRatio;\n                }\n                clampY = Math.max(clampY, aspectExtentClamp);\n            }\n        }\n    }\n    distY = distY + (distY < 0 ? clampY : -clampY);\n    distX = distX + (distX < 0 ? clampX : -clampX);\n    if (keepAspectRatio) {\n        if (isDiagonal) {\n            if (newWidth > newHeight * aspectRatio) {\n                distY = (xor(affectsX, affectsY) ? -distX : distX) / aspectRatio;\n            }\n            else {\n                distX = (xor(affectsX, affectsY) ? -distY : distY) * aspectRatio;\n            }\n        }\n        else {\n            if (isHorizontal) {\n                distY = distX / aspectRatio;\n                affectsY = affectsX;\n            }\n            else {\n                distX = distY * aspectRatio;\n                affectsX = affectsY;\n            }\n        }\n    }\n    const x = affectsX ? startX + distX : startX;\n    const y = affectsY ? startY + distY : startY;\n    return {\n        width: startWidth + (affectsX ? -distX : distX),\n        height: startHeight + (affectsY ? -distY : distY),\n        x: nodeOrigin[0] * distX * (!affectsX ? 1 : -1) + x,\n        y: nodeOrigin[1] * distY * (!affectsY ? 1 : -1) + y,\n    };\n}\n\nconst initPrevValues = { width: 0, height: 0, x: 0, y: 0 };\nconst initStartValues = {\n    ...initPrevValues,\n    pointerX: 0,\n    pointerY: 0,\n    aspectRatio: 1,\n};\nfunction nodeToParentExtent(node) {\n    return [\n        [0, 0],\n        [node.measured.width, node.measured.height],\n    ];\n}\nfunction nodeToChildExtent(child, parent, nodeOrigin) {\n    const x = parent.position.x + child.position.x;\n    const y = parent.position.y + child.position.y;\n    const width = child.measured.width ?? 0;\n    const height = child.measured.height ?? 0;\n    const originOffsetX = nodeOrigin[0] * width;\n    const originOffsetY = nodeOrigin[1] * height;\n    return [\n        [x - originOffsetX, y - originOffsetY],\n        [x + width - originOffsetX, y + height - originOffsetY],\n    ];\n}\nfunction XYResizer({ domNode, nodeId, getStoreItems, onChange, onEnd }) {\n    const selection = select(domNode);\n    function update({ controlPosition, boundaries, keepAspectRatio, resizeDirection, onResizeStart, onResize, onResizeEnd, shouldResize, }) {\n        let prevValues = { ...initPrevValues };\n        let startValues = { ...initStartValues };\n        const controlDirection = getControlDirection(controlPosition);\n        let node = undefined;\n        let containerBounds = null;\n        let childNodes = [];\n        let parentNode = undefined; // Needed to fix expandParent\n        let parentExtent = undefined;\n        let childExtent = undefined;\n        const dragHandler = drag()\n            .on('start', (event) => {\n            const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin, paneDomNode } = getStoreItems();\n            node = nodeLookup.get(nodeId);\n            if (!node) {\n                return;\n            }\n            containerBounds = paneDomNode?.getBoundingClientRect() ?? null;\n            const { xSnapped, ySnapped } = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            prevValues = {\n                width: node.measured.width ?? 0,\n                height: node.measured.height ?? 0,\n                x: node.position.x ?? 0,\n                y: node.position.y ?? 0,\n            };\n            startValues = {\n                ...prevValues,\n                pointerX: xSnapped,\n                pointerY: ySnapped,\n                aspectRatio: prevValues.width / prevValues.height,\n            };\n            parentNode = undefined;\n            if (node.parentId && (node.extent === 'parent' || node.expandParent)) {\n                parentNode = nodeLookup.get(node.parentId);\n                parentExtent = parentNode && node.extent === 'parent' ? nodeToParentExtent(parentNode) : undefined;\n            }\n            /*\n             * Collect all child nodes to correct their relative positions when top/left changes\n             * Determine largest minimal extent the parent node is allowed to resize to\n             */\n            childNodes = [];\n            childExtent = undefined;\n            for (const [childId, child] of nodeLookup) {\n                if (child.parentId === nodeId) {\n                    childNodes.push({\n                        id: childId,\n                        position: { ...child.position },\n                        extent: child.extent,\n                    });\n                    if (child.extent === 'parent' || child.expandParent) {\n                        const extent = nodeToChildExtent(child, node, child.origin ?? nodeOrigin);\n                        if (childExtent) {\n                            childExtent = [\n                                [Math.min(extent[0][0], childExtent[0][0]), Math.min(extent[0][1], childExtent[0][1])],\n                                [Math.max(extent[1][0], childExtent[1][0]), Math.max(extent[1][1], childExtent[1][1])],\n                            ];\n                        }\n                        else {\n                            childExtent = extent;\n                        }\n                    }\n                }\n            }\n            onResizeStart?.(event, { ...prevValues });\n        })\n            .on('drag', (event) => {\n            const { transform, snapGrid, snapToGrid, nodeOrigin: storeNodeOrigin } = getStoreItems();\n            const pointerPosition = getPointerPosition(event.sourceEvent, {\n                transform,\n                snapGrid,\n                snapToGrid,\n                containerBounds,\n            });\n            const childChanges = [];\n            if (!node) {\n                return;\n            }\n            const { x: prevX, y: prevY, width: prevWidth, height: prevHeight } = prevValues;\n            const change = {};\n            const nodeOrigin = node.origin ?? storeNodeOrigin;\n            const { width, height, x, y } = getDimensionsAfterResize(startValues, controlDirection, pointerPosition, boundaries, keepAspectRatio, nodeOrigin, parentExtent, childExtent);\n            const isWidthChange = width !== prevWidth;\n            const isHeightChange = height !== prevHeight;\n            const isXPosChange = x !== prevX && isWidthChange;\n            const isYPosChange = y !== prevY && isHeightChange;\n            if (!isXPosChange && !isYPosChange && !isWidthChange && !isHeightChange) {\n                return;\n            }\n            if (isXPosChange || isYPosChange || nodeOrigin[0] === 1 || nodeOrigin[1] === 1) {\n                change.x = isXPosChange ? x : prevValues.x;\n                change.y = isYPosChange ? y : prevValues.y;\n                prevValues.x = change.x;\n                prevValues.y = change.y;\n                /*\n                 * when top/left changes, correct the relative positions of child nodes\n                 * so that they stay in the same position\n                 */\n                if (childNodes.length > 0) {\n                    const xChange = x - prevX;\n                    const yChange = y - prevY;\n                    for (const childNode of childNodes) {\n                        childNode.position = {\n                            x: childNode.position.x - xChange + nodeOrigin[0] * (width - prevWidth),\n                            y: childNode.position.y - yChange + nodeOrigin[1] * (height - prevHeight),\n                        };\n                        childChanges.push(childNode);\n                    }\n                }\n            }\n            if (isWidthChange || isHeightChange) {\n                change.width =\n                    isWidthChange && (!resizeDirection || resizeDirection === 'horizontal') ? width : prevValues.width;\n                change.height =\n                    isHeightChange && (!resizeDirection || resizeDirection === 'vertical') ? height : prevValues.height;\n                prevValues.width = change.width;\n                prevValues.height = change.height;\n            }\n            // Fix expandParent when resizing from top/left\n            if (parentNode && node.expandParent) {\n                const xLimit = nodeOrigin[0] * (change.width ?? 0);\n                if (change.x && change.x < xLimit) {\n                    prevValues.x = xLimit;\n                    startValues.x = startValues.x - (change.x - xLimit);\n                }\n                const yLimit = nodeOrigin[1] * (change.height ?? 0);\n                if (change.y && change.y < yLimit) {\n                    prevValues.y = yLimit;\n                    startValues.y = startValues.y - (change.y - yLimit);\n                }\n            }\n            const direction = getResizeDirection({\n                width: prevValues.width,\n                prevWidth,\n                height: prevValues.height,\n                prevHeight,\n                affectsX: controlDirection.affectsX,\n                affectsY: controlDirection.affectsY,\n            });\n            const nextValues = { ...prevValues, direction };\n            const callResize = shouldResize?.(event, nextValues);\n            if (callResize === false) {\n                return;\n            }\n            onResize?.(event, nextValues);\n            onChange(change, childChanges);\n        })\n            .on('end', (event) => {\n            onResizeEnd?.(event, { ...prevValues });\n            onEnd?.({ ...prevValues });\n        });\n        selection.call(dragHandler);\n    }\n    function destroy() {\n        selection.on('.drag', null);\n    }\n    return {\n        update,\n        destroy,\n    };\n}\n\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, XYDrag, XYHandle, XYMinimap, XYPanZoom, XYResizer, XY_RESIZER_HANDLE_POSITIONS, XY_RESIZER_LINE_POSITIONS, addEdge, adoptUserNodes, areConnectionMapsEqual, areSetsEqual, boxToRect, calcAutoPan, calculateNodePosition, clamp, clampPosition, clampPositionToParent, createMarkerIds, defaultAriaLabelConfig, devWarn, elementSelectionKeys, errorMessages, evaluateAbsolutePosition, fitViewport, getBezierEdgeCenter, getBezierPath, getBoundsOfBoxes, getBoundsOfRects, getConnectedEdges, getConnectionStatus, getDimensions, getEdgeCenter, getEdgePosition, getElementsToRemove, getElevatedEdgeZIndex, getEventPosition, getHandleBounds, getHandlePosition, getHostForElement, getIncomers, getInternalNodesBounds, getMarkerId, getNodeDimensions, getNodePositionWithOrigin, getNodeToolbarTransform, getNodesBounds, getNodesInside, getOutgoers, getOverlappingArea, getPointerPosition, getSmoothStepPath, getStraightPath, getViewportForBounds, handleConnectionChange, handleExpandParent, infiniteExtent, initialConnection, isCoordinateExtent, isEdgeBase, isEdgeVisible, isInputDOMNode, isInternalNodeBase, isMacOs, isMouseEvent, isNodeBase, isNumeric, isRectObject, mergeAriaLabelConfig, nodeHasDimensions, nodeToBox, nodeToRect, oppositePosition, panBy, pointToRendererPoint, reconnectEdge, rectToBox, rendererPointToPoint, shallowNodeData, snapPosition, updateAbsolutePositions, updateConnectionLookup, updateNodeInternals, withResolvers };\n","const createStoreImpl = (createState) => {\n  let state;\n  const listeners = /* @__PURE__ */ new Set();\n  const setState = (partial, replace) => {\n    const nextState = typeof partial === \"function\" ? partial(state) : partial;\n    if (!Object.is(nextState, state)) {\n      const previousState = state;\n      state = (replace != null ? replace : typeof nextState !== \"object\" || nextState === null) ? nextState : Object.assign({}, state, nextState);\n      listeners.forEach((listener) => listener(state, previousState));\n    }\n  };\n  const getState = () => state;\n  const getInitialState = () => initialState;\n  const subscribe = (listener) => {\n    listeners.add(listener);\n    return () => listeners.delete(listener);\n  };\n  const destroy = () => {\n    if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n      console.warn(\n        \"[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected.\"\n      );\n    }\n    listeners.clear();\n  };\n  const api = { setState, getState, getInitialState, subscribe, destroy };\n  const initialState = state = createState(setState, getState, api);\n  return api;\n};\nconst createStore = (createState) => createState ? createStoreImpl(createState) : createStoreImpl;\nvar vanilla = (createState) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use import { createStore } from 'zustand/vanilla'.\"\n    );\n  }\n  return createStore(createState);\n};\n\nexport { createStore, vanilla as default };\n","import ReactExports from 'react';\nimport useSyncExternalStoreExports from 'use-sync-external-store/shim/with-selector.js';\nimport { createStore } from 'zustand/vanilla';\n\nconst { useDebugValue } = ReactExports;\nconst { useSyncExternalStoreWithSelector } = useSyncExternalStoreExports;\nconst identity = (arg) => arg;\nfunction useStoreWithEqualityFn(api, selector = identity, equalityFn) {\n  const slice = useSyncExternalStoreWithSelector(\n    api.subscribe,\n    api.getState,\n    api.getServerState || api.getInitialState,\n    selector,\n    equalityFn\n  );\n  useDebugValue(slice);\n  return slice;\n}\nconst createWithEqualityFnImpl = (createState, defaultEqualityFn) => {\n  const api = createStore(createState);\n  const useBoundStoreWithEqualityFn = (selector, equalityFn = defaultEqualityFn) => useStoreWithEqualityFn(api, selector, equalityFn);\n  Object.assign(useBoundStoreWithEqualityFn, api);\n  return useBoundStoreWithEqualityFn;\n};\nconst createWithEqualityFn = (createState, defaultEqualityFn) => createState ? createWithEqualityFnImpl(createState, defaultEqualityFn) : createWithEqualityFnImpl;\n\nexport { createWithEqualityFn, useStoreWithEqualityFn };\n","function shallow$1(objA, objB) {\n  if (Object.is(objA, objB)) {\n    return true;\n  }\n  if (typeof objA !== \"object\" || objA === null || typeof objB !== \"object\" || objB === null) {\n    return false;\n  }\n  if (objA instanceof Map && objB instanceof Map) {\n    if (objA.size !== objB.size) return false;\n    for (const [key, value] of objA) {\n      if (!Object.is(value, objB.get(key))) {\n        return false;\n      }\n    }\n    return true;\n  }\n  if (objA instanceof Set && objB instanceof Set) {\n    if (objA.size !== objB.size) return false;\n    for (const value of objA) {\n      if (!objB.has(value)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  const keysA = Object.keys(objA);\n  if (keysA.length !== Object.keys(objB).length) {\n    return false;\n  }\n  for (const keyA of keysA) {\n    if (!Object.prototype.hasOwnProperty.call(objB, keyA) || !Object.is(objA[keyA], objB[keyA])) {\n      return false;\n    }\n  }\n  return true;\n}\n\nvar shallow = (objA, objB) => {\n  if ((import.meta.env ? import.meta.env.MODE : void 0) !== \"production\") {\n    console.warn(\n      \"[DEPRECATED] Default export is deprecated. Instead use `import { shallow } from 'zustand/shallow'`.\"\n    );\n  }\n  return shallow$1(objA, objB);\n};\n\nexport { shallow as default, shallow$1 as shallow };\n","\"use client\"\nimport { jsxs, Fragment, jsx } from 'react/jsx-runtime';\nimport { createContext, useContext, useMemo, forwardRef, useEffect, useRef, useState, useLayoutEffect, useCallback, memo } from 'react';\nimport cc from 'classcat';\nimport { errorMessages, mergeAriaLabelConfig, infiniteExtent, isInputDOMNode, getViewportForBounds, pointToRendererPoint, rendererPointToPoint, isNodeBase, isEdgeBase, getElementsToRemove, isRectObject, nodeToRect, getOverlappingArea, getNodesBounds, withResolvers, evaluateAbsolutePosition, getDimensions, XYPanZoom, PanOnScrollMode, SelectionMode, getEventPosition, getNodesInside, areSetsEqual, XYDrag, snapPosition, calculateNodePosition, Position, ConnectionMode, isMouseEvent, XYHandle, getHostForElement, addEdge, getInternalNodesBounds, isNumeric, nodeHasDimensions, getNodeDimensions, elementSelectionKeys, isEdgeVisible, MarkerType, createMarkerIds, getBezierEdgeCenter, getSmoothStepPath, getStraightPath, getBezierPath, getEdgePosition, getElevatedEdgeZIndex, getMarkerId, getConnectionStatus, ConnectionLineType, updateConnectionLookup, adoptUserNodes, initialConnection, devWarn, defaultAriaLabelConfig, updateNodeInternals, updateAbsolutePositions, handleExpandParent, panBy, fitViewport, isMacOs, areConnectionMapsEqual, handleConnectionChange, shallowNodeData, XYMinimap, getBoundsOfRects, ResizeControlVariant, XYResizer, XY_RESIZER_LINE_POSITIONS, XY_RESIZER_HANDLE_POSITIONS, getNodeToolbarTransform } from '@xyflow/system';\nexport { ConnectionLineType, ConnectionMode, MarkerType, PanOnScrollMode, Position, ResizeControlVariant, SelectionMode, addEdge, getBezierEdgeCenter, getBezierPath, getConnectedEdges, getEdgeCenter, getIncomers, getNodesBounds, getOutgoers, getSmoothStepPath, getStraightPath, getViewportForBounds, reconnectEdge } from '@xyflow/system';\nimport { useStoreWithEqualityFn, createWithEqualityFn } from 'zustand/traditional';\nimport { shallow } from 'zustand/shallow';\nimport { createPortal } from 'react-dom';\n\nconst StoreContext = createContext(null);\nconst Provider$1 = StoreContext.Provider;\n\nconst zustandErrorMessage = errorMessages['error001']();\n/**\n * This hook can be used to subscribe to internal state changes of the React Flow\n * component. The `useStore` hook is re-exported from the [Zustand](https://github.com/pmndrs/zustand)\n * state management library, so you should check out their docs for more details.\n *\n * @public\n * @param selector - A selector function that returns a slice of the flow's internal state.\n * Extracting or transforming just the state you need is a good practice to avoid unnecessary\n * re-renders.\n * @param equalityFn - A function to compare the previous and next value. This is incredibly useful\n * for preventing unnecessary re-renders. Good sensible defaults are using `Object.is` or importing\n * `zustand/shallow`, but you can be as granular as you like.\n * @returns The selected state slice.\n *\n * @example\n * ```ts\n * const nodes = useStore((state) => state.nodes);\n * ```\n *\n * @remarks This hook should only be used if there is no other way to access the internal\n * state. For many of the common use cases, there are dedicated hooks available\n * such as {@link useReactFlow}, {@link useViewport}, etc.\n */\nfunction useStore(selector, equalityFn) {\n    const store = useContext(StoreContext);\n    if (store === null) {\n        throw new Error(zustandErrorMessage);\n    }\n    return useStoreWithEqualityFn(store, selector, equalityFn);\n}\n/**\n * In some cases, you might need to access the store directly. This hook returns the store object which can be used on demand to access the state or dispatch actions.\n *\n * @returns The store object.\n * @example\n * ```ts\n * const store = useStoreApi();\n * ```\n *\n * @remarks This hook should only be used if there is no other way to access the internal\n * state. For many of the common use cases, there are dedicated hooks available\n * such as {@link useReactFlow}, {@link useViewport}, etc.\n */\nfunction useStoreApi() {\n    const store = useContext(StoreContext);\n    if (store === null) {\n        throw new Error(zustandErrorMessage);\n    }\n    return useMemo(() => ({\n        getState: store.getState,\n        setState: store.setState,\n        subscribe: store.subscribe,\n    }), [store]);\n}\n\nconst style = { display: 'none' };\nconst ariaLiveStyle = {\n    position: 'absolute',\n    width: 1,\n    height: 1,\n    margin: -1,\n    border: 0,\n    padding: 0,\n    overflow: 'hidden',\n    clip: 'rect(0px, 0px, 0px, 0px)',\n    clipPath: 'inset(100%)',\n};\nconst ARIA_NODE_DESC_KEY = 'react-flow__node-desc';\nconst ARIA_EDGE_DESC_KEY = 'react-flow__edge-desc';\nconst ARIA_LIVE_MESSAGE = 'react-flow__aria-live';\nconst ariaLiveSelector = (s) => s.ariaLiveMessage;\nconst ariaLabelConfigSelector = (s) => s.ariaLabelConfig;\nfunction AriaLiveMessage({ rfId }) {\n    const ariaLiveMessage = useStore(ariaLiveSelector);\n    return (jsx(\"div\", { id: `${ARIA_LIVE_MESSAGE}-${rfId}`, \"aria-live\": \"assertive\", \"aria-atomic\": \"true\", style: ariaLiveStyle, children: ariaLiveMessage }));\n}\nfunction A11yDescriptions({ rfId, disableKeyboardA11y }) {\n    const ariaLabelConfig = useStore(ariaLabelConfigSelector);\n    return (jsxs(Fragment, { children: [jsx(\"div\", { id: `${ARIA_NODE_DESC_KEY}-${rfId}`, style: style, children: disableKeyboardA11y\n                    ? ariaLabelConfig['node.a11yDescription.default']\n                    : ariaLabelConfig['node.a11yDescription.keyboardDisabled'] }), jsx(\"div\", { id: `${ARIA_EDGE_DESC_KEY}-${rfId}`, style: style, children: ariaLabelConfig['edge.a11yDescription.default'] }), !disableKeyboardA11y && jsx(AriaLiveMessage, { rfId: rfId })] }));\n}\n\n/**\n * The `<Panel />` component helps you position content above the viewport.\n * It is used internally by the [`<MiniMap />`](/api-reference/components/minimap)\n * and [`<Controls />`](/api-reference/components/controls) components.\n *\n * @public\n *\n * @example\n * ```jsx\n *import { ReactFlow, Background, Panel } from '@xyflow/react';\n *\n *export default function Flow() {\n *  return (\n *    <ReactFlow nodes={[]} fitView>\n *      <Panel position=\"top-left\">top-left</Panel>\n *      <Panel position=\"top-center\">top-center</Panel>\n *      <Panel position=\"top-right\">top-right</Panel>\n *      <Panel position=\"bottom-left\">bottom-left</Panel>\n *      <Panel position=\"bottom-center\">bottom-center</Panel>\n *      <Panel position=\"bottom-right\">bottom-right</Panel>\n *    </ReactFlow>\n *  );\n *}\n *```\n */\nconst Panel = forwardRef(({ position = 'top-left', children, className, style, ...rest }, ref) => {\n    const positionClasses = `${position}`.split('-');\n    return (jsx(\"div\", { className: cc(['react-flow__panel', className, ...positionClasses]), style: style, ref: ref, ...rest, children: children }));\n});\nPanel.displayName = 'Panel';\n\nfunction Attribution({ proOptions, position = 'bottom-right' }) {\n    if (proOptions?.hideAttribution) {\n        return null;\n    }\n    return (jsx(Panel, { position: position, className: \"react-flow__attribution\", \"data-message\": \"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev\", children: jsx(\"a\", { href: \"https://reactflow.dev\", target: \"_blank\", rel: \"noopener noreferrer\", \"aria-label\": \"React Flow attribution\", children: \"React Flow\" }) }));\n}\n\nconst selector$m = (s) => {\n    const selectedNodes = [];\n    const selectedEdges = [];\n    for (const [, node] of s.nodeLookup) {\n        if (node.selected) {\n            selectedNodes.push(node.internals.userNode);\n        }\n    }\n    for (const [, edge] of s.edgeLookup) {\n        if (edge.selected) {\n            selectedEdges.push(edge);\n        }\n    }\n    return { selectedNodes, selectedEdges };\n};\nconst selectId = (obj) => obj.id;\nfunction areEqual(a, b) {\n    return (shallow(a.selectedNodes.map(selectId), b.selectedNodes.map(selectId)) &&\n        shallow(a.selectedEdges.map(selectId), b.selectedEdges.map(selectId)));\n}\nfunction SelectionListenerInner({ onSelectionChange, }) {\n    const store = useStoreApi();\n    const { selectedNodes, selectedEdges } = useStore(selector$m, areEqual);\n    useEffect(() => {\n        const params = { nodes: selectedNodes, edges: selectedEdges };\n        onSelectionChange?.(params);\n        store.getState().onSelectionChangeHandlers.forEach((fn) => fn(params));\n    }, [selectedNodes, selectedEdges, onSelectionChange]);\n    return null;\n}\nconst changeSelector = (s) => !!s.onSelectionChangeHandlers;\nfunction SelectionListener({ onSelectionChange, }) {\n    const storeHasSelectionChangeHandlers = useStore(changeSelector);\n    if (onSelectionChange || storeHasSelectionChangeHandlers) {\n        return jsx(SelectionListenerInner, { onSelectionChange: onSelectionChange });\n    }\n    return null;\n}\n\nconst defaultNodeOrigin = [0, 0];\nconst defaultViewport = { x: 0, y: 0, zoom: 1 };\n\n/*\n * This component helps us to update the store with the values coming from the user.\n * We distinguish between values we can update directly with `useDirectStoreUpdater` (like `snapGrid`)\n * and values that have a dedicated setter function in the store (like `setNodes`).\n */\n// These fields exist in the global store, and we need to keep them up to date\nconst reactFlowFieldsToTrack = [\n    'nodes',\n    'edges',\n    'defaultNodes',\n    'defaultEdges',\n    'onConnect',\n    'onConnectStart',\n    'onConnectEnd',\n    'onClickConnectStart',\n    'onClickConnectEnd',\n    'nodesDraggable',\n    'autoPanOnNodeFocus',\n    'nodesConnectable',\n    'nodesFocusable',\n    'edgesFocusable',\n    'edgesReconnectable',\n    'elevateNodesOnSelect',\n    'elevateEdgesOnSelect',\n    'minZoom',\n    'maxZoom',\n    'nodeExtent',\n    'onNodesChange',\n    'onEdgesChange',\n    'elementsSelectable',\n    'connectionMode',\n    'snapGrid',\n    'snapToGrid',\n    'translateExtent',\n    'connectOnClick',\n    'defaultEdgeOptions',\n    'fitView',\n    'fitViewOptions',\n    'onNodesDelete',\n    'onEdgesDelete',\n    'onDelete',\n    'onNodeDrag',\n    'onNodeDragStart',\n    'onNodeDragStop',\n    'onSelectionDrag',\n    'onSelectionDragStart',\n    'onSelectionDragStop',\n    'onMoveStart',\n    'onMove',\n    'onMoveEnd',\n    'noPanClassName',\n    'nodeOrigin',\n    'autoPanOnConnect',\n    'autoPanOnNodeDrag',\n    'onError',\n    'connectionRadius',\n    'isValidConnection',\n    'selectNodesOnDrag',\n    'nodeDragThreshold',\n    'connectionDragThreshold',\n    'onBeforeDelete',\n    'debug',\n    'autoPanSpeed',\n    'paneClickDistance',\n    'ariaLabelConfig',\n];\n// rfId doesn't exist in ReactFlowProps, but it's one of the fields we want to update\nconst fieldsToTrack = [...reactFlowFieldsToTrack, 'rfId'];\nconst selector$l = (s) => ({\n    setNodes: s.setNodes,\n    setEdges: s.setEdges,\n    setMinZoom: s.setMinZoom,\n    setMaxZoom: s.setMaxZoom,\n    setTranslateExtent: s.setTranslateExtent,\n    setNodeExtent: s.setNodeExtent,\n    reset: s.reset,\n    setDefaultNodesAndEdges: s.setDefaultNodesAndEdges,\n    setPaneClickDistance: s.setPaneClickDistance,\n});\nconst initPrevValues = {\n    /*\n     * these are values that are also passed directly to other components\n     * than the StoreUpdater. We can reduce the number of setStore calls\n     * by setting the same values here as prev fields.\n     */\n    translateExtent: infiniteExtent,\n    nodeOrigin: defaultNodeOrigin,\n    minZoom: 0.5,\n    maxZoom: 2,\n    elementsSelectable: true,\n    noPanClassName: 'nopan',\n    rfId: '1',\n    paneClickDistance: 0,\n};\nfunction StoreUpdater(props) {\n    const { setNodes, setEdges, setMinZoom, setMaxZoom, setTranslateExtent, setNodeExtent, reset, setDefaultNodesAndEdges, setPaneClickDistance, } = useStore(selector$l, shallow);\n    const store = useStoreApi();\n    useEffect(() => {\n        setDefaultNodesAndEdges(props.defaultNodes, props.defaultEdges);\n        return () => {\n            // when we reset the store we also need to reset the previous fields\n            previousFields.current = initPrevValues;\n            reset();\n        };\n    }, []);\n    const previousFields = useRef(initPrevValues);\n    useEffect(() => {\n        for (const fieldName of fieldsToTrack) {\n            const fieldValue = props[fieldName];\n            const previousFieldValue = previousFields.current[fieldName];\n            if (fieldValue === previousFieldValue)\n                continue;\n            if (typeof props[fieldName] === 'undefined')\n                continue;\n            // Custom handling with dedicated setters for some fields\n            if (fieldName === 'nodes')\n                setNodes(fieldValue);\n            else if (fieldName === 'edges')\n                setEdges(fieldValue);\n            else if (fieldName === 'minZoom')\n                setMinZoom(fieldValue);\n            else if (fieldName === 'maxZoom')\n                setMaxZoom(fieldValue);\n            else if (fieldName === 'translateExtent')\n                setTranslateExtent(fieldValue);\n            else if (fieldName === 'nodeExtent')\n                setNodeExtent(fieldValue);\n            else if (fieldName === 'paneClickDistance')\n                setPaneClickDistance(fieldValue);\n            else if (fieldName === 'ariaLabelConfig')\n                store.setState({ ariaLabelConfig: mergeAriaLabelConfig(fieldValue) });\n            // Renamed fields\n            else if (fieldName === 'fitView')\n                store.setState({ fitViewQueued: fieldValue });\n            else if (fieldName === 'fitViewOptions')\n                store.setState({ fitViewOptions: fieldValue });\n            // General case\n            else\n                store.setState({ [fieldName]: fieldValue });\n        }\n        previousFields.current = props;\n    }, \n    // Only re-run the effect if one of the fields we track changes\n    fieldsToTrack.map((fieldName) => props[fieldName]));\n    return null;\n}\n\nfunction getMediaQuery() {\n    if (typeof window === 'undefined' || !window.matchMedia) {\n        return null;\n    }\n    return window.matchMedia('(prefers-color-scheme: dark)');\n}\n/**\n * Hook for receiving the current color mode class 'dark' or 'light'.\n *\n * @internal\n * @param colorMode - The color mode to use ('dark', 'light' or 'system')\n */\nfunction useColorModeClass(colorMode) {\n    const [colorModeClass, setColorModeClass] = useState(colorMode === 'system' ? null : colorMode);\n    useEffect(() => {\n        if (colorMode !== 'system') {\n            setColorModeClass(colorMode);\n            return;\n        }\n        const mediaQuery = getMediaQuery();\n        const updateColorModeClass = () => setColorModeClass(mediaQuery?.matches ? 'dark' : 'light');\n        updateColorModeClass();\n        mediaQuery?.addEventListener('change', updateColorModeClass);\n        return () => {\n            mediaQuery?.removeEventListener('change', updateColorModeClass);\n        };\n    }, [colorMode]);\n    return colorModeClass !== null ? colorModeClass : getMediaQuery()?.matches ? 'dark' : 'light';\n}\n\nconst defaultDoc = typeof document !== 'undefined' ? document : null;\n/**\n * This hook lets you listen for specific key codes and tells you whether they are\n * currently pressed or not.\n *\n * @public\n * @param options - Options\n *\n * @example\n * ```tsx\n *import { useKeyPress } from '@xyflow/react';\n *\n *export default function () {\n *  const spacePressed = useKeyPress('Space');\n *  const cmdAndSPressed = useKeyPress(['Meta+s', 'Strg+s']);\n *\n *  return (\n *    <div>\n *     {spacePressed && <p>Space pressed!</p>}\n *     {cmdAndSPressed && <p>Cmd + S pressed!</p>}\n *    </div>\n *  );\n *}\n *```\n */\nfunction useKeyPress(\n/**\n * The key code (string or array of strings) specifies which key(s) should trigger\n * an action.\n *\n * A **string** can represent:\n * - A **single key**, e.g. `'a'`\n * - A **key combination**, using `'+'` to separate keys, e.g. `'a+d'`\n *\n * An  **array of strings** represents **multiple possible key inputs**. For example, `['a', 'd+s']`\n * means the user can press either the single key `'a'` or the combination of `'d'` and `'s'`.\n * @default null\n */\nkeyCode = null, options = { target: defaultDoc, actInsideInputWithModifier: true }) {\n    const [keyPressed, setKeyPressed] = useState(false);\n    // we need to remember if a modifier key is pressed in order to track it\n    const modifierPressed = useRef(false);\n    // we need to remember the pressed keys in order to support combinations\n    const pressedKeys = useRef(new Set([]));\n    /*\n     * keyCodes = array with single keys [['a']] or key combinations [['a', 's']]\n     * keysToWatch = array with all keys flattened ['a', 'd', 'ShiftLeft']\n     * used to check if we store event.code or event.key. When the code is in the list of keysToWatch\n     * we use the code otherwise the key. Explainer: When you press the left \"command\" key, the code is \"MetaLeft\"\n     * and the key is \"Meta\". We want users to be able to pass keys and codes so we assume that the key is meant when\n     * we can't find it in the list of keysToWatch.\n     */\n    const [keyCodes, keysToWatch] = useMemo(() => {\n        if (keyCode !== null) {\n            const keyCodeArr = Array.isArray(keyCode) ? keyCode : [keyCode];\n            const keys = keyCodeArr\n                .filter((kc) => typeof kc === 'string')\n                /*\n                 * we first replace all '+' with '\\n'  which we will use to split the keys on\n                 * then we replace '\\n\\n' with '\\n+', this way we can also support the combination 'key++'\n                 * in the end we simply split on '\\n' to get the key array\n                 */\n                .map((kc) => kc.replace('+', '\\n').replace('\\n\\n', '\\n+').split('\\n'));\n            const keysFlat = keys.reduce((res, item) => res.concat(...item), []);\n            return [keys, keysFlat];\n        }\n        return [[], []];\n    }, [keyCode]);\n    useEffect(() => {\n        const target = options?.target ?? defaultDoc;\n        const actInsideInputWithModifier = options?.actInsideInputWithModifier ?? true;\n        if (keyCode !== null) {\n            const downHandler = (event) => {\n                modifierPressed.current = event.ctrlKey || event.metaKey || event.shiftKey || event.altKey;\n                const preventAction = (!modifierPressed.current || (modifierPressed.current && !actInsideInputWithModifier)) &&\n                    isInputDOMNode(event);\n                if (preventAction) {\n                    return false;\n                }\n                const keyOrCode = useKeyOrCode(event.code, keysToWatch);\n                pressedKeys.current.add(event[keyOrCode]);\n                if (isMatchingKey(keyCodes, pressedKeys.current, false)) {\n                    const target = (event.composedPath?.()?.[0] || event.target);\n                    const isInteractiveElement = target?.nodeName === 'BUTTON' || target?.nodeName === 'A';\n                    if (options.preventDefault !== false && (modifierPressed.current || !isInteractiveElement)) {\n                        event.preventDefault();\n                    }\n                    setKeyPressed(true);\n                }\n            };\n            const upHandler = (event) => {\n                const keyOrCode = useKeyOrCode(event.code, keysToWatch);\n                if (isMatchingKey(keyCodes, pressedKeys.current, true)) {\n                    setKeyPressed(false);\n                    pressedKeys.current.clear();\n                }\n                else {\n                    pressedKeys.current.delete(event[keyOrCode]);\n                }\n                // fix for Mac: when cmd key is pressed, keyup is not triggered for any other key, see: https://stackoverflow.com/questions/27380018/when-cmd-key-is-kept-pressed-keyup-is-not-triggered-for-any-other-key\n                if (event.key === 'Meta') {\n                    pressedKeys.current.clear();\n                }\n                modifierPressed.current = false;\n            };\n            const resetHandler = () => {\n                pressedKeys.current.clear();\n                setKeyPressed(false);\n            };\n            target?.addEventListener('keydown', downHandler);\n            target?.addEventListener('keyup', upHandler);\n            window.addEventListener('blur', resetHandler);\n            window.addEventListener('contextmenu', resetHandler);\n            return () => {\n                target?.removeEventListener('keydown', downHandler);\n                target?.removeEventListener('keyup', upHandler);\n                window.removeEventListener('blur', resetHandler);\n                window.removeEventListener('contextmenu', resetHandler);\n            };\n        }\n    }, [keyCode, setKeyPressed]);\n    return keyPressed;\n}\n// utils\nfunction isMatchingKey(keyCodes, pressedKeys, isUp) {\n    return (keyCodes\n        /*\n         * we only want to compare same sizes of keyCode definitions\n         * and pressed keys. When the user specified 'Meta' as a key somewhere\n         * this would also be truthy without this filter when user presses 'Meta' + 'r'\n         */\n        .filter((keys) => isUp || keys.length === pressedKeys.size)\n        /*\n         * since we want to support multiple possibilities only one of the\n         * combinations need to be part of the pressed keys\n         */\n        .some((keys) => keys.every((k) => pressedKeys.has(k))));\n}\nfunction useKeyOrCode(eventCode, keysToWatch) {\n    return keysToWatch.includes(eventCode) ? 'code' : 'key';\n}\n\n/**\n * Hook for getting viewport helper functions.\n *\n * @internal\n * @returns viewport helper functions\n */\nconst useViewportHelper = () => {\n    const store = useStoreApi();\n    return useMemo(() => {\n        return {\n            zoomIn: (options) => {\n                const { panZoom } = store.getState();\n                return panZoom ? panZoom.scaleBy(1.2, { duration: options?.duration }) : Promise.resolve(false);\n            },\n            zoomOut: (options) => {\n                const { panZoom } = store.getState();\n                return panZoom ? panZoom.scaleBy(1 / 1.2, { duration: options?.duration }) : Promise.resolve(false);\n            },\n            zoomTo: (zoomLevel, options) => {\n                const { panZoom } = store.getState();\n                return panZoom ? panZoom.scaleTo(zoomLevel, { duration: options?.duration }) : Promise.resolve(false);\n            },\n            getZoom: () => store.getState().transform[2],\n            setViewport: async (viewport, options) => {\n                const { transform: [tX, tY, tZoom], panZoom, } = store.getState();\n                if (!panZoom) {\n                    return Promise.resolve(false);\n                }\n                await panZoom.setViewport({\n                    x: viewport.x ?? tX,\n                    y: viewport.y ?? tY,\n                    zoom: viewport.zoom ?? tZoom,\n                }, options);\n                return Promise.resolve(true);\n            },\n            getViewport: () => {\n                const [x, y, zoom] = store.getState().transform;\n                return { x, y, zoom };\n            },\n            setCenter: async (x, y, options) => {\n                return store.getState().setCenter(x, y, options);\n            },\n            fitBounds: async (bounds, options) => {\n                const { width, height, minZoom, maxZoom, panZoom } = store.getState();\n                const viewport = getViewportForBounds(bounds, width, height, minZoom, maxZoom, options?.padding ?? 0.1);\n                if (!panZoom) {\n                    return Promise.resolve(false);\n                }\n                await panZoom.setViewport(viewport, {\n                    duration: options?.duration,\n                    ease: options?.ease,\n                    interpolate: options?.interpolate,\n                });\n                return Promise.resolve(true);\n            },\n            screenToFlowPosition: (clientPosition, options = {}) => {\n                const { transform, snapGrid, snapToGrid, domNode } = store.getState();\n                if (!domNode) {\n                    return clientPosition;\n                }\n                const { x: domX, y: domY } = domNode.getBoundingClientRect();\n                const correctedPosition = {\n                    x: clientPosition.x - domX,\n                    y: clientPosition.y - domY,\n                };\n                const _snapGrid = options.snapGrid ?? snapGrid;\n                const _snapToGrid = options.snapToGrid ?? snapToGrid;\n                return pointToRendererPoint(correctedPosition, transform, _snapToGrid, _snapGrid);\n            },\n            flowToScreenPosition: (flowPosition) => {\n                const { transform, domNode } = store.getState();\n                if (!domNode) {\n                    return flowPosition;\n                }\n                const { x: domX, y: domY } = domNode.getBoundingClientRect();\n                const rendererPosition = rendererPointToPoint(flowPosition, transform);\n                return {\n                    x: rendererPosition.x + domX,\n                    y: rendererPosition.y + domY,\n                };\n            },\n        };\n    }, []);\n};\n\n/*\n * This function applies changes to nodes or edges that are triggered by React Flow internally.\n * When you drag a node for example, React Flow will send a position change update.\n * This function then applies the changes and returns the updated elements.\n */\nfunction applyChanges(changes, elements) {\n    const updatedElements = [];\n    /*\n     * By storing a map of changes for each element, we can a quick lookup as we\n     * iterate over the elements array!\n     */\n    const changesMap = new Map();\n    const addItemChanges = [];\n    for (const change of changes) {\n        if (change.type === 'add') {\n            addItemChanges.push(change);\n            continue;\n        }\n        else if (change.type === 'remove' || change.type === 'replace') {\n            /*\n             * For a 'remove' change we can safely ignore any other changes queued for\n             * the same element, it's going to be removed anyway!\n             */\n            changesMap.set(change.id, [change]);\n        }\n        else {\n            const elementChanges = changesMap.get(change.id);\n            if (elementChanges) {\n                /*\n                 * If we have some changes queued already, we can do a mutable update of\n                 * that array and save ourselves some copying.\n                 */\n                elementChanges.push(change);\n            }\n            else {\n                changesMap.set(change.id, [change]);\n            }\n        }\n    }\n    for (const element of elements) {\n        const changes = changesMap.get(element.id);\n        /*\n         * When there are no changes for an element we can just push it unmodified,\n         * no need to copy it.\n         */\n        if (!changes) {\n            updatedElements.push(element);\n            continue;\n        }\n        // If we have a 'remove' change queued, it'll be the only change in the array\n        if (changes[0].type === 'remove') {\n            continue;\n        }\n        if (changes[0].type === 'replace') {\n            updatedElements.push({ ...changes[0].item });\n            continue;\n        }\n        /**\n         * For other types of changes, we want to start with a shallow copy of the\n         * object so React knows this element has changed. Sequential changes will\n         * each _mutate_ this object, so there's only ever one copy.\n         */\n        const updatedElement = { ...element };\n        for (const change of changes) {\n            applyChange(change, updatedElement);\n        }\n        updatedElements.push(updatedElement);\n    }\n    /*\n     * we need to wait for all changes to be applied before adding new items\n     * to be able to add them at the correct index\n     */\n    if (addItemChanges.length) {\n        addItemChanges.forEach((change) => {\n            if (change.index !== undefined) {\n                updatedElements.splice(change.index, 0, { ...change.item });\n            }\n            else {\n                updatedElements.push({ ...change.item });\n            }\n        });\n    }\n    return updatedElements;\n}\n// Applies a single change to an element. This is a *mutable* update.\nfunction applyChange(change, element) {\n    switch (change.type) {\n        case 'select': {\n            element.selected = change.selected;\n            break;\n        }\n        case 'position': {\n            if (typeof change.position !== 'undefined') {\n                element.position = change.position;\n            }\n            if (typeof change.dragging !== 'undefined') {\n                element.dragging = change.dragging;\n            }\n            break;\n        }\n        case 'dimensions': {\n            if (typeof change.dimensions !== 'undefined') {\n                element.measured ??= {};\n                element.measured.width = change.dimensions.width;\n                element.measured.height = change.dimensions.height;\n                if (change.setAttributes) {\n                    if (change.setAttributes === true || change.setAttributes === 'width') {\n                        element.width = change.dimensions.width;\n                    }\n                    if (change.setAttributes === true || change.setAttributes === 'height') {\n                        element.height = change.dimensions.height;\n                    }\n                }\n            }\n            if (typeof change.resizing === 'boolean') {\n                element.resizing = change.resizing;\n            }\n            break;\n        }\n    }\n}\n/**\n * Drop in function that applies node changes to an array of nodes.\n * @public\n * @param changes - Array of changes to apply.\n * @param nodes - Array of nodes to apply the changes to.\n * @returns Array of updated nodes.\n * @example\n *```tsx\n *import { useState, useCallback } from 'react';\n *import { ReactFlow, applyNodeChanges, type Node, type Edge, type OnNodesChange } from '@xyflow/react';\n *\n *export default function Flow() {\n *  const [nodes, setNodes] = useState<Node[]>([]);\n *  const [edges, setEdges] = useState<Edge[]>([]);\n *  const onNodesChange: OnNodesChange = useCallback(\n *    (changes) => {\n *      setNodes((oldNodes) => applyNodeChanges(changes, oldNodes));\n *    },\n *    [setNodes],\n *  );\n *\n *  return (\n *    <ReactFlow nodes={nodes} edges={edges} onNodesChange={onNodesChange} />\n *  );\n *}\n *```\n * @remarks Various events on the <ReactFlow /> component can produce an {@link NodeChange}\n * that describes how to update the edges of your flow in some way.\n * If you don't need any custom behaviour, this util can be used to take an array\n * of these changes and apply them to your edges.\n */\nfunction applyNodeChanges(changes, nodes) {\n    return applyChanges(changes, nodes);\n}\n/**\n * Drop in function that applies edge changes to an array of edges.\n * @public\n * @param changes - Array of changes to apply.\n * @param edges - Array of edge to apply the changes to.\n * @returns Array of updated edges.\n * @example\n * ```tsx\n *import { useState, useCallback } from 'react';\n *import { ReactFlow, applyEdgeChanges } from '@xyflow/react';\n *\n *export default function Flow() {\n *  const [nodes, setNodes] = useState([]);\n *  const [edges, setEdges] = useState([]);\n *  const onEdgesChange = useCallback(\n *    (changes) => {\n *      setEdges((oldEdges) => applyEdgeChanges(changes, oldEdges));\n *    },\n *    [setEdges],\n *  );\n *\n *  return (\n *    <ReactFlow nodes={nodes} edges={edges} onEdgesChange={onEdgesChange} />\n *  );\n *}\n *```\n * @remarks Various events on the <ReactFlow /> component can produce an {@link EdgeChange}\n * that describes how to update the edges of your flow in some way.\n * If you don't need any custom behaviour, this util can be used to take an array\n * of these changes and apply them to your edges.\n */\nfunction applyEdgeChanges(changes, edges) {\n    return applyChanges(changes, edges);\n}\nfunction createSelectionChange(id, selected) {\n    return {\n        id,\n        type: 'select',\n        selected,\n    };\n}\nfunction getSelectionChanges(items, selectedIds = new Set(), mutateItem = false) {\n    const changes = [];\n    for (const [id, item] of items) {\n        const willBeSelected = selectedIds.has(id);\n        // we don't want to set all items to selected=false on the first selection\n        if (!(item.selected === undefined && !willBeSelected) && item.selected !== willBeSelected) {\n            if (mutateItem) {\n                /*\n                 * this hack is needed for nodes. When the user dragged a node, it's selected.\n                 * When another node gets dragged, we need to deselect the previous one,\n                 * in order to have only one selected node at a time - the onNodesChange callback comes too late here :/\n                 */\n                item.selected = willBeSelected;\n            }\n            changes.push(createSelectionChange(item.id, willBeSelected));\n        }\n    }\n    return changes;\n}\nfunction getElementsDiffChanges({ items = [], lookup, }) {\n    const changes = [];\n    const itemsLookup = new Map(items.map((item) => [item.id, item]));\n    for (const [index, item] of items.entries()) {\n        const lookupItem = lookup.get(item.id);\n        const storeItem = lookupItem?.internals?.userNode ?? lookupItem;\n        if (storeItem !== undefined && storeItem !== item) {\n            changes.push({ id: item.id, item: item, type: 'replace' });\n        }\n        if (storeItem === undefined) {\n            changes.push({ item: item, type: 'add', index });\n        }\n    }\n    for (const [id] of lookup) {\n        const nextNode = itemsLookup.get(id);\n        if (nextNode === undefined) {\n            changes.push({ id, type: 'remove' });\n        }\n    }\n    return changes;\n}\nfunction elementToRemoveChange(item) {\n    return {\n        id: item.id,\n        type: 'remove',\n    };\n}\n\n/**\n * Test whether an object is usable as an [`Node`](/api-reference/types/node).\n * In TypeScript this is a type guard that will narrow the type of whatever you pass in to\n * [`Node`](/api-reference/types/node) if it returns `true`.\n *\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Node if it returns true\n * @param element - The element to test.\n * @returns Tests whether the provided value can be used as a `Node`. If you're using TypeScript,\n * this function acts as a type guard and will narrow the type of the value to `Node` if it returns\n * `true`.\n *\n * @example\n * ```js\n *import { isNode } from '@xyflow/react';\n *\n *if (isNode(node)) {\n * // ...\n *}\n *```\n */\nconst isNode = (element) => isNodeBase(element);\n/**\n * Test whether an object is usable as an [`Edge`](/api-reference/types/edge).\n * In TypeScript this is a type guard that will narrow the type of whatever you pass in to\n * [`Edge`](/api-reference/types/edge) if it returns `true`.\n *\n * @public\n * @remarks In TypeScript this is a type guard that will narrow the type of whatever you pass in to Edge if it returns true\n * @param element - The element to test\n * @returns Tests whether the provided value can be used as an `Edge`. If you're using TypeScript,\n * this function acts as a type guard and will narrow the type of the value to `Edge` if it returns\n * `true`.\n *\n * @example\n * ```js\n *import { isEdge } from '@xyflow/react';\n *\n *if (isEdge(edge)) {\n * // ...\n *}\n *```\n */\nconst isEdge = (element) => isEdgeBase(element);\n// eslint-disable-next-line @typescript-eslint/no-empty-object-type\nfunction fixedForwardRef(render) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    return forwardRef(render);\n}\n\n// we need this hook to prevent a warning when using react-flow in SSR\nconst useIsomorphicLayoutEffect = typeof window !== 'undefined' ? useLayoutEffect : useEffect;\n\n/**\n * This hook returns a queue that can be used to batch updates.\n *\n * @param runQueue - a function that gets called when the queue is flushed\n * @internal\n *\n * @returns a Queue object\n */\nfunction useQueue(runQueue) {\n    /*\n     * Because we're using a ref above, we need some way to let React know when to\n     * actually process the queue. We increment this number any time we mutate the\n     * queue, creating a new state to trigger the layout effect below.\n     * Using a boolean dirty flag here instead would lead to issues related to\n     * automatic batching. (https://github.com/xyflow/xyflow/issues/4779)\n     */\n    const [serial, setSerial] = useState(BigInt(0));\n    /*\n     * A reference of all the batched updates to process before the next render. We\n     * want a reference here so multiple synchronous calls to `setNodes` etc can be\n     * batched together.\n     */\n    const [queue] = useState(() => createQueue(() => setSerial(n => n + BigInt(1))));\n    /*\n     * Layout effects are guaranteed to run before the next render which means we\n     * shouldn't run into any issues with stale state or weird issues that come from\n     * rendering things one frame later than expected (we used to use `setTimeout`).\n     */\n    useIsomorphicLayoutEffect(() => {\n        const queueItems = queue.get();\n        if (queueItems.length) {\n            runQueue(queueItems);\n            queue.reset();\n        }\n    }, [serial]);\n    return queue;\n}\nfunction createQueue(cb) {\n    let queue = [];\n    return {\n        get: () => queue,\n        reset: () => {\n            queue = [];\n        },\n        push: (item) => {\n            queue.push(item);\n            cb();\n        },\n    };\n}\n\nconst BatchContext = createContext(null);\n/**\n * This is a context provider that holds and processes the node and edge update queues\n * that are needed to handle setNodes, addNodes, setEdges and addEdges.\n *\n * @internal\n */\nfunction BatchProvider({ children, }) {\n    const store = useStoreApi();\n    const nodeQueueHandler = useCallback((queueItems) => {\n        const { nodes = [], setNodes, hasDefaultNodes, onNodesChange, nodeLookup, fitViewQueued } = store.getState();\n        /*\n         * This is essentially an `Array.reduce` in imperative clothing. Processing\n         * this queue is a relatively hot path so we'd like to avoid the overhead of\n         * array methods where we can.\n         */\n        let next = nodes;\n        for (const payload of queueItems) {\n            next = typeof payload === 'function' ? payload(next) : payload;\n        }\n        const changes = getElementsDiffChanges({\n            items: next,\n            lookup: nodeLookup,\n        });\n        if (hasDefaultNodes) {\n            setNodes(next);\n        }\n        // We only want to fire onNodesChange if there are changes to the nodes\n        if (changes.length > 0) {\n            onNodesChange?.(changes);\n        }\n        else if (fitViewQueued) {\n            // If there are no changes to the nodes, we still need to call setNodes\n            // to trigger a re-render and fitView.\n            window.requestAnimationFrame(() => {\n                const { fitViewQueued, nodes, setNodes } = store.getState();\n                if (fitViewQueued) {\n                    setNodes(nodes);\n                }\n            });\n        }\n    }, []);\n    const nodeQueue = useQueue(nodeQueueHandler);\n    const edgeQueueHandler = useCallback((queueItems) => {\n        const { edges = [], setEdges, hasDefaultEdges, onEdgesChange, edgeLookup } = store.getState();\n        let next = edges;\n        for (const payload of queueItems) {\n            next = typeof payload === 'function' ? payload(next) : payload;\n        }\n        if (hasDefaultEdges) {\n            setEdges(next);\n        }\n        else if (onEdgesChange) {\n            onEdgesChange(getElementsDiffChanges({\n                items: next,\n                lookup: edgeLookup,\n            }));\n        }\n    }, []);\n    const edgeQueue = useQueue(edgeQueueHandler);\n    const value = useMemo(() => ({ nodeQueue, edgeQueue }), []);\n    return jsx(BatchContext.Provider, { value: value, children: children });\n}\nfunction useBatchContext() {\n    const batchContext = useContext(BatchContext);\n    if (!batchContext) {\n        throw new Error('useBatchContext must be used within a BatchProvider');\n    }\n    return batchContext;\n}\n\nconst selector$k = (s) => !!s.panZoom;\n/**\n * This hook returns a ReactFlowInstance that can be used to update nodes and edges, manipulate the viewport, or query the current state of the flow.\n *\n * @public\n * @example\n * ```jsx\n *import { useCallback, useState } from 'react';\n *import { useReactFlow } from '@xyflow/react';\n *\n *export function NodeCounter() {\n *  const reactFlow = useReactFlow();\n *  const [count, setCount] = useState(0);\n *  const countNodes = useCallback(() => {\n *    setCount(reactFlow.getNodes().length);\n *    // you need to pass it as a dependency if you are using it with useEffect or useCallback\n *    // because at the first render, it's not initialized yet and some functions might not work.\n *  }, [reactFlow]);\n *\n *  return (\n *    <div>\n *      <button onClick={countNodes}>Update count</button>\n *      <p>There are {count} nodes in the flow.</p>\n *    </div>\n *  );\n *}\n *```\n */\nfunction useReactFlow() {\n    const viewportHelper = useViewportHelper();\n    const store = useStoreApi();\n    const batchContext = useBatchContext();\n    const viewportInitialized = useStore(selector$k);\n    const generalHelper = useMemo(() => {\n        const getInternalNode = (id) => store.getState().nodeLookup.get(id);\n        const setNodes = (payload) => {\n            batchContext.nodeQueue.push(payload);\n        };\n        const setEdges = (payload) => {\n            batchContext.edgeQueue.push(payload);\n        };\n        const getNodeRect = (node) => {\n            const { nodeLookup, nodeOrigin } = store.getState();\n            const nodeToUse = isNode(node) ? node : nodeLookup.get(node.id);\n            const position = nodeToUse.parentId\n                ? evaluateAbsolutePosition(nodeToUse.position, nodeToUse.measured, nodeToUse.parentId, nodeLookup, nodeOrigin)\n                : nodeToUse.position;\n            const nodeWithPosition = {\n                ...nodeToUse,\n                position,\n                width: nodeToUse.measured?.width ?? nodeToUse.width,\n                height: nodeToUse.measured?.height ?? nodeToUse.height,\n            };\n            return nodeToRect(nodeWithPosition);\n        };\n        const updateNode = (id, nodeUpdate, options = { replace: false }) => {\n            setNodes((prevNodes) => prevNodes.map((node) => {\n                if (node.id === id) {\n                    const nextNode = typeof nodeUpdate === 'function' ? nodeUpdate(node) : nodeUpdate;\n                    return options.replace && isNode(nextNode) ? nextNode : { ...node, ...nextNode };\n                }\n                return node;\n            }));\n        };\n        const updateEdge = (id, edgeUpdate, options = { replace: false }) => {\n            setEdges((prevEdges) => prevEdges.map((edge) => {\n                if (edge.id === id) {\n                    const nextEdge = typeof edgeUpdate === 'function' ? edgeUpdate(edge) : edgeUpdate;\n                    return options.replace && isEdge(nextEdge) ? nextEdge : { ...edge, ...nextEdge };\n                }\n                return edge;\n            }));\n        };\n        return {\n            getNodes: () => store.getState().nodes.map((n) => ({ ...n })),\n            getNode: (id) => getInternalNode(id)?.internals.userNode,\n            getInternalNode,\n            getEdges: () => {\n                const { edges = [] } = store.getState();\n                return edges.map((e) => ({ ...e }));\n            },\n            getEdge: (id) => store.getState().edgeLookup.get(id),\n            setNodes,\n            setEdges,\n            addNodes: (payload) => {\n                const newNodes = Array.isArray(payload) ? payload : [payload];\n                batchContext.nodeQueue.push((nodes) => [...nodes, ...newNodes]);\n            },\n            addEdges: (payload) => {\n                const newEdges = Array.isArray(payload) ? payload : [payload];\n                batchContext.edgeQueue.push((edges) => [...edges, ...newEdges]);\n            },\n            toObject: () => {\n                const { nodes = [], edges = [], transform } = store.getState();\n                const [x, y, zoom] = transform;\n                return {\n                    nodes: nodes.map((n) => ({ ...n })),\n                    edges: edges.map((e) => ({ ...e })),\n                    viewport: {\n                        x,\n                        y,\n                        zoom,\n                    },\n                };\n            },\n            deleteElements: async ({ nodes: nodesToRemove = [], edges: edgesToRemove = [] }) => {\n                const { nodes, edges, onNodesDelete, onEdgesDelete, triggerNodeChanges, triggerEdgeChanges, onDelete, onBeforeDelete, } = store.getState();\n                const { nodes: matchingNodes, edges: matchingEdges } = await getElementsToRemove({\n                    nodesToRemove,\n                    edgesToRemove,\n                    nodes,\n                    edges,\n                    onBeforeDelete,\n                });\n                const hasMatchingEdges = matchingEdges.length > 0;\n                const hasMatchingNodes = matchingNodes.length > 0;\n                if (hasMatchingEdges) {\n                    const edgeChanges = matchingEdges.map(elementToRemoveChange);\n                    onEdgesDelete?.(matchingEdges);\n                    triggerEdgeChanges(edgeChanges);\n                }\n                if (hasMatchingNodes) {\n                    const nodeChanges = matchingNodes.map(elementToRemoveChange);\n                    onNodesDelete?.(matchingNodes);\n                    triggerNodeChanges(nodeChanges);\n                }\n                if (hasMatchingNodes || hasMatchingEdges) {\n                    onDelete?.({ nodes: matchingNodes, edges: matchingEdges });\n                }\n                return { deletedNodes: matchingNodes, deletedEdges: matchingEdges };\n            },\n            getIntersectingNodes: (nodeOrRect, partially = true, nodes) => {\n                const isRect = isRectObject(nodeOrRect);\n                const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n                const hasNodesOption = nodes !== undefined;\n                if (!nodeRect) {\n                    return [];\n                }\n                return (nodes || store.getState().nodes).filter((n) => {\n                    const internalNode = store.getState().nodeLookup.get(n.id);\n                    if (internalNode && !isRect && (n.id === nodeOrRect.id || !internalNode.internals.positionAbsolute)) {\n                        return false;\n                    }\n                    const currNodeRect = nodeToRect(hasNodesOption ? n : internalNode);\n                    const overlappingArea = getOverlappingArea(currNodeRect, nodeRect);\n                    const partiallyVisible = partially && overlappingArea > 0;\n                    return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n                });\n            },\n            isNodeIntersecting: (nodeOrRect, area, partially = true) => {\n                const isRect = isRectObject(nodeOrRect);\n                const nodeRect = isRect ? nodeOrRect : getNodeRect(nodeOrRect);\n                if (!nodeRect) {\n                    return false;\n                }\n                const overlappingArea = getOverlappingArea(nodeRect, area);\n                const partiallyVisible = partially && overlappingArea > 0;\n                return partiallyVisible || overlappingArea >= nodeRect.width * nodeRect.height;\n            },\n            updateNode,\n            updateNodeData: (id, dataUpdate, options = { replace: false }) => {\n                updateNode(id, (node) => {\n                    const nextData = typeof dataUpdate === 'function' ? dataUpdate(node) : dataUpdate;\n                    return options.replace ? { ...node, data: nextData } : { ...node, data: { ...node.data, ...nextData } };\n                }, options);\n            },\n            updateEdge,\n            updateEdgeData: (id, dataUpdate, options = { replace: false }) => {\n                updateEdge(id, (edge) => {\n                    const nextData = typeof dataUpdate === 'function' ? dataUpdate(edge) : dataUpdate;\n                    return options.replace ? { ...edge, data: nextData } : { ...edge, data: { ...edge.data, ...nextData } };\n                }, options);\n            },\n            getNodesBounds: (nodes) => {\n                const { nodeLookup, nodeOrigin } = store.getState();\n                return getNodesBounds(nodes, { nodeLookup, nodeOrigin });\n            },\n            getHandleConnections: ({ type, id, nodeId }) => Array.from(store\n                .getState()\n                .connectionLookup.get(`${nodeId}-${type}${id ? `-${id}` : ''}`)\n                ?.values() ?? []),\n            getNodeConnections: ({ type, handleId, nodeId }) => Array.from(store\n                .getState()\n                .connectionLookup.get(`${nodeId}${type ? (handleId ? `-${type}-${handleId}` : `-${type}`) : ''}`)\n                ?.values() ?? []),\n            fitView: async (options) => {\n                // We either create a new Promise or reuse the existing one\n                // Even if fitView is called multiple times in a row, we only end up with a single Promise\n                const fitViewResolver = store.getState().fitViewResolver ?? withResolvers();\n                // We schedule a fitView by setting fitViewQueued and triggering a setNodes\n                store.setState({ fitViewQueued: true, fitViewOptions: options, fitViewResolver });\n                batchContext.nodeQueue.push((nodes) => [...nodes]);\n                return fitViewResolver.promise;\n            },\n        };\n    }, []);\n    return useMemo(() => {\n        return {\n            ...generalHelper,\n            ...viewportHelper,\n            viewportInitialized,\n        };\n    }, [viewportInitialized]);\n}\n\nconst selected = (item) => item.selected;\nconst win$1 = typeof window !== 'undefined' ? window : undefined;\n/**\n * Hook for handling global key events.\n *\n * @internal\n */\nfunction useGlobalKeyHandler({ deleteKeyCode, multiSelectionKeyCode, }) {\n    const store = useStoreApi();\n    const { deleteElements } = useReactFlow();\n    const deleteKeyPressed = useKeyPress(deleteKeyCode, { actInsideInputWithModifier: false });\n    const multiSelectionKeyPressed = useKeyPress(multiSelectionKeyCode, { target: win$1 });\n    useEffect(() => {\n        if (deleteKeyPressed) {\n            const { edges, nodes } = store.getState();\n            deleteElements({ nodes: nodes.filter(selected), edges: edges.filter(selected) });\n            store.setState({ nodesSelectionActive: false });\n        }\n    }, [deleteKeyPressed]);\n    useEffect(() => {\n        store.setState({ multiSelectionActive: multiSelectionKeyPressed });\n    }, [multiSelectionKeyPressed]);\n}\n\n/**\n * Hook for handling resize events.\n *\n * @internal\n */\nfunction useResizeHandler(domNode) {\n    const store = useStoreApi();\n    useEffect(() => {\n        const updateDimensions = () => {\n            if (!domNode.current) {\n                return false;\n            }\n            const size = getDimensions(domNode.current);\n            if (size.height === 0 || size.width === 0) {\n                store.getState().onError?.('004', errorMessages['error004']());\n            }\n            store.setState({ width: size.width || 500, height: size.height || 500 });\n        };\n        if (domNode.current) {\n            updateDimensions();\n            window.addEventListener('resize', updateDimensions);\n            const resizeObserver = new ResizeObserver(() => updateDimensions());\n            resizeObserver.observe(domNode.current);\n            return () => {\n                window.removeEventListener('resize', updateDimensions);\n                if (resizeObserver && domNode.current) {\n                    resizeObserver.unobserve(domNode.current);\n                }\n            };\n        }\n    }, []);\n}\n\nconst containerStyle = {\n    position: 'absolute',\n    width: '100%',\n    height: '100%',\n    top: 0,\n    left: 0,\n};\n\nconst selector$j = (s) => ({\n    userSelectionActive: s.userSelectionActive,\n    lib: s.lib,\n});\nfunction ZoomPane({ onPaneContextMenu, zoomOnScroll = true, zoomOnPinch = true, panOnScroll = false, panOnScrollSpeed = 0.5, panOnScrollMode = PanOnScrollMode.Free, zoomOnDoubleClick = true, panOnDrag = true, defaultViewport, translateExtent, minZoom, maxZoom, zoomActivationKeyCode, preventScrolling = true, children, noWheelClassName, noPanClassName, onViewportChange, isControlledViewport, paneClickDistance, }) {\n    const store = useStoreApi();\n    const zoomPane = useRef(null);\n    const { userSelectionActive, lib } = useStore(selector$j, shallow);\n    const zoomActivationKeyPressed = useKeyPress(zoomActivationKeyCode);\n    const panZoom = useRef();\n    useResizeHandler(zoomPane);\n    const onTransformChange = useCallback((transform) => {\n        onViewportChange?.({ x: transform[0], y: transform[1], zoom: transform[2] });\n        if (!isControlledViewport) {\n            store.setState({ transform });\n        }\n    }, [onViewportChange, isControlledViewport]);\n    useEffect(() => {\n        if (zoomPane.current) {\n            panZoom.current = XYPanZoom({\n                domNode: zoomPane.current,\n                minZoom,\n                maxZoom,\n                translateExtent,\n                viewport: defaultViewport,\n                paneClickDistance,\n                onDraggingChange: (paneDragging) => store.setState({ paneDragging }),\n                onPanZoomStart: (event, vp) => {\n                    const { onViewportChangeStart, onMoveStart } = store.getState();\n                    onMoveStart?.(event, vp);\n                    onViewportChangeStart?.(vp);\n                },\n                onPanZoom: (event, vp) => {\n                    const { onViewportChange, onMove } = store.getState();\n                    onMove?.(event, vp);\n                    onViewportChange?.(vp);\n                },\n                onPanZoomEnd: (event, vp) => {\n                    const { onViewportChangeEnd, onMoveEnd } = store.getState();\n                    onMoveEnd?.(event, vp);\n                    onViewportChangeEnd?.(vp);\n                },\n            });\n            const { x, y, zoom } = panZoom.current.getViewport();\n            store.setState({\n                panZoom: panZoom.current,\n                transform: [x, y, zoom],\n                domNode: zoomPane.current.closest('.react-flow'),\n            });\n            return () => {\n                panZoom.current?.destroy();\n            };\n        }\n    }, []);\n    useEffect(() => {\n        panZoom.current?.update({\n            onPaneContextMenu,\n            zoomOnScroll,\n            zoomOnPinch,\n            panOnScroll,\n            panOnScrollSpeed,\n            panOnScrollMode,\n            zoomOnDoubleClick,\n            panOnDrag,\n            zoomActivationKeyPressed,\n            preventScrolling,\n            noPanClassName,\n            userSelectionActive,\n            noWheelClassName,\n            lib,\n            onTransformChange,\n        });\n    }, [\n        onPaneContextMenu,\n        zoomOnScroll,\n        zoomOnPinch,\n        panOnScroll,\n        panOnScrollSpeed,\n        panOnScrollMode,\n        zoomOnDoubleClick,\n        panOnDrag,\n        zoomActivationKeyPressed,\n        preventScrolling,\n        noPanClassName,\n        userSelectionActive,\n        noWheelClassName,\n        lib,\n        onTransformChange,\n    ]);\n    return (jsx(\"div\", { className: \"react-flow__renderer\", ref: zoomPane, style: containerStyle, children: children }));\n}\n\nconst selector$i = (s) => ({\n    userSelectionActive: s.userSelectionActive,\n    userSelectionRect: s.userSelectionRect,\n});\nfunction UserSelection() {\n    const { userSelectionActive, userSelectionRect } = useStore(selector$i, shallow);\n    const isActive = userSelectionActive && userSelectionRect;\n    if (!isActive) {\n        return null;\n    }\n    return (jsx(\"div\", { className: \"react-flow__selection react-flow__container\", style: {\n            width: userSelectionRect.width,\n            height: userSelectionRect.height,\n            transform: `translate(${userSelectionRect.x}px, ${userSelectionRect.y}px)`,\n        } }));\n}\n\nconst wrapHandler = (handler, containerRef) => {\n    return (event) => {\n        if (event.target !== containerRef.current) {\n            return;\n        }\n        handler?.(event);\n    };\n};\nconst selector$h = (s) => ({\n    userSelectionActive: s.userSelectionActive,\n    elementsSelectable: s.elementsSelectable,\n    connectionInProgress: s.connection.inProgress,\n    dragging: s.paneDragging,\n});\nfunction Pane({ isSelecting, selectionKeyPressed, selectionMode = SelectionMode.Full, panOnDrag, selectionOnDrag, onSelectionStart, onSelectionEnd, onPaneClick, onPaneContextMenu, onPaneScroll, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, children, }) {\n    const store = useStoreApi();\n    const { userSelectionActive, elementsSelectable, dragging, connectionInProgress } = useStore(selector$h, shallow);\n    const hasActiveSelection = elementsSelectable && (isSelecting || userSelectionActive);\n    const container = useRef(null);\n    const containerBounds = useRef();\n    const selectedNodeIds = useRef(new Set());\n    const selectedEdgeIds = useRef(new Set());\n    // Used to prevent click events when the user lets go of the selectionKey during a selection\n    const selectionInProgress = useRef(false);\n    const selectionStarted = useRef(false);\n    const onClick = (event) => {\n        // We prevent click events when the user let go of the selectionKey during a selection\n        // We also prevent click events when a connection is in progress\n        if (selectionInProgress.current || connectionInProgress) {\n            selectionInProgress.current = false;\n            return;\n        }\n        onPaneClick?.(event);\n        store.getState().resetSelectedElements();\n        store.setState({ nodesSelectionActive: false });\n    };\n    const onContextMenu = (event) => {\n        if (Array.isArray(panOnDrag) && panOnDrag?.includes(2)) {\n            event.preventDefault();\n            return;\n        }\n        onPaneContextMenu?.(event);\n    };\n    const onWheel = onPaneScroll ? (event) => onPaneScroll(event) : undefined;\n    const onPointerDown = (event) => {\n        const { resetSelectedElements, domNode } = store.getState();\n        containerBounds.current = domNode?.getBoundingClientRect();\n        if (!elementsSelectable ||\n            !isSelecting ||\n            event.button !== 0 ||\n            event.target !== container.current ||\n            !containerBounds.current) {\n            return;\n        }\n        event.target?.setPointerCapture?.(event.pointerId);\n        selectionStarted.current = true;\n        selectionInProgress.current = false;\n        const { x, y } = getEventPosition(event.nativeEvent, containerBounds.current);\n        resetSelectedElements();\n        store.setState({\n            userSelectionRect: {\n                width: 0,\n                height: 0,\n                startX: x,\n                startY: y,\n                x,\n                y,\n            },\n        });\n        onSelectionStart?.(event);\n    };\n    const onPointerMove = (event) => {\n        const { userSelectionRect, transform, nodeLookup, edgeLookup, connectionLookup, triggerNodeChanges, triggerEdgeChanges, defaultEdgeOptions, } = store.getState();\n        if (!containerBounds.current || !userSelectionRect) {\n            return;\n        }\n        selectionInProgress.current = true;\n        const { x: mouseX, y: mouseY } = getEventPosition(event.nativeEvent, containerBounds.current);\n        const { startX, startY } = userSelectionRect;\n        const nextUserSelectRect = {\n            startX,\n            startY,\n            x: mouseX < startX ? mouseX : startX,\n            y: mouseY < startY ? mouseY : startY,\n            width: Math.abs(mouseX - startX),\n            height: Math.abs(mouseY - startY),\n        };\n        const prevSelectedNodeIds = selectedNodeIds.current;\n        const prevSelectedEdgeIds = selectedEdgeIds.current;\n        selectedNodeIds.current = new Set(getNodesInside(nodeLookup, nextUserSelectRect, transform, selectionMode === SelectionMode.Partial, true).map((node) => node.id));\n        selectedEdgeIds.current = new Set();\n        const edgesSelectable = defaultEdgeOptions?.selectable ?? true;\n        // We look for all edges connected to the selected nodes\n        for (const nodeId of selectedNodeIds.current) {\n            const connections = connectionLookup.get(nodeId);\n            if (!connections)\n                continue;\n            for (const { edgeId } of connections.values()) {\n                const edge = edgeLookup.get(edgeId);\n                if (edge && (edge.selectable ?? edgesSelectable)) {\n                    selectedEdgeIds.current.add(edgeId);\n                }\n            }\n        }\n        if (!areSetsEqual(prevSelectedNodeIds, selectedNodeIds.current)) {\n            const changes = getSelectionChanges(nodeLookup, selectedNodeIds.current, true);\n            triggerNodeChanges(changes);\n        }\n        if (!areSetsEqual(prevSelectedEdgeIds, selectedEdgeIds.current)) {\n            const changes = getSelectionChanges(edgeLookup, selectedEdgeIds.current);\n            triggerEdgeChanges(changes);\n        }\n        store.setState({\n            userSelectionRect: nextUserSelectRect,\n            userSelectionActive: true,\n            nodesSelectionActive: false,\n        });\n    };\n    const onPointerUp = (event) => {\n        if (event.button !== 0 || !selectionStarted.current) {\n            return;\n        }\n        event.target?.releasePointerCapture?.(event.pointerId);\n        const { userSelectionRect } = store.getState();\n        /*\n         * We only want to trigger click functions when in selection mode if\n         * the user did not move the mouse.\n         */\n        if (!userSelectionActive && userSelectionRect && event.target === container.current) {\n            onClick?.(event);\n        }\n        store.setState({\n            userSelectionActive: false,\n            userSelectionRect: null,\n            nodesSelectionActive: selectedNodeIds.current.size > 0,\n        });\n        onSelectionEnd?.(event);\n        /*\n         * If the user kept holding the selectionKey during the selection,\n         * we need to reset the selectionInProgress, so the next click event is not prevented\n         */\n        if (selectionKeyPressed || selectionOnDrag) {\n            selectionInProgress.current = false;\n        }\n        selectionStarted.current = false;\n    };\n    const draggable = panOnDrag === true || (Array.isArray(panOnDrag) && panOnDrag.includes(0));\n    return (jsxs(\"div\", { className: cc(['react-flow__pane', { draggable, dragging, selection: isSelecting }]), onClick: hasActiveSelection ? undefined : wrapHandler(onClick, container), onContextMenu: wrapHandler(onContextMenu, container), onWheel: wrapHandler(onWheel, container), onPointerEnter: hasActiveSelection ? undefined : onPaneMouseEnter, onPointerDown: hasActiveSelection ? onPointerDown : onPaneMouseMove, onPointerMove: hasActiveSelection ? onPointerMove : onPaneMouseMove, onPointerUp: hasActiveSelection ? onPointerUp : undefined, onPointerLeave: onPaneMouseLeave, ref: container, style: containerStyle, children: [children, jsx(UserSelection, {})] }));\n}\n\n/*\n * this handler is called by\n * 1. the click handler when node is not draggable or selectNodesOnDrag = false\n * or\n * 2. the on drag start handler when node is draggable and selectNodesOnDrag = true\n */\nfunction handleNodeClick({ id, store, unselect = false, nodeRef, }) {\n    const { addSelectedNodes, unselectNodesAndEdges, multiSelectionActive, nodeLookup, onError } = store.getState();\n    const node = nodeLookup.get(id);\n    if (!node) {\n        onError?.('012', errorMessages['error012'](id));\n        return;\n    }\n    store.setState({ nodesSelectionActive: false });\n    if (!node.selected) {\n        addSelectedNodes([id]);\n    }\n    else if (unselect || (node.selected && multiSelectionActive)) {\n        unselectNodesAndEdges({ nodes: [node], edges: [] });\n        requestAnimationFrame(() => nodeRef?.current?.blur());\n    }\n}\n\n/**\n * Hook for calling XYDrag helper from @xyflow/system.\n *\n * @internal\n */\nfunction useDrag({ nodeRef, disabled = false, noDragClassName, handleSelector, nodeId, isSelectable, nodeClickDistance, }) {\n    const store = useStoreApi();\n    const [dragging, setDragging] = useState(false);\n    const xyDrag = useRef();\n    useEffect(() => {\n        xyDrag.current = XYDrag({\n            getStoreItems: () => store.getState(),\n            onNodeMouseDown: (id) => {\n                handleNodeClick({\n                    id,\n                    store,\n                    nodeRef,\n                });\n            },\n            onDragStart: () => {\n                setDragging(true);\n            },\n            onDragStop: () => {\n                setDragging(false);\n            },\n        });\n    }, []);\n    useEffect(() => {\n        if (disabled) {\n            xyDrag.current?.destroy();\n        }\n        else if (nodeRef.current) {\n            xyDrag.current?.update({\n                noDragClassName,\n                handleSelector,\n                domNode: nodeRef.current,\n                isSelectable,\n                nodeId,\n                nodeClickDistance,\n            });\n            return () => {\n                xyDrag.current?.destroy();\n            };\n        }\n    }, [noDragClassName, handleSelector, disabled, isSelectable, nodeRef, nodeId]);\n    return dragging;\n}\n\nconst selectedAndDraggable = (nodesDraggable) => (n) => n.selected && (n.draggable || (nodesDraggable && typeof n.draggable === 'undefined'));\n/**\n * Hook for updating node positions by passing a direction and factor\n *\n * @internal\n * @returns function for updating node positions\n */\nfunction useMoveSelectedNodes() {\n    const store = useStoreApi();\n    const moveSelectedNodes = useCallback((params) => {\n        const { nodeExtent, snapToGrid, snapGrid, nodesDraggable, onError, updateNodePositions, nodeLookup, nodeOrigin } = store.getState();\n        const nodeUpdates = new Map();\n        const isSelected = selectedAndDraggable(nodesDraggable);\n        /*\n         * by default a node moves 5px on each key press\n         * if snap grid is enabled, we use that for the velocity\n         */\n        const xVelo = snapToGrid ? snapGrid[0] : 5;\n        const yVelo = snapToGrid ? snapGrid[1] : 5;\n        const xDiff = params.direction.x * xVelo * params.factor;\n        const yDiff = params.direction.y * yVelo * params.factor;\n        for (const [, node] of nodeLookup) {\n            if (!isSelected(node)) {\n                continue;\n            }\n            let nextPosition = {\n                x: node.internals.positionAbsolute.x + xDiff,\n                y: node.internals.positionAbsolute.y + yDiff,\n            };\n            if (snapToGrid) {\n                nextPosition = snapPosition(nextPosition, snapGrid);\n            }\n            const { position, positionAbsolute } = calculateNodePosition({\n                nodeId: node.id,\n                nextPosition,\n                nodeLookup,\n                nodeExtent,\n                nodeOrigin,\n                onError,\n            });\n            node.position = position;\n            node.internals.positionAbsolute = positionAbsolute;\n            nodeUpdates.set(node.id, node);\n        }\n        updateNodePositions(nodeUpdates);\n    }, []);\n    return moveSelectedNodes;\n}\n\nconst NodeIdContext = createContext(null);\nconst Provider = NodeIdContext.Provider;\nNodeIdContext.Consumer;\n/**\n * You can use this hook to get the id of the node it is used inside. It is useful\n * if you need the node's id deeper in the render tree but don't want to manually\n * drill down the id as a prop.\n *\n * @public\n * @returns The id for a node in the flow.\n *\n * @example\n *```jsx\n *import { useNodeId } from '@xyflow/react';\n *\n *export default function CustomNode() {\n *  return (\n *    <div>\n *      <span>This node has an id of </span>\n *      <NodeIdDisplay />\n *    </div>\n *  );\n *}\n *\n *function NodeIdDisplay() {\n *  const nodeId = useNodeId();\n *\n *  return <span>{nodeId}</span>;\n *}\n *```\n */\nconst useNodeId = () => {\n    const nodeId = useContext(NodeIdContext);\n    return nodeId;\n};\n\nconst selector$g = (s) => ({\n    connectOnClick: s.connectOnClick,\n    noPanClassName: s.noPanClassName,\n    rfId: s.rfId,\n});\nconst connectingSelector = (nodeId, handleId, type) => (state) => {\n    const { connectionClickStartHandle: clickHandle, connectionMode, connection } = state;\n    const { fromHandle, toHandle, isValid } = connection;\n    const connectingTo = toHandle?.nodeId === nodeId && toHandle?.id === handleId && toHandle?.type === type;\n    return {\n        connectingFrom: fromHandle?.nodeId === nodeId && fromHandle?.id === handleId && fromHandle?.type === type,\n        connectingTo,\n        clickConnecting: clickHandle?.nodeId === nodeId && clickHandle?.id === handleId && clickHandle?.type === type,\n        isPossibleEndHandle: connectionMode === ConnectionMode.Strict\n            ? fromHandle?.type !== type\n            : nodeId !== fromHandle?.nodeId || handleId !== fromHandle?.id,\n        connectionInProcess: !!fromHandle,\n        clickConnectionInProcess: !!clickHandle,\n        valid: connectingTo && isValid,\n    };\n};\nfunction HandleComponent({ type = 'source', position = Position.Top, isValidConnection, isConnectable = true, isConnectableStart = true, isConnectableEnd = true, id, onConnect, children, className, onMouseDown, onTouchStart, ...rest }, ref) {\n    const handleId = id || null;\n    const isTarget = type === 'target';\n    const store = useStoreApi();\n    const nodeId = useNodeId();\n    const { connectOnClick, noPanClassName, rfId } = useStore(selector$g, shallow);\n    const { connectingFrom, connectingTo, clickConnecting, isPossibleEndHandle, connectionInProcess, clickConnectionInProcess, valid, } = useStore(connectingSelector(nodeId, handleId, type), shallow);\n    if (!nodeId) {\n        store.getState().onError?.('010', errorMessages['error010']());\n    }\n    const onConnectExtended = (params) => {\n        const { defaultEdgeOptions, onConnect: onConnectAction, hasDefaultEdges } = store.getState();\n        const edgeParams = {\n            ...defaultEdgeOptions,\n            ...params,\n        };\n        if (hasDefaultEdges) {\n            const { edges, setEdges } = store.getState();\n            setEdges(addEdge(edgeParams, edges));\n        }\n        onConnectAction?.(edgeParams);\n        onConnect?.(edgeParams);\n    };\n    const onPointerDown = (event) => {\n        if (!nodeId) {\n            return;\n        }\n        const isMouseTriggered = isMouseEvent(event.nativeEvent);\n        if (isConnectableStart &&\n            ((isMouseTriggered && event.button === 0) || !isMouseTriggered)) {\n            const currentStore = store.getState();\n            XYHandle.onPointerDown(event.nativeEvent, {\n                autoPanOnConnect: currentStore.autoPanOnConnect,\n                connectionMode: currentStore.connectionMode,\n                connectionRadius: currentStore.connectionRadius,\n                domNode: currentStore.domNode,\n                nodeLookup: currentStore.nodeLookup,\n                lib: currentStore.lib,\n                isTarget,\n                handleId,\n                nodeId,\n                flowId: currentStore.rfId,\n                panBy: currentStore.panBy,\n                cancelConnection: currentStore.cancelConnection,\n                onConnectStart: currentStore.onConnectStart,\n                onConnectEnd: currentStore.onConnectEnd,\n                updateConnection: currentStore.updateConnection,\n                onConnect: onConnectExtended,\n                isValidConnection: isValidConnection || currentStore.isValidConnection,\n                getTransform: () => store.getState().transform,\n                getFromHandle: () => store.getState().connection.fromHandle,\n                autoPanSpeed: currentStore.autoPanSpeed,\n                dragThreshold: currentStore.connectionDragThreshold,\n            });\n        }\n        if (isMouseTriggered) {\n            onMouseDown?.(event);\n        }\n        else {\n            onTouchStart?.(event);\n        }\n    };\n    const onClick = (event) => {\n        const { onClickConnectStart, onClickConnectEnd, connectionClickStartHandle, connectionMode, isValidConnection: isValidConnectionStore, lib, rfId: flowId, nodeLookup, connection: connectionState, } = store.getState();\n        if (!nodeId || (!connectionClickStartHandle && !isConnectableStart)) {\n            return;\n        }\n        if (!connectionClickStartHandle) {\n            onClickConnectStart?.(event.nativeEvent, { nodeId, handleId, handleType: type });\n            store.setState({ connectionClickStartHandle: { nodeId, type, id: handleId } });\n            return;\n        }\n        const doc = getHostForElement(event.target);\n        const isValidConnectionHandler = isValidConnection || isValidConnectionStore;\n        const { connection, isValid } = XYHandle.isValid(event.nativeEvent, {\n            handle: {\n                nodeId,\n                id: handleId,\n                type,\n            },\n            connectionMode,\n            fromNodeId: connectionClickStartHandle.nodeId,\n            fromHandleId: connectionClickStartHandle.id || null,\n            fromType: connectionClickStartHandle.type,\n            isValidConnection: isValidConnectionHandler,\n            flowId,\n            doc,\n            lib,\n            nodeLookup,\n        });\n        if (isValid && connection) {\n            onConnectExtended(connection);\n        }\n        const connectionClone = structuredClone(connectionState);\n        delete connectionClone.inProgress;\n        connectionClone.toPosition = connectionClone.toHandle ? connectionClone.toHandle.position : null;\n        onClickConnectEnd?.(event, connectionClone);\n        store.setState({ connectionClickStartHandle: null });\n    };\n    return (jsx(\"div\", { \"data-handleid\": handleId, \"data-nodeid\": nodeId, \"data-handlepos\": position, \"data-id\": `${rfId}-${nodeId}-${handleId}-${type}`, className: cc([\n            'react-flow__handle',\n            `react-flow__handle-${position}`,\n            'nodrag',\n            noPanClassName,\n            className,\n            {\n                source: !isTarget,\n                target: isTarget,\n                connectable: isConnectable,\n                connectablestart: isConnectableStart,\n                connectableend: isConnectableEnd,\n                clickconnecting: clickConnecting,\n                connectingfrom: connectingFrom,\n                connectingto: connectingTo,\n                valid,\n                /*\n                 * shows where you can start a connection from\n                 * and where you can end it while connecting\n                 */\n                connectionindicator: isConnectable &&\n                    (!connectionInProcess || isPossibleEndHandle) &&\n                    (connectionInProcess || clickConnectionInProcess ? isConnectableEnd : isConnectableStart),\n            },\n        ]), onMouseDown: onPointerDown, onTouchStart: onPointerDown, onClick: connectOnClick ? onClick : undefined, ref: ref, ...rest, children: children }));\n}\n/**\n * The `<Handle />` component is used in your [custom nodes](/learn/customization/custom-nodes)\n * to define connection points.\n *\n *@public\n *\n *@example\n *\n *```jsx\n *import { Handle, Position } from '@xyflow/react';\n *\n *export function CustomNode({ data }) {\n *  return (\n *    <>\n *      <div style={{ padding: '10px 20px' }}>\n *        {data.label}\n *      </div>\n *\n *      <Handle type=\"target\" position={Position.Left} />\n *      <Handle type=\"source\" position={Position.Right} />\n *    </>\n *  );\n *};\n *```\n */\nconst Handle = memo(fixedForwardRef(HandleComponent));\n\nfunction InputNode({ data, isConnectable, sourcePosition = Position.Bottom }) {\n    return (jsxs(Fragment, { children: [data?.label, jsx(Handle, { type: \"source\", position: sourcePosition, isConnectable: isConnectable })] }));\n}\n\nfunction DefaultNode({ data, isConnectable, targetPosition = Position.Top, sourcePosition = Position.Bottom, }) {\n    return (jsxs(Fragment, { children: [jsx(Handle, { type: \"target\", position: targetPosition, isConnectable: isConnectable }), data?.label, jsx(Handle, { type: \"source\", position: sourcePosition, isConnectable: isConnectable })] }));\n}\n\nfunction GroupNode() {\n    return null;\n}\n\nfunction OutputNode({ data, isConnectable, targetPosition = Position.Top }) {\n    return (jsxs(Fragment, { children: [jsx(Handle, { type: \"target\", position: targetPosition, isConnectable: isConnectable }), data?.label] }));\n}\n\nconst arrowKeyDiffs = {\n    ArrowUp: { x: 0, y: -1 },\n    ArrowDown: { x: 0, y: 1 },\n    ArrowLeft: { x: -1, y: 0 },\n    ArrowRight: { x: 1, y: 0 },\n};\nconst builtinNodeTypes = {\n    input: InputNode,\n    default: DefaultNode,\n    output: OutputNode,\n    group: GroupNode,\n};\nfunction getNodeInlineStyleDimensions(node) {\n    if (node.internals.handleBounds === undefined) {\n        return {\n            width: node.width ?? node.initialWidth ?? node.style?.width,\n            height: node.height ?? node.initialHeight ?? node.style?.height,\n        };\n    }\n    return {\n        width: node.width ?? node.style?.width,\n        height: node.height ?? node.style?.height,\n    };\n}\n\nconst selector$f = (s) => {\n    const { width, height, x, y } = getInternalNodesBounds(s.nodeLookup, {\n        filter: (node) => !!node.selected,\n    });\n    return {\n        width: isNumeric(width) ? width : null,\n        height: isNumeric(height) ? height : null,\n        userSelectionActive: s.userSelectionActive,\n        transformString: `translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]}) translate(${x}px,${y}px)`,\n    };\n};\nfunction NodesSelection({ onSelectionContextMenu, noPanClassName, disableKeyboardA11y, }) {\n    const store = useStoreApi();\n    const { width, height, transformString, userSelectionActive } = useStore(selector$f, shallow);\n    const moveSelectedNodes = useMoveSelectedNodes();\n    const nodeRef = useRef(null);\n    useEffect(() => {\n        if (!disableKeyboardA11y) {\n            nodeRef.current?.focus({\n                preventScroll: true,\n            });\n        }\n    }, [disableKeyboardA11y]);\n    useDrag({\n        nodeRef,\n    });\n    if (userSelectionActive || !width || !height) {\n        return null;\n    }\n    const onContextMenu = onSelectionContextMenu\n        ? (event) => {\n            const selectedNodes = store.getState().nodes.filter((n) => n.selected);\n            onSelectionContextMenu(event, selectedNodes);\n        }\n        : undefined;\n    const onKeyDown = (event) => {\n        if (Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n            event.preventDefault();\n            moveSelectedNodes({\n                direction: arrowKeyDiffs[event.key],\n                factor: event.shiftKey ? 4 : 1,\n            });\n        }\n    };\n    return (jsx(\"div\", { className: cc(['react-flow__nodesselection', 'react-flow__container', noPanClassName]), style: {\n            transform: transformString,\n        }, children: jsx(\"div\", { ref: nodeRef, className: \"react-flow__nodesselection-rect\", onContextMenu: onContextMenu, tabIndex: disableKeyboardA11y ? undefined : -1, onKeyDown: disableKeyboardA11y ? undefined : onKeyDown, style: {\n                width,\n                height,\n            } }) }));\n}\n\nconst win = typeof window !== 'undefined' ? window : undefined;\nconst selector$e = (s) => {\n    return { nodesSelectionActive: s.nodesSelectionActive, userSelectionActive: s.userSelectionActive };\n};\nfunction FlowRendererComponent({ children, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneContextMenu, onPaneScroll, paneClickDistance, deleteKeyCode, selectionKeyCode, selectionOnDrag, selectionMode, onSelectionStart, onSelectionEnd, multiSelectionKeyCode, panActivationKeyCode, zoomActivationKeyCode, elementsSelectable, zoomOnScroll, zoomOnPinch, panOnScroll: _panOnScroll, panOnScrollSpeed, panOnScrollMode, zoomOnDoubleClick, panOnDrag: _panOnDrag, defaultViewport, translateExtent, minZoom, maxZoom, preventScrolling, onSelectionContextMenu, noWheelClassName, noPanClassName, disableKeyboardA11y, onViewportChange, isControlledViewport, }) {\n    const { nodesSelectionActive, userSelectionActive } = useStore(selector$e);\n    const selectionKeyPressed = useKeyPress(selectionKeyCode, { target: win });\n    const panActivationKeyPressed = useKeyPress(panActivationKeyCode, { target: win });\n    const panOnDrag = panActivationKeyPressed || _panOnDrag;\n    const panOnScroll = panActivationKeyPressed || _panOnScroll;\n    const _selectionOnDrag = selectionOnDrag && panOnDrag !== true;\n    const isSelecting = selectionKeyPressed || userSelectionActive || _selectionOnDrag;\n    useGlobalKeyHandler({ deleteKeyCode, multiSelectionKeyCode });\n    return (jsx(ZoomPane, { onPaneContextMenu: onPaneContextMenu, elementsSelectable: elementsSelectable, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, zoomOnDoubleClick: zoomOnDoubleClick, panOnDrag: !selectionKeyPressed && panOnDrag, defaultViewport: defaultViewport, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, zoomActivationKeyCode: zoomActivationKeyCode, preventScrolling: preventScrolling, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, onViewportChange: onViewportChange, isControlledViewport: isControlledViewport, paneClickDistance: paneClickDistance, children: jsxs(Pane, { onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneContextMenu: onPaneContextMenu, onPaneScroll: onPaneScroll, panOnDrag: panOnDrag, isSelecting: !!isSelecting, selectionMode: selectionMode, selectionKeyPressed: selectionKeyPressed, selectionOnDrag: _selectionOnDrag, children: [children, nodesSelectionActive && (jsx(NodesSelection, { onSelectionContextMenu: onSelectionContextMenu, noPanClassName: noPanClassName, disableKeyboardA11y: disableKeyboardA11y }))] }) }));\n}\nFlowRendererComponent.displayName = 'FlowRenderer';\nconst FlowRenderer = memo(FlowRendererComponent);\n\nconst selector$d = (onlyRenderVisible) => (s) => {\n    return onlyRenderVisible\n        ? getNodesInside(s.nodeLookup, { x: 0, y: 0, width: s.width, height: s.height }, s.transform, true).map((node) => node.id)\n        : Array.from(s.nodeLookup.keys());\n};\n/**\n * Hook for getting the visible node ids from the store.\n *\n * @internal\n * @param onlyRenderVisible\n * @returns array with visible node ids\n */\nfunction useVisibleNodeIds(onlyRenderVisible) {\n    const nodeIds = useStore(useCallback(selector$d(onlyRenderVisible), [onlyRenderVisible]), shallow);\n    return nodeIds;\n}\n\nconst selector$c = (s) => s.updateNodeInternals;\nfunction useResizeObserver() {\n    const updateNodeInternals = useStore(selector$c);\n    const [resizeObserver] = useState(() => {\n        if (typeof ResizeObserver === 'undefined') {\n            return null;\n        }\n        return new ResizeObserver((entries) => {\n            const updates = new Map();\n            entries.forEach((entry) => {\n                const id = entry.target.getAttribute('data-id');\n                updates.set(id, {\n                    id,\n                    nodeElement: entry.target,\n                    force: true,\n                });\n            });\n            updateNodeInternals(updates);\n        });\n    });\n    useEffect(() => {\n        return () => {\n            resizeObserver?.disconnect();\n        };\n    }, [resizeObserver]);\n    return resizeObserver;\n}\n\n/**\n * Hook to handle the resize observation + internal updates for the passed node.\n *\n * @internal\n * @returns nodeRef - reference to the node element\n */\nfunction useNodeObserver({ node, nodeType, hasDimensions, resizeObserver, }) {\n    const store = useStoreApi();\n    const nodeRef = useRef(null);\n    const observedNode = useRef(null);\n    const prevSourcePosition = useRef(node.sourcePosition);\n    const prevTargetPosition = useRef(node.targetPosition);\n    const prevType = useRef(nodeType);\n    const isInitialized = hasDimensions && !!node.internals.handleBounds;\n    useEffect(() => {\n        if (nodeRef.current && !node.hidden && (!isInitialized || observedNode.current !== nodeRef.current)) {\n            if (observedNode.current) {\n                resizeObserver?.unobserve(observedNode.current);\n            }\n            resizeObserver?.observe(nodeRef.current);\n            observedNode.current = nodeRef.current;\n        }\n    }, [isInitialized, node.hidden]);\n    useEffect(() => {\n        return () => {\n            if (observedNode.current) {\n                resizeObserver?.unobserve(observedNode.current);\n                observedNode.current = null;\n            }\n        };\n    }, []);\n    useEffect(() => {\n        if (nodeRef.current) {\n            /*\n             * when the user programmatically changes the source or handle position, we need to update the internals\n             * to make sure the edges are updated correctly\n             */\n            const typeChanged = prevType.current !== nodeType;\n            const sourcePosChanged = prevSourcePosition.current !== node.sourcePosition;\n            const targetPosChanged = prevTargetPosition.current !== node.targetPosition;\n            if (typeChanged || sourcePosChanged || targetPosChanged) {\n                prevType.current = nodeType;\n                prevSourcePosition.current = node.sourcePosition;\n                prevTargetPosition.current = node.targetPosition;\n                store\n                    .getState()\n                    .updateNodeInternals(new Map([[node.id, { id: node.id, nodeElement: nodeRef.current, force: true }]]));\n            }\n        }\n    }, [node.id, nodeType, node.sourcePosition, node.targetPosition]);\n    return nodeRef;\n}\n\nfunction NodeWrapper({ id, onClick, onMouseEnter, onMouseMove, onMouseLeave, onContextMenu, onDoubleClick, nodesDraggable, elementsSelectable, nodesConnectable, nodesFocusable, resizeObserver, noDragClassName, noPanClassName, disableKeyboardA11y, rfId, nodeTypes, nodeClickDistance, onError, }) {\n    const { node, internals, isParent } = useStore((s) => {\n        const node = s.nodeLookup.get(id);\n        const isParent = s.parentLookup.has(id);\n        return {\n            node,\n            internals: node.internals,\n            isParent,\n        };\n    }, shallow);\n    let nodeType = node.type || 'default';\n    let NodeComponent = nodeTypes?.[nodeType] || builtinNodeTypes[nodeType];\n    if (NodeComponent === undefined) {\n        onError?.('003', errorMessages['error003'](nodeType));\n        nodeType = 'default';\n        NodeComponent = builtinNodeTypes.default;\n    }\n    const isDraggable = !!(node.draggable || (nodesDraggable && typeof node.draggable === 'undefined'));\n    const isSelectable = !!(node.selectable || (elementsSelectable && typeof node.selectable === 'undefined'));\n    const isConnectable = !!(node.connectable || (nodesConnectable && typeof node.connectable === 'undefined'));\n    const isFocusable = !!(node.focusable || (nodesFocusable && typeof node.focusable === 'undefined'));\n    const store = useStoreApi();\n    const hasDimensions = nodeHasDimensions(node);\n    const nodeRef = useNodeObserver({ node, nodeType, hasDimensions, resizeObserver });\n    const dragging = useDrag({\n        nodeRef,\n        disabled: node.hidden || !isDraggable,\n        noDragClassName,\n        handleSelector: node.dragHandle,\n        nodeId: id,\n        isSelectable,\n        nodeClickDistance,\n    });\n    const moveSelectedNodes = useMoveSelectedNodes();\n    if (node.hidden) {\n        return null;\n    }\n    const nodeDimensions = getNodeDimensions(node);\n    const inlineDimensions = getNodeInlineStyleDimensions(node);\n    const hasPointerEvents = isSelectable || isDraggable || onClick || onMouseEnter || onMouseMove || onMouseLeave;\n    const onMouseEnterHandler = onMouseEnter\n        ? (event) => onMouseEnter(event, { ...internals.userNode })\n        : undefined;\n    const onMouseMoveHandler = onMouseMove\n        ? (event) => onMouseMove(event, { ...internals.userNode })\n        : undefined;\n    const onMouseLeaveHandler = onMouseLeave\n        ? (event) => onMouseLeave(event, { ...internals.userNode })\n        : undefined;\n    const onContextMenuHandler = onContextMenu\n        ? (event) => onContextMenu(event, { ...internals.userNode })\n        : undefined;\n    const onDoubleClickHandler = onDoubleClick\n        ? (event) => onDoubleClick(event, { ...internals.userNode })\n        : undefined;\n    const onSelectNodeHandler = (event) => {\n        const { selectNodesOnDrag, nodeDragThreshold } = store.getState();\n        if (isSelectable && (!selectNodesOnDrag || !isDraggable || nodeDragThreshold > 0)) {\n            /*\n             * this handler gets called by XYDrag on drag start when selectNodesOnDrag=true\n             * here we only need to call it when selectNodesOnDrag=false\n             */\n            handleNodeClick({\n                id,\n                store,\n                nodeRef,\n            });\n        }\n        if (onClick) {\n            onClick(event, { ...internals.userNode });\n        }\n    };\n    const onKeyDown = (event) => {\n        if (isInputDOMNode(event.nativeEvent) || disableKeyboardA11y) {\n            return;\n        }\n        if (elementSelectionKeys.includes(event.key) && isSelectable) {\n            const unselect = event.key === 'Escape';\n            handleNodeClick({\n                id,\n                store,\n                unselect,\n                nodeRef,\n            });\n        }\n        else if (isDraggable && node.selected && Object.prototype.hasOwnProperty.call(arrowKeyDiffs, event.key)) {\n            // prevent default scrolling behavior on arrow key press when node is moved\n            event.preventDefault();\n            const { ariaLabelConfig } = store.getState();\n            store.setState({\n                ariaLiveMessage: ariaLabelConfig['node.a11yDescription.ariaLiveMessage']({\n                    direction: event.key.replace('Arrow', '').toLowerCase(),\n                    x: ~~internals.positionAbsolute.x,\n                    y: ~~internals.positionAbsolute.y,\n                }),\n            });\n            moveSelectedNodes({\n                direction: arrowKeyDiffs[event.key],\n                factor: event.shiftKey ? 4 : 1,\n            });\n        }\n    };\n    const onFocus = () => {\n        if (disableKeyboardA11y || !nodeRef.current?.matches(':focus-visible')) {\n            return;\n        }\n        const { transform, width, height, autoPanOnNodeFocus, setCenter } = store.getState();\n        if (!autoPanOnNodeFocus) {\n            return;\n        }\n        const withinViewport = getNodesInside(new Map([[id, node]]), { x: 0, y: 0, width, height }, transform, true).length > 0;\n        if (!withinViewport) {\n            setCenter(node.position.x + nodeDimensions.width / 2, node.position.y + nodeDimensions.height / 2, {\n                zoom: transform[2],\n            });\n        }\n    };\n    return (jsx(\"div\", { className: cc([\n            'react-flow__node',\n            `react-flow__node-${nodeType}`,\n            {\n                // this is overwritable by passing `nopan` as a class name\n                [noPanClassName]: isDraggable,\n            },\n            node.className,\n            {\n                selected: node.selected,\n                selectable: isSelectable,\n                parent: isParent,\n                draggable: isDraggable,\n                dragging,\n            },\n        ]), ref: nodeRef, style: {\n            zIndex: internals.z,\n            transform: `translate(${internals.positionAbsolute.x}px,${internals.positionAbsolute.y}px)`,\n            pointerEvents: hasPointerEvents ? 'all' : 'none',\n            visibility: hasDimensions ? 'visible' : 'hidden',\n            ...node.style,\n            ...inlineDimensions,\n        }, \"data-id\": id, \"data-testid\": `rf__node-${id}`, onMouseEnter: onMouseEnterHandler, onMouseMove: onMouseMoveHandler, onMouseLeave: onMouseLeaveHandler, onContextMenu: onContextMenuHandler, onClick: onSelectNodeHandler, onDoubleClick: onDoubleClickHandler, onKeyDown: isFocusable ? onKeyDown : undefined, tabIndex: isFocusable ? 0 : undefined, onFocus: isFocusable ? onFocus : undefined, role: node.ariaRole ?? (isFocusable ? 'group' : undefined), \"aria-roledescription\": \"node\", \"aria-describedby\": disableKeyboardA11y ? undefined : `${ARIA_NODE_DESC_KEY}-${rfId}`, \"aria-label\": node.ariaLabel, ...node.domAttributes, children: jsx(Provider, { value: id, children: jsx(NodeComponent, { id: id, data: node.data, type: nodeType, positionAbsoluteX: internals.positionAbsolute.x, positionAbsoluteY: internals.positionAbsolute.y, selected: node.selected ?? false, selectable: isSelectable, draggable: isDraggable, deletable: node.deletable ?? true, isConnectable: isConnectable, sourcePosition: node.sourcePosition, targetPosition: node.targetPosition, dragging: dragging, dragHandle: node.dragHandle, zIndex: internals.z, parentId: node.parentId, ...nodeDimensions }) }) }));\n}\n\nconst selector$b = (s) => ({\n    nodesDraggable: s.nodesDraggable,\n    nodesConnectable: s.nodesConnectable,\n    nodesFocusable: s.nodesFocusable,\n    elementsSelectable: s.elementsSelectable,\n    onError: s.onError,\n});\nfunction NodeRendererComponent(props) {\n    const { nodesDraggable, nodesConnectable, nodesFocusable, elementsSelectable, onError } = useStore(selector$b, shallow);\n    const nodeIds = useVisibleNodeIds(props.onlyRenderVisibleElements);\n    const resizeObserver = useResizeObserver();\n    return (jsx(\"div\", { className: \"react-flow__nodes\", style: containerStyle, children: nodeIds.map((nodeId) => {\n            return (\n            /*\n             * The split of responsibilities between NodeRenderer and\n             * NodeComponentWrapper may appear weird. However, itâ€™s designed to\n             * minimize the cost of updates when individual nodes change.\n             *\n             * For example, when youâ€™re dragging a single node, that node gets\n             * updated multiple times per second. If `NodeRenderer` were to update\n             * every time, it would have to re-run the `nodes.map()` loop every\n             * time. This gets pricey with hundreds of nodes, especially if every\n             * loop cycle does more than just rendering a JSX element!\n             *\n             * As a result of this choice, we took the following implementation\n             * decisions:\n             * - NodeRenderer subscribes *only* to node IDs â€“ and therefore\n             *   rerender *only* when visible nodes are added or removed.\n             * - NodeRenderer performs all operations the result of which can be\n             *   shared between nodes (such as creating the `ResizeObserver`\n             *   instance, or subscribing to `selector`). This means extra prop\n             *   drilling into `NodeComponentWrapper`, but it means we need to run\n             *   these operations only once â€“ instead of once per node.\n             * - Any operations that youâ€™d normally write inside `nodes.map` are\n             *   moved into `NodeComponentWrapper`. This ensures they are\n             *   memorized â€“ so if `NodeRenderer` *has* to rerender, it only\n             *   needs to regenerate the list of nodes, nothing else.\n             */\n            jsx(NodeWrapper, { id: nodeId, nodeTypes: props.nodeTypes, nodeExtent: props.nodeExtent, onClick: props.onNodeClick, onMouseEnter: props.onNodeMouseEnter, onMouseMove: props.onNodeMouseMove, onMouseLeave: props.onNodeMouseLeave, onContextMenu: props.onNodeContextMenu, onDoubleClick: props.onNodeDoubleClick, noDragClassName: props.noDragClassName, noPanClassName: props.noPanClassName, rfId: props.rfId, disableKeyboardA11y: props.disableKeyboardA11y, resizeObserver: resizeObserver, nodesDraggable: nodesDraggable, nodesConnectable: nodesConnectable, nodesFocusable: nodesFocusable, elementsSelectable: elementsSelectable, nodeClickDistance: props.nodeClickDistance, onError: onError }, nodeId));\n        }) }));\n}\nNodeRendererComponent.displayName = 'NodeRenderer';\nconst NodeRenderer = memo(NodeRendererComponent);\n\n/**\n * Hook for getting the visible edge ids from the store.\n *\n * @internal\n * @param onlyRenderVisible\n * @returns array with visible edge ids\n */\nfunction useVisibleEdgeIds(onlyRenderVisible) {\n    const edgeIds = useStore(useCallback((s) => {\n        if (!onlyRenderVisible) {\n            return s.edges.map((edge) => edge.id);\n        }\n        const visibleEdgeIds = [];\n        if (s.width && s.height) {\n            for (const edge of s.edges) {\n                const sourceNode = s.nodeLookup.get(edge.source);\n                const targetNode = s.nodeLookup.get(edge.target);\n                if (sourceNode &&\n                    targetNode &&\n                    isEdgeVisible({\n                        sourceNode,\n                        targetNode,\n                        width: s.width,\n                        height: s.height,\n                        transform: s.transform,\n                    })) {\n                    visibleEdgeIds.push(edge.id);\n                }\n            }\n        }\n        return visibleEdgeIds;\n    }, [onlyRenderVisible]), shallow);\n    return edgeIds;\n}\n\nconst ArrowSymbol = ({ color = 'none', strokeWidth = 1 }) => {\n    return (jsx(\"polyline\", { style: {\n            stroke: color,\n            strokeWidth,\n        }, strokeLinecap: \"round\", strokeLinejoin: \"round\", fill: \"none\", points: \"-5,-4 0,0 -5,4\" }));\n};\nconst ArrowClosedSymbol = ({ color = 'none', strokeWidth = 1 }) => {\n    return (jsx(\"polyline\", { style: {\n            stroke: color,\n            fill: color,\n            strokeWidth,\n        }, strokeLinecap: \"round\", strokeLinejoin: \"round\", points: \"-5,-4 0,0 -5,4 -5,-4\" }));\n};\nconst MarkerSymbols = {\n    [MarkerType.Arrow]: ArrowSymbol,\n    [MarkerType.ArrowClosed]: ArrowClosedSymbol,\n};\nfunction useMarkerSymbol(type) {\n    const store = useStoreApi();\n    const symbol = useMemo(() => {\n        const symbolExists = Object.prototype.hasOwnProperty.call(MarkerSymbols, type);\n        if (!symbolExists) {\n            store.getState().onError?.('009', errorMessages['error009'](type));\n            return null;\n        }\n        return MarkerSymbols[type];\n    }, [type]);\n    return symbol;\n}\n\nconst Marker = ({ id, type, color, width = 12.5, height = 12.5, markerUnits = 'strokeWidth', strokeWidth, orient = 'auto-start-reverse', }) => {\n    const Symbol = useMarkerSymbol(type);\n    if (!Symbol) {\n        return null;\n    }\n    return (jsx(\"marker\", { className: \"react-flow__arrowhead\", id: id, markerWidth: `${width}`, markerHeight: `${height}`, viewBox: \"-10 -10 20 20\", markerUnits: markerUnits, orient: orient, refX: \"0\", refY: \"0\", children: jsx(Symbol, { color: color, strokeWidth: strokeWidth }) }));\n};\n/*\n * when you have multiple flows on a page and you hide the first one, the other ones have no markers anymore\n * when they do have markers with the same ids. To prevent this the user can pass a unique id to the react flow wrapper\n * that we can then use for creating our unique marker ids\n */\nconst MarkerDefinitions = ({ defaultColor, rfId }) => {\n    const edges = useStore((s) => s.edges);\n    const defaultEdgeOptions = useStore((s) => s.defaultEdgeOptions);\n    const markers = useMemo(() => {\n        const markers = createMarkerIds(edges, {\n            id: rfId,\n            defaultColor,\n            defaultMarkerStart: defaultEdgeOptions?.markerStart,\n            defaultMarkerEnd: defaultEdgeOptions?.markerEnd,\n        });\n        return markers;\n    }, [edges, defaultEdgeOptions, rfId, defaultColor]);\n    if (!markers.length) {\n        return null;\n    }\n    return (jsx(\"svg\", { className: \"react-flow__marker\", \"aria-hidden\": \"true\", children: jsx(\"defs\", { children: markers.map((marker) => (jsx(Marker, { id: marker.id, type: marker.type, color: marker.color, width: marker.width, height: marker.height, markerUnits: marker.markerUnits, strokeWidth: marker.strokeWidth, orient: marker.orient }, marker.id))) }) }));\n};\nMarkerDefinitions.displayName = 'MarkerDefinitions';\nvar MarkerDefinitions$1 = memo(MarkerDefinitions);\n\nfunction EdgeTextComponent({ x, y, label, labelStyle, labelShowBg = true, labelBgStyle, labelBgPadding = [2, 4], labelBgBorderRadius = 2, children, className, ...rest }) {\n    const [edgeTextBbox, setEdgeTextBbox] = useState({ x: 1, y: 0, width: 0, height: 0 });\n    const edgeTextClasses = cc(['react-flow__edge-textwrapper', className]);\n    const edgeTextRef = useRef(null);\n    useEffect(() => {\n        if (edgeTextRef.current) {\n            const textBbox = edgeTextRef.current.getBBox();\n            setEdgeTextBbox({\n                x: textBbox.x,\n                y: textBbox.y,\n                width: textBbox.width,\n                height: textBbox.height,\n            });\n        }\n    }, [label]);\n    if (!label) {\n        return null;\n    }\n    return (jsxs(\"g\", { transform: `translate(${x - edgeTextBbox.width / 2} ${y - edgeTextBbox.height / 2})`, className: edgeTextClasses, visibility: edgeTextBbox.width ? 'visible' : 'hidden', ...rest, children: [labelShowBg && (jsx(\"rect\", { width: edgeTextBbox.width + 2 * labelBgPadding[0], x: -labelBgPadding[0], y: -labelBgPadding[1], height: edgeTextBbox.height + 2 * labelBgPadding[1], className: \"react-flow__edge-textbg\", style: labelBgStyle, rx: labelBgBorderRadius, ry: labelBgBorderRadius })), jsx(\"text\", { className: \"react-flow__edge-text\", y: edgeTextBbox.height / 2, dy: \"0.3em\", ref: edgeTextRef, style: labelStyle, children: label }), children] }));\n}\nEdgeTextComponent.displayName = 'EdgeText';\n/**\n * You can use the `<EdgeText />` component as a helper component to display text\n * within your custom edges.\n *\n * @public\n *\n * @example\n * ```jsx\n * import { EdgeText } from '@xyflow/react';\n *\n * export function CustomEdgeLabel({ label }) {\n *   return (\n *     <EdgeText\n *       x={100}\n *       y={100}\n *       label={label}\n *       labelStyle={{ fill: 'white' }}\n *       labelShowBg\n *       labelBgStyle={{ fill: 'red' }}\n *       labelBgPadding={[2, 4]}\n *       labelBgBorderRadius={2}\n *     />\n *   );\n * }\n *```\n */\nconst EdgeText = memo(EdgeTextComponent);\n\n/**\n * The `<BaseEdge />` component gets used internally for all the edges. It can be\n * used inside a custom edge and handles the invisible helper edge and the edge label\n * for you.\n *\n * @public\n * @example\n * ```jsx\n *import { BaseEdge } from '@xyflow/react';\n *\n *export function CustomEdge({ sourceX, sourceY, targetX, targetY, ...props }) {\n *  const [edgePath] = getStraightPath({\n *    sourceX,\n *    sourceY,\n *    targetX,\n *    targetY,\n *  });\n *\n *  return <BaseEdge path={edgePath} {...props} />;\n *}\n *```\n *\n * @remarks If you want to use an edge marker with the [`<BaseEdge />`](/api-reference/components/base-edge) component,\n * you can pass the `markerStart` or `markerEnd` props passed to your custom edge\n * through to the [`<BaseEdge />`](/api-reference/components/base-edge) component.\n * You can see all the props passed to a custom edge by looking at the [`EdgeProps`](/api-reference/types/edge-props) type.\n */\nfunction BaseEdge({ path, labelX, labelY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, interactionWidth = 20, ...props }) {\n    return (jsxs(Fragment, { children: [jsx(\"path\", { ...props, d: path, fill: \"none\", className: cc(['react-flow__edge-path', props.className]) }), interactionWidth && (jsx(\"path\", { d: path, fill: \"none\", strokeOpacity: 0, strokeWidth: interactionWidth, className: \"react-flow__edge-interaction\" })), label && isNumeric(labelX) && isNumeric(labelY) ? (jsx(EdgeText, { x: labelX, y: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius })) : null] }));\n}\n\nfunction getControl({ pos, x1, y1, x2, y2 }) {\n    if (pos === Position.Left || pos === Position.Right) {\n        return [0.5 * (x1 + x2), y1];\n    }\n    return [x1, 0.5 * (y1 + y2)];\n}\n/**\n * The `getSimpleBezierPath` util returns everything you need to render a simple\n * bezier edge between two nodes.\n * @public\n * @returns\n * - `path`: the path to use in an SVG `<path>` element.\n * - `labelX`: the `x` position you can use to render a label for this edge.\n * - `labelY`: the `y` position you can use to render a label for this edge.\n * - `offsetX`: the absolute difference between the source `x` position and the `x` position of the\n * middle of this path.\n * - `offsetY`: the absolute difference between the source `y` position and the `y` position of the\n * middle of this path.\n */\nfunction getSimpleBezierPath({ sourceX, sourceY, sourcePosition = Position.Bottom, targetX, targetY, targetPosition = Position.Top, }) {\n    const [sourceControlX, sourceControlY] = getControl({\n        pos: sourcePosition,\n        x1: sourceX,\n        y1: sourceY,\n        x2: targetX,\n        y2: targetY,\n    });\n    const [targetControlX, targetControlY] = getControl({\n        pos: targetPosition,\n        x1: targetX,\n        y1: targetY,\n        x2: sourceX,\n        y2: sourceY,\n    });\n    const [labelX, labelY, offsetX, offsetY] = getBezierEdgeCenter({\n        sourceX,\n        sourceY,\n        targetX,\n        targetY,\n        sourceControlX,\n        sourceControlY,\n        targetControlX,\n        targetControlY,\n    });\n    return [\n        `M${sourceX},${sourceY} C${sourceControlX},${sourceControlY} ${targetControlX},${targetControlY} ${targetX},${targetY}`,\n        labelX,\n        labelY,\n        offsetX,\n        offsetY,\n    ];\n}\nfunction createSimpleBezierEdge(params) {\n    // eslint-disable-next-line react/display-name\n    return memo(({ id, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, interactionWidth, }) => {\n        const [path, labelX, labelY] = getSimpleBezierPath({\n            sourceX,\n            sourceY,\n            sourcePosition,\n            targetX,\n            targetY,\n            targetPosition,\n        });\n        const _id = params.isInternal ? undefined : id;\n        return (jsx(BaseEdge, { id: _id, path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n    });\n}\nconst SimpleBezierEdge = createSimpleBezierEdge({ isInternal: false });\nconst SimpleBezierEdgeInternal = createSimpleBezierEdge({ isInternal: true });\nSimpleBezierEdge.displayName = 'SimpleBezierEdge';\nSimpleBezierEdgeInternal.displayName = 'SimpleBezierEdgeInternal';\n\nfunction createSmoothStepEdge(params) {\n    // eslint-disable-next-line react/display-name\n    return memo(({ id, sourceX, sourceY, targetX, targetY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, sourcePosition = Position.Bottom, targetPosition = Position.Top, markerEnd, markerStart, pathOptions, interactionWidth, }) => {\n        const [path, labelX, labelY] = getSmoothStepPath({\n            sourceX,\n            sourceY,\n            sourcePosition,\n            targetX,\n            targetY,\n            targetPosition,\n            borderRadius: pathOptions?.borderRadius,\n            offset: pathOptions?.offset,\n        });\n        const _id = params.isInternal ? undefined : id;\n        return (jsx(BaseEdge, { id: _id, path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n    });\n}\n/**\n * Component that can be used inside a custom edge to render a smooth step edge.\n *\n * @public\n * @example\n *\n * ```tsx\n * import { SmoothStepEdge } from '@xyflow/react';\n *\n * function CustomEdge({ sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition }) {\n *   return (\n *     <SmoothStepEdge\n *       sourceX={sourceX}\n *       sourceY={sourceY}\n *       targetX={targetX}\n *       targetY={targetY}\n *       sourcePosition={sourcePosition}\n *       targetPosition={targetPosition}\n *     />\n *   );\n * }\n * ```\n */\nconst SmoothStepEdge = createSmoothStepEdge({ isInternal: false });\n/**\n * @internal\n */\nconst SmoothStepEdgeInternal = createSmoothStepEdge({ isInternal: true });\nSmoothStepEdge.displayName = 'SmoothStepEdge';\nSmoothStepEdgeInternal.displayName = 'SmoothStepEdgeInternal';\n\nfunction createStepEdge(params) {\n    // eslint-disable-next-line react/display-name\n    return memo(({ id, ...props }) => {\n        const _id = params.isInternal ? undefined : id;\n        return (jsx(SmoothStepEdge, { ...props, id: _id, pathOptions: useMemo(() => ({ borderRadius: 0, offset: props.pathOptions?.offset }), [props.pathOptions?.offset]) }));\n    });\n}\n/**\n * Component that can be used inside a custom edge to render a step edge.\n *\n * @public\n * @example\n *\n * ```tsx\n * import { StepEdge } from '@xyflow/react';\n *\n * function CustomEdge({ sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition }) {\n *   return (\n *     <StepEdge\n *       sourceX={sourceX}\n *       sourceY={sourceY}\n *       targetX={targetX}\n *       targetY={targetY}\n *       sourcePosition={sourcePosition}\n *       targetPosition={targetPosition}\n *     />\n *   );\n * }\n * ```\n */\nconst StepEdge = createStepEdge({ isInternal: false });\n/**\n * @internal\n */\nconst StepEdgeInternal = createStepEdge({ isInternal: true });\nStepEdge.displayName = 'StepEdge';\nStepEdgeInternal.displayName = 'StepEdgeInternal';\n\nfunction createStraightEdge(params) {\n    // eslint-disable-next-line react/display-name\n    return memo(({ id, sourceX, sourceY, targetX, targetY, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, interactionWidth, }) => {\n        const [path, labelX, labelY] = getStraightPath({ sourceX, sourceY, targetX, targetY });\n        const _id = params.isInternal ? undefined : id;\n        return (jsx(BaseEdge, { id: _id, path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n    });\n}\n/**\n * Component that can be used inside a custom edge to render a straight line.\n *\n * @public\n * @example\n *\n * ```tsx\n * import { StraightEdge } from '@xyflow/react';\n *\n * function CustomEdge({ sourceX, sourceY, targetX, targetY }) {\n *   return (\n *     <StraightEdge\n *       sourceX={sourceX}\n *       sourceY={sourceY}\n *       targetX={targetX}\n *       targetY={targetY}\n *     />\n *   );\n * }\n * ```\n */\nconst StraightEdge = createStraightEdge({ isInternal: false });\n/**\n * @internal\n */\nconst StraightEdgeInternal = createStraightEdge({ isInternal: true });\nStraightEdge.displayName = 'StraightEdge';\nStraightEdgeInternal.displayName = 'StraightEdgeInternal';\n\nfunction createBezierEdge(params) {\n    // eslint-disable-next-line react/display-name\n    return memo(({ id, sourceX, sourceY, targetX, targetY, sourcePosition = Position.Bottom, targetPosition = Position.Top, label, labelStyle, labelShowBg, labelBgStyle, labelBgPadding, labelBgBorderRadius, style, markerEnd, markerStart, pathOptions, interactionWidth, }) => {\n        const [path, labelX, labelY] = getBezierPath({\n            sourceX,\n            sourceY,\n            sourcePosition,\n            targetX,\n            targetY,\n            targetPosition,\n            curvature: pathOptions?.curvature,\n        });\n        const _id = params.isInternal ? undefined : id;\n        return (jsx(BaseEdge, { id: _id, path: path, labelX: labelX, labelY: labelY, label: label, labelStyle: labelStyle, labelShowBg: labelShowBg, labelBgStyle: labelBgStyle, labelBgPadding: labelBgPadding, labelBgBorderRadius: labelBgBorderRadius, style: style, markerEnd: markerEnd, markerStart: markerStart, interactionWidth: interactionWidth }));\n    });\n}\n/**\n * Component that can be used inside a custom edge to render a bezier curve.\n *\n * @public\n * @example\n *\n * ```tsx\n * import { BezierEdge } from '@xyflow/react';\n *\n * function CustomEdge({ sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition }) {\n *   return (\n *     <BezierEdge\n *       sourceX={sourceX}\n *       sourceY={sourceY}\n *       targetX={targetX}\n *       targetY={targetY}\n *       sourcePosition={sourcePosition}\n *       targetPosition={targetPosition}\n *     />\n *   );\n * }\n * ```\n */\nconst BezierEdge = createBezierEdge({ isInternal: false });\n/**\n * @internal\n */\nconst BezierEdgeInternal = createBezierEdge({ isInternal: true });\nBezierEdge.displayName = 'BezierEdge';\nBezierEdgeInternal.displayName = 'BezierEdgeInternal';\n\nconst builtinEdgeTypes = {\n    default: BezierEdgeInternal,\n    straight: StraightEdgeInternal,\n    step: StepEdgeInternal,\n    smoothstep: SmoothStepEdgeInternal,\n    simplebezier: SimpleBezierEdgeInternal,\n};\nconst nullPosition = {\n    sourceX: null,\n    sourceY: null,\n    targetX: null,\n    targetY: null,\n    sourcePosition: null,\n    targetPosition: null,\n};\n\nconst shiftX = (x, shift, position) => {\n    if (position === Position.Left)\n        return x - shift;\n    if (position === Position.Right)\n        return x + shift;\n    return x;\n};\nconst shiftY = (y, shift, position) => {\n    if (position === Position.Top)\n        return y - shift;\n    if (position === Position.Bottom)\n        return y + shift;\n    return y;\n};\nconst EdgeUpdaterClassName = 'react-flow__edgeupdater';\n/**\n * @internal\n */\nfunction EdgeAnchor({ position, centerX, centerY, radius = 10, onMouseDown, onMouseEnter, onMouseOut, type, }) {\n    return (jsx(\"circle\", { onMouseDown: onMouseDown, onMouseEnter: onMouseEnter, onMouseOut: onMouseOut, className: cc([EdgeUpdaterClassName, `${EdgeUpdaterClassName}-${type}`]), cx: shiftX(centerX, radius, position), cy: shiftY(centerY, radius, position), r: radius, stroke: \"transparent\", fill: \"transparent\" }));\n}\n\nfunction EdgeUpdateAnchors({ isReconnectable, reconnectRadius, edge, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition, onReconnect, onReconnectStart, onReconnectEnd, setReconnecting, setUpdateHover, }) {\n    const store = useStoreApi();\n    const handleEdgeUpdater = (event, oppositeHandle) => {\n        // avoid triggering edge updater if mouse btn is not left\n        if (event.button !== 0) {\n            return;\n        }\n        const { autoPanOnConnect, domNode, isValidConnection, connectionMode, connectionRadius, lib, onConnectStart, onConnectEnd, cancelConnection, nodeLookup, rfId: flowId, panBy, updateConnection, } = store.getState();\n        const isTarget = oppositeHandle.type === 'target';\n        const _onReconnectEnd = (evt, connectionState) => {\n            setReconnecting(false);\n            onReconnectEnd?.(evt, edge, oppositeHandle.type, connectionState);\n        };\n        const onConnectEdge = (connection) => onReconnect?.(edge, connection);\n        const _onConnectStart = (_event, params) => {\n            setReconnecting(true);\n            onReconnectStart?.(event, edge, oppositeHandle.type);\n            onConnectStart?.(_event, params);\n        };\n        XYHandle.onPointerDown(event.nativeEvent, {\n            autoPanOnConnect,\n            connectionMode,\n            connectionRadius,\n            domNode,\n            handleId: oppositeHandle.id,\n            nodeId: oppositeHandle.nodeId,\n            nodeLookup,\n            isTarget,\n            edgeUpdaterType: oppositeHandle.type,\n            lib,\n            flowId,\n            cancelConnection,\n            panBy,\n            isValidConnection,\n            onConnect: onConnectEdge,\n            onConnectStart: _onConnectStart,\n            onConnectEnd,\n            onReconnectEnd: _onReconnectEnd,\n            updateConnection,\n            getTransform: () => store.getState().transform,\n            getFromHandle: () => store.getState().connection.fromHandle,\n            dragThreshold: store.getState().connectionDragThreshold,\n        });\n    };\n    const onReconnectSourceMouseDown = (event) => handleEdgeUpdater(event, { nodeId: edge.target, id: edge.targetHandle ?? null, type: 'target' });\n    const onReconnectTargetMouseDown = (event) => handleEdgeUpdater(event, { nodeId: edge.source, id: edge.sourceHandle ?? null, type: 'source' });\n    const onReconnectMouseEnter = () => setUpdateHover(true);\n    const onReconnectMouseOut = () => setUpdateHover(false);\n    return (jsxs(Fragment, { children: [(isReconnectable === true || isReconnectable === 'source') && (jsx(EdgeAnchor, { position: sourcePosition, centerX: sourceX, centerY: sourceY, radius: reconnectRadius, onMouseDown: onReconnectSourceMouseDown, onMouseEnter: onReconnectMouseEnter, onMouseOut: onReconnectMouseOut, type: \"source\" })), (isReconnectable === true || isReconnectable === 'target') && (jsx(EdgeAnchor, { position: targetPosition, centerX: targetX, centerY: targetY, radius: reconnectRadius, onMouseDown: onReconnectTargetMouseDown, onMouseEnter: onReconnectMouseEnter, onMouseOut: onReconnectMouseOut, type: \"target\" }))] }));\n}\n\nfunction EdgeWrapper({ id, edgesFocusable, edgesReconnectable, elementsSelectable, onClick, onDoubleClick, onContextMenu, onMouseEnter, onMouseMove, onMouseLeave, reconnectRadius, onReconnect, onReconnectStart, onReconnectEnd, rfId, edgeTypes, noPanClassName, onError, disableKeyboardA11y, }) {\n    let edge = useStore((s) => s.edgeLookup.get(id));\n    const defaultEdgeOptions = useStore((s) => s.defaultEdgeOptions);\n    edge = defaultEdgeOptions ? { ...defaultEdgeOptions, ...edge } : edge;\n    let edgeType = edge.type || 'default';\n    let EdgeComponent = edgeTypes?.[edgeType] || builtinEdgeTypes[edgeType];\n    if (EdgeComponent === undefined) {\n        onError?.('011', errorMessages['error011'](edgeType));\n        edgeType = 'default';\n        EdgeComponent = builtinEdgeTypes.default;\n    }\n    const isFocusable = !!(edge.focusable || (edgesFocusable && typeof edge.focusable === 'undefined'));\n    const isReconnectable = typeof onReconnect !== 'undefined' &&\n        (edge.reconnectable || (edgesReconnectable && typeof edge.reconnectable === 'undefined'));\n    const isSelectable = !!(edge.selectable || (elementsSelectable && typeof edge.selectable === 'undefined'));\n    const edgeRef = useRef(null);\n    const [updateHover, setUpdateHover] = useState(false);\n    const [reconnecting, setReconnecting] = useState(false);\n    const store = useStoreApi();\n    const { zIndex, sourceX, sourceY, targetX, targetY, sourcePosition, targetPosition } = useStore(useCallback((store) => {\n        const sourceNode = store.nodeLookup.get(edge.source);\n        const targetNode = store.nodeLookup.get(edge.target);\n        if (!sourceNode || !targetNode) {\n            return {\n                zIndex: edge.zIndex,\n                ...nullPosition,\n            };\n        }\n        const edgePosition = getEdgePosition({\n            id,\n            sourceNode,\n            targetNode,\n            sourceHandle: edge.sourceHandle || null,\n            targetHandle: edge.targetHandle || null,\n            connectionMode: store.connectionMode,\n            onError,\n        });\n        const zIndex = getElevatedEdgeZIndex({\n            selected: edge.selected,\n            zIndex: edge.zIndex,\n            sourceNode,\n            targetNode,\n            elevateOnSelect: store.elevateEdgesOnSelect,\n        });\n        return {\n            zIndex,\n            ...(edgePosition || nullPosition),\n        };\n    }, [edge.source, edge.target, edge.sourceHandle, edge.targetHandle, edge.selected, edge.zIndex]), shallow);\n    const markerStartUrl = useMemo(() => (edge.markerStart ? `url('#${getMarkerId(edge.markerStart, rfId)}')` : undefined), [edge.markerStart, rfId]);\n    const markerEndUrl = useMemo(() => (edge.markerEnd ? `url('#${getMarkerId(edge.markerEnd, rfId)}')` : undefined), [edge.markerEnd, rfId]);\n    if (edge.hidden || sourceX === null || sourceY === null || targetX === null || targetY === null) {\n        return null;\n    }\n    const onEdgeClick = (event) => {\n        const { addSelectedEdges, unselectNodesAndEdges, multiSelectionActive } = store.getState();\n        if (isSelectable) {\n            store.setState({ nodesSelectionActive: false });\n            if (edge.selected && multiSelectionActive) {\n                unselectNodesAndEdges({ nodes: [], edges: [edge] });\n                edgeRef.current?.blur();\n            }\n            else {\n                addSelectedEdges([id]);\n            }\n        }\n        if (onClick) {\n            onClick(event, edge);\n        }\n    };\n    const onEdgeDoubleClick = onDoubleClick\n        ? (event) => {\n            onDoubleClick(event, { ...edge });\n        }\n        : undefined;\n    const onEdgeContextMenu = onContextMenu\n        ? (event) => {\n            onContextMenu(event, { ...edge });\n        }\n        : undefined;\n    const onEdgeMouseEnter = onMouseEnter\n        ? (event) => {\n            onMouseEnter(event, { ...edge });\n        }\n        : undefined;\n    const onEdgeMouseMove = onMouseMove\n        ? (event) => {\n            onMouseMove(event, { ...edge });\n        }\n        : undefined;\n    const onEdgeMouseLeave = onMouseLeave\n        ? (event) => {\n            onMouseLeave(event, { ...edge });\n        }\n        : undefined;\n    const onKeyDown = (event) => {\n        if (!disableKeyboardA11y && elementSelectionKeys.includes(event.key) && isSelectable) {\n            const { unselectNodesAndEdges, addSelectedEdges } = store.getState();\n            const unselect = event.key === 'Escape';\n            if (unselect) {\n                edgeRef.current?.blur();\n                unselectNodesAndEdges({ edges: [edge] });\n            }\n            else {\n                addSelectedEdges([id]);\n            }\n        }\n    };\n    return (jsx(\"svg\", { style: { zIndex }, children: jsxs(\"g\", { className: cc([\n                'react-flow__edge',\n                `react-flow__edge-${edgeType}`,\n                edge.className,\n                noPanClassName,\n                {\n                    selected: edge.selected,\n                    animated: edge.animated,\n                    inactive: !isSelectable && !onClick,\n                    updating: updateHover,\n                    selectable: isSelectable,\n                },\n            ]), onClick: onEdgeClick, onDoubleClick: onEdgeDoubleClick, onContextMenu: onEdgeContextMenu, onMouseEnter: onEdgeMouseEnter, onMouseMove: onEdgeMouseMove, onMouseLeave: onEdgeMouseLeave, onKeyDown: isFocusable ? onKeyDown : undefined, tabIndex: isFocusable ? 0 : undefined, role: edge.ariaRole ?? (isFocusable ? 'group' : 'img'), \"aria-roledescription\": \"edge\", \"data-id\": id, \"data-testid\": `rf__edge-${id}`, \"aria-label\": edge.ariaLabel === null ? undefined : edge.ariaLabel || `Edge from ${edge.source} to ${edge.target}`, \"aria-describedby\": isFocusable ? `${ARIA_EDGE_DESC_KEY}-${rfId}` : undefined, ref: edgeRef, ...edge.domAttributes, children: [!reconnecting && (jsx(EdgeComponent, { id: id, source: edge.source, target: edge.target, type: edge.type, selected: edge.selected, animated: edge.animated, selectable: isSelectable, deletable: edge.deletable ?? true, label: edge.label, labelStyle: edge.labelStyle, labelShowBg: edge.labelShowBg, labelBgStyle: edge.labelBgStyle, labelBgPadding: edge.labelBgPadding, labelBgBorderRadius: edge.labelBgBorderRadius, sourceX: sourceX, sourceY: sourceY, targetX: targetX, targetY: targetY, sourcePosition: sourcePosition, targetPosition: targetPosition, data: edge.data, style: edge.style, sourceHandleId: edge.sourceHandle, targetHandleId: edge.targetHandle, markerStart: markerStartUrl, markerEnd: markerEndUrl, pathOptions: 'pathOptions' in edge ? edge.pathOptions : undefined, interactionWidth: edge.interactionWidth })), isReconnectable && (jsx(EdgeUpdateAnchors, { edge: edge, isReconnectable: isReconnectable, reconnectRadius: reconnectRadius, onReconnect: onReconnect, onReconnectStart: onReconnectStart, onReconnectEnd: onReconnectEnd, sourceX: sourceX, sourceY: sourceY, targetX: targetX, targetY: targetY, sourcePosition: sourcePosition, targetPosition: targetPosition, setUpdateHover: setUpdateHover, setReconnecting: setReconnecting }))] }) }));\n}\n\nconst selector$a = (s) => ({\n    edgesFocusable: s.edgesFocusable,\n    edgesReconnectable: s.edgesReconnectable,\n    elementsSelectable: s.elementsSelectable,\n    connectionMode: s.connectionMode,\n    onError: s.onError,\n});\nfunction EdgeRendererComponent({ defaultMarkerColor, onlyRenderVisibleElements, rfId, edgeTypes, noPanClassName, onReconnect, onEdgeContextMenu, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, onEdgeClick, reconnectRadius, onEdgeDoubleClick, onReconnectStart, onReconnectEnd, disableKeyboardA11y, }) {\n    const { edgesFocusable, edgesReconnectable, elementsSelectable, onError } = useStore(selector$a, shallow);\n    const edgeIds = useVisibleEdgeIds(onlyRenderVisibleElements);\n    return (jsxs(\"div\", { className: \"react-flow__edges\", children: [jsx(MarkerDefinitions$1, { defaultColor: defaultMarkerColor, rfId: rfId }), edgeIds.map((id) => {\n                return (jsx(EdgeWrapper, { id: id, edgesFocusable: edgesFocusable, edgesReconnectable: edgesReconnectable, elementsSelectable: elementsSelectable, noPanClassName: noPanClassName, onReconnect: onReconnect, onContextMenu: onEdgeContextMenu, onMouseEnter: onEdgeMouseEnter, onMouseMove: onEdgeMouseMove, onMouseLeave: onEdgeMouseLeave, onClick: onEdgeClick, reconnectRadius: reconnectRadius, onDoubleClick: onEdgeDoubleClick, onReconnectStart: onReconnectStart, onReconnectEnd: onReconnectEnd, rfId: rfId, onError: onError, edgeTypes: edgeTypes, disableKeyboardA11y: disableKeyboardA11y }, id));\n            })] }));\n}\nEdgeRendererComponent.displayName = 'EdgeRenderer';\nconst EdgeRenderer = memo(EdgeRendererComponent);\n\nconst selector$9 = (s) => `translate(${s.transform[0]}px,${s.transform[1]}px) scale(${s.transform[2]})`;\nfunction Viewport({ children }) {\n    const transform = useStore(selector$9);\n    return (jsx(\"div\", { className: \"react-flow__viewport xyflow__viewport react-flow__container\", style: { transform }, children: children }));\n}\n\n/**\n * Hook for calling onInit handler.\n *\n * @internal\n */\nfunction useOnInitHandler(onInit) {\n    const rfInstance = useReactFlow();\n    const isInitialized = useRef(false);\n    useEffect(() => {\n        if (!isInitialized.current && rfInstance.viewportInitialized && onInit) {\n            setTimeout(() => onInit(rfInstance), 1);\n            isInitialized.current = true;\n        }\n    }, [onInit, rfInstance.viewportInitialized]);\n}\n\nconst selector$8 = (state) => state.panZoom?.syncViewport;\n/**\n * Hook for syncing the viewport with the panzoom instance.\n *\n * @internal\n * @param viewport\n */\nfunction useViewportSync(viewport) {\n    const syncViewport = useStore(selector$8);\n    const store = useStoreApi();\n    useEffect(() => {\n        if (viewport) {\n            syncViewport?.(viewport);\n            store.setState({ transform: [viewport.x, viewport.y, viewport.zoom] });\n        }\n    }, [viewport, syncViewport]);\n    return null;\n}\n\nfunction storeSelector$1(s) {\n    return s.connection.inProgress\n        ? { ...s.connection, to: pointToRendererPoint(s.connection.to, s.transform) }\n        : { ...s.connection };\n}\nfunction getSelector(connectionSelector) {\n    if (connectionSelector) {\n        const combinedSelector = (s) => {\n            const connection = storeSelector$1(s);\n            return connectionSelector(connection);\n        };\n        return combinedSelector;\n    }\n    return storeSelector$1;\n}\n/**\n * The `useConnection` hook returns the current connection when there is an active\n * connection interaction. If no connection interaction is active, it returns null\n * for every property. A typical use case for this hook is to colorize handles\n * based on a certain condition (e.g. if the connection is valid or not).\n *\n * @public\n * @param connectionSelector - An optional selector function used to extract a slice of the\n * `ConnectionState` data. Using a selector can prevent component re-renders where data you don't\n * otherwise care about might change. If a selector is not provided, the entire `ConnectionState`\n * object is returned unchanged.\n * @example\n *\n * ```tsx\n *import { useConnection } from '@xyflow/react';\n *\n *function App() {\n *  const connection = useConnection();\n *\n *  return (\n *    <div> {connection ? `Someone is trying to make a connection from ${connection.fromNode} to this one.` : 'There are currently no incoming connections!'}\n *\n *   </div>\n *   );\n * }\n * ```\n *\n * @returns ConnectionState\n */\nfunction useConnection(connectionSelector) {\n    const combinedSelector = getSelector(connectionSelector);\n    return useStore(combinedSelector, shallow);\n}\n\nconst selector$7 = (s) => ({\n    nodesConnectable: s.nodesConnectable,\n    isValid: s.connection.isValid,\n    inProgress: s.connection.inProgress,\n    width: s.width,\n    height: s.height,\n});\nfunction ConnectionLineWrapper({ containerStyle, style, type, component, }) {\n    const { nodesConnectable, width, height, isValid, inProgress } = useStore(selector$7, shallow);\n    const renderConnection = !!(width && nodesConnectable && inProgress);\n    if (!renderConnection) {\n        return null;\n    }\n    return (jsx(\"svg\", { style: containerStyle, width: width, height: height, className: \"react-flow__connectionline react-flow__container\", children: jsx(\"g\", { className: cc(['react-flow__connection', getConnectionStatus(isValid)]), children: jsx(ConnectionLine, { style: style, type: type, CustomComponent: component, isValid: isValid }) }) }));\n}\nconst ConnectionLine = ({ style, type = ConnectionLineType.Bezier, CustomComponent, isValid, }) => {\n    const { inProgress, from, fromNode, fromHandle, fromPosition, to, toNode, toHandle, toPosition } = useConnection();\n    if (!inProgress) {\n        return;\n    }\n    if (CustomComponent) {\n        return (jsx(CustomComponent, { connectionLineType: type, connectionLineStyle: style, fromNode: fromNode, fromHandle: fromHandle, fromX: from.x, fromY: from.y, toX: to.x, toY: to.y, fromPosition: fromPosition, toPosition: toPosition, connectionStatus: getConnectionStatus(isValid), toNode: toNode, toHandle: toHandle }));\n    }\n    let path = '';\n    const pathParams = {\n        sourceX: from.x,\n        sourceY: from.y,\n        sourcePosition: fromPosition,\n        targetX: to.x,\n        targetY: to.y,\n        targetPosition: toPosition,\n    };\n    switch (type) {\n        case ConnectionLineType.Bezier:\n            [path] = getBezierPath(pathParams);\n            break;\n        case ConnectionLineType.SimpleBezier:\n            [path] = getSimpleBezierPath(pathParams);\n            break;\n        case ConnectionLineType.Step:\n            [path] = getSmoothStepPath({\n                ...pathParams,\n                borderRadius: 0,\n            });\n            break;\n        case ConnectionLineType.SmoothStep:\n            [path] = getSmoothStepPath(pathParams);\n            break;\n        default:\n            [path] = getStraightPath(pathParams);\n    }\n    return jsx(\"path\", { d: path, fill: \"none\", className: \"react-flow__connection-path\", style: style });\n};\nConnectionLine.displayName = 'ConnectionLine';\n\nconst emptyTypes = {};\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction useNodeOrEdgeTypesWarning(nodeOrEdgeTypes = emptyTypes) {\n    const typesRef = useRef(nodeOrEdgeTypes);\n    const store = useStoreApi();\n    useEffect(() => {\n        if (process.env.NODE_ENV === 'development') {\n            const usedKeys = new Set([...Object.keys(typesRef.current), ...Object.keys(nodeOrEdgeTypes)]);\n            for (const key of usedKeys) {\n                if (typesRef.current[key] !== nodeOrEdgeTypes[key]) {\n                    store.getState().onError?.('002', errorMessages['error002']());\n                    break;\n                }\n            }\n            typesRef.current = nodeOrEdgeTypes;\n        }\n    }, [nodeOrEdgeTypes]);\n}\n\nfunction useStylesLoadedWarning() {\n    const store = useStoreApi();\n    const checked = useRef(false);\n    useEffect(() => {\n        if (process.env.NODE_ENV === 'development') {\n            if (!checked.current) {\n                const pane = document.querySelector('.react-flow__pane');\n                if (pane && !(window.getComputedStyle(pane).zIndex === '1')) {\n                    store.getState().onError?.('013', errorMessages['error013']('react'));\n                }\n                checked.current = true;\n            }\n        }\n    }, []);\n}\n\nfunction GraphViewComponent({ nodeTypes, edgeTypes, onInit, onNodeClick, onEdgeClick, onNodeDoubleClick, onEdgeDoubleClick, onNodeMouseEnter, onNodeMouseMove, onNodeMouseLeave, onNodeContextMenu, onSelectionContextMenu, onSelectionStart, onSelectionEnd, connectionLineType, connectionLineStyle, connectionLineComponent, connectionLineContainerStyle, selectionKeyCode, selectionOnDrag, selectionMode, multiSelectionKeyCode, panActivationKeyCode, zoomActivationKeyCode, deleteKeyCode, onlyRenderVisibleElements, elementsSelectable, defaultViewport, translateExtent, minZoom, maxZoom, preventScrolling, defaultMarkerColor, zoomOnScroll, zoomOnPinch, panOnScroll, panOnScrollSpeed, panOnScrollMode, zoomOnDoubleClick, panOnDrag, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneScroll, onPaneContextMenu, paneClickDistance, nodeClickDistance, onEdgeContextMenu, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, reconnectRadius, onReconnect, onReconnectStart, onReconnectEnd, noDragClassName, noWheelClassName, noPanClassName, disableKeyboardA11y, nodeExtent, rfId, viewport, onViewportChange, }) {\n    useNodeOrEdgeTypesWarning(nodeTypes);\n    useNodeOrEdgeTypesWarning(edgeTypes);\n    useStylesLoadedWarning();\n    useOnInitHandler(onInit);\n    useViewportSync(viewport);\n    return (jsx(FlowRenderer, { onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneContextMenu: onPaneContextMenu, onPaneScroll: onPaneScroll, paneClickDistance: paneClickDistance, deleteKeyCode: deleteKeyCode, selectionKeyCode: selectionKeyCode, selectionOnDrag: selectionOnDrag, selectionMode: selectionMode, onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, multiSelectionKeyCode: multiSelectionKeyCode, panActivationKeyCode: panActivationKeyCode, zoomActivationKeyCode: zoomActivationKeyCode, elementsSelectable: elementsSelectable, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, zoomOnDoubleClick: zoomOnDoubleClick, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, panOnDrag: panOnDrag, defaultViewport: defaultViewport, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, onSelectionContextMenu: onSelectionContextMenu, preventScrolling: preventScrolling, noDragClassName: noDragClassName, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, disableKeyboardA11y: disableKeyboardA11y, onViewportChange: onViewportChange, isControlledViewport: !!viewport, children: jsxs(Viewport, { children: [jsx(EdgeRenderer, { edgeTypes: edgeTypes, onEdgeClick: onEdgeClick, onEdgeDoubleClick: onEdgeDoubleClick, onReconnect: onReconnect, onReconnectStart: onReconnectStart, onReconnectEnd: onReconnectEnd, onlyRenderVisibleElements: onlyRenderVisibleElements, onEdgeContextMenu: onEdgeContextMenu, onEdgeMouseEnter: onEdgeMouseEnter, onEdgeMouseMove: onEdgeMouseMove, onEdgeMouseLeave: onEdgeMouseLeave, reconnectRadius: reconnectRadius, defaultMarkerColor: defaultMarkerColor, noPanClassName: noPanClassName, disableKeyboardA11y: disableKeyboardA11y, rfId: rfId }), jsx(ConnectionLineWrapper, { style: connectionLineStyle, type: connectionLineType, component: connectionLineComponent, containerStyle: connectionLineContainerStyle }), jsx(\"div\", { className: \"react-flow__edgelabel-renderer\" }), jsx(NodeRenderer, { nodeTypes: nodeTypes, onNodeClick: onNodeClick, onNodeDoubleClick: onNodeDoubleClick, onNodeMouseEnter: onNodeMouseEnter, onNodeMouseMove: onNodeMouseMove, onNodeMouseLeave: onNodeMouseLeave, onNodeContextMenu: onNodeContextMenu, nodeClickDistance: nodeClickDistance, onlyRenderVisibleElements: onlyRenderVisibleElements, noPanClassName: noPanClassName, noDragClassName: noDragClassName, disableKeyboardA11y: disableKeyboardA11y, nodeExtent: nodeExtent, rfId: rfId }), jsx(\"div\", { className: \"react-flow__viewport-portal\" })] }) }));\n}\nGraphViewComponent.displayName = 'GraphView';\nconst GraphView = memo(GraphViewComponent);\n\nconst getInitialState = ({ nodes, edges, defaultNodes, defaultEdges, width, height, fitView, fitViewOptions, minZoom = 0.5, maxZoom = 2, nodeOrigin, nodeExtent, } = {}) => {\n    const nodeLookup = new Map();\n    const parentLookup = new Map();\n    const connectionLookup = new Map();\n    const edgeLookup = new Map();\n    const storeEdges = defaultEdges ?? edges ?? [];\n    const storeNodes = defaultNodes ?? nodes ?? [];\n    const storeNodeOrigin = nodeOrigin ?? [0, 0];\n    const storeNodeExtent = nodeExtent ?? infiniteExtent;\n    updateConnectionLookup(connectionLookup, edgeLookup, storeEdges);\n    const nodesInitialized = adoptUserNodes(storeNodes, nodeLookup, parentLookup, {\n        nodeOrigin: storeNodeOrigin,\n        nodeExtent: storeNodeExtent,\n        elevateNodesOnSelect: false,\n    });\n    let transform = [0, 0, 1];\n    if (fitView && width && height) {\n        const bounds = getInternalNodesBounds(nodeLookup, {\n            filter: (node) => !!((node.width || node.initialWidth) && (node.height || node.initialHeight)),\n        });\n        const { x, y, zoom } = getViewportForBounds(bounds, width, height, minZoom, maxZoom, fitViewOptions?.padding ?? 0.1);\n        transform = [x, y, zoom];\n    }\n    return {\n        rfId: '1',\n        width: 0,\n        height: 0,\n        transform,\n        nodes: storeNodes,\n        nodesInitialized,\n        nodeLookup,\n        parentLookup,\n        edges: storeEdges,\n        edgeLookup,\n        connectionLookup,\n        onNodesChange: null,\n        onEdgesChange: null,\n        hasDefaultNodes: defaultNodes !== undefined,\n        hasDefaultEdges: defaultEdges !== undefined,\n        panZoom: null,\n        minZoom,\n        maxZoom,\n        translateExtent: infiniteExtent,\n        nodeExtent: storeNodeExtent,\n        nodesSelectionActive: false,\n        userSelectionActive: false,\n        userSelectionRect: null,\n        connectionMode: ConnectionMode.Strict,\n        domNode: null,\n        paneDragging: false,\n        noPanClassName: 'nopan',\n        nodeOrigin: storeNodeOrigin,\n        nodeDragThreshold: 1,\n        connectionDragThreshold: 1,\n        snapGrid: [15, 15],\n        snapToGrid: false,\n        nodesDraggable: true,\n        nodesConnectable: true,\n        nodesFocusable: true,\n        edgesFocusable: true,\n        edgesReconnectable: true,\n        elementsSelectable: true,\n        elevateNodesOnSelect: true,\n        elevateEdgesOnSelect: false,\n        selectNodesOnDrag: true,\n        multiSelectionActive: false,\n        fitViewQueued: fitView ?? false,\n        fitViewOptions,\n        fitViewResolver: null,\n        connection: { ...initialConnection },\n        connectionClickStartHandle: null,\n        connectOnClick: true,\n        ariaLiveMessage: '',\n        autoPanOnConnect: true,\n        autoPanOnNodeDrag: true,\n        autoPanOnNodeFocus: true,\n        autoPanSpeed: 15,\n        connectionRadius: 20,\n        onError: devWarn,\n        isValidConnection: undefined,\n        onSelectionChangeHandlers: [],\n        lib: 'react',\n        debug: false,\n        ariaLabelConfig: defaultAriaLabelConfig,\n    };\n};\n\nconst createStore = ({ nodes, edges, defaultNodes, defaultEdges, width, height, fitView, fitViewOptions, minZoom, maxZoom, nodeOrigin, nodeExtent, }) => createWithEqualityFn((set, get) => {\n    async function resolveFitView() {\n        const { nodeLookup, panZoom, fitViewOptions, fitViewResolver, width, height, minZoom, maxZoom } = get();\n        if (!panZoom) {\n            return;\n        }\n        await fitViewport({\n            nodes: nodeLookup,\n            width,\n            height,\n            panZoom,\n            minZoom,\n            maxZoom,\n        }, fitViewOptions);\n        fitViewResolver?.resolve(true);\n        /**\n         * wait for the fitViewport to resolve before deleting the resolver,\n         * we want to reuse the old resolver if the user calls fitView again in the mean time\n         */\n        set({ fitViewResolver: null });\n    }\n    return {\n        ...getInitialState({\n            nodes,\n            edges,\n            width,\n            height,\n            fitView,\n            fitViewOptions,\n            minZoom,\n            maxZoom,\n            nodeOrigin,\n            nodeExtent,\n            defaultNodes,\n            defaultEdges,\n        }),\n        setNodes: (nodes) => {\n            const { nodeLookup, parentLookup, nodeOrigin, elevateNodesOnSelect, fitViewQueued } = get();\n            /*\n             * setNodes() is called exclusively in response to user actions:\n             * - either when the `<ReactFlow nodes>` prop is updated in the controlled ReactFlow setup,\n             * - or when the user calls something like `reactFlowInstance.setNodes()` in an uncontrolled ReactFlow setup.\n             *\n             * When this happens, we take the note objects passed by the user and extend them with fields\n             * relevant for internal React Flow operations.\n             */\n            const nodesInitialized = adoptUserNodes(nodes, nodeLookup, parentLookup, {\n                nodeOrigin,\n                nodeExtent,\n                elevateNodesOnSelect,\n                checkEquality: true,\n            });\n            if (fitViewQueued && nodesInitialized) {\n                resolveFitView();\n                set({ nodes, nodesInitialized, fitViewQueued: false, fitViewOptions: undefined });\n            }\n            else {\n                set({ nodes, nodesInitialized });\n            }\n        },\n        setEdges: (edges) => {\n            const { connectionLookup, edgeLookup } = get();\n            updateConnectionLookup(connectionLookup, edgeLookup, edges);\n            set({ edges });\n        },\n        setDefaultNodesAndEdges: (nodes, edges) => {\n            if (nodes) {\n                const { setNodes } = get();\n                setNodes(nodes);\n                set({ hasDefaultNodes: true });\n            }\n            if (edges) {\n                const { setEdges } = get();\n                setEdges(edges);\n                set({ hasDefaultEdges: true });\n            }\n        },\n        /*\n         * Every node gets registerd at a ResizeObserver. Whenever a node\n         * changes its dimensions, this function is called to measure the\n         * new dimensions and update the nodes.\n         */\n        updateNodeInternals: (updates) => {\n            const { triggerNodeChanges, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent, debug, fitViewQueued } = get();\n            const { changes, updatedInternals } = updateNodeInternals(updates, nodeLookup, parentLookup, domNode, nodeOrigin, nodeExtent);\n            if (!updatedInternals) {\n                return;\n            }\n            updateAbsolutePositions(nodeLookup, parentLookup, { nodeOrigin, nodeExtent });\n            if (fitViewQueued) {\n                resolveFitView();\n                set({ fitViewQueued: false, fitViewOptions: undefined });\n            }\n            else {\n                // we always want to trigger useStore calls whenever updateNodeInternals is called\n                set({});\n            }\n            if (changes?.length > 0) {\n                if (debug) {\n                    console.log('React Flow: trigger node changes', changes);\n                }\n                triggerNodeChanges?.(changes);\n            }\n        },\n        updateNodePositions: (nodeDragItems, dragging = false) => {\n            const parentExpandChildren = [];\n            const changes = [];\n            const { nodeLookup, triggerNodeChanges } = get();\n            for (const [id, dragItem] of nodeDragItems) {\n                // we are using the nodelookup to be sure to use the current expandParent and parentId value\n                const node = nodeLookup.get(id);\n                const expandParent = !!(node?.expandParent && node?.parentId && dragItem?.position);\n                const change = {\n                    id,\n                    type: 'position',\n                    position: expandParent\n                        ? {\n                            x: Math.max(0, dragItem.position.x),\n                            y: Math.max(0, dragItem.position.y),\n                        }\n                        : dragItem.position,\n                    dragging,\n                };\n                if (expandParent && node.parentId) {\n                    parentExpandChildren.push({\n                        id,\n                        parentId: node.parentId,\n                        rect: {\n                            ...dragItem.internals.positionAbsolute,\n                            width: dragItem.measured.width ?? 0,\n                            height: dragItem.measured.height ?? 0,\n                        },\n                    });\n                }\n                changes.push(change);\n            }\n            if (parentExpandChildren.length > 0) {\n                const { parentLookup, nodeOrigin } = get();\n                const parentExpandChanges = handleExpandParent(parentExpandChildren, nodeLookup, parentLookup, nodeOrigin);\n                changes.push(...parentExpandChanges);\n            }\n            triggerNodeChanges(changes);\n        },\n        triggerNodeChanges: (changes) => {\n            const { onNodesChange, setNodes, nodes, hasDefaultNodes, debug } = get();\n            if (changes?.length) {\n                if (hasDefaultNodes) {\n                    const updatedNodes = applyNodeChanges(changes, nodes);\n                    setNodes(updatedNodes);\n                }\n                if (debug) {\n                    console.log('React Flow: trigger node changes', changes);\n                }\n                onNodesChange?.(changes);\n            }\n        },\n        triggerEdgeChanges: (changes) => {\n            const { onEdgesChange, setEdges, edges, hasDefaultEdges, debug } = get();\n            if (changes?.length) {\n                if (hasDefaultEdges) {\n                    const updatedEdges = applyEdgeChanges(changes, edges);\n                    setEdges(updatedEdges);\n                }\n                if (debug) {\n                    console.log('React Flow: trigger edge changes', changes);\n                }\n                onEdgesChange?.(changes);\n            }\n        },\n        addSelectedNodes: (selectedNodeIds) => {\n            const { multiSelectionActive, edgeLookup, nodeLookup, triggerNodeChanges, triggerEdgeChanges } = get();\n            if (multiSelectionActive) {\n                const nodeChanges = selectedNodeIds.map((nodeId) => createSelectionChange(nodeId, true));\n                triggerNodeChanges(nodeChanges);\n                return;\n            }\n            triggerNodeChanges(getSelectionChanges(nodeLookup, new Set([...selectedNodeIds]), true));\n            triggerEdgeChanges(getSelectionChanges(edgeLookup));\n        },\n        addSelectedEdges: (selectedEdgeIds) => {\n            const { multiSelectionActive, edgeLookup, nodeLookup, triggerNodeChanges, triggerEdgeChanges } = get();\n            if (multiSelectionActive) {\n                const changedEdges = selectedEdgeIds.map((edgeId) => createSelectionChange(edgeId, true));\n                triggerEdgeChanges(changedEdges);\n                return;\n            }\n            triggerEdgeChanges(getSelectionChanges(edgeLookup, new Set([...selectedEdgeIds])));\n            triggerNodeChanges(getSelectionChanges(nodeLookup, new Set(), true));\n        },\n        unselectNodesAndEdges: ({ nodes, edges } = {}) => {\n            const { edges: storeEdges, nodes: storeNodes, nodeLookup, triggerNodeChanges, triggerEdgeChanges } = get();\n            const nodesToUnselect = nodes ? nodes : storeNodes;\n            const edgesToUnselect = edges ? edges : storeEdges;\n            const nodeChanges = nodesToUnselect.map((n) => {\n                const internalNode = nodeLookup.get(n.id);\n                if (internalNode) {\n                    /*\n                     * we need to unselect the internal node that was selected previously before we\n                     * send the change to the user to prevent it to be selected while dragging the new node\n                     */\n                    internalNode.selected = false;\n                }\n                return createSelectionChange(n.id, false);\n            });\n            const edgeChanges = edgesToUnselect.map((edge) => createSelectionChange(edge.id, false));\n            triggerNodeChanges(nodeChanges);\n            triggerEdgeChanges(edgeChanges);\n        },\n        setMinZoom: (minZoom) => {\n            const { panZoom, maxZoom } = get();\n            panZoom?.setScaleExtent([minZoom, maxZoom]);\n            set({ minZoom });\n        },\n        setMaxZoom: (maxZoom) => {\n            const { panZoom, minZoom } = get();\n            panZoom?.setScaleExtent([minZoom, maxZoom]);\n            set({ maxZoom });\n        },\n        setTranslateExtent: (translateExtent) => {\n            get().panZoom?.setTranslateExtent(translateExtent);\n            set({ translateExtent });\n        },\n        setPaneClickDistance: (clickDistance) => {\n            get().panZoom?.setClickDistance(clickDistance);\n        },\n        resetSelectedElements: () => {\n            const { edges, nodes, triggerNodeChanges, triggerEdgeChanges, elementsSelectable } = get();\n            if (!elementsSelectable) {\n                return;\n            }\n            const nodeChanges = nodes.reduce((res, node) => (node.selected ? [...res, createSelectionChange(node.id, false)] : res), []);\n            const edgeChanges = edges.reduce((res, edge) => (edge.selected ? [...res, createSelectionChange(edge.id, false)] : res), []);\n            triggerNodeChanges(nodeChanges);\n            triggerEdgeChanges(edgeChanges);\n        },\n        setNodeExtent: (nextNodeExtent) => {\n            const { nodes, nodeLookup, parentLookup, nodeOrigin, elevateNodesOnSelect, nodeExtent } = get();\n            if (nextNodeExtent[0][0] === nodeExtent[0][0] &&\n                nextNodeExtent[0][1] === nodeExtent[0][1] &&\n                nextNodeExtent[1][0] === nodeExtent[1][0] &&\n                nextNodeExtent[1][1] === nodeExtent[1][1]) {\n                return;\n            }\n            adoptUserNodes(nodes, nodeLookup, parentLookup, {\n                nodeOrigin,\n                nodeExtent: nextNodeExtent,\n                elevateNodesOnSelect,\n                checkEquality: false,\n            });\n            set({ nodeExtent: nextNodeExtent });\n        },\n        panBy: (delta) => {\n            const { transform, width, height, panZoom, translateExtent } = get();\n            return panBy({ delta, panZoom, transform, translateExtent, width, height });\n        },\n        setCenter: async (x, y, options) => {\n            const { width, height, maxZoom, panZoom } = get();\n            if (!panZoom) {\n                return Promise.resolve(false);\n            }\n            const nextZoom = typeof options?.zoom !== 'undefined' ? options.zoom : maxZoom;\n            await panZoom.setViewport({\n                x: width / 2 - x * nextZoom,\n                y: height / 2 - y * nextZoom,\n                zoom: nextZoom,\n            }, { duration: options?.duration, ease: options?.ease, interpolate: options?.interpolate });\n            return Promise.resolve(true);\n        },\n        cancelConnection: () => {\n            set({\n                connection: { ...initialConnection },\n            });\n        },\n        updateConnection: (connection) => {\n            set({ connection });\n        },\n        reset: () => set({ ...getInitialState() }),\n    };\n}, Object.is);\n\n/**\n * The `<ReactFlowProvider />` component is a [context provider](https://react.dev/learn/passing-data-deeply-with-context#)\n * that makes it possible to access a flow's internal state outside of the\n * [`<ReactFlow />`](/api-reference/react-flow) component. Many of the hooks we\n * provide rely on this component to work.\n * @public\n *\n * @example\n * ```tsx\n *import { ReactFlow, ReactFlowProvider, useNodes } from '@xyflow/react'\n *\n *export default function Flow() {\n *  return (\n *    <ReactFlowProvider>\n *      <ReactFlow nodes={...} edges={...} />\n *      <Sidebar />\n *    </ReactFlowProvider>\n *  );\n *}\n *\n *function Sidebar() {\n *  // This hook will only work if the component it's used in is a child of a\n *  // <ReactFlowProvider />.\n *  const nodes = useNodes()\n *\n *  return <aside>do something with nodes</aside>;\n *}\n *```\n *\n * @remarks If you're using a router and want your flow's state to persist across routes,\n * it's vital that you place the `<ReactFlowProvider />` component _outside_ of\n * your router. If you have multiple flows on the same page you will need to use a separate\n * `<ReactFlowProvider />` for each flow.\n */\nfunction ReactFlowProvider({ initialNodes: nodes, initialEdges: edges, defaultNodes, defaultEdges, initialWidth: width, initialHeight: height, initialMinZoom: minZoom, initialMaxZoom: maxZoom, initialFitViewOptions: fitViewOptions, fitView, nodeOrigin, nodeExtent, children, }) {\n    const [store] = useState(() => createStore({\n        nodes,\n        edges,\n        defaultNodes,\n        defaultEdges,\n        width,\n        height,\n        fitView,\n        minZoom,\n        maxZoom,\n        fitViewOptions,\n        nodeOrigin,\n        nodeExtent,\n    }));\n    return (jsx(Provider$1, { value: store, children: jsx(BatchProvider, { children: children }) }));\n}\n\nfunction Wrapper({ children, nodes, edges, defaultNodes, defaultEdges, width, height, fitView, fitViewOptions, minZoom, maxZoom, nodeOrigin, nodeExtent, }) {\n    const isWrapped = useContext(StoreContext);\n    if (isWrapped) {\n        /*\n         * we need to wrap it with a fragment because it's not allowed for children to be a ReactNode\n         * https://github.com/DefinitelyTyped/DefinitelyTyped/issues/18051\n         */\n        return jsx(Fragment, { children: children });\n    }\n    return (jsx(ReactFlowProvider, { initialNodes: nodes, initialEdges: edges, defaultNodes: defaultNodes, defaultEdges: defaultEdges, initialWidth: width, initialHeight: height, fitView: fitView, initialFitViewOptions: fitViewOptions, initialMinZoom: minZoom, initialMaxZoom: maxZoom, nodeOrigin: nodeOrigin, nodeExtent: nodeExtent, children: children }));\n}\n\nconst wrapperStyle = {\n    width: '100%',\n    height: '100%',\n    overflow: 'hidden',\n    position: 'relative',\n    zIndex: 0,\n};\nfunction ReactFlow({ nodes, edges, defaultNodes, defaultEdges, className, nodeTypes, edgeTypes, onNodeClick, onEdgeClick, onInit, onMove, onMoveStart, onMoveEnd, onConnect, onConnectStart, onConnectEnd, onClickConnectStart, onClickConnectEnd, onNodeMouseEnter, onNodeMouseMove, onNodeMouseLeave, onNodeContextMenu, onNodeDoubleClick, onNodeDragStart, onNodeDrag, onNodeDragStop, onNodesDelete, onEdgesDelete, onDelete, onSelectionChange, onSelectionDragStart, onSelectionDrag, onSelectionDragStop, onSelectionContextMenu, onSelectionStart, onSelectionEnd, onBeforeDelete, connectionMode, connectionLineType = ConnectionLineType.Bezier, connectionLineStyle, connectionLineComponent, connectionLineContainerStyle, deleteKeyCode = 'Backspace', selectionKeyCode = 'Shift', selectionOnDrag = false, selectionMode = SelectionMode.Full, panActivationKeyCode = 'Space', multiSelectionKeyCode = isMacOs() ? 'Meta' : 'Control', zoomActivationKeyCode = isMacOs() ? 'Meta' : 'Control', snapToGrid, snapGrid, onlyRenderVisibleElements = false, selectNodesOnDrag, nodesDraggable, autoPanOnNodeFocus, nodesConnectable, nodesFocusable, nodeOrigin = defaultNodeOrigin, edgesFocusable, edgesReconnectable, elementsSelectable = true, defaultViewport: defaultViewport$1 = defaultViewport, minZoom = 0.5, maxZoom = 2, translateExtent = infiniteExtent, preventScrolling = true, nodeExtent, defaultMarkerColor = '#b1b1b7', zoomOnScroll = true, zoomOnPinch = true, panOnScroll = false, panOnScrollSpeed = 0.5, panOnScrollMode = PanOnScrollMode.Free, zoomOnDoubleClick = true, panOnDrag = true, onPaneClick, onPaneMouseEnter, onPaneMouseMove, onPaneMouseLeave, onPaneScroll, onPaneContextMenu, paneClickDistance = 0, nodeClickDistance = 0, children, onReconnect, onReconnectStart, onReconnectEnd, onEdgeContextMenu, onEdgeDoubleClick, onEdgeMouseEnter, onEdgeMouseMove, onEdgeMouseLeave, reconnectRadius = 10, onNodesChange, onEdgesChange, noDragClassName = 'nodrag', noWheelClassName = 'nowheel', noPanClassName = 'nopan', fitView, fitViewOptions, connectOnClick, attributionPosition, proOptions, defaultEdgeOptions, elevateNodesOnSelect, elevateEdgesOnSelect, disableKeyboardA11y = false, autoPanOnConnect, autoPanOnNodeDrag, autoPanSpeed, connectionRadius, isValidConnection, onError, style, id, nodeDragThreshold, connectionDragThreshold, viewport, onViewportChange, width, height, colorMode = 'light', debug, onScroll, ariaLabelConfig, ...rest }, ref) {\n    const rfId = id || '1';\n    const colorModeClassName = useColorModeClass(colorMode);\n    // Undo scroll events, preventing viewport from shifting when nodes outside of it are focused\n    const wrapperOnScroll = useCallback((e) => {\n        e.currentTarget.scrollTo({ top: 0, left: 0, behavior: 'instant' });\n        onScroll?.(e);\n    }, [onScroll]);\n    return (jsx(\"div\", { \"data-testid\": \"rf__wrapper\", ...rest, onScroll: wrapperOnScroll, style: { ...style, ...wrapperStyle }, ref: ref, className: cc(['react-flow', className, colorModeClassName]), id: id, role: \"application\", children: jsxs(Wrapper, { nodes: nodes, edges: edges, width: width, height: height, fitView: fitView, fitViewOptions: fitViewOptions, minZoom: minZoom, maxZoom: maxZoom, nodeOrigin: nodeOrigin, nodeExtent: nodeExtent, children: [jsx(GraphView, { onInit: onInit, onNodeClick: onNodeClick, onEdgeClick: onEdgeClick, onNodeMouseEnter: onNodeMouseEnter, onNodeMouseMove: onNodeMouseMove, onNodeMouseLeave: onNodeMouseLeave, onNodeContextMenu: onNodeContextMenu, onNodeDoubleClick: onNodeDoubleClick, nodeTypes: nodeTypes, edgeTypes: edgeTypes, connectionLineType: connectionLineType, connectionLineStyle: connectionLineStyle, connectionLineComponent: connectionLineComponent, connectionLineContainerStyle: connectionLineContainerStyle, selectionKeyCode: selectionKeyCode, selectionOnDrag: selectionOnDrag, selectionMode: selectionMode, deleteKeyCode: deleteKeyCode, multiSelectionKeyCode: multiSelectionKeyCode, panActivationKeyCode: panActivationKeyCode, zoomActivationKeyCode: zoomActivationKeyCode, onlyRenderVisibleElements: onlyRenderVisibleElements, defaultViewport: defaultViewport$1, translateExtent: translateExtent, minZoom: minZoom, maxZoom: maxZoom, preventScrolling: preventScrolling, zoomOnScroll: zoomOnScroll, zoomOnPinch: zoomOnPinch, zoomOnDoubleClick: zoomOnDoubleClick, panOnScroll: panOnScroll, panOnScrollSpeed: panOnScrollSpeed, panOnScrollMode: panOnScrollMode, panOnDrag: panOnDrag, onPaneClick: onPaneClick, onPaneMouseEnter: onPaneMouseEnter, onPaneMouseMove: onPaneMouseMove, onPaneMouseLeave: onPaneMouseLeave, onPaneScroll: onPaneScroll, onPaneContextMenu: onPaneContextMenu, paneClickDistance: paneClickDistance, nodeClickDistance: nodeClickDistance, onSelectionContextMenu: onSelectionContextMenu, onSelectionStart: onSelectionStart, onSelectionEnd: onSelectionEnd, onReconnect: onReconnect, onReconnectStart: onReconnectStart, onReconnectEnd: onReconnectEnd, onEdgeContextMenu: onEdgeContextMenu, onEdgeDoubleClick: onEdgeDoubleClick, onEdgeMouseEnter: onEdgeMouseEnter, onEdgeMouseMove: onEdgeMouseMove, onEdgeMouseLeave: onEdgeMouseLeave, reconnectRadius: reconnectRadius, defaultMarkerColor: defaultMarkerColor, noDragClassName: noDragClassName, noWheelClassName: noWheelClassName, noPanClassName: noPanClassName, rfId: rfId, disableKeyboardA11y: disableKeyboardA11y, nodeExtent: nodeExtent, viewport: viewport, onViewportChange: onViewportChange }), jsx(StoreUpdater, { nodes: nodes, edges: edges, defaultNodes: defaultNodes, defaultEdges: defaultEdges, onConnect: onConnect, onConnectStart: onConnectStart, onConnectEnd: onConnectEnd, onClickConnectStart: onClickConnectStart, onClickConnectEnd: onClickConnectEnd, nodesDraggable: nodesDraggable, autoPanOnNodeFocus: autoPanOnNodeFocus, nodesConnectable: nodesConnectable, nodesFocusable: nodesFocusable, edgesFocusable: edgesFocusable, edgesReconnectable: edgesReconnectable, elementsSelectable: elementsSelectable, elevateNodesOnSelect: elevateNodesOnSelect, elevateEdgesOnSelect: elevateEdgesOnSelect, minZoom: minZoom, maxZoom: maxZoom, nodeExtent: nodeExtent, onNodesChange: onNodesChange, onEdgesChange: onEdgesChange, snapToGrid: snapToGrid, snapGrid: snapGrid, connectionMode: connectionMode, translateExtent: translateExtent, connectOnClick: connectOnClick, defaultEdgeOptions: defaultEdgeOptions, fitView: fitView, fitViewOptions: fitViewOptions, onNodesDelete: onNodesDelete, onEdgesDelete: onEdgesDelete, onDelete: onDelete, onNodeDragStart: onNodeDragStart, onNodeDrag: onNodeDrag, onNodeDragStop: onNodeDragStop, onSelectionDrag: onSelectionDrag, onSelectionDragStart: onSelectionDragStart, onSelectionDragStop: onSelectionDragStop, onMove: onMove, onMoveStart: onMoveStart, onMoveEnd: onMoveEnd, noPanClassName: noPanClassName, nodeOrigin: nodeOrigin, rfId: rfId, autoPanOnConnect: autoPanOnConnect, autoPanOnNodeDrag: autoPanOnNodeDrag, autoPanSpeed: autoPanSpeed, onError: onError, connectionRadius: connectionRadius, isValidConnection: isValidConnection, selectNodesOnDrag: selectNodesOnDrag, nodeDragThreshold: nodeDragThreshold, connectionDragThreshold: connectionDragThreshold, onBeforeDelete: onBeforeDelete, paneClickDistance: paneClickDistance, debug: debug, ariaLabelConfig: ariaLabelConfig }), jsx(SelectionListener, { onSelectionChange: onSelectionChange }), children, jsx(Attribution, { proOptions: proOptions, position: attributionPosition }), jsx(A11yDescriptions, { rfId: rfId, disableKeyboardA11y: disableKeyboardA11y })] }) }));\n}\n/**\n * The `<ReactFlow />` component is the heart of your React Flow application.\n * It renders your nodes and edges and handles user interaction\n *\n * @public\n *\n * @example\n * ```tsx\n *import { ReactFlow } from '@xyflow/react'\n *\n *export default function Flow() {\n *  return (<ReactFlow\n *    nodes={...}\n *    edges={...}\n *    onNodesChange={...}\n *    ...\n *  />);\n *}\n *```\n */\nvar index = fixedForwardRef(ReactFlow);\n\nconst selector$6 = (s) => s.domNode?.querySelector('.react-flow__edgelabel-renderer');\n/**\n * Edges are SVG-based. If you want to render more complex labels you can use the\n * `<EdgeLabelRenderer />` component to access a div based renderer. This component\n * is a portal that renders the label in a `<div />` that is positioned on top of\n * the edges. You can see an example usage of the component in the\n * [edge label renderer example](/examples/edges/edge-label-renderer).\n * @public\n *\n * @example\n * ```jsx\n * import React from 'react';\n * import { getBezierPath, EdgeLabelRenderer, BaseEdge } from '@xyflow/react';\n *\n * export function CustomEdge({ id, data, ...props }) {\n *   const [edgePath, labelX, labelY] = getBezierPath(props);\n *\n *   return (\n *     <>\n *       <BaseEdge id={id} path={edgePath} />\n *       <EdgeLabelRenderer>\n *         <div\n *           style={{\n *             position: 'absolute',\n *             transform: `translate(-50%, -50%) translate(${labelX}px,${labelY}px)`,\n *             background: '#ffcc00',\n *             padding: 10,\n *         }}\n *           className=\"nodrag nopan\"\n *         >\n *          {data.label}\n *         </div>\n *       </EdgeLabelRenderer>\n *     </>\n *   );\n * };\n * ```\n *\n * @remarks The `<EdgeLabelRenderer />` has no pointer events by default. If you want to\n * add mouse interactions you need to set the style `pointerEvents: all` and add\n * the `nopan` class on the label or the element you want to interact with.\n */\nfunction EdgeLabelRenderer({ children }) {\n    const edgeLabelRenderer = useStore(selector$6);\n    if (!edgeLabelRenderer) {\n        return null;\n    }\n    return createPortal(children, edgeLabelRenderer);\n}\n\nconst selector$5 = (s) => s.domNode?.querySelector('.react-flow__viewport-portal');\n/**\n * The `<ViewportPortal />` component can be used to add components to the same viewport\n * of the flow where nodes and edges are rendered. This is useful when you want to render\n * your own components that are adhere to the same coordinate system as the nodes & edges\n * and are also affected by zooming and panning\n * @public\n * @example\n *\n * ```jsx\n *import React from 'react';\n *import { ViewportPortal } from '@xyflow/react';\n *\n *export default function () {\n *  return (\n *    <ViewportPortal>\n *      <div\n *        style={{ transform: 'translate(100px, 100px)', position: 'absolute' }}\n *      >\n *        This div is positioned at [100, 100] on the flow.\n *      </div>\n *    </ViewportPortal>\n *  );\n *}\n *```\n */\nfunction ViewportPortal({ children }) {\n    const viewPortalDiv = useStore(selector$5);\n    if (!viewPortalDiv) {\n        return null;\n    }\n    return createPortal(children, viewPortalDiv);\n}\n\n/**\n * When you programmatically add or remove handles to a node or update a node's\n * handle position, you need to let React Flow know about it using this hook. This\n * will update the internal dimensions of the node and properly reposition handles\n * on the canvas if necessary.\n *\n * @public\n * @returns Use this function to tell React Flow to update the internal state of one or more nodes\n * that you have changed programmatically.\n *\n * @example\n * ```jsx\n *import { useCallback, useState } from 'react';\n *import { Handle, useUpdateNodeInternals } from '@xyflow/react';\n *\n *export default function RandomHandleNode({ id }) {\n *  const updateNodeInternals = useUpdateNodeInternals();\n *  const [handleCount, setHandleCount] = useState(0);\n *  const randomizeHandleCount = useCallback(() => {\n *   setHandleCount(Math.floor(Math.random() * 10));\n *    updateNodeInternals(id);\n *  }, [id, updateNodeInternals]);\n *\n *  return (\n *    <>\n *      {Array.from({ length: handleCount }).map((_, index) => (\n *        <Handle\n *          key={index}\n *          type=\"target\"\n *          position=\"left\"\n *          id={`handle-${index}`}\n *        />\n *      ))}\n *\n *      <div>\n *        <button onClick={randomizeHandleCount}>Randomize handle count</button>\n *        <p>There are {handleCount} handles on this node.</p>\n *      </div>\n *    </>\n *  );\n *}\n *```\n * @remarks This hook can only be used in a component that is a child of a\n *{@link ReactFlowProvider} or a {@link ReactFlow} component.\n */\nfunction useUpdateNodeInternals() {\n    const store = useStoreApi();\n    return useCallback((id) => {\n        const { domNode, updateNodeInternals } = store.getState();\n        const updateIds = Array.isArray(id) ? id : [id];\n        const updates = new Map();\n        updateIds.forEach((updateId) => {\n            const nodeElement = domNode?.querySelector(`.react-flow__node[data-id=\"${updateId}\"]`);\n            if (nodeElement) {\n                updates.set(updateId, { id: updateId, nodeElement, force: true });\n            }\n        });\n        requestAnimationFrame(() => updateNodeInternals(updates, { triggerFitView: false }));\n    }, []);\n}\n\nconst nodesSelector = (state) => state.nodes;\n/**\n * This hook returns an array of the current nodes. Components that use this hook\n * will re-render **whenever any node changes**, including when a node is selected\n * or moved.\n *\n * @public\n * @returns An array of all nodes currently in the flow.\n *\n * @example\n * ```jsx\n *import { useNodes } from '@xyflow/react';\n *\n *export default function() {\n *  const nodes = useNodes();\n *\n *  return <div>There are currently {nodes.length} nodes!</div>;\n *}\n *```\n */\nfunction useNodes() {\n    const nodes = useStore(nodesSelector, shallow);\n    return nodes;\n}\n\nconst edgesSelector = (state) => state.edges;\n/**\n * This hook returns an array of the current edges. Components that use this hook\n * will re-render **whenever any edge changes**.\n *\n * @public\n * @returns An array of all edges currently in the flow.\n *\n * @example\n * ```tsx\n *import { useEdges } from '@xyflow/react';\n *\n *export default function () {\n *  const edges = useEdges();\n *\n *  return <div>There are currently {edges.length} edges!</div>;\n *}\n *```\n */\nfunction useEdges() {\n    const edges = useStore(edgesSelector, shallow);\n    return edges;\n}\n\nconst viewportSelector = (state) => ({\n    x: state.transform[0],\n    y: state.transform[1],\n    zoom: state.transform[2],\n});\n/**\n * The `useViewport` hook is a convenient way to read the current state of the\n * {@link Viewport} in a component. Components that use this hook\n * will re-render **whenever the viewport changes**.\n *\n * @public\n * @returns The current viewport.\n *\n * @example\n *\n *```jsx\n *import { useViewport } from '@xyflow/react';\n *\n *export default function ViewportDisplay() {\n *  const { x, y, zoom } = useViewport();\n *\n *  return (\n *    <div>\n *      <p>\n *        The viewport is currently at ({x}, {y}) and zoomed to {zoom}.\n *      </p>\n *    </div>\n *  );\n *}\n *```\n *\n * @remarks This hook can only be used in a component that is a child of a\n *{@link ReactFlowProvider} or a {@link ReactFlow} component.\n */\nfunction useViewport() {\n    const viewport = useStore(viewportSelector, shallow);\n    return viewport;\n}\n\n/**\n * This hook makes it easy to prototype a controlled flow where you manage the\n * state of nodes and edges outside the `ReactFlowInstance`. You can think of it\n * like React's `useState` hook with an additional helper callback.\n *\n * @public\n * @returns\n * - `nodes`: The current array of nodes. You might pass this directly to the `nodes` prop of your\n * `<ReactFlow />` component, or you may want to manipulate it first to perform some layouting,\n * for example.\n * - `setNodes`: A function that you can use to update the nodes. You can pass it a new array of\n * nodes or a callback that receives the current array of nodes and returns a new array of nodes.\n * This is the same as the second element of the tuple returned by React's `useState` hook.\n * - `onNodesChange`: A handy callback that can take an array of `NodeChanges` and update the nodes\n * state accordingly. You'll typically pass this directly to the `onNodesChange` prop of your\n * `<ReactFlow />` component.\n * @example\n *\n *```tsx\n *import { ReactFlow, useNodesState, useEdgesState } from '@xyflow/react';\n *\n *const initialNodes = [];\n *const initialEdges = [];\n *\n *export default function () {\n *  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n *  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n *\n *  return (\n *    <ReactFlow\n *      nodes={nodes}\n *      edges={edges}\n *      onNodesChange={onNodesChange}\n *      onEdgesChange={onEdgesChange}\n *    />\n *  );\n *}\n *```\n *\n * @remarks This hook was created to make prototyping easier and our documentation\n * examples clearer. Although it is OK to use this hook in production, in\n * practice you may want to use a more sophisticated state management solution\n * like Zustand {@link https://reactflow.dev/docs/guides/state-management/} instead.\n *\n */\nfunction useNodesState(initialNodes) {\n    const [nodes, setNodes] = useState(initialNodes);\n    const onNodesChange = useCallback((changes) => setNodes((nds) => applyNodeChanges(changes, nds)), []);\n    return [nodes, setNodes, onNodesChange];\n}\n/**\n * This hook makes it easy to prototype a controlled flow where you manage the\n * state of nodes and edges outside the `ReactFlowInstance`. You can think of it\n * like React's `useState` hook with an additional helper callback.\n *\n * @public\n * @returns\n * - `edges`: The current array of edges. You might pass this directly to the `edges` prop of your\n * `<ReactFlow />` component, or you may want to manipulate it first to perform some layouting,\n * for example.\n *\n * - `setEdges`: A function that you can use to update the edges. You can pass it a new array of\n * edges or a callback that receives the current array of edges and returns a new array of edges.\n * This is the same as the second element of the tuple returned by React's `useState` hook.\n *\n * - `onEdgesChange`: A handy callback that can take an array of `EdgeChanges` and update the edges\n * state accordingly. You'll typically pass this directly to the `onEdgesChange` prop of your\n * `<ReactFlow />` component.\n * @example\n *\n *```tsx\n *import { ReactFlow, useNodesState, useEdgesState } from '@xyflow/react';\n *\n *const initialNodes = [];\n *const initialEdges = [];\n *\n *export default function () {\n *  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n *  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n *\n *  return (\n *    <ReactFlow\n *      nodes={nodes}\n *      edges={edges}\n *      onNodesChange={onNodesChange}\n *      onEdgesChange={onEdgesChange}\n *    />\n *  );\n *}\n *```\n *\n * @remarks This hook was created to make prototyping easier and our documentation\n * examples clearer. Although it is OK to use this hook in production, in\n * practice you may want to use a more sophisticated state management solution\n * like Zustand {@link https://reactflow.dev/docs/guides/state-management/} instead.\n *\n */\nfunction useEdgesState(initialEdges) {\n    const [edges, setEdges] = useState(initialEdges);\n    const onEdgesChange = useCallback((changes) => setEdges((eds) => applyEdgeChanges(changes, eds)), []);\n    return [edges, setEdges, onEdgesChange];\n}\n\n/**\n * The `useOnViewportChange` hook lets you listen for changes to the viewport such\n * as panning and zooming. You can provide a callback for each phase of a viewport\n * change: `onStart`, `onChange`, and `onEnd`.\n *\n * @public\n * @example\n * ```jsx\n *import { useCallback } from 'react';\n *import { useOnViewportChange } from '@xyflow/react';\n *\n *function ViewportChangeLogger() {\n *  useOnViewportChange({\n *    onStart: (viewport: Viewport) => console.log('start', viewport),\n *    onChange: (viewport: Viewport) => console.log('change', viewport),\n *    onEnd: (viewport: Viewport) => console.log('end', viewport),\n *  });\n *\n *  return null;\n *}\n *```\n */\nfunction useOnViewportChange({ onStart, onChange, onEnd }) {\n    const store = useStoreApi();\n    useEffect(() => {\n        store.setState({ onViewportChangeStart: onStart });\n    }, [onStart]);\n    useEffect(() => {\n        store.setState({ onViewportChange: onChange });\n    }, [onChange]);\n    useEffect(() => {\n        store.setState({ onViewportChangeEnd: onEnd });\n    }, [onEnd]);\n}\n\n/**\n * This hook lets you listen for changes to both node and edge selection. As the\n *name implies, the callback you provide will be called whenever the selection of\n *_either_ nodes or edges changes.\n *\n * @public\n * @example\n * ```jsx\n *import { useState } from 'react';\n *import { ReactFlow, useOnSelectionChange } from '@xyflow/react';\n *\n *function SelectionDisplay() {\n *  const [selectedNodes, setSelectedNodes] = useState([]);\n *  const [selectedEdges, setSelectedEdges] = useState([]);\n *\n *  // the passed handler has to be memoized, otherwise the hook will not work correctly\n *  const onChange = useCallback(({ nodes, edges }) => {\n *    setSelectedNodes(nodes.map((node) => node.id));\n *    setSelectedEdges(edges.map((edge) => edge.id));\n *  }, []);\n *\n *  useOnSelectionChange({\n *    onChange,\n *  });\n *\n *  return (\n *    <div>\n *      <p>Selected nodes: {selectedNodes.join(', ')}</p>\n *      <p>Selected edges: {selectedEdges.join(', ')}</p>\n *    </div>\n *  );\n *}\n *```\n *\n * @remarks You need to memoize the passed `onChange` handler, otherwise the hook will not work correctly.\n */\nfunction useOnSelectionChange({ onChange, }) {\n    const store = useStoreApi();\n    useEffect(() => {\n        const nextOnSelectionChangeHandlers = [...store.getState().onSelectionChangeHandlers, onChange];\n        store.setState({ onSelectionChangeHandlers: nextOnSelectionChangeHandlers });\n        return () => {\n            const nextHandlers = store.getState().onSelectionChangeHandlers.filter((fn) => fn !== onChange);\n            store.setState({ onSelectionChangeHandlers: nextHandlers });\n        };\n    }, [onChange]);\n}\n\nconst selector$4 = (options) => (s) => {\n    if (!options.includeHiddenNodes) {\n        return s.nodesInitialized;\n    }\n    if (s.nodeLookup.size === 0) {\n        return false;\n    }\n    for (const [, { internals }] of s.nodeLookup) {\n        if (internals.handleBounds === undefined || !nodeHasDimensions(internals.userNode)) {\n            return false;\n        }\n    }\n    return true;\n};\n/**\n * This hook tells you whether all the nodes in a flow have been measured and given\n *a width and height. When you add a node to the flow, this hook will return\n *`false` and then `true` again once the node has been measured.\n *\n * @public\n * @returns Whether or not the nodes have been initialized by the `<ReactFlow />` component and\n * given a width and height.\n *\n * @example\n * ```jsx\n *import { useReactFlow, useNodesInitialized } from '@xyflow/react';\n *import { useEffect, useState } from 'react';\n *\n *const options = {\n *  includeHiddenNodes: false,\n *};\n *\n *export default function useLayout() {\n *  const { getNodes } = useReactFlow();\n *  const nodesInitialized = useNodesInitialized(options);\n *  const [layoutedNodes, setLayoutedNodes] = useState(getNodes());\n *\n *  useEffect(() => {\n *    if (nodesInitialized) {\n *      setLayoutedNodes(yourLayoutingFunction(getNodes()));\n *    }\n *  }, [nodesInitialized]);\n *\n *  return layoutedNodes;\n *}\n *```\n */\nfunction useNodesInitialized(options = {\n    includeHiddenNodes: false,\n}) {\n    const initialized = useStore(selector$4(options));\n    return initialized;\n}\n\n/**\n * Hook to check if a <Handle /> is connected to another <Handle /> and get the connections.\n *\n * @public\n * @deprecated Use `useNodeConnections` instead.\n * @returns An array with handle connections.\n */\nfunction useHandleConnections({ type, id, nodeId, onConnect, onDisconnect, }) {\n    console.warn('[DEPRECATED] `useHandleConnections` is deprecated. Instead use `useNodeConnections` https://reactflow.dev/api-reference/hooks/useNodeConnections');\n    const _nodeId = useNodeId();\n    const currentNodeId = nodeId ?? _nodeId;\n    const prevConnections = useRef(null);\n    const connections = useStore((state) => state.connectionLookup.get(`${currentNodeId}-${type}${id ? `-${id}` : ''}`), areConnectionMapsEqual);\n    useEffect(() => {\n        // @todo dicuss if onConnect/onDisconnect should be called when the component mounts/unmounts\n        if (prevConnections.current && prevConnections.current !== connections) {\n            const _connections = connections ?? new Map();\n            handleConnectionChange(prevConnections.current, _connections, onDisconnect);\n            handleConnectionChange(_connections, prevConnections.current, onConnect);\n        }\n        prevConnections.current = connections ?? new Map();\n    }, [connections, onConnect, onDisconnect]);\n    return useMemo(() => Array.from(connections?.values() ?? []), [connections]);\n}\n\nconst error014 = errorMessages['error014']();\n/**\n * This hook returns an array of connections on a specific node, handle type ('source', 'target') or handle ID.\n *\n * @public\n * @returns An array with connections.\n *\n * @example\n * ```jsx\n *import { useNodeConnections } from '@xyflow/react';\n *\n *export default function () {\n *  const connections = useNodeConnections({\n *    handleType: 'target',\n *    handleId: 'my-handle',\n *  });\n *\n *  return (\n *    <div>There are currently {connections.length} incoming connections!</div>\n *  );\n *}\n *```\n */\nfunction useNodeConnections({ id, handleType, handleId, onConnect, onDisconnect, } = {}) {\n    const nodeId = useNodeId();\n    const currentNodeId = id ?? nodeId;\n    if (!currentNodeId) {\n        throw new Error(error014);\n    }\n    const prevConnections = useRef(null);\n    const connections = useStore((state) => state.connectionLookup.get(`${currentNodeId}${handleType ? (handleId ? `-${handleType}-${handleId}` : `-${handleType}`) : ''}`), areConnectionMapsEqual);\n    useEffect(() => {\n        // @todo discuss if onConnect/onDisconnect should be called when the component mounts/unmounts\n        if (prevConnections.current && prevConnections.current !== connections) {\n            const _connections = connections ?? new Map();\n            handleConnectionChange(prevConnections.current, _connections, onDisconnect);\n            handleConnectionChange(_connections, prevConnections.current, onConnect);\n        }\n        prevConnections.current = connections ?? new Map();\n    }, [connections, onConnect, onDisconnect]);\n    return useMemo(() => Array.from(connections?.values() ?? []), [connections]);\n}\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nfunction useNodesData(nodeIds) {\n    const nodesData = useStore(useCallback((s) => {\n        const data = [];\n        const isArrayOfIds = Array.isArray(nodeIds);\n        const _nodeIds = isArrayOfIds ? nodeIds : [nodeIds];\n        for (const nodeId of _nodeIds) {\n            const node = s.nodeLookup.get(nodeId);\n            if (node) {\n                data.push({\n                    id: node.id,\n                    type: node.type,\n                    data: node.data,\n                });\n            }\n        }\n        return isArrayOfIds ? data : data[0] ?? null;\n    }, [nodeIds]), shallowNodeData);\n    return nodesData;\n}\n\n/**\n * This hook returns the internal representation of a specific node.\n * Components that use this hook will re-render **whenever the node changes**,\n * including when a node is selected or moved.\n *\n * @public\n * @param id - The ID of a node you want to observe.\n * @returns The `InternalNode` object for the node with the given ID.\n *\n * @example\n * ```tsx\n *import { useInternalNode } from '@xyflow/react';\n *\n *export default function () {\n *  const internalNode = useInternalNode('node-1');\n *  const absolutePosition = internalNode.internals.positionAbsolute;\n *\n *  return (\n *    <div>\n *      The absolute position of the node is at:\n *      <p>x: {absolutePosition.x}</p>\n *      <p>y: {absolutePosition.y}</p>\n *    </div>\n *  );\n *}\n *```\n */\nfunction useInternalNode(id) {\n    const node = useStore(useCallback((s) => s.nodeLookup.get(id), [id]), shallow);\n    return node;\n}\n\nfunction LinePattern({ dimensions, lineWidth, variant, className }) {\n    return (jsx(\"path\", { strokeWidth: lineWidth, d: `M${dimensions[0] / 2} 0 V${dimensions[1]} M0 ${dimensions[1] / 2} H${dimensions[0]}`, className: cc(['react-flow__background-pattern', variant, className]) }));\n}\nfunction DotPattern({ radius, className }) {\n    return (jsx(\"circle\", { cx: radius, cy: radius, r: radius, className: cc(['react-flow__background-pattern', 'dots', className]) }));\n}\n\n/**\n * The three variants are exported as an enum for convenience. You can either import\n * the enum and use it like `BackgroundVariant.Lines` or you can use the raw string\n * value directly.\n * @public\n */\nvar BackgroundVariant;\n(function (BackgroundVariant) {\n    BackgroundVariant[\"Lines\"] = \"lines\";\n    BackgroundVariant[\"Dots\"] = \"dots\";\n    BackgroundVariant[\"Cross\"] = \"cross\";\n})(BackgroundVariant || (BackgroundVariant = {}));\n\nconst defaultSize = {\n    [BackgroundVariant.Dots]: 1,\n    [BackgroundVariant.Lines]: 1,\n    [BackgroundVariant.Cross]: 6,\n};\nconst selector$3 = (s) => ({ transform: s.transform, patternId: `pattern-${s.rfId}` });\nfunction BackgroundComponent({ id, variant = BackgroundVariant.Dots, \n// only used for dots and cross\ngap = 20, \n// only used for lines and cross\nsize, lineWidth = 1, offset = 0, color, bgColor, style, className, patternClassName, }) {\n    const ref = useRef(null);\n    const { transform, patternId } = useStore(selector$3, shallow);\n    const patternSize = size || defaultSize[variant];\n    const isDots = variant === BackgroundVariant.Dots;\n    const isCross = variant === BackgroundVariant.Cross;\n    const gapXY = Array.isArray(gap) ? gap : [gap, gap];\n    const scaledGap = [gapXY[0] * transform[2] || 1, gapXY[1] * transform[2] || 1];\n    const scaledSize = patternSize * transform[2];\n    const offsetXY = Array.isArray(offset) ? offset : [offset, offset];\n    const patternDimensions = isCross ? [scaledSize, scaledSize] : scaledGap;\n    const scaledOffset = [\n        offsetXY[0] * transform[2] || 1 + patternDimensions[0] / 2,\n        offsetXY[1] * transform[2] || 1 + patternDimensions[1] / 2,\n    ];\n    const _patternId = `${patternId}${id ? id : ''}`;\n    return (jsxs(\"svg\", { className: cc(['react-flow__background', className]), style: {\n            ...style,\n            ...containerStyle,\n            '--xy-background-color-props': bgColor,\n            '--xy-background-pattern-color-props': color,\n        }, ref: ref, \"data-testid\": \"rf__background\", children: [jsx(\"pattern\", { id: _patternId, x: transform[0] % scaledGap[0], y: transform[1] % scaledGap[1], width: scaledGap[0], height: scaledGap[1], patternUnits: \"userSpaceOnUse\", patternTransform: `translate(-${scaledOffset[0]},-${scaledOffset[1]})`, children: isDots ? (jsx(DotPattern, { radius: scaledSize / 2, className: patternClassName })) : (jsx(LinePattern, { dimensions: patternDimensions, lineWidth: lineWidth, variant: variant, className: patternClassName })) }), jsx(\"rect\", { x: \"0\", y: \"0\", width: \"100%\", height: \"100%\", fill: `url(#${_patternId})` })] }));\n}\nBackgroundComponent.displayName = 'Background';\n/**\n * The `<Background />` component makes it convenient to render different types of backgrounds common in node-based UIs. It comes with three variants: lines, dots and cross.\n *\n * @example\n *\n * A simple example of how to use the Background component.\n *\n * ```tsx\n * import { useState } from 'react';\n * import { ReactFlow, Background, BackgroundVariant } from '@xyflow/react';\n *\n * export default function Flow() {\n *   return (\n *     <ReactFlow defaultNodes={[...]} defaultEdges={[...]}>\n *       <Background color=\"#ccc\" variant={BackgroundVariant.Dots} />\n *     </ReactFlow>\n *   );\n * }\n * ```\n *\n * @example\n *\n * In this example you can see how to combine multiple backgrounds\n *\n * ```tsx\n * import { ReactFlow, Background, BackgroundVariant } from '@xyflow/react';\n * import '@xyflow/react/dist/style.css';\n *\n * export default function Flow() {\n *   return (\n *     <ReactFlow defaultNodes={[...]} defaultEdges={[...]}>\n *       <Background\n *         id=\"1\"\n *         gap={10}\n *         color=\"#f1f1f1\"\n *         variant={BackgroundVariant.Lines}\n *       />\n *       <Background\n *         id=\"2\"\n *         gap={100}\n *         color=\"#ccc\"\n *         variant={BackgroundVariant.Lines}\n *       />\n *     </ReactFlow>\n *   );\n * }\n * ```\n *\n * @remarks\n *\n * When combining multiple <Background /> components itâ€™s important to give each of them a unique id prop!\n *\n */\nconst Background = memo(BackgroundComponent);\n\nfunction PlusIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 32\", children: jsx(\"path\", { d: \"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z\" }) }));\n}\n\nfunction MinusIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 5\", children: jsx(\"path\", { d: \"M0 0h32v4.2H0z\" }) }));\n}\n\nfunction FitViewIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 32 30\", children: jsx(\"path\", { d: \"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z\" }) }));\n}\n\nfunction LockIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 25 32\", children: jsx(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z\" }) }));\n}\n\nfunction UnlockIcon() {\n    return (jsx(\"svg\", { xmlns: \"http://www.w3.org/2000/svg\", viewBox: \"0 0 25 32\", children: jsx(\"path\", { d: \"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z\" }) }));\n}\n\n/**\n * You can add buttons to the control panel by using the `<ControlButton />` component\n * and pass it as a child to the [`<Controls />`](/api-reference/components/controls) component.\n *\n * @public\n * @example\n *```jsx\n *import { MagicWand } from '@radix-ui/react-icons'\n *import { ReactFlow, Controls, ControlButton } from '@xyflow/react'\n *\n *export default function Flow() {\n *  return (\n *    <ReactFlow nodes={[...]} edges={[...]}>\n *      <Controls>\n *        <ControlButton onClick={() => alert('Something magical just happened. âœ¨')}>\n *          <MagicWand />\n *        </ControlButton>\n *      </Controls>\n *    </ReactFlow>\n *  )\n *}\n *```\n */\nfunction ControlButton({ children, className, ...rest }) {\n    return (jsx(\"button\", { type: \"button\", className: cc(['react-flow__controls-button', className]), ...rest, children: children }));\n}\n\nconst selector$2 = (s) => ({\n    isInteractive: s.nodesDraggable || s.nodesConnectable || s.elementsSelectable,\n    minZoomReached: s.transform[2] <= s.minZoom,\n    maxZoomReached: s.transform[2] >= s.maxZoom,\n    ariaLabelConfig: s.ariaLabelConfig,\n});\nfunction ControlsComponent({ style, showZoom = true, showFitView = true, showInteractive = true, fitViewOptions, onZoomIn, onZoomOut, onFitView, onInteractiveChange, className, children, position = 'bottom-left', orientation = 'vertical', 'aria-label': ariaLabel, }) {\n    const store = useStoreApi();\n    const { isInteractive, minZoomReached, maxZoomReached, ariaLabelConfig } = useStore(selector$2, shallow);\n    const { zoomIn, zoomOut, fitView } = useReactFlow();\n    const onZoomInHandler = () => {\n        zoomIn();\n        onZoomIn?.();\n    };\n    const onZoomOutHandler = () => {\n        zoomOut();\n        onZoomOut?.();\n    };\n    const onFitViewHandler = () => {\n        fitView(fitViewOptions);\n        onFitView?.();\n    };\n    const onToggleInteractivity = () => {\n        store.setState({\n            nodesDraggable: !isInteractive,\n            nodesConnectable: !isInteractive,\n            elementsSelectable: !isInteractive,\n        });\n        onInteractiveChange?.(!isInteractive);\n    };\n    const orientationClass = orientation === 'horizontal' ? 'horizontal' : 'vertical';\n    return (jsxs(Panel, { className: cc(['react-flow__controls', orientationClass, className]), position: position, style: style, \"data-testid\": \"rf__controls\", \"aria-label\": ariaLabel ?? ariaLabelConfig['controls.ariaLabel'], children: [showZoom && (jsxs(Fragment, { children: [jsx(ControlButton, { onClick: onZoomInHandler, className: \"react-flow__controls-zoomin\", title: ariaLabelConfig['controls.zoomIn.ariaLabel'], \"aria-label\": ariaLabelConfig['controls.zoomIn.ariaLabel'], disabled: maxZoomReached, children: jsx(PlusIcon, {}) }), jsx(ControlButton, { onClick: onZoomOutHandler, className: \"react-flow__controls-zoomout\", title: ariaLabelConfig['controls.zoomOut.ariaLabel'], \"aria-label\": ariaLabelConfig['controls.zoomOut.ariaLabel'], disabled: minZoomReached, children: jsx(MinusIcon, {}) })] })), showFitView && (jsx(ControlButton, { className: \"react-flow__controls-fitview\", onClick: onFitViewHandler, title: ariaLabelConfig['controls.fitView.ariaLabel'], \"aria-label\": ariaLabelConfig['controls.fitView.ariaLabel'], children: jsx(FitViewIcon, {}) })), showInteractive && (jsx(ControlButton, { className: \"react-flow__controls-interactive\", onClick: onToggleInteractivity, title: ariaLabelConfig['controls.interactive.ariaLabel'], \"aria-label\": ariaLabelConfig['controls.interactive.ariaLabel'], children: isInteractive ? jsx(UnlockIcon, {}) : jsx(LockIcon, {}) })), children] }));\n}\nControlsComponent.displayName = 'Controls';\n/**\n * The `<Controls />` component renders a small panel that contains convenient\n * buttons to zoom in, zoom out, fit the view, and lock the viewport.\n *\n * @public\n * @example\n *```tsx\n *import { ReactFlow, Controls } from '@xyflow/react'\n *\n *export default function Flow() {\n *  return (\n *    <ReactFlow nodes={[...]} edges={[...]}>\n *      <Controls />\n *    </ReactFlow>\n *  )\n *}\n *```\n *\n * @remarks To extend or customise the controls, you can use the [`<ControlButton />`](/api-reference/components/control-button) component\n *\n */\nconst Controls = memo(ControlsComponent);\n\nfunction MiniMapNodeComponent({ id, x, y, width, height, style, color, strokeColor, strokeWidth, className, borderRadius, shapeRendering, selected, onClick, }) {\n    const { background, backgroundColor } = style || {};\n    const fill = (color || background || backgroundColor);\n    return (jsx(\"rect\", { className: cc(['react-flow__minimap-node', { selected }, className]), x: x, y: y, rx: borderRadius, ry: borderRadius, width: width, height: height, style: {\n            fill,\n            stroke: strokeColor,\n            strokeWidth,\n        }, shapeRendering: shapeRendering, onClick: onClick ? (event) => onClick(event, id) : undefined }));\n}\nconst MiniMapNode = memo(MiniMapNodeComponent);\n\nconst selectorNodeIds = (s) => s.nodes.map((node) => node.id);\nconst getAttrFunction = (func) => func instanceof Function ? func : () => func;\nfunction MiniMapNodes({ nodeStrokeColor, nodeColor, nodeClassName = '', nodeBorderRadius = 5, nodeStrokeWidth, \n/*\n * We need to rename the prop to be `CapitalCase` so that JSX will render it as\n * a component properly.\n */\nnodeComponent: NodeComponent = MiniMapNode, onClick, }) {\n    const nodeIds = useStore(selectorNodeIds, shallow);\n    const nodeColorFunc = getAttrFunction(nodeColor);\n    const nodeStrokeColorFunc = getAttrFunction(nodeStrokeColor);\n    const nodeClassNameFunc = getAttrFunction(nodeClassName);\n    const shapeRendering = typeof window === 'undefined' || !!window.chrome ? 'crispEdges' : 'geometricPrecision';\n    return (jsx(Fragment, { children: nodeIds.map((nodeId) => (\n        /*\n         * The split of responsibilities between MiniMapNodes and\n         * NodeComponentWrapper may appear weird. However, itâ€™s designed to\n         * minimize the cost of updates when individual nodes change.\n         *\n         * For more details, see a similar commit in `NodeRenderer/index.tsx`.\n         */\n        jsx(NodeComponentWrapper, { id: nodeId, nodeColorFunc: nodeColorFunc, nodeStrokeColorFunc: nodeStrokeColorFunc, nodeClassNameFunc: nodeClassNameFunc, nodeBorderRadius: nodeBorderRadius, nodeStrokeWidth: nodeStrokeWidth, NodeComponent: NodeComponent, onClick: onClick, shapeRendering: shapeRendering }, nodeId))) }));\n}\nfunction NodeComponentWrapperInner({ id, nodeColorFunc, nodeStrokeColorFunc, nodeClassNameFunc, nodeBorderRadius, nodeStrokeWidth, shapeRendering, NodeComponent, onClick, }) {\n    const { node, x, y, width, height } = useStore((s) => {\n        const { internals } = s.nodeLookup.get(id);\n        const node = internals.userNode;\n        const { x, y } = internals.positionAbsolute;\n        const { width, height } = getNodeDimensions(node);\n        return {\n            node,\n            x,\n            y,\n            width,\n            height,\n        };\n    }, shallow);\n    if (!node || node.hidden || !nodeHasDimensions(node)) {\n        return null;\n    }\n    return (jsx(NodeComponent, { x: x, y: y, width: width, height: height, style: node.style, selected: !!node.selected, className: nodeClassNameFunc(node), color: nodeColorFunc(node), borderRadius: nodeBorderRadius, strokeColor: nodeStrokeColorFunc(node), strokeWidth: nodeStrokeWidth, shapeRendering: shapeRendering, onClick: onClick, id: node.id }));\n}\nconst NodeComponentWrapper = memo(NodeComponentWrapperInner);\nvar MiniMapNodes$1 = memo(MiniMapNodes);\n\nconst defaultWidth = 200;\nconst defaultHeight = 150;\nconst filterHidden = (node) => !node.hidden;\nconst selector$1 = (s) => {\n    const viewBB = {\n        x: -s.transform[0] / s.transform[2],\n        y: -s.transform[1] / s.transform[2],\n        width: s.width / s.transform[2],\n        height: s.height / s.transform[2],\n    };\n    return {\n        viewBB,\n        boundingRect: s.nodeLookup.size > 0\n            ? getBoundsOfRects(getInternalNodesBounds(s.nodeLookup, { filter: filterHidden }), viewBB)\n            : viewBB,\n        rfId: s.rfId,\n        panZoom: s.panZoom,\n        translateExtent: s.translateExtent,\n        flowWidth: s.width,\n        flowHeight: s.height,\n        ariaLabelConfig: s.ariaLabelConfig,\n    };\n};\nconst ARIA_LABEL_KEY = 'react-flow__minimap-desc';\nfunction MiniMapComponent({ style, className, nodeStrokeColor, nodeColor, nodeClassName = '', nodeBorderRadius = 5, nodeStrokeWidth, \n/*\n * We need to rename the prop to be `CapitalCase` so that JSX will render it as\n * a component properly.\n */\nnodeComponent, bgColor, maskColor, maskStrokeColor, maskStrokeWidth, position = 'bottom-right', onClick, onNodeClick, pannable = false, zoomable = false, ariaLabel, inversePan, zoomStep = 10, offsetScale = 5, }) {\n    const store = useStoreApi();\n    const svg = useRef(null);\n    const { boundingRect, viewBB, rfId, panZoom, translateExtent, flowWidth, flowHeight, ariaLabelConfig } = useStore(selector$1, shallow);\n    const elementWidth = style?.width ?? defaultWidth;\n    const elementHeight = style?.height ?? defaultHeight;\n    const scaledWidth = boundingRect.width / elementWidth;\n    const scaledHeight = boundingRect.height / elementHeight;\n    const viewScale = Math.max(scaledWidth, scaledHeight);\n    const viewWidth = viewScale * elementWidth;\n    const viewHeight = viewScale * elementHeight;\n    const offset = offsetScale * viewScale;\n    const x = boundingRect.x - (viewWidth - boundingRect.width) / 2 - offset;\n    const y = boundingRect.y - (viewHeight - boundingRect.height) / 2 - offset;\n    const width = viewWidth + offset * 2;\n    const height = viewHeight + offset * 2;\n    const labelledBy = `${ARIA_LABEL_KEY}-${rfId}`;\n    const viewScaleRef = useRef(0);\n    const minimapInstance = useRef();\n    viewScaleRef.current = viewScale;\n    useEffect(() => {\n        if (svg.current && panZoom) {\n            minimapInstance.current = XYMinimap({\n                domNode: svg.current,\n                panZoom,\n                getTransform: () => store.getState().transform,\n                getViewScale: () => viewScaleRef.current,\n            });\n            return () => {\n                minimapInstance.current?.destroy();\n            };\n        }\n    }, [panZoom]);\n    useEffect(() => {\n        minimapInstance.current?.update({\n            translateExtent,\n            width: flowWidth,\n            height: flowHeight,\n            inversePan,\n            pannable,\n            zoomStep,\n            zoomable,\n        });\n    }, [pannable, zoomable, inversePan, zoomStep, translateExtent, flowWidth, flowHeight]);\n    const onSvgClick = onClick\n        ? (event) => {\n            const [x, y] = minimapInstance.current?.pointer(event) || [0, 0];\n            onClick(event, { x, y });\n        }\n        : undefined;\n    const onSvgNodeClick = onNodeClick\n        ? useCallback((event, nodeId) => {\n            const node = store.getState().nodeLookup.get(nodeId).internals.userNode;\n            onNodeClick(event, node);\n        }, [])\n        : undefined;\n    const _ariaLabel = ariaLabel ?? ariaLabelConfig['minimap.ariaLabel'];\n    return (jsx(Panel, { position: position, style: {\n            ...style,\n            '--xy-minimap-background-color-props': typeof bgColor === 'string' ? bgColor : undefined,\n            '--xy-minimap-mask-background-color-props': typeof maskColor === 'string' ? maskColor : undefined,\n            '--xy-minimap-mask-stroke-color-props': typeof maskStrokeColor === 'string' ? maskStrokeColor : undefined,\n            '--xy-minimap-mask-stroke-width-props': typeof maskStrokeWidth === 'number' ? maskStrokeWidth * viewScale : undefined,\n            '--xy-minimap-node-background-color-props': typeof nodeColor === 'string' ? nodeColor : undefined,\n            '--xy-minimap-node-stroke-color-props': typeof nodeStrokeColor === 'string' ? nodeStrokeColor : undefined,\n            '--xy-minimap-node-stroke-width-props': typeof nodeStrokeWidth === 'number' ? nodeStrokeWidth : undefined,\n        }, className: cc(['react-flow__minimap', className]), \"data-testid\": \"rf__minimap\", children: jsxs(\"svg\", { width: elementWidth, height: elementHeight, viewBox: `${x} ${y} ${width} ${height}`, className: \"react-flow__minimap-svg\", role: \"img\", \"aria-labelledby\": labelledBy, ref: svg, onClick: onSvgClick, children: [_ariaLabel && jsx(\"title\", { id: labelledBy, children: _ariaLabel }), jsx(MiniMapNodes$1, { onClick: onSvgNodeClick, nodeColor: nodeColor, nodeStrokeColor: nodeStrokeColor, nodeBorderRadius: nodeBorderRadius, nodeClassName: nodeClassName, nodeStrokeWidth: nodeStrokeWidth, nodeComponent: nodeComponent }), jsx(\"path\", { className: \"react-flow__minimap-mask\", d: `M${x - offset},${y - offset}h${width + offset * 2}v${height + offset * 2}h${-width - offset * 2}z\n        M${viewBB.x},${viewBB.y}h${viewBB.width}v${viewBB.height}h${-viewBB.width}z`, fillRule: \"evenodd\", pointerEvents: \"none\" })] }) }));\n}\nMiniMapComponent.displayName = 'MiniMap';\n/**\n * The `<MiniMap />` component can be used to render an overview of your flow. It\n * renders each node as an SVG element and visualizes where the current viewport is\n * in relation to the rest of the flow.\n *\n * @public\n * @example\n *\n * ```jsx\n *import { ReactFlow, MiniMap } from '@xyflow/react';\n *\n *export default function Flow() {\n *  return (\n *    <ReactFlow nodes={[...]]} edges={[...]]}>\n *      <MiniMap nodeStrokeWidth={3} />\n *    </ReactFlow>\n *  );\n *}\n *```\n */\nconst MiniMap = memo(MiniMapComponent);\n\nconst scaleSelector = (calculateScale) => (store) => calculateScale ? `${Math.max(1 / store.transform[2], 1)}` : undefined;\nconst defaultPositions = {\n    [ResizeControlVariant.Line]: 'right',\n    [ResizeControlVariant.Handle]: 'bottom-right',\n};\nfunction ResizeControl({ nodeId, position, variant = ResizeControlVariant.Handle, className, style = undefined, children, color, minWidth = 10, minHeight = 10, maxWidth = Number.MAX_VALUE, maxHeight = Number.MAX_VALUE, keepAspectRatio = false, resizeDirection, autoScale = true, shouldResize, onResizeStart, onResize, onResizeEnd, }) {\n    const contextNodeId = useNodeId();\n    const id = typeof nodeId === 'string' ? nodeId : contextNodeId;\n    const store = useStoreApi();\n    const resizeControlRef = useRef(null);\n    const isHandleControl = variant === ResizeControlVariant.Handle;\n    const scale = useStore(useCallback(scaleSelector(isHandleControl && autoScale), [isHandleControl, autoScale]), shallow);\n    const resizer = useRef(null);\n    const controlPosition = position ?? defaultPositions[variant];\n    useEffect(() => {\n        if (!resizeControlRef.current || !id) {\n            return;\n        }\n        if (!resizer.current) {\n            resizer.current = XYResizer({\n                domNode: resizeControlRef.current,\n                nodeId: id,\n                getStoreItems: () => {\n                    const { nodeLookup, transform, snapGrid, snapToGrid, nodeOrigin, domNode } = store.getState();\n                    return {\n                        nodeLookup,\n                        transform,\n                        snapGrid,\n                        snapToGrid,\n                        nodeOrigin,\n                        paneDomNode: domNode,\n                    };\n                },\n                onChange: (change, childChanges) => {\n                    const { triggerNodeChanges, nodeLookup, parentLookup, nodeOrigin } = store.getState();\n                    const changes = [];\n                    const nextPosition = { x: change.x, y: change.y };\n                    const node = nodeLookup.get(id);\n                    if (node && node.expandParent && node.parentId) {\n                        const origin = node.origin ?? nodeOrigin;\n                        const width = change.width ?? node.measured.width ?? 0;\n                        const height = change.height ?? node.measured.height ?? 0;\n                        const child = {\n                            id: node.id,\n                            parentId: node.parentId,\n                            rect: {\n                                width,\n                                height,\n                                ...evaluateAbsolutePosition({\n                                    x: change.x ?? node.position.x,\n                                    y: change.y ?? node.position.y,\n                                }, { width, height }, node.parentId, nodeLookup, origin),\n                            },\n                        };\n                        const parentExpandChanges = handleExpandParent([child], nodeLookup, parentLookup, nodeOrigin);\n                        changes.push(...parentExpandChanges);\n                        /*\n                         * when the parent was expanded by the child node, its position will be clamped at\n                         * 0,0 when node origin is 0,0 and to width, height if it's 1,1\n                         */\n                        nextPosition.x = change.x ? Math.max(origin[0] * width, change.x) : undefined;\n                        nextPosition.y = change.y ? Math.max(origin[1] * height, change.y) : undefined;\n                    }\n                    if (nextPosition.x !== undefined && nextPosition.y !== undefined) {\n                        const positionChange = {\n                            id,\n                            type: 'position',\n                            position: { ...nextPosition },\n                        };\n                        changes.push(positionChange);\n                    }\n                    if (change.width !== undefined && change.height !== undefined) {\n                        const setAttributes = !resizeDirection ? true : resizeDirection === 'horizontal' ? 'width' : 'height';\n                        const dimensionChange = {\n                            id,\n                            type: 'dimensions',\n                            resizing: true,\n                            setAttributes,\n                            dimensions: {\n                                width: change.width,\n                                height: change.height,\n                            },\n                        };\n                        changes.push(dimensionChange);\n                    }\n                    for (const childChange of childChanges) {\n                        const positionChange = {\n                            ...childChange,\n                            type: 'position',\n                        };\n                        changes.push(positionChange);\n                    }\n                    triggerNodeChanges(changes);\n                },\n                onEnd: ({ width, height }) => {\n                    const dimensionChange = {\n                        id: id,\n                        type: 'dimensions',\n                        resizing: false,\n                        dimensions: {\n                            width,\n                            height,\n                        },\n                    };\n                    store.getState().triggerNodeChanges([dimensionChange]);\n                },\n            });\n        }\n        resizer.current.update({\n            controlPosition,\n            boundaries: {\n                minWidth,\n                minHeight,\n                maxWidth,\n                maxHeight,\n            },\n            keepAspectRatio,\n            resizeDirection,\n            onResizeStart,\n            onResize,\n            onResizeEnd,\n            shouldResize,\n        });\n        return () => {\n            resizer.current?.destroy();\n        };\n    }, [\n        controlPosition,\n        minWidth,\n        minHeight,\n        maxWidth,\n        maxHeight,\n        keepAspectRatio,\n        onResizeStart,\n        onResize,\n        onResizeEnd,\n        shouldResize,\n    ]);\n    const positionClassNames = controlPosition.split('-');\n    return (jsx(\"div\", { className: cc(['react-flow__resize-control', 'nodrag', ...positionClassNames, variant, className]), ref: resizeControlRef, style: {\n            ...style,\n            scale,\n            ...(color && { [isHandleControl ? 'backgroundColor' : 'borderColor']: color }),\n        }, children: children }));\n}\n/**\n * To create your own resizing UI, you can use the `NodeResizeControl` component where you can pass children (such as icons).\n * @public\n *\n */\nconst NodeResizeControl = memo(ResizeControl);\n\n/**\n * The `<NodeResizer />` component can be used to add a resize functionality to your\n * nodes. It renders draggable controls around the node to resize in all directions.\n * @public\n *\n * @example\n *```jsx\n *import { memo } from 'react';\n *import { Handle, Position, NodeResizer } from '@xyflow/react';\n *\n *function ResizableNode({ data }) {\n *  return (\n *    <>\n *      <NodeResizer minWidth={100} minHeight={30} />\n *      <Handle type=\"target\" position={Position.Left} />\n *      <div style={{ padding: 10 }}>{data.label}</div>\n *      <Handle type=\"source\" position={Position.Right} />\n *    </>\n *  );\n *};\n *\n *export default memo(ResizableNode);\n *```\n */\nfunction NodeResizer({ nodeId, isVisible = true, handleClassName, handleStyle, lineClassName, lineStyle, color, minWidth = 10, minHeight = 10, maxWidth = Number.MAX_VALUE, maxHeight = Number.MAX_VALUE, keepAspectRatio = false, autoScale = true, shouldResize, onResizeStart, onResize, onResizeEnd, }) {\n    if (!isVisible) {\n        return null;\n    }\n    return (jsxs(Fragment, { children: [XY_RESIZER_LINE_POSITIONS.map((position) => (jsx(NodeResizeControl, { className: lineClassName, style: lineStyle, nodeId: nodeId, position: position, variant: ResizeControlVariant.Line, color: color, minWidth: minWidth, minHeight: minHeight, maxWidth: maxWidth, maxHeight: maxHeight, onResizeStart: onResizeStart, keepAspectRatio: keepAspectRatio, autoScale: autoScale, shouldResize: shouldResize, onResize: onResize, onResizeEnd: onResizeEnd }, position))), XY_RESIZER_HANDLE_POSITIONS.map((position) => (jsx(NodeResizeControl, { className: handleClassName, style: handleStyle, nodeId: nodeId, position: position, color: color, minWidth: minWidth, minHeight: minHeight, maxWidth: maxWidth, maxHeight: maxHeight, onResizeStart: onResizeStart, keepAspectRatio: keepAspectRatio, autoScale: autoScale, shouldResize: shouldResize, onResize: onResize, onResizeEnd: onResizeEnd }, position)))] }));\n}\n\nconst selector = (state) => state.domNode?.querySelector('.react-flow__renderer');\nfunction NodeToolbarPortal({ children }) {\n    const wrapperRef = useStore(selector);\n    if (!wrapperRef) {\n        return null;\n    }\n    return createPortal(children, wrapperRef);\n}\n\nconst nodeEqualityFn = (a, b) => a?.internals.positionAbsolute.x !== b?.internals.positionAbsolute.x ||\n    a?.internals.positionAbsolute.y !== b?.internals.positionAbsolute.y ||\n    a?.measured.width !== b?.measured.width ||\n    a?.measured.height !== b?.measured.height ||\n    a?.selected !== b?.selected ||\n    a?.internals.z !== b?.internals.z;\nconst nodesEqualityFn = (a, b) => {\n    if (a.size !== b.size) {\n        return false;\n    }\n    for (const [key, node] of a) {\n        if (nodeEqualityFn(node, b.get(key))) {\n            return false;\n        }\n    }\n    return true;\n};\nconst storeSelector = (state) => ({\n    x: state.transform[0],\n    y: state.transform[1],\n    zoom: state.transform[2],\n    selectedNodesCount: state.nodes.filter((node) => node.selected).length,\n});\n/**\n * This component can render a toolbar or tooltip to one side of a custom node. This\n * toolbar doesn't scale with the viewport so that the content is always visible.\n *\n * @public\n * @example\n * ```jsx\n *import { memo } from 'react';\n *import { Handle, Position, NodeToolbar } from '@xyflow/react';\n *\n *function CustomNode({ data }) {\n *  return (\n *    <>\n *      <NodeToolbar isVisible={data.toolbarVisible} position={data.toolbarPosition}>\n *        <button>delete</button>\n *        <button>copy</button>\n *        <button>expand</button>\n *      </NodeToolbar>\n *\n *      <div style={{ padding: '10px 20px' }}>\n *        {data.label}\n *      </div>\n *\n *      <Handle type=\"target\" position={Position.Left} />\n *      <Handle type=\"source\" position={Position.Right} />\n *    </>\n *  );\n *};\n *\n *export default memo(CustomNode);\n *```\n * @remarks By default, the toolbar is only visible when a node is selected. If multiple\n * nodes are selected it will not be visible to prevent overlapping toolbars or\n * clutter. You can override this behavior by setting the `isVisible` prop to `true`.\n */\nfunction NodeToolbar({ nodeId, children, className, style, isVisible, position = Position.Top, offset = 10, align = 'center', ...rest }) {\n    const contextNodeId = useNodeId();\n    const nodesSelector = useCallback((state) => {\n        const nodeIds = Array.isArray(nodeId) ? nodeId : [nodeId || contextNodeId || ''];\n        const internalNodes = nodeIds.reduce((res, id) => {\n            const node = state.nodeLookup.get(id);\n            if (node) {\n                res.set(node.id, node);\n            }\n            return res;\n        }, new Map());\n        return internalNodes;\n    }, [nodeId, contextNodeId]);\n    const nodes = useStore(nodesSelector, nodesEqualityFn);\n    const { x, y, zoom, selectedNodesCount } = useStore(storeSelector, shallow);\n    // if isVisible is not set, we show the toolbar only if its node is selected and no other node is selected\n    const isActive = typeof isVisible === 'boolean'\n        ? isVisible\n        : nodes.size === 1 && nodes.values().next().value?.selected && selectedNodesCount === 1;\n    if (!isActive || !nodes.size) {\n        return null;\n    }\n    const nodeRect = getInternalNodesBounds(nodes);\n    const nodesArray = Array.from(nodes.values());\n    const zIndex = Math.max(...nodesArray.map((node) => node.internals.z + 1));\n    const wrapperStyle = {\n        position: 'absolute',\n        transform: getNodeToolbarTransform(nodeRect, { x, y, zoom }, position, offset, align),\n        zIndex,\n        ...style,\n    };\n    return (jsx(NodeToolbarPortal, { children: jsx(\"div\", { style: wrapperStyle, className: cc(['react-flow__node-toolbar', className]), ...rest, \"data-id\": nodesArray.reduce((acc, node) => `${acc}${node.id} `, '').trim(), children: children }) }));\n}\n\nexport { Background, BackgroundVariant, BaseEdge, BezierEdge, ControlButton, Controls, EdgeLabelRenderer, EdgeText, Handle, MiniMap, NodeResizeControl, NodeResizer, NodeToolbar, Panel, index as ReactFlow, ReactFlowProvider, SimpleBezierEdge, SmoothStepEdge, StepEdge, StraightEdge, ViewportPortal, applyEdgeChanges, applyNodeChanges, getSimpleBezierPath, isEdge, isNode, useConnection, useEdges, useEdgesState, useHandleConnections, useInternalNode, useKeyPress, useNodeConnections, useNodeId, useNodes, useNodesData, useNodesInitialized, useNodesState, useOnSelectionChange, useOnViewportChange, useReactFlow, useStore, useStoreApi, useUpdateNodeInternals, useViewport };\n","\"use strict\";\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nclass Graph {\n  _isDirected = true;\n  _isMultigraph = false;\n  _isCompound = false;\n\n  // Label for the graph itself\n  _label;\n\n  // Defaults to be set when creating a new node\n  _defaultNodeLabelFn = () => undefined;\n\n  // Defaults to be set when creating a new edge\n  _defaultEdgeLabelFn = () => undefined;\n\n  // v -> label\n  _nodes = {};\n\n  // v -> edgeObj\n  _in = {};\n\n  // u -> v -> Number\n  _preds = {};\n\n  // v -> edgeObj\n  _out = {};\n\n  // v -> w -> Number\n  _sucs = {};\n\n  // e -> edgeObj\n  _edgeObjs = {};\n\n  // e -> label\n  _edgeLabels = {};\n\n  /* Number of nodes in the graph. Should only be changed by the implementation. */\n  _nodeCount = 0;\n\n  /* Number of edges in the graph. Should only be changed by the implementation. */\n  _edgeCount = 0;\n\n  _parent;\n\n  _children;\n\n  constructor(opts) {\n    if (opts) {\n      this._isDirected = Object.hasOwn(opts, \"directed\") ? opts.directed : true;\n      this._isMultigraph = Object.hasOwn(opts, \"multigraph\") ? opts.multigraph : false;\n      this._isCompound = Object.hasOwn(opts, \"compound\") ? opts.compound : false;\n    }\n\n    if (this._isCompound) {\n      // v -> parent\n      this._parent = {};\n\n      // v -> children\n      this._children = {};\n      this._children[GRAPH_NODE] = {};\n    }\n  }\n\n  /* === Graph functions ========= */\n\n  /**\n   * Whether graph was created with 'directed' flag set to true or not.\n   */\n  isDirected() {\n    return this._isDirected;\n  }\n\n  /**\n   * Whether graph was created with 'multigraph' flag set to true or not.\n   */\n  isMultigraph() {\n    return this._isMultigraph;\n  }\n\n  /**\n   * Whether graph was created with 'compound' flag set to true or not.\n   */\n  isCompound() {\n    return this._isCompound;\n  }\n\n  /**\n   * Sets the label of the graph.\n   */\n  setGraph(label) {\n    this._label = label;\n    return this;\n  }\n\n  /**\n   * Gets the graph label.\n   */\n  graph() {\n    return this._label;\n  }\n\n\n  /* === Node functions ========== */\n\n  /**\n   * Sets the default node label. If newDefault is a function, it will be\n   * invoked ach time when setting a label for a node. Otherwise, this label\n   * will be assigned as default label in case if no label was specified while\n   * setting a node.\n   * Complexity: O(1).\n   */\n  setDefaultNodeLabel(newDefault) {\n    this._defaultNodeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultNodeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of nodes in the graph.\n   * Complexity: O(1).\n   */\n  nodeCount() {\n    return this._nodeCount;\n  }\n\n  /**\n   * Gets all nodes of the graph. Note, the in case of compound graph subnodes are\n   * not included in list.\n   * Complexity: O(1).\n   */\n  nodes() {\n    return Object.keys(this._nodes);\n  }\n\n  /**\n   * Gets list of nodes without in-edges.\n   * Complexity: O(|V|).\n   */\n  sources() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._in[v]).length === 0);\n  }\n\n  /**\n   * Gets list of nodes without out-edges.\n   * Complexity: O(|V|).\n   */\n  sinks() {\n    var self = this;\n    return this.nodes().filter(v => Object.keys(self._out[v]).length === 0);\n  }\n\n  /**\n   * Invokes setNode method for each node in names list.\n   * Complexity: O(|names|).\n   */\n  setNodes(vs, value) {\n    var args = arguments;\n    var self = this;\n    vs.forEach(function(v) {\n      if (args.length > 1) {\n        self.setNode(v, value);\n      } else {\n        self.setNode(v);\n      }\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the value for the node v in the graph. If label is supplied\n   * it is set as the value for the node. If label is not supplied and the node was\n   * created by this call then the default node label will be assigned.\n   * Complexity: O(1).\n   */\n  setNode(v, value) {\n    if (Object.hasOwn(this._nodes, v)) {\n      if (arguments.length > 1) {\n        this._nodes[v] = value;\n      }\n      return this;\n    }\n\n    this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n    if (this._isCompound) {\n      this._parent[v] = GRAPH_NODE;\n      this._children[v] = {};\n      this._children[GRAPH_NODE][v] = true;\n    }\n    this._in[v] = {};\n    this._preds[v] = {};\n    this._out[v] = {};\n    this._sucs[v] = {};\n    ++this._nodeCount;\n    return this;\n  }\n\n  /**\n   * Gets the label of node with specified name.\n   * Complexity: O(|V|).\n   */\n  node(v) {\n    return this._nodes[v];\n  }\n\n  /**\n   * Detects whether graph has a node with specified name or not.\n   */\n  hasNode(v) {\n    return Object.hasOwn(this._nodes, v);\n  }\n\n  /**\n   * Remove the node with the name from the graph or do nothing if the node is not in\n   * the graph. If the node was removed this function also removes any incident\n   * edges.\n   * Complexity: O(1).\n   */\n  removeNode(v) {\n    var self = this;\n    if (Object.hasOwn(this._nodes, v)) {\n      var removeEdge = e => self.removeEdge(self._edgeObjs[e]);\n      delete this._nodes[v];\n      if (this._isCompound) {\n        this._removeFromParentsChildList(v);\n        delete this._parent[v];\n        this.children(v).forEach(function(child) {\n          self.setParent(child);\n        });\n        delete this._children[v];\n      }\n      Object.keys(this._in[v]).forEach(removeEdge);\n      delete this._in[v];\n      delete this._preds[v];\n      Object.keys(this._out[v]).forEach(removeEdge);\n      delete this._out[v];\n      delete this._sucs[v];\n      --this._nodeCount;\n    }\n    return this;\n  }\n\n  /**\n   * Sets node p as a parent for node v if it is defined, or removes the\n   * parent for v if p is undefined. Method throws an exception in case of\n   * invoking it in context of noncompound graph.\n   * Average-case complexity: O(1).\n   */\n  setParent(v, parent) {\n    if (!this._isCompound) {\n      throw new Error(\"Cannot set parent in a non-compound graph\");\n    }\n\n    if (parent === undefined) {\n      parent = GRAPH_NODE;\n    } else {\n      // Coerce parent to string\n      parent += \"\";\n      for (var ancestor = parent; ancestor !== undefined; ancestor = this.parent(ancestor)) {\n        if (ancestor === v) {\n          throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n              \" would create a cycle\");\n        }\n      }\n\n      this.setNode(parent);\n    }\n\n    this.setNode(v);\n    this._removeFromParentsChildList(v);\n    this._parent[v] = parent;\n    this._children[parent][v] = true;\n    return this;\n  }\n\n  _removeFromParentsChildList(v) {\n    delete this._children[this._parent[v]][v];\n  }\n\n  /**\n   * Gets parent node for node v.\n   * Complexity: O(1).\n   */\n  parent(v) {\n    if (this._isCompound) {\n      var parent = this._parent[v];\n      if (parent !== GRAPH_NODE) {\n        return parent;\n      }\n    }\n  }\n\n  /**\n   * Gets list of direct children of node v.\n   * Complexity: O(1).\n   */\n  children(v = GRAPH_NODE) {\n    if (this._isCompound) {\n      var children = this._children[v];\n      if (children) {\n        return Object.keys(children);\n      }\n    } else if (v === GRAPH_NODE) {\n      return this.nodes();\n    } else if (this.hasNode(v)) {\n      return [];\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  predecessors(v) {\n    var predsV = this._preds[v];\n    if (predsV) {\n      return Object.keys(predsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are successors of the specified node or undefined if node v is not in\n   * the graph. Behavior is undefined for undirected graphs - use neighbors instead.\n   * Complexity: O(|V|).\n   */\n  successors(v) {\n    var sucsV = this._sucs[v];\n    if (sucsV) {\n      return Object.keys(sucsV);\n    }\n  }\n\n  /**\n   * Return all nodes that are predecessors or successors of the specified node or undefined if\n   * node v is not in the graph.\n   * Complexity: O(|V|).\n   */\n  neighbors(v) {\n    var preds = this.predecessors(v);\n    if (preds) {\n      const union = new Set(preds);\n      for (var succ of this.successors(v)) {\n        union.add(succ);\n      }\n\n      return Array.from(union.values());\n    }\n  }\n\n  isLeaf(v) {\n    var neighbors;\n    if (this.isDirected()) {\n      neighbors = this.successors(v);\n    } else {\n      neighbors = this.neighbors(v);\n    }\n    return neighbors.length === 0;\n  }\n\n  /**\n   * Creates new graph with nodes filtered via filter. Edges incident to rejected node\n   * are also removed. In case of compound graph, if parent is rejected by filter,\n   * than all its children are rejected too.\n   * Average-case complexity: O(|E|+|V|).\n   */\n  filterNodes(filter) {\n    var copy = new this.constructor({\n      directed: this._isDirected,\n      multigraph: this._isMultigraph,\n      compound: this._isCompound\n    });\n\n    copy.setGraph(this.graph());\n\n    var self = this;\n    Object.entries(this._nodes).forEach(function([v, value]) {\n      if (filter(v)) {\n        copy.setNode(v, value);\n      }\n    });\n\n    Object.values(this._edgeObjs).forEach(function(e) {\n      if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n        copy.setEdge(e, self.edge(e));\n      }\n    });\n\n    var parents = {};\n    function findParent(v) {\n      var parent = self.parent(v);\n      if (parent === undefined || copy.hasNode(parent)) {\n        parents[v] = parent;\n        return parent;\n      } else if (parent in parents) {\n        return parents[parent];\n      } else {\n        return findParent(parent);\n      }\n    }\n\n    if (this._isCompound) {\n      copy.nodes().forEach(v => copy.setParent(v, findParent(v)));\n    }\n\n    return copy;\n  }\n\n  /* === Edge functions ========== */\n\n  /**\n   * Sets the default edge label or factory function. This label will be\n   * assigned as default label in case if no label was specified while setting\n   * an edge or this function will be invoked each time when setting an edge\n   * with no label specified and returned value * will be used as a label for edge.\n   * Complexity: O(1).\n   */\n  setDefaultEdgeLabel(newDefault) {\n    this._defaultEdgeLabelFn = newDefault;\n    if (typeof newDefault !== 'function') {\n      this._defaultEdgeLabelFn = () => newDefault;\n    }\n\n    return this;\n  }\n\n  /**\n   * Gets the number of edges in the graph.\n   * Complexity: O(1).\n   */\n  edgeCount() {\n    return this._edgeCount;\n  }\n\n  /**\n   * Gets edges of the graph. In case of compound graph subgraphs are not considered.\n   * Complexity: O(|E|).\n   */\n  edges() {\n    return Object.values(this._edgeObjs);\n  }\n\n  /**\n   * Establish an edges path over the nodes in nodes list. If some edge is already\n   * exists, it will update its label, otherwise it will create an edge between pair\n   * of nodes with label provided or default label if no label provided.\n   * Complexity: O(|nodes|).\n   */\n  setPath(vs, value) {\n    var self = this;\n    var args = arguments;\n    vs.reduce(function(v, w) {\n      if (args.length > 1) {\n        self.setEdge(v, w, value);\n      } else {\n        self.setEdge(v, w);\n      }\n      return w;\n    });\n    return this;\n  }\n\n  /**\n   * Creates or updates the label for the edge (v, w) with the optionally supplied\n   * name. If label is supplied it is set as the value for the edge. If label is not\n   * supplied and the edge was created by this call then the default edge label will\n   * be assigned. The name parameter is only useful with multigraphs.\n   */\n  setEdge() {\n    var v, w, name, value;\n    var valueSpecified = false;\n    var arg0 = arguments[0];\n\n    if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n      v = arg0.v;\n      w = arg0.w;\n      name = arg0.name;\n      if (arguments.length === 2) {\n        value = arguments[1];\n        valueSpecified = true;\n      }\n    } else {\n      v = arg0;\n      w = arguments[1];\n      name = arguments[3];\n      if (arguments.length > 2) {\n        value = arguments[2];\n        valueSpecified = true;\n      }\n    }\n\n    v = \"\" + v;\n    w = \"\" + w;\n    if (name !== undefined) {\n      name = \"\" + name;\n    }\n\n    var e = edgeArgsToId(this._isDirected, v, w, name);\n    if (Object.hasOwn(this._edgeLabels, e)) {\n      if (valueSpecified) {\n        this._edgeLabels[e] = value;\n      }\n      return this;\n    }\n\n    if (name !== undefined && !this._isMultigraph) {\n      throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n    }\n\n    // It didn't exist, so we need to create it.\n    // First ensure the nodes exist.\n    this.setNode(v);\n    this.setNode(w);\n\n    this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n    var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n    // Ensure we add undirected edges in a consistent way.\n    v = edgeObj.v;\n    w = edgeObj.w;\n\n    Object.freeze(edgeObj);\n    this._edgeObjs[e] = edgeObj;\n    incrementOrInitEntry(this._preds[w], v);\n    incrementOrInitEntry(this._sucs[v], w);\n    this._in[w][e] = edgeObj;\n    this._out[v][e] = edgeObj;\n    this._edgeCount++;\n    return this;\n  }\n\n  /**\n   * Gets the label for the specified edge.\n   * Complexity: O(1).\n   */\n  edge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return this._edgeLabels[e];\n  }\n\n  /**\n   * Gets the label for the specified edge and converts it to an object.\n   * Complexity: O(1)\n   */\n  edgeAsObj() {\n    const edge = this.edge(...arguments);\n    if (typeof edge !== \"object\") {\n      return {label: edge};\n    }\n\n    return edge;\n  }\n\n  /**\n   * Detects whether the graph contains specified edge or not. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  hasEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    return Object.hasOwn(this._edgeLabels, e);\n  }\n\n  /**\n   * Removes the specified edge from the graph. No subgraphs are considered.\n   * Complexity: O(1).\n   */\n  removeEdge(v, w, name) {\n    var e = (arguments.length === 1\n      ? edgeObjToId(this._isDirected, arguments[0])\n      : edgeArgsToId(this._isDirected, v, w, name));\n    var edge = this._edgeObjs[e];\n    if (edge) {\n      v = edge.v;\n      w = edge.w;\n      delete this._edgeLabels[e];\n      delete this._edgeObjs[e];\n      decrementOrRemoveEntry(this._preds[w], v);\n      decrementOrRemoveEntry(this._sucs[v], w);\n      delete this._in[w][e];\n      delete this._out[v][e];\n      this._edgeCount--;\n    }\n    return this;\n  }\n\n  /**\n   * Return all edges that point to the node v. Optionally filters those edges down to just those\n   * coming from node u. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  inEdges(v, u) {\n    var inV = this._in[v];\n    if (inV) {\n      var edges = Object.values(inV);\n      if (!u) {\n        return edges;\n      }\n      return edges.filter(edge => edge.v === u);\n    }\n  }\n\n  /**\n   * Return all edges that are pointed at by node v. Optionally filters those edges down to just\n   * those point to w. Behavior is undefined for undirected graphs - use nodeEdges instead.\n   * Complexity: O(|E|).\n   */\n  outEdges(v, w) {\n    var outV = this._out[v];\n    if (outV) {\n      var edges = Object.values(outV);\n      if (!w) {\n        return edges;\n      }\n      return edges.filter(edge => edge.w === w);\n    }\n  }\n\n  /**\n   * Returns all edges to or from node v regardless of direction. Optionally filters those edges\n   * down to just those between nodes v and w regardless of direction.\n   * Complexity: O(|E|).\n   */\n  nodeEdges(v, w) {\n    var inEdges = this.inEdges(v, w);\n    if (inEdges) {\n      return inEdges.concat(this.outEdges(v, w));\n    }\n  }\n}\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (name === undefined ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n\nmodule.exports = Graph;\n","module.exports = '2.2.4';\n","// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n","var Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\n/**\n * Creates a JSON representation of the graph that can be serialized to a string with\n * JSON.stringify. The graph can later be restored using json.read.\n */\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n\n  if (g.graph() !== undefined) {\n    json.value = structuredClone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return g.nodes().map(function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (nodeValue !== undefined) {\n      node.value = nodeValue;\n    }\n    if (parent !== undefined) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return g.edges().map(function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (e.name !== undefined) {\n      edge.name = e.name;\n    }\n    if (edgeValue !== undefined) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\n/**\n * Takes JSON as input and returns the graph representation.\n *\n * @example\n * var g2 = graphlib.json.read(JSON.parse(str));\n * g2.nodes();\n * // ['a', 'b']\n * g2.edges()\n * // [ { v: 'a', w: 'b' } ]\n */\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  json.nodes.forEach(function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  json.edges.forEach(function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n","module.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    g.successors(v).forEach(dfs);\n    g.predecessors(v).forEach(dfs);\n  }\n\n  g.nodes().forEach(function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n","/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nclass PriorityQueue {\n  _arr = [];\n  _keyIndices = {};\n\n  /**\n   * Returns the number of elements in the queue. Takes `O(1)` time.\n   */\n  size() {\n    return this._arr.length;\n  }\n\n  /**\n   * Returns the keys that are in the queue. Takes `O(n)` time.\n   */\n  keys() {\n    return this._arr.map(function(x) { return x.key; });\n  }\n\n  /**\n   * Returns `true` if **key** is in the queue and `false` if not.\n   */\n  has(key) {\n    return Object.hasOwn(this._keyIndices, key);\n  }\n\n  /**\n   * Returns the priority for **key**. If **key** is not present in the queue\n   * then this function returns `undefined`. Takes `O(1)` time.\n   *\n   * @param {Object} key\n   */\n  priority(key) {\n    var index = this._keyIndices[key];\n    if (index !== undefined) {\n      return this._arr[index].priority;\n    }\n  }\n\n  /**\n   * Returns the key for the minimum element in this queue. If the queue is\n   * empty this function throws an Error. Takes `O(1)` time.\n   */\n  min() {\n    if (this.size() === 0) {\n      throw new Error(\"Queue underflow\");\n    }\n    return this._arr[0].key;\n  }\n\n  /**\n   * Inserts a new key into the priority queue. If the key already exists in\n   * the queue this function returns `false`; otherwise it will return `true`.\n   * Takes `O(n)` time.\n   *\n   * @param {Object} key the key to add\n   * @param {Number} priority the initial priority for the key\n   */\n  add(key, priority) {\n    var keyIndices = this._keyIndices;\n    key = String(key);\n    if (!Object.hasOwn(keyIndices, key)) {\n      var arr = this._arr;\n      var index = arr.length;\n      keyIndices[key] = index;\n      arr.push({key: key, priority: priority});\n      this._decrease(index);\n      return true;\n    }\n    return false;\n  }\n\n  /**\n   * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n   */\n  removeMin() {\n    this._swap(0, this._arr.length - 1);\n    var min = this._arr.pop();\n    delete this._keyIndices[min.key];\n    this._heapify(0);\n    return min.key;\n  }\n\n  /**\n   * Decreases the priority for **key** to **priority**. If the new priority is\n   * greater than the previous priority, this function will throw an Error.\n   *\n   * @param {Object} key the key for which to raise priority\n   * @param {Number} priority the new priority for the key\n   */\n  decrease(key, priority) {\n    var index = this._keyIndices[key];\n    if (priority > this._arr[index].priority) {\n      throw new Error(\"New priority is greater than current priority. \" +\n          \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n    }\n    this._arr[index].priority = priority;\n    this._decrease(index);\n  }\n\n  _heapify(i) {\n    var arr = this._arr;\n    var l = 2 * i;\n    var r = l + 1;\n    var largest = i;\n    if (l < arr.length) {\n      largest = arr[l].priority < arr[largest].priority ? l : largest;\n      if (r < arr.length) {\n        largest = arr[r].priority < arr[largest].priority ? r : largest;\n      }\n      if (largest !== i) {\n        this._swap(i, largest);\n        this._heapify(largest);\n      }\n    }\n  }\n\n  _decrease(index) {\n    var arr = this._arr;\n    var priority = arr[index].priority;\n    var parent;\n    while (index !== 0) {\n      parent = index >> 1;\n      if (arr[parent].priority < priority) {\n        break;\n      }\n      this._swap(index, parent);\n      index = parent;\n    }\n  }\n\n  _swap(i, j) {\n    var arr = this._arr;\n    var keyIndices = this._keyIndices;\n    var origArrI = arr[i];\n    var origArrJ = arr[j];\n    arr[i] = origArrJ;\n    arr[j] = origArrI;\n    keyIndices[origArrJ.key] = i;\n    keyIndices[origArrI.key] = j;\n  }\n}\n\nmodule.exports = PriorityQueue;\n","var PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n","var dijkstra = require(\"./dijkstra\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return g.nodes().reduce(function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n    return acc;\n  }, {});\n}\n","module.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!Object.hasOwn(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!Object.hasOwn(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n","var tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return tarjan(g).filter(function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n","module.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = () => 1;\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n","function topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (Object.hasOwn(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!Object.hasOwn(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      g.predecessors(node).forEach(visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  g.sinks().forEach(visit);\n\n  if (Object.keys(visited).length !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nclass CycleException extends Error {\n  constructor() {\n    super(...arguments);\n  }\n}\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n","var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n","module.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * If the order is not \"post\", it will be treated as \"pre\".\n */\nfunction dfs(g, vs, order) {\n  if (!Array.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = g.isDirected() ? v => g.successors(v) : v => g.neighbors(v);\n  var orderFunc = order === \"post\" ? postOrderDfs : preOrderDfs;\n\n  var acc = [];\n  var visited = {};\n  vs.forEach(v => {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    orderFunc(v, navigation, visited, acc);\n  });\n\n  return acc;\n}\n\nfunction postOrderDfs(v, navigation, visited, acc) {\n  var stack = [[v, false]];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (curr[1]) {\n      acc.push(curr[0]);\n    } else {\n      if (!Object.hasOwn(visited, curr[0])) {\n        visited[curr[0]] = true;\n        stack.push([curr[0], true]);\n        forEachRight(navigation(curr[0]), w => stack.push([w, false]));\n      }\n    }\n  }\n}\n\nfunction preOrderDfs(v, navigation, visited, acc) {\n  var stack = [v];\n  while (stack.length > 0) {\n    var curr = stack.pop();\n    if (!Object.hasOwn(visited, curr)) {\n      visited[curr] = true;\n      acc.push(curr);\n      forEachRight(navigation(curr), w => stack.push(w));\n    }\n  }\n}\n\nfunction forEachRight(array, iteratee) {\n  var length = array.length;\n  while (length--) {\n    iteratee(array[length], length, array);\n  }\n\n  return array;\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n","var Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  g.nodes().forEach(function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (Object.hasOwn(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n","module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n","/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n","/*\n * Simple doubly linked list implementation derived from Cormen, et al.,\n * \"Introduction to Algorithms\".\n */\n\nclass List {\n  constructor() {\n    let sentinel = {};\n    sentinel._next = sentinel._prev = sentinel;\n    this._sentinel = sentinel;\n  }\n\n  dequeue() {\n    let sentinel = this._sentinel;\n    let entry = sentinel._prev;\n    if (entry !== sentinel) {\n      unlink(entry);\n      return entry;\n    }\n  }\n\n  enqueue(entry) {\n    let sentinel = this._sentinel;\n    if (entry._prev && entry._next) {\n      unlink(entry);\n    }\n    entry._next = sentinel._next;\n    sentinel._next._prev = entry;\n    sentinel._next = entry;\n    entry._prev = sentinel;\n  }\n\n  toString() {\n    let strs = [];\n    let sentinel = this._sentinel;\n    let curr = sentinel._prev;\n    while (curr !== sentinel) {\n      strs.push(JSON.stringify(curr, filterOutLinks));\n      curr = curr._prev;\n    }\n    return \"[\" + strs.join(\", \") + \"]\";\n  }\n}\n\nfunction unlink(entry) {\n  entry._prev._next = entry._next;\n  entry._next._prev = entry._prev;\n  delete entry._next;\n  delete entry._prev;\n}\n\nfunction filterOutLinks(k, v) {\n  if (k !== \"_next\" && k !== \"_prev\") {\n    return v;\n  }\n}\n\nmodule.exports = List;\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet List = require(\"./data/list\");\n\n/*\n * A greedy heuristic for finding a feedback arc set for a graph. A feedback\n * arc set is a set of edges that can be removed to make a graph acyclic.\n * The algorithm comes from: P. Eades, X. Lin, and W. F. Smyth, \"A fast and\n * effective heuristic for the feedback arc set problem.\" This implementation\n * adjusts that from the paper to allow for weighted edges.\n */\nmodule.exports = greedyFAS;\n\nlet DEFAULT_WEIGHT_FN = () => 1;\n\nfunction greedyFAS(g, weightFn) {\n  if (g.nodeCount() <= 1) {\n    return [];\n  }\n  let state = buildState(g, weightFn || DEFAULT_WEIGHT_FN);\n  let results = doGreedyFAS(state.graph, state.buckets, state.zeroIdx);\n\n  // Expand multi-edges\n  return results.flatMap(e => g.outEdges(e.v, e.w));\n}\n\nfunction doGreedyFAS(g, buckets, zeroIdx) {\n  let results = [];\n  let sources = buckets[buckets.length - 1];\n  let sinks = buckets[0];\n\n  let entry;\n  while (g.nodeCount()) {\n    while ((entry = sinks.dequeue()))   { removeNode(g, buckets, zeroIdx, entry); }\n    while ((entry = sources.dequeue())) { removeNode(g, buckets, zeroIdx, entry); }\n    if (g.nodeCount()) {\n      for (let i = buckets.length - 2; i > 0; --i) {\n        entry = buckets[i].dequeue();\n        if (entry) {\n          results = results.concat(removeNode(g, buckets, zeroIdx, entry, true));\n          break;\n        }\n      }\n    }\n  }\n\n  return results;\n}\n\nfunction removeNode(g, buckets, zeroIdx, entry, collectPredecessors) {\n  let results = collectPredecessors ? [] : undefined;\n\n  g.inEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let uEntry = g.node(edge.v);\n\n    if (collectPredecessors) {\n      results.push({ v: edge.v, w: edge.w });\n    }\n\n    uEntry.out -= weight;\n    assignBucket(buckets, zeroIdx, uEntry);\n  });\n\n  g.outEdges(entry.v).forEach(edge => {\n    let weight = g.edge(edge);\n    let w = edge.w;\n    let wEntry = g.node(w);\n    wEntry[\"in\"] -= weight;\n    assignBucket(buckets, zeroIdx, wEntry);\n  });\n\n  g.removeNode(entry.v);\n\n  return results;\n}\n\nfunction buildState(g, weightFn) {\n  let fasGraph = new Graph();\n  let maxIn = 0;\n  let maxOut = 0;\n\n  g.nodes().forEach(v => {\n    fasGraph.setNode(v, { v: v, \"in\": 0, out: 0 });\n  });\n\n  // Aggregate weights on nodes, but also sum the weights across multi-edges\n  // into a single edge for the fasGraph.\n  g.edges().forEach(e => {\n    let prevWeight = fasGraph.edge(e.v, e.w) || 0;\n    let weight = weightFn(e);\n    let edgeWeight = prevWeight + weight;\n    fasGraph.setEdge(e.v, e.w, edgeWeight);\n    maxOut = Math.max(maxOut, fasGraph.node(e.v).out += weight);\n    maxIn  = Math.max(maxIn,  fasGraph.node(e.w)[\"in\"]  += weight);\n  });\n\n  let buckets = range(maxOut + maxIn + 3).map(() => new List());\n  let zeroIdx = maxIn + 1;\n\n  fasGraph.nodes().forEach(v => {\n    assignBucket(buckets, zeroIdx, fasGraph.node(v));\n  });\n\n  return { graph: fasGraph, buckets: buckets, zeroIdx: zeroIdx };\n}\n\nfunction assignBucket(buckets, zeroIdx, entry) {\n  if (!entry.out) {\n    buckets[0].enqueue(entry);\n  } else if (!entry[\"in\"]) {\n    buckets[buckets.length - 1].enqueue(entry);\n  } else {\n    buckets[entry.out - entry[\"in\"] + zeroIdx].enqueue(entry);\n  }\n}\n\nfunction range(limit) {\n  const range = [];\n  for (let i = 0; i < limit; i++) {\n    range.push(i);\n  }\n\n  return range;\n}\n","/* eslint \"no-console\": off */\n\n\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  addBorderNode,\n  addDummyNode,\n  applyWithChunking,\n  asNonCompoundGraph,\n  buildLayerMatrix,\n  intersectRect,\n  mapValues,\n  maxRank,\n  normalizeRanks,\n  notime,\n  partition,\n  pick,\n  predecessorWeights,\n  range,\n  removeEmptyRanks,\n  simplify,\n  successorWeights,\n  time,\n  uniqueId,\n  zipObject,\n};\n\n/*\n * Adds a dummy node to the graph and return v.\n */\nfunction addDummyNode(g, type, attrs, name) {\n  var v = name;\n  while (g.hasNode(v)) {\n    v = uniqueId(name);\n  }\n\n  attrs.dummy = type;\n  g.setNode(v, attrs);\n  return v;\n}\n\n/*\n * Returns a new graph with only simple edges. Handles aggregation of data\n * associated with multi-edges.\n */\nfunction simplify(g) {\n  let simplified = new Graph().setGraph(g.graph());\n  g.nodes().forEach(v => simplified.setNode(v, g.node(v)));\n  g.edges().forEach(e => {\n    let simpleLabel = simplified.edge(e.v, e.w) || { weight: 0, minlen: 1 };\n    let label = g.edge(e);\n    simplified.setEdge(e.v, e.w, {\n      weight: simpleLabel.weight + label.weight,\n      minlen: Math.max(simpleLabel.minlen, label.minlen)\n    });\n  });\n  return simplified;\n}\n\nfunction asNonCompoundGraph(g) {\n  let simplified = new Graph({ multigraph: g.isMultigraph() }).setGraph(g.graph());\n  g.nodes().forEach(v => {\n    if (!g.children(v).length) {\n      simplified.setNode(v, g.node(v));\n    }\n  });\n  g.edges().forEach(e => {\n    simplified.setEdge(e, g.edge(e));\n  });\n  return simplified;\n}\n\nfunction successorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let sucs = {};\n    g.outEdges(v).forEach(e => {\n      sucs[e.w] = (sucs[e.w] || 0) + g.edge(e).weight;\n    });\n    return sucs;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\nfunction predecessorWeights(g) {\n  let weightMap = g.nodes().map(v => {\n    let preds = {};\n    g.inEdges(v).forEach(e => {\n      preds[e.v] = (preds[e.v] || 0) + g.edge(e).weight;\n    });\n    return preds;\n  });\n  return zipObject(g.nodes(), weightMap);\n}\n\n/*\n * Finds where a line starting at point ({x, y}) would intersect a rectangle\n * ({x, y, width, height}) if it were pointing at the rectangle's center.\n */\nfunction intersectRect(rect, point) {\n  let x = rect.x;\n  let y = rect.y;\n\n  // Rectangle intersection algorithm from:\n  // http://math.stackexchange.com/questions/108113/find-edge-between-two-boxes\n  let dx = point.x - x;\n  let dy = point.y - y;\n  let w = rect.width / 2;\n  let h = rect.height / 2;\n\n  if (!dx && !dy) {\n    throw new Error(\"Not possible to find intersection inside of the rectangle\");\n  }\n\n  let sx, sy;\n  if (Math.abs(dy) * w > Math.abs(dx) * h) {\n    // Intersection is top or bottom of rect.\n    if (dy < 0) {\n      h = -h;\n    }\n    sx = h * dx / dy;\n    sy = h;\n  } else {\n    // Intersection is left or right of rect.\n    if (dx < 0) {\n      w = -w;\n    }\n    sx = w;\n    sy = w * dy / dx;\n  }\n\n  return { x: x + sx, y: y + sy };\n}\n\n/*\n * Given a DAG with each node assigned \"rank\" and \"order\" properties, this\n * function will produce a matrix with the ids of each node.\n */\nfunction buildLayerMatrix(g) {\n  let layering = range(maxRank(g) + 1).map(() => []);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    let rank = node.rank;\n    if (rank !== undefined) {\n      layering[rank][node.order] = v;\n    }\n  });\n  return layering;\n}\n\n/*\n * Adjusts the ranks for all nodes in the graph such that all nodes v have\n * rank(v) >= 0 and at least one node w has rank(w) = 0.\n */\nfunction normalizeRanks(g) {\n  let nodeRanks = g.nodes().map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MAX_VALUE;\n    }\n\n    return rank;\n  });\n  let min = applyWithChunking(Math.min, nodeRanks);\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (Object.hasOwn(node, \"rank\")) {\n      node.rank -= min;\n    }\n  });\n}\n\nfunction removeEmptyRanks(g) {\n  // Ranks may not start at 0, so we need to offset them\n  let nodeRanks = g.nodes().map(v => g.node(v).rank);\n  let offset = applyWithChunking(Math.min, nodeRanks);\n\n  let layers = [];\n  g.nodes().forEach(v => {\n    let rank = g.node(v).rank - offset;\n    if (!layers[rank]) {\n      layers[rank] = [];\n    }\n    layers[rank].push(v);\n  });\n\n  let delta = 0;\n  let nodeRankFactor = g.graph().nodeRankFactor;\n  Array.from(layers).forEach((vs, i) => {\n    if (vs === undefined && i % nodeRankFactor !== 0) {\n      --delta;\n    } else if (vs !== undefined && delta) {\n      vs.forEach(v => g.node(v).rank += delta);\n    }\n  });\n}\n\nfunction addBorderNode(g, prefix, rank, order) {\n  let node = {\n    width: 0,\n    height: 0\n  };\n  if (arguments.length >= 4) {\n    node.rank = rank;\n    node.order = order;\n  }\n  return addDummyNode(g, \"border\", node, prefix);\n}\n\nfunction splitToChunks(array, chunkSize = CHUNKING_THRESHOLD) {\n  const chunks = [];\n  for (let i = 0; i < array.length; i += chunkSize) {\n    const chunk = array.slice(i, i + chunkSize);\n    chunks.push(chunk);\n  }\n  return chunks;\n}\n\nconst CHUNKING_THRESHOLD = 65535;\n\nfunction applyWithChunking(fn, argsArray) {\n  if(argsArray.length > CHUNKING_THRESHOLD) {\n    const chunks = splitToChunks(argsArray);\n    return fn.apply(null, chunks.map(chunk => fn.apply(null, chunk)));\n  } else {\n    return fn.apply(null, argsArray);\n  }\n}\n\nfunction maxRank(g) {\n  const nodes = g.nodes();\n  const nodeRanks = nodes.map(v => {\n    let rank = g.node(v).rank;\n    if (rank === undefined) {\n      return Number.MIN_VALUE;\n    }\n    return rank;\n  });\n\n  return applyWithChunking(Math.max, nodeRanks);\n}\n\n/*\n * Partition a collection into two groups: `lhs` and `rhs`. If the supplied\n * function returns true for an entry it goes into `lhs`. Otherwise it goes\n * into `rhs.\n */\nfunction partition(collection, fn) {\n  let result = { lhs: [], rhs: [] };\n  collection.forEach(value => {\n    if (fn(value)) {\n      result.lhs.push(value);\n    } else {\n      result.rhs.push(value);\n    }\n  });\n  return result;\n}\n\n/*\n * Returns a new function that wraps `fn` with a timer. The wrapper logs the\n * time it takes to execute the function.\n */\nfunction time(name, fn) {\n  let start = Date.now();\n  try {\n    return fn();\n  } finally {\n    console.log(name + \" time: \" + (Date.now() - start) + \"ms\");\n  }\n}\n\nfunction notime(name, fn) {\n  return fn();\n}\n\nlet idCounter = 0;\nfunction uniqueId(prefix) {\n  var id = ++idCounter;\n  return prefix + (\"\" + id);\n}\n\nfunction range(start, limit, step = 1) {\n  if (limit == null) {\n    limit = start;\n    start = 0;\n  }\n\n  let endCon = (i) => i < limit;\n  if (step < 0) {\n    endCon = (i) => limit < i;\n  }\n\n  const range = [];\n  for (let i = start; endCon(i); i += step) {\n    range.push(i);\n  }\n\n  return range;\n}\n\nfunction pick(source, keys) {\n  const dest = {};\n  for (const key of keys) {\n    if (source[key] !== undefined) {\n      dest[key] = source[key];\n    }\n  }\n\n  return dest;\n}\n\nfunction mapValues(obj, funcOrProp) {\n  let func = funcOrProp;\n  if (typeof funcOrProp === 'string') {\n    func = (val) => val[funcOrProp];\n  }\n\n  return Object.entries(obj).reduce((acc, [k, v]) => {\n    acc[k] = func(v, k);\n    return acc;\n  }, {});\n}\n\nfunction zipObject(props, values) {\n  return props.reduce((acc, key, i) => {\n    acc[key] = values[i];\n    return acc;\n  }, {});\n}\n","\"use strict\";\n\nlet greedyFAS = require(\"./greedy-fas\");\nlet uniqueId = require(\"./util\").uniqueId;\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\nfunction run(g) {\n  let fas = (g.graph().acyclicer === \"greedy\"\n    ? greedyFAS(g, weightFn(g))\n    : dfsFAS(g));\n  fas.forEach(e => {\n    let label = g.edge(e);\n    g.removeEdge(e);\n    label.forwardName = e.name;\n    label.reversed = true;\n    g.setEdge(e.w, e.v, label, uniqueId(\"rev\"));\n  });\n\n  function weightFn(g) {\n    return e => {\n      return g.edge(e).weight;\n    };\n  }\n}\n\nfunction dfsFAS(g) {\n  let fas = [];\n  let stack = {};\n  let visited = {};\n\n  function dfs(v) {\n    if (Object.hasOwn(visited, v)) {\n      return;\n    }\n    visited[v] = true;\n    stack[v] = true;\n    g.outEdges(v).forEach(e => {\n      if (Object.hasOwn(stack, e.w)) {\n        fas.push(e);\n      } else {\n        dfs(e.w);\n      }\n    });\n    delete stack[v];\n  }\n\n  g.nodes().forEach(dfs);\n  return fas;\n}\n\nfunction undo(g) {\n  g.edges().forEach(e => {\n    let label = g.edge(e);\n    if (label.reversed) {\n      g.removeEdge(e);\n\n      let forwardName = label.forwardName;\n      delete label.reversed;\n      delete label.forwardName;\n      g.setEdge(e.w, e.v, label, forwardName);\n    }\n  });\n}\n","\"use strict\";\n\nlet util = require(\"./util\");\n\nmodule.exports = {\n  run: run,\n  undo: undo\n};\n\n/*\n * Breaks any long edges in the graph into short segments that span 1 layer\n * each. This operation is undoable with the denormalize function.\n *\n * Pre-conditions:\n *\n *    1. The input graph is a DAG.\n *    2. Each node in the graph has a \"rank\" property.\n *\n * Post-condition:\n *\n *    1. All edges in the graph have a length of 1.\n *    2. Dummy nodes are added where edges have been split into segments.\n *    3. The graph is augmented with a \"dummyChains\" attribute which contains\n *       the first dummy in each chain of dummy nodes produced.\n */\nfunction run(g) {\n  g.graph().dummyChains = [];\n  g.edges().forEach(edge => normalizeEdge(g, edge));\n}\n\nfunction normalizeEdge(g, e) {\n  let v = e.v;\n  let vRank = g.node(v).rank;\n  let w = e.w;\n  let wRank = g.node(w).rank;\n  let name = e.name;\n  let edgeLabel = g.edge(e);\n  let labelRank = edgeLabel.labelRank;\n\n  if (wRank === vRank + 1) return;\n\n  g.removeEdge(e);\n\n  let dummy, attrs, i;\n  for (i = 0, ++vRank; vRank < wRank; ++i, ++vRank) {\n    edgeLabel.points = [];\n    attrs = {\n      width: 0, height: 0,\n      edgeLabel: edgeLabel, edgeObj: e,\n      rank: vRank\n    };\n    dummy = util.addDummyNode(g, \"edge\", attrs, \"_d\");\n    if (vRank === labelRank) {\n      attrs.width = edgeLabel.width;\n      attrs.height = edgeLabel.height;\n      attrs.dummy = \"edge-label\";\n      attrs.labelpos = edgeLabel.labelpos;\n    }\n    g.setEdge(v, dummy, { weight: edgeLabel.weight }, name);\n    if (i === 0) {\n      g.graph().dummyChains.push(dummy);\n    }\n    v = dummy;\n  }\n\n  g.setEdge(v, w, { weight: edgeLabel.weight }, name);\n}\n\nfunction undo(g) {\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let origLabel = node.edgeLabel;\n    let w;\n    g.setEdge(node.edgeObj, origLabel);\n    while (node.dummy) {\n      w = g.successors(v)[0];\n      g.removeNode(v);\n      origLabel.points.push({ x: node.x, y: node.y });\n      if (node.dummy === \"edge-label\") {\n        origLabel.x = node.x;\n        origLabel.y = node.y;\n        origLabel.width = node.width;\n        origLabel.height = node.height;\n      }\n      v = w;\n      node = g.node(v);\n    }\n  });\n}\n","\"use strict\";\n\nconst { applyWithChunking } = require(\"../util\");\n\nmodule.exports = {\n  longestPath: longestPath,\n  slack: slack\n};\n\n/*\n * Initializes ranks for the input graph using the longest path algorithm. This\n * algorithm scales well and is fast in practice, it yields rather poor\n * solutions. Nodes are pushed to the lowest layer possible, leaving the bottom\n * ranks wide and leaving edges longer than necessary. However, due to its\n * speed, this algorithm is good for getting an initial ranking that can be fed\n * into other algorithms.\n *\n * This algorithm does not normalize layers because it will be used by other\n * algorithms in most cases. If using this algorithm directly, be sure to\n * run normalize at the end.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG.\n *    2. Input graph node labels can be assigned properties.\n *\n * Post-conditions:\n *\n *    1. Each node will be assign an (unnormalized) \"rank\" property.\n */\nfunction longestPath(g) {\n  var visited = {};\n\n  function dfs(v) {\n    var label = g.node(v);\n    if (Object.hasOwn(visited, v)) {\n      return label.rank;\n    }\n    visited[v] = true;\n\n    let outEdgesMinLens = g.outEdges(v).map(e => {\n      if (e == null) {\n        return Number.POSITIVE_INFINITY;\n      }\n\n      return dfs(e.w) - g.edge(e).minlen;\n    });\n\n    var rank = applyWithChunking(Math.min, outEdgesMinLens);\n\n    if (rank === Number.POSITIVE_INFINITY) {\n      rank = 0;\n    }\n\n    return (label.rank = rank);\n  }\n\n  g.sources().forEach(dfs);\n}\n\n/*\n * Returns the amount of slack for the given edge. The slack is defined as the\n * difference between the length of the edge and its minimum length.\n */\nfunction slack(g, e) {\n  return g.node(e.w).rank - g.node(e.v).rank - g.edge(e).minlen;\n}\n","\"use strict\";\n\nvar Graph = require(\"@dagrejs/graphlib\").Graph;\nvar slack = require(\"./util\").slack;\n\nmodule.exports = feasibleTree;\n\n/*\n * Constructs a spanning tree with tight edges and adjusted the input node's\n * ranks to achieve this. A tight edge is one that is has a length that matches\n * its \"minlen\" attribute.\n *\n * The basic structure for this function is derived from Gansner, et al., \"A\n * Technique for Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a DAG.\n *    2. Graph must be connected.\n *    3. Graph must have at least one node.\n *    5. Graph nodes must have been previously assigned a \"rank\" property that\n *       respects the \"minlen\" property of incident edges.\n *    6. Graph edges must have a \"minlen\" property.\n *\n * Post-conditions:\n *\n *    - Graph nodes will have their rank adjusted to ensure that all edges are\n *      tight.\n *\n * Returns a tree (undirected graph) that is constructed using only \"tight\"\n * edges.\n */\nfunction feasibleTree(g) {\n  var t = new Graph({ directed: false });\n\n  // Choose arbitrary node from which to start our tree\n  var start = g.nodes()[0];\n  var size = g.nodeCount();\n  t.setNode(start, {});\n\n  var edge, delta;\n  while (tightTree(t, g) < size) {\n    edge = findMinSlackEdge(t, g);\n    delta = t.hasNode(edge.v) ? slack(g, edge) : -slack(g, edge);\n    shiftRanks(t, g, delta);\n  }\n\n  return t;\n}\n\n/*\n * Finds a maximal tree of tight edges and returns the number of nodes in the\n * tree.\n */\nfunction tightTree(t, g) {\n  function dfs(v) {\n    g.nodeEdges(v).forEach(e => {\n      var edgeV = e.v,\n        w = (v === edgeV) ? e.w : edgeV;\n      if (!t.hasNode(w) && !slack(g, e)) {\n        t.setNode(w, {});\n        t.setEdge(v, w, {});\n        dfs(w);\n      }\n    });\n  }\n\n  t.nodes().forEach(dfs);\n  return t.nodeCount();\n}\n\n/*\n * Finds the edge with the smallest slack that is incident on tree and returns\n * it.\n */\nfunction findMinSlackEdge(t, g) {\n  const edges = g.edges();\n\n  return edges.reduce((acc, edge) => {\n    let edgeSlack = Number.POSITIVE_INFINITY;\n    if (t.hasNode(edge.v) !== t.hasNode(edge.w)) {\n      edgeSlack = slack(g, edge);\n    }\n\n    if (edgeSlack < acc[0]) {\n      return [edgeSlack, edge];\n    }\n\n    return acc;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\nfunction shiftRanks(t, g, delta) {\n  t.nodes().forEach(v => g.node(v).rank += delta);\n}\n","\"use strict\";\n\nvar feasibleTree = require(\"./feasible-tree\");\nvar slack = require(\"./util\").slack;\nvar initRank = require(\"./util\").longestPath;\nvar preorder = require(\"@dagrejs/graphlib\").alg.preorder;\nvar postorder = require(\"@dagrejs/graphlib\").alg.postorder;\nvar simplify = require(\"../util\").simplify;\n\nmodule.exports = networkSimplex;\n\n// Expose some internals for testing purposes\nnetworkSimplex.initLowLimValues = initLowLimValues;\nnetworkSimplex.initCutValues = initCutValues;\nnetworkSimplex.calcCutValue = calcCutValue;\nnetworkSimplex.leaveEdge = leaveEdge;\nnetworkSimplex.enterEdge = enterEdge;\nnetworkSimplex.exchangeEdges = exchangeEdges;\n\n/*\n * The network simplex algorithm assigns ranks to each node in the input graph\n * and iteratively improves the ranking to reduce the length of edges.\n *\n * Preconditions:\n *\n *    1. The input graph must be a DAG.\n *    2. All nodes in the graph must have an object value.\n *    3. All edges in the graph must have \"minlen\" and \"weight\" attributes.\n *\n * Postconditions:\n *\n *    1. All nodes in the graph will have an assigned \"rank\" attribute that has\n *       been optimized by the network simplex algorithm. Ranks start at 0.\n *\n *\n * A rough sketch of the algorithm is as follows:\n *\n *    1. Assign initial ranks to each node. We use the longest path algorithm,\n *       which assigns ranks to the lowest position possible. In general this\n *       leads to very wide bottom ranks and unnecessarily long edges.\n *    2. Construct a feasible tight tree. A tight tree is one such that all\n *       edges in the tree have no slack (difference between length of edge\n *       and minlen for the edge). This by itself greatly improves the assigned\n *       rankings by shorting edges.\n *    3. Iteratively find edges that have negative cut values. Generally a\n *       negative cut value indicates that the edge could be removed and a new\n *       tree edge could be added to produce a more compact graph.\n *\n * Much of the algorithms here are derived from Gansner, et al., \"A Technique\n * for Drawing Directed Graphs.\" The structure of the file roughly follows the\n * structure of the overall algorithm.\n */\nfunction networkSimplex(g) {\n  g = simplify(g);\n  initRank(g);\n  var t = feasibleTree(g);\n  initLowLimValues(t);\n  initCutValues(t, g);\n\n  var e, f;\n  while ((e = leaveEdge(t))) {\n    f = enterEdge(t, g, e);\n    exchangeEdges(t, g, e, f);\n  }\n}\n\n/*\n * Initializes cut values for all edges in the tree.\n */\nfunction initCutValues(t, g) {\n  var vs = postorder(t, t.nodes());\n  vs = vs.slice(0, vs.length - 1);\n  vs.forEach(v => assignCutValue(t, g, v));\n}\n\nfunction assignCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  t.edge(child, parent).cutvalue = calcCutValue(t, g, child);\n}\n\n/*\n * Given the tight tree, its graph, and a child in the graph calculate and\n * return the cut value for the edge between the child and its parent.\n */\nfunction calcCutValue(t, g, child) {\n  var childLab = t.node(child);\n  var parent = childLab.parent;\n  // True if the child is on the tail end of the edge in the directed graph\n  var childIsTail = true;\n  // The graph's view of the tree edge we're inspecting\n  var graphEdge = g.edge(child, parent);\n  // The accumulated cut value for the edge between this node and its parent\n  var cutValue = 0;\n\n  if (!graphEdge) {\n    childIsTail = false;\n    graphEdge = g.edge(parent, child);\n  }\n\n  cutValue = graphEdge.weight;\n\n  g.nodeEdges(child).forEach(e => {\n    var isOutEdge = e.v === child,\n      other = isOutEdge ? e.w : e.v;\n\n    if (other !== parent) {\n      var pointsToHead = isOutEdge === childIsTail,\n        otherWeight = g.edge(e).weight;\n\n      cutValue += pointsToHead ? otherWeight : -otherWeight;\n      if (isTreeEdge(t, child, other)) {\n        var otherCutValue = t.edge(child, other).cutvalue;\n        cutValue += pointsToHead ? -otherCutValue : otherCutValue;\n      }\n    }\n  });\n\n  return cutValue;\n}\n\nfunction initLowLimValues(tree, root) {\n  if (arguments.length < 2) {\n    root = tree.nodes()[0];\n  }\n  dfsAssignLowLim(tree, {}, 1, root);\n}\n\nfunction dfsAssignLowLim(tree, visited, nextLim, v, parent) {\n  var low = nextLim;\n  var label = tree.node(v);\n\n  visited[v] = true;\n  tree.neighbors(v).forEach(w => {\n    if (!Object.hasOwn(visited, w)) {\n      nextLim = dfsAssignLowLim(tree, visited, nextLim, w, v);\n    }\n  });\n\n  label.low = low;\n  label.lim = nextLim++;\n  if (parent) {\n    label.parent = parent;\n  } else {\n    // TODO should be able to remove this when we incrementally update low lim\n    delete label.parent;\n  }\n\n  return nextLim;\n}\n\nfunction leaveEdge(tree) {\n  return tree.edges().find(e => tree.edge(e).cutvalue < 0);\n}\n\nfunction enterEdge(t, g, edge) {\n  var v = edge.v;\n  var w = edge.w;\n\n  // For the rest of this function we assume that v is the tail and w is the\n  // head, so if we don't have this edge in the graph we should flip it to\n  // match the correct orientation.\n  if (!g.hasEdge(v, w)) {\n    v = edge.w;\n    w = edge.v;\n  }\n\n  var vLabel = t.node(v);\n  var wLabel = t.node(w);\n  var tailLabel = vLabel;\n  var flip = false;\n\n  // If the root is in the tail of the edge then we need to flip the logic that\n  // checks for the head and tail nodes in the candidates function below.\n  if (vLabel.lim > wLabel.lim) {\n    tailLabel = wLabel;\n    flip = true;\n  }\n\n  var candidates = g.edges().filter(edge => {\n    return flip === isDescendant(t, t.node(edge.v), tailLabel) &&\n           flip !== isDescendant(t, t.node(edge.w), tailLabel);\n  });\n\n  return candidates.reduce((acc, edge) => {\n    if (slack(g, edge) < slack(g, acc)) {\n      return edge;\n    }\n\n    return acc;\n  });\n}\n\nfunction exchangeEdges(t, g, e, f) {\n  var v = e.v;\n  var w = e.w;\n  t.removeEdge(v, w);\n  t.setEdge(f.v, f.w, {});\n  initLowLimValues(t);\n  initCutValues(t, g);\n  updateRanks(t, g);\n}\n\nfunction updateRanks(t, g) {\n  var root = t.nodes().find(v => !g.node(v).parent);\n  var vs = preorder(t, root);\n  vs = vs.slice(1);\n  vs.forEach(v => {\n    var parent = t.node(v).parent,\n      edge = g.edge(v, parent),\n      flipped = false;\n\n    if (!edge) {\n      edge = g.edge(parent, v);\n      flipped = true;\n    }\n\n    g.node(v).rank = g.node(parent).rank + (flipped ? edge.minlen : -edge.minlen);\n  });\n}\n\n/*\n * Returns true if the edge is in the tree.\n */\nfunction isTreeEdge(tree, u, v) {\n  return tree.hasEdge(u, v);\n}\n\n/*\n * Returns true if the specified node is descendant of the root node per the\n * assigned low and lim attributes in the tree.\n */\nfunction isDescendant(tree, vLabel, rootLabel) {\n  return rootLabel.low <= vLabel.lim && vLabel.lim <= rootLabel.lim;\n}\n","\"use strict\";\n\nvar rankUtil = require(\"./util\");\nvar longestPath = rankUtil.longestPath;\nvar feasibleTree = require(\"./feasible-tree\");\nvar networkSimplex = require(\"./network-simplex\");\n\nmodule.exports = rank;\n\n/*\n * Assigns a rank to each node in the input graph that respects the \"minlen\"\n * constraint specified on edges between nodes.\n *\n * This basic structure is derived from Gansner, et al., \"A Technique for\n * Drawing Directed Graphs.\"\n *\n * Pre-conditions:\n *\n *    1. Graph must be a connected DAG\n *    2. Graph nodes must be objects\n *    3. Graph edges must have \"weight\" and \"minlen\" attributes\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have a \"rank\" attribute based on the results of the\n *       algorithm. Ranks can start at any index (including negative), we'll\n *       fix them up later.\n */\nfunction rank(g) {\n  var ranker = g.graph().ranker;\n  if (ranker instanceof Function) {\n    return ranker(g);\n  }\n\n  switch(g.graph().ranker) {\n  case \"network-simplex\": networkSimplexRanker(g); break;\n  case \"tight-tree\": tightTreeRanker(g); break;\n  case \"longest-path\": longestPathRanker(g); break;\n  case \"none\": break;\n  default: networkSimplexRanker(g);\n  }\n}\n\n// A fast and simple ranker, but results are far from optimal.\nvar longestPathRanker = longestPath;\n\nfunction tightTreeRanker(g) {\n  longestPath(g);\n  feasibleTree(g);\n}\n\nfunction networkSimplexRanker(g) {\n  networkSimplex(g);\n}\n","module.exports = parentDummyChains;\n\nfunction parentDummyChains(g) {\n  let postorderNums = postorder(g);\n\n  g.graph().dummyChains.forEach(v => {\n    let node = g.node(v);\n    let edgeObj = node.edgeObj;\n    let pathData = findPath(g, postorderNums, edgeObj.v, edgeObj.w);\n    let path = pathData.path;\n    let lca = pathData.lca;\n    let pathIdx = 0;\n    let pathV = path[pathIdx];\n    let ascending = true;\n\n    while (v !== edgeObj.w) {\n      node = g.node(v);\n\n      if (ascending) {\n        while ((pathV = path[pathIdx]) !== lca &&\n               g.node(pathV).maxRank < node.rank) {\n          pathIdx++;\n        }\n\n        if (pathV === lca) {\n          ascending = false;\n        }\n      }\n\n      if (!ascending) {\n        while (pathIdx < path.length - 1 &&\n               g.node(pathV = path[pathIdx + 1]).minRank <= node.rank) {\n          pathIdx++;\n        }\n        pathV = path[pathIdx];\n      }\n\n      g.setParent(v, pathV);\n      v = g.successors(v)[0];\n    }\n  });\n}\n\n// Find a path from v to w through the lowest common ancestor (LCA). Return the\n// full path and the LCA.\nfunction findPath(g, postorderNums, v, w) {\n  let vPath = [];\n  let wPath = [];\n  let low = Math.min(postorderNums[v].low, postorderNums[w].low);\n  let lim = Math.max(postorderNums[v].lim, postorderNums[w].lim);\n  let parent;\n  let lca;\n\n  // Traverse up from v to find the LCA\n  parent = v;\n  do {\n    parent = g.parent(parent);\n    vPath.push(parent);\n  } while (parent &&\n           (postorderNums[parent].low > low || lim > postorderNums[parent].lim));\n  lca = parent;\n\n  // Traverse from w to LCA\n  parent = w;\n  while ((parent = g.parent(parent)) !== lca) {\n    wPath.push(parent);\n  }\n\n  return { path: vPath.concat(wPath.reverse()), lca: lca };\n}\n\nfunction postorder(g) {\n  let result = {};\n  let lim = 0;\n\n  function dfs(v) {\n    let low = lim;\n    g.children(v).forEach(dfs);\n    result[v] = { low: low, lim: lim++ };\n  }\n  g.children().forEach(dfs);\n\n  return result;\n}\n","let util = require(\"./util\");\n\nmodule.exports = {\n  run,\n  cleanup,\n};\n\n/*\n * A nesting graph creates dummy nodes for the tops and bottoms of subgraphs,\n * adds appropriate edges to ensure that all cluster nodes are placed between\n * these boundaries, and ensures that the graph is connected.\n *\n * In addition we ensure, through the use of the minlen property, that nodes\n * and subgraph border nodes to not end up on the same rank.\n *\n * Preconditions:\n *\n *    1. Input graph is a DAG\n *    2. Nodes in the input graph has a minlen attribute\n *\n * Postconditions:\n *\n *    1. Input graph is connected.\n *    2. Dummy nodes are added for the tops and bottoms of subgraphs.\n *    3. The minlen attribute for nodes is adjusted to ensure nodes do not\n *       get placed on the same rank as subgraph border nodes.\n *\n * The nesting graph idea comes from Sander, \"Layout of Compound Directed\n * Graphs.\"\n */\nfunction run(g) {\n  let root = util.addDummyNode(g, \"root\", {}, \"_root\");\n  let depths = treeDepths(g);\n  let depthsArr = Object.values(depths);\n  let height = util.applyWithChunking(Math.max, depthsArr) - 1; // Note: depths is an Object not an array\n  let nodeSep = 2 * height + 1;\n\n  g.graph().nestingRoot = root;\n\n  // Multiply minlen by nodeSep to align nodes on non-border ranks.\n  g.edges().forEach(e => g.edge(e).minlen *= nodeSep);\n\n  // Calculate a weight that is sufficient to keep subgraphs vertically compact\n  let weight = sumWeights(g) + 1;\n\n  // Create border nodes and link them up\n  g.children().forEach(child => dfs(g, root, nodeSep, weight, height, depths, child));\n\n  // Save the multiplier for node layers for later removal of empty border\n  // layers.\n  g.graph().nodeRankFactor = nodeSep;\n}\n\nfunction dfs(g, root, nodeSep, weight, height, depths, v) {\n  let children = g.children(v);\n  if (!children.length) {\n    if (v !== root) {\n      g.setEdge(root, v, { weight: 0, minlen: nodeSep });\n    }\n    return;\n  }\n\n  let top = util.addBorderNode(g, \"_bt\");\n  let bottom = util.addBorderNode(g, \"_bb\");\n  let label = g.node(v);\n\n  g.setParent(top, v);\n  label.borderTop = top;\n  g.setParent(bottom, v);\n  label.borderBottom = bottom;\n\n  children.forEach(child => {\n    dfs(g, root, nodeSep, weight, height, depths, child);\n\n    let childNode = g.node(child);\n    let childTop = childNode.borderTop ? childNode.borderTop : child;\n    let childBottom = childNode.borderBottom ? childNode.borderBottom : child;\n    let thisWeight = childNode.borderTop ? weight : 2 * weight;\n    let minlen = childTop !== childBottom ? 1 : height - depths[v] + 1;\n\n    g.setEdge(top, childTop, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n\n    g.setEdge(childBottom, bottom, {\n      weight: thisWeight,\n      minlen: minlen,\n      nestingEdge: true\n    });\n  });\n\n  if (!g.parent(v)) {\n    g.setEdge(root, top, { weight: 0, minlen: height + depths[v] });\n  }\n}\n\nfunction treeDepths(g) {\n  var depths = {};\n  function dfs(v, depth) {\n    var children = g.children(v);\n    if (children && children.length) {\n      children.forEach(child => dfs(child, depth + 1));\n    }\n    depths[v] = depth;\n  }\n  g.children().forEach(v => dfs(v, 1));\n  return depths;\n}\n\nfunction sumWeights(g) {\n  return g.edges().reduce((acc, e) => acc + g.edge(e).weight, 0);\n}\n\nfunction cleanup(g) {\n  var graphLabel = g.graph();\n  g.removeNode(graphLabel.nestingRoot);\n  delete graphLabel.nestingRoot;\n  g.edges().forEach(e => {\n    var edge = g.edge(e);\n    if (edge.nestingEdge) {\n      g.removeEdge(e);\n    }\n  });\n}\n","let util = require(\"./util\");\n\nmodule.exports = addBorderSegments;\n\nfunction addBorderSegments(g) {\n  function dfs(v) {\n    let children = g.children(v);\n    let node = g.node(v);\n    if (children.length) {\n      children.forEach(dfs);\n    }\n\n    if (Object.hasOwn(node, \"minRank\")) {\n      node.borderLeft = [];\n      node.borderRight = [];\n      for (let rank = node.minRank, maxRank = node.maxRank + 1;\n        rank < maxRank;\n        ++rank) {\n        addBorderNode(g, \"borderLeft\", \"_bl\", v, node, rank);\n        addBorderNode(g, \"borderRight\", \"_br\", v, node, rank);\n      }\n    }\n  }\n\n  g.children().forEach(dfs);\n}\n\nfunction addBorderNode(g, prop, prefix, sg, sgNode, rank) {\n  let label = { width: 0, height: 0, rank: rank, borderType: prop };\n  let prev = sgNode[prop][rank - 1];\n  let curr = util.addDummyNode(g, \"border\", label, prefix);\n  sgNode[prop][rank] = curr;\n  g.setParent(curr, sg);\n  if (prev) {\n    g.setEdge(prev, curr, { weight: 1 });\n  }\n}\n","\"use strict\";\n\nmodule.exports = {\n  adjust: adjust,\n  undo: undo\n};\n\nfunction adjust(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapWidthHeight(g);\n  }\n}\n\nfunction undo(g) {\n  let rankDir = g.graph().rankdir.toLowerCase();\n  if (rankDir === \"bt\" || rankDir === \"rl\") {\n    reverseY(g);\n  }\n\n  if (rankDir === \"lr\" || rankDir === \"rl\") {\n    swapXY(g);\n    swapWidthHeight(g);\n  }\n}\n\nfunction swapWidthHeight(g) {\n  g.nodes().forEach(v => swapWidthHeightOne(g.node(v)));\n  g.edges().forEach(e => swapWidthHeightOne(g.edge(e)));\n}\n\nfunction swapWidthHeightOne(attrs) {\n  let w = attrs.width;\n  attrs.width = attrs.height;\n  attrs.height = w;\n}\n\nfunction reverseY(g) {\n  g.nodes().forEach(v => reverseYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(reverseYOne);\n    if (Object.hasOwn(edge, \"y\")) {\n      reverseYOne(edge);\n    }\n  });\n}\n\nfunction reverseYOne(attrs) {\n  attrs.y = -attrs.y;\n}\n\nfunction swapXY(g) {\n  g.nodes().forEach(v => swapXYOne(g.node(v)));\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(swapXYOne);\n    if (Object.hasOwn(edge, \"x\")) {\n      swapXYOne(edge);\n    }\n  });\n}\n\nfunction swapXYOne(attrs) {\n  let x = attrs.x;\n  attrs.x = attrs.y;\n  attrs.y = x;\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = initOrder;\n\n/*\n * Assigns an initial order value for each node by performing a DFS search\n * starting from nodes in the first rank. Nodes are assigned an order in their\n * rank as they are first visited.\n *\n * This approach comes from Gansner, et al., \"A Technique for Drawing Directed\n * Graphs.\"\n *\n * Returns a layering matrix with an array per layer and each layer sorted by\n * the order of its nodes.\n */\nfunction initOrder(g) {\n  let visited = {};\n  let simpleNodes = g.nodes().filter(v => !g.children(v).length);\n  let simpleNodesRanks = simpleNodes.map(v => g.node(v).rank);\n  let maxRank = util.applyWithChunking(Math.max, simpleNodesRanks);\n  let layers = util.range(maxRank + 1).map(() => []);\n\n  function dfs(v) {\n    if (visited[v]) return;\n    visited[v] = true;\n    let node = g.node(v);\n    layers[node.rank].push(v);\n    g.successors(v).forEach(dfs);\n  }\n\n  let orderedVs = simpleNodes.sort((a, b) => g.node(a).rank - g.node(b).rank);\n  orderedVs.forEach(dfs);\n\n  return layers;\n}\n","\"use strict\";\n\nlet zipObject = require(\"../util\").zipObject;\n\nmodule.exports = crossCount;\n\n/*\n * A function that takes a layering (an array of layers, each with an array of\n * ordererd nodes) and a graph and returns a weighted crossing count.\n *\n * Pre-conditions:\n *\n *    1. Input graph must be simple (not a multigraph), directed, and include\n *       only simple edges.\n *    2. Edges in the input graph must have assigned weights.\n *\n * Post-conditions:\n *\n *    1. The graph and layering matrix are left unchanged.\n *\n * This algorithm is derived from Barth, et al., \"Bilayer Cross Counting.\"\n */\nfunction crossCount(g, layering) {\n  let cc = 0;\n  for (let i = 1; i < layering.length; ++i) {\n    cc += twoLayerCrossCount(g, layering[i-1], layering[i]);\n  }\n  return cc;\n}\n\nfunction twoLayerCrossCount(g, northLayer, southLayer) {\n  // Sort all of the edges between the north and south layers by their position\n  // in the north layer and then the south. Map these edges to the position of\n  // their head in the south layer.\n  let southPos = zipObject(southLayer, southLayer.map((v, i) => i));\n  let southEntries = northLayer.flatMap(v => {\n    return g.outEdges(v).map(e => {\n      return { pos: southPos[e.w], weight: g.edge(e).weight };\n    }).sort((a, b) => a.pos - b.pos);\n  });\n\n  // Build the accumulator tree\n  let firstIndex = 1;\n  while (firstIndex < southLayer.length) firstIndex <<= 1;\n  let treeSize = 2 * firstIndex - 1;\n  firstIndex -= 1;\n  let tree = new Array(treeSize).fill(0);\n\n  // Calculate the weighted crossings\n  let cc = 0;\n  southEntries.forEach(entry => {\n    let index = entry.pos + firstIndex;\n    tree[index] += entry.weight;\n    let weightSum = 0;\n    while (index > 0) {\n      if (index % 2) {\n        weightSum += tree[index + 1];\n      }\n      index = (index - 1) >> 1;\n      tree[index] += entry.weight;\n    }\n    cc += entry.weight * weightSum;\n  });\n\n  return cc;\n}\n","module.exports = barycenter;\n\nfunction barycenter(g, movable = []) {\n  return movable.map(v => {\n    let inV = g.inEdges(v);\n    if (!inV.length) {\n      return { v: v };\n    } else {\n      let result = inV.reduce((acc, e) => {\n        let edge = g.edge(e),\n          nodeU = g.node(e.v);\n        return {\n          sum: acc.sum + (edge.weight * nodeU.order),\n          weight: acc.weight + edge.weight\n        };\n      }, { sum: 0, weight: 0 });\n\n      return {\n        v: v,\n        barycenter: result.sum / result.weight,\n        weight: result.weight\n      };\n    }\n  });\n}\n\n","\"use strict\";\n\nlet util = require(\"../util\");\n\nmodule.exports = resolveConflicts;\n\n/*\n * Given a list of entries of the form {v, barycenter, weight} and a\n * constraint graph this function will resolve any conflicts between the\n * constraint graph and the barycenters for the entries. If the barycenters for\n * an entry would violate a constraint in the constraint graph then we coalesce\n * the nodes in the conflict into a new node that respects the contraint and\n * aggregates barycenter and weight information.\n *\n * This implementation is based on the description in Forster, \"A Fast and\n * Simple Hueristic for Constrained Two-Level Crossing Reduction,\" thought it\n * differs in some specific details.\n *\n * Pre-conditions:\n *\n *    1. Each entry has the form {v, barycenter, weight}, or if the node has\n *       no barycenter, then {v}.\n *\n * Returns:\n *\n *    A new list of entries of the form {vs, i, barycenter, weight}. The list\n *    `vs` may either be a singleton or it may be an aggregation of nodes\n *    ordered such that they do not violate constraints from the constraint\n *    graph. The property `i` is the lowest original index of any of the\n *    elements in `vs`.\n */\nfunction resolveConflicts(entries, cg) {\n  let mappedEntries = {};\n  entries.forEach((entry, i) => {\n    let tmp = mappedEntries[entry.v] = {\n      indegree: 0,\n      \"in\": [],\n      out: [],\n      vs: [entry.v],\n      i: i\n    };\n    if (entry.barycenter !== undefined) {\n      tmp.barycenter = entry.barycenter;\n      tmp.weight = entry.weight;\n    }\n  });\n\n  cg.edges().forEach(e => {\n    let entryV = mappedEntries[e.v];\n    let entryW = mappedEntries[e.w];\n    if (entryV !== undefined && entryW !== undefined) {\n      entryW.indegree++;\n      entryV.out.push(mappedEntries[e.w]);\n    }\n  });\n\n  let sourceSet = Object.values(mappedEntries).filter(entry => !entry.indegree);\n\n  return doResolveConflicts(sourceSet);\n}\n\nfunction doResolveConflicts(sourceSet) {\n  let entries = [];\n\n  function handleIn(vEntry) {\n    return uEntry => {\n      if (uEntry.merged) {\n        return;\n      }\n      if (uEntry.barycenter === undefined ||\n          vEntry.barycenter === undefined ||\n          uEntry.barycenter >= vEntry.barycenter) {\n        mergeEntries(vEntry, uEntry);\n      }\n    };\n  }\n\n  function handleOut(vEntry) {\n    return wEntry => {\n      wEntry[\"in\"].push(vEntry);\n      if (--wEntry.indegree === 0) {\n        sourceSet.push(wEntry);\n      }\n    };\n  }\n\n  while (sourceSet.length) {\n    let entry = sourceSet.pop();\n    entries.push(entry);\n    entry[\"in\"].reverse().forEach(handleIn(entry));\n    entry.out.forEach(handleOut(entry));\n  }\n\n  return entries.filter(entry => !entry.merged).map(entry => {\n    return util.pick(entry, [\"vs\", \"i\", \"barycenter\", \"weight\"]);\n  });\n}\n\nfunction mergeEntries(target, source) {\n  let sum = 0;\n  let weight = 0;\n\n  if (target.weight) {\n    sum += target.barycenter * target.weight;\n    weight += target.weight;\n  }\n\n  if (source.weight) {\n    sum += source.barycenter * source.weight;\n    weight += source.weight;\n  }\n\n  target.vs = source.vs.concat(target.vs);\n  target.barycenter = sum / weight;\n  target.weight = weight;\n  target.i = Math.min(source.i, target.i);\n  source.merged = true;\n}\n","let util = require(\"../util\");\n\nmodule.exports = sort;\n\nfunction sort(entries, biasRight) {\n  let parts = util.partition(entries, entry => {\n    return Object.hasOwn(entry, \"barycenter\");\n  });\n  let sortable = parts.lhs,\n    unsortable = parts.rhs.sort((a, b) => b.i - a.i),\n    vs = [],\n    sum = 0,\n    weight = 0,\n    vsIndex = 0;\n\n  sortable.sort(compareWithBias(!!biasRight));\n\n  vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n\n  sortable.forEach(entry => {\n    vsIndex += entry.vs.length;\n    vs.push(entry.vs);\n    sum += entry.barycenter * entry.weight;\n    weight += entry.weight;\n    vsIndex = consumeUnsortable(vs, unsortable, vsIndex);\n  });\n\n  let result = { vs: vs.flat(true) };\n  if (weight) {\n    result.barycenter = sum / weight;\n    result.weight = weight;\n  }\n  return result;\n}\n\nfunction consumeUnsortable(vs, unsortable, index) {\n  let last;\n  while (unsortable.length && (last = unsortable[unsortable.length - 1]).i <= index) {\n    unsortable.pop();\n    vs.push(last.vs);\n    index++;\n  }\n  return index;\n}\n\nfunction compareWithBias(bias) {\n  return (entryV, entryW) => {\n    if (entryV.barycenter < entryW.barycenter) {\n      return -1;\n    } else if (entryV.barycenter > entryW.barycenter) {\n      return 1;\n    }\n\n    return !bias ? entryV.i - entryW.i : entryW.i - entryV.i;\n  };\n}\n","let barycenter = require(\"./barycenter\");\nlet resolveConflicts = require(\"./resolve-conflicts\");\nlet sort = require(\"./sort\");\n\nmodule.exports = sortSubgraph;\n\nfunction sortSubgraph(g, v, cg, biasRight) {\n  let movable = g.children(v);\n  let node = g.node(v);\n  let bl = node ? node.borderLeft : undefined;\n  let br = node ? node.borderRight: undefined;\n  let subgraphs = {};\n\n  if (bl) {\n    movable = movable.filter(w => w !== bl && w !== br);\n  }\n\n  let barycenters = barycenter(g, movable);\n  barycenters.forEach(entry => {\n    if (g.children(entry.v).length) {\n      let subgraphResult = sortSubgraph(g, entry.v, cg, biasRight);\n      subgraphs[entry.v] = subgraphResult;\n      if (Object.hasOwn(subgraphResult, \"barycenter\")) {\n        mergeBarycenters(entry, subgraphResult);\n      }\n    }\n  });\n\n  let entries = resolveConflicts(barycenters, cg);\n  expandSubgraphs(entries, subgraphs);\n\n  let result = sort(entries, biasRight);\n\n  if (bl) {\n    result.vs = [bl, result.vs, br].flat(true);\n    if (g.predecessors(bl).length) {\n      let blPred = g.node(g.predecessors(bl)[0]),\n        brPred = g.node(g.predecessors(br)[0]);\n      if (!Object.hasOwn(result, \"barycenter\")) {\n        result.barycenter = 0;\n        result.weight = 0;\n      }\n      result.barycenter = (result.barycenter * result.weight +\n                           blPred.order + brPred.order) / (result.weight + 2);\n      result.weight += 2;\n    }\n  }\n\n  return result;\n}\n\nfunction expandSubgraphs(entries, subgraphs) {\n  entries.forEach(entry => {\n    entry.vs = entry.vs.flatMap(v => {\n      if (subgraphs[v]) {\n        return subgraphs[v].vs;\n      }\n      return v;\n    });\n  });\n}\n\nfunction mergeBarycenters(target, other) {\n  if (target.barycenter !== undefined) {\n    target.barycenter = (target.barycenter * target.weight +\n                         other.barycenter * other.weight) /\n                        (target.weight + other.weight);\n    target.weight += other.weight;\n  } else {\n    target.barycenter = other.barycenter;\n    target.weight = other.weight;\n  }\n}\n","let Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = buildLayerGraph;\n\n/*\n * Constructs a graph that can be used to sort a layer of nodes. The graph will\n * contain all base and subgraph nodes from the request layer in their original\n * hierarchy and any edges that are incident on these nodes and are of the type\n * requested by the \"relationship\" parameter.\n *\n * Nodes from the requested rank that do not have parents are assigned a root\n * node in the output graph, which is set in the root graph attribute. This\n * makes it easy to walk the hierarchy of movable nodes during ordering.\n *\n * Pre-conditions:\n *\n *    1. Input graph is a DAG\n *    2. Base nodes in the input graph have a rank attribute\n *    3. Subgraph nodes in the input graph has minRank and maxRank attributes\n *    4. Edges have an assigned weight\n *\n * Post-conditions:\n *\n *    1. Output graph has all nodes in the movable rank with preserved\n *       hierarchy.\n *    2. Root nodes in the movable layer are made children of the node\n *       indicated by the root attribute of the graph.\n *    3. Non-movable nodes incident on movable nodes, selected by the\n *       relationship parameter, are included in the graph (without hierarchy).\n *    4. Edges incident on movable nodes, selected by the relationship\n *       parameter, are added to the output graph.\n *    5. The weights for copied edges are aggregated as need, since the output\n *       graph is not a multi-graph.\n */\nfunction buildLayerGraph(g, rank, relationship) {\n  let root = createRootNode(g),\n    result = new Graph({ compound: true }).setGraph({ root: root })\n      .setDefaultNodeLabel(v => g.node(v));\n\n  g.nodes().forEach(v => {\n    let node = g.node(v),\n      parent = g.parent(v);\n\n    if (node.rank === rank || node.minRank <= rank && rank <= node.maxRank) {\n      result.setNode(v);\n      result.setParent(v, parent || root);\n\n      // This assumes we have only short edges!\n      g[relationship](v).forEach(e => {\n        let u = e.v === v ? e.w : e.v,\n          edge = result.edge(u, v),\n          weight = edge !== undefined ? edge.weight : 0;\n        result.setEdge(u, v, { weight: g.edge(e).weight + weight });\n      });\n\n      if (Object.hasOwn(node, \"minRank\")) {\n        result.setNode(v, {\n          borderLeft: node.borderLeft[rank],\n          borderRight: node.borderRight[rank]\n        });\n      }\n    }\n  });\n\n  return result;\n}\n\nfunction createRootNode(g) {\n  var v;\n  while (g.hasNode((v = util.uniqueId(\"_root\"))));\n  return v;\n}\n","module.exports = addSubgraphConstraints;\n\nfunction addSubgraphConstraints(g, cg, vs) {\n  let prev = {},\n    rootPrev;\n\n  vs.forEach(v => {\n    let child = g.parent(v),\n      parent,\n      prevChild;\n    while (child) {\n      parent = g.parent(child);\n      if (parent) {\n        prevChild = prev[parent];\n        prev[parent] = child;\n      } else {\n        prevChild = rootPrev;\n        rootPrev = child;\n      }\n      if (prevChild && prevChild !== child) {\n        cg.setEdge(prevChild, child);\n        return;\n      }\n      child = parent;\n    }\n  });\n\n  /*\n  function dfs(v) {\n    var children = v ? g.children(v) : g.children();\n    if (children.length) {\n      var min = Number.POSITIVE_INFINITY,\n          subgraphs = [];\n      children.forEach(function(child) {\n        var childMin = dfs(child);\n        if (g.children(child).length) {\n          subgraphs.push({ v: child, order: childMin });\n        }\n        min = Math.min(min, childMin);\n      });\n      _.sortBy(subgraphs, \"order\").reduce(function(prev, curr) {\n        cg.setEdge(prev.v, curr.v);\n        return curr;\n      });\n      return min;\n    }\n    return g.node(v).order;\n  }\n  dfs(undefined);\n  */\n}\n","\"use strict\";\n\nlet initOrder = require(\"./init-order\");\nlet crossCount = require(\"./cross-count\");\nlet sortSubgraph = require(\"./sort-subgraph\");\nlet buildLayerGraph = require(\"./build-layer-graph\");\nlet addSubgraphConstraints = require(\"./add-subgraph-constraints\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\nmodule.exports = order;\n\n/*\n * Applies heuristics to minimize edge crossings in the graph and sets the best\n * order solution as an order attribute on each node.\n *\n * Pre-conditions:\n *\n *    1. Graph must be DAG\n *    2. Graph nodes must be objects with a \"rank\" attribute\n *    3. Graph edges must have the \"weight\" attribute\n *\n * Post-conditions:\n *\n *    1. Graph nodes will have an \"order\" attribute based on the results of the\n *       algorithm.\n */\nfunction order(g, opts) {\n  if (opts && typeof opts.customOrder === 'function') {\n    opts.customOrder(g, order);\n    return;\n  }\n\n  let maxRank = util.maxRank(g),\n    downLayerGraphs = buildLayerGraphs(g, util.range(1, maxRank + 1), \"inEdges\"),\n    upLayerGraphs = buildLayerGraphs(g, util.range(maxRank - 1, -1, -1), \"outEdges\");\n\n  let layering = initOrder(g);\n  assignOrder(g, layering);\n\n  if (opts && opts.disableOptimalOrderHeuristic) {\n    return;\n  }\n\n  let bestCC = Number.POSITIVE_INFINITY,\n    best;\n\n  for (let i = 0, lastBest = 0; lastBest < 4; ++i, ++lastBest) {\n    sweepLayerGraphs(i % 2 ? downLayerGraphs : upLayerGraphs, i % 4 >= 2);\n\n    layering = util.buildLayerMatrix(g);\n    let cc = crossCount(g, layering);\n    if (cc < bestCC) {\n      lastBest = 0;\n      best = Object.assign({}, layering);\n      bestCC = cc;\n    }\n  }\n\n  assignOrder(g, best);\n}\n\nfunction buildLayerGraphs(g, ranks, relationship) {\n  return ranks.map(function(rank) {\n    return buildLayerGraph(g, rank, relationship);\n  });\n}\n\nfunction sweepLayerGraphs(layerGraphs, biasRight) {\n  let cg = new Graph();\n  layerGraphs.forEach(function(lg) {\n    let root = lg.graph().root;\n    let sorted = sortSubgraph(lg, root, cg, biasRight);\n    sorted.vs.forEach((v, i) => lg.node(v).order = i);\n    addSubgraphConstraints(lg, cg, sorted.vs);\n  });\n}\n\nfunction assignOrder(g, layering) {\n  Object.values(layering).forEach(layer => layer.forEach((v, i) => g.node(v).order = i));\n}\n","\"use strict\";\n\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\nlet util = require(\"../util\");\n\n/*\n * This module provides coordinate assignment based on Brandes and KÃ¶pf, \"Fast\n * and Simple Horizontal Coordinate Assignment.\"\n */\n\nmodule.exports = {\n  positionX: positionX,\n  findType1Conflicts: findType1Conflicts,\n  findType2Conflicts: findType2Conflicts,\n  addConflict: addConflict,\n  hasConflict: hasConflict,\n  verticalAlignment: verticalAlignment,\n  horizontalCompaction: horizontalCompaction,\n  alignCoordinates: alignCoordinates,\n  findSmallestWidthAlignment: findSmallestWidthAlignment,\n  balance: balance\n};\n\n/*\n * Marks all edges in the graph with a type-1 conflict with the \"type1Conflict\"\n * property. A type-1 conflict is one where a non-inner segment crosses an\n * inner segment. An inner segment is an edge with both incident nodes marked\n * with the \"dummy\" property.\n *\n * This algorithm scans layer by layer, starting with the second, for type-1\n * conflicts between the current layer and the previous layer. For each layer\n * it scans the nodes from left to right until it reaches one that is incident\n * on an inner segment. It then scans predecessors to determine if they have\n * edges that cross that inner segment. At the end a final scan is done for all\n * nodes on the current rank to see if they cross the last visited inner\n * segment.\n *\n * This algorithm (safely) assumes that a dummy node will only be incident on a\n * single node in the layers being scanned.\n */\nfunction findType1Conflicts(g, layering) {\n  let conflicts = {};\n\n  function visitLayer(prevLayer, layer) {\n    let\n      // last visited node in the previous layer that is incident on an inner\n      // segment.\n      k0 = 0,\n      // Tracks the last node in this layer scanned for crossings with a type-1\n      // segment.\n      scanPos = 0,\n      prevLayerLength = prevLayer.length,\n      lastNode = layer[layer.length - 1];\n\n    layer.forEach((v, i) => {\n      let w = findOtherInnerSegmentNode(g, v),\n        k1 = w ? g.node(w).order : prevLayerLength;\n\n      if (w || v === lastNode) {\n        layer.slice(scanPos, i+1).forEach(scanNode => {\n          g.predecessors(scanNode).forEach(u => {\n            let uLabel = g.node(u),\n              uPos = uLabel.order;\n            if ((uPos < k0 || k1 < uPos) &&\n                !(uLabel.dummy && g.node(scanNode).dummy)) {\n              addConflict(conflicts, u, scanNode);\n            }\n          });\n        });\n        scanPos = i + 1;\n        k0 = k1;\n      }\n    });\n\n    return layer;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findType2Conflicts(g, layering) {\n  let conflicts = {};\n\n  function scan(south, southPos, southEnd, prevNorthBorder, nextNorthBorder) {\n    let v;\n    util.range(southPos, southEnd).forEach(i => {\n      v = south[i];\n      if (g.node(v).dummy) {\n        g.predecessors(v).forEach(u => {\n          let uNode = g.node(u);\n          if (uNode.dummy &&\n              (uNode.order < prevNorthBorder || uNode.order > nextNorthBorder)) {\n            addConflict(conflicts, u, v);\n          }\n        });\n      }\n    });\n  }\n\n\n  function visitLayer(north, south) {\n    let prevNorthPos = -1,\n      nextNorthPos,\n      southPos = 0;\n\n    south.forEach((v, southLookahead) => {\n      if (g.node(v).dummy === \"border\") {\n        let predecessors = g.predecessors(v);\n        if (predecessors.length) {\n          nextNorthPos = g.node(predecessors[0]).order;\n          scan(south, southPos, southLookahead, prevNorthPos, nextNorthPos);\n          southPos = southLookahead;\n          prevNorthPos = nextNorthPos;\n        }\n      }\n      scan(south, southPos, south.length, nextNorthPos, north.length);\n    });\n\n    return south;\n  }\n\n  layering.length && layering.reduce(visitLayer);\n\n  return conflicts;\n}\n\nfunction findOtherInnerSegmentNode(g, v) {\n  if (g.node(v).dummy) {\n    return g.predecessors(v).find(u => g.node(u).dummy);\n  }\n}\n\nfunction addConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n\n  let conflictsV = conflicts[v];\n  if (!conflictsV) {\n    conflicts[v] = conflictsV = {};\n  }\n  conflictsV[w] = true;\n}\n\nfunction hasConflict(conflicts, v, w) {\n  if (v > w) {\n    let tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return !!conflicts[v] && Object.hasOwn(conflicts[v], w);\n}\n\n/*\n * Try to align nodes into vertical \"blocks\" where possible. This algorithm\n * attempts to align a node with one of its median neighbors. If the edge\n * connecting a neighbor is a type-1 conflict then we ignore that possibility.\n * If a previous node has already formed a block with a node after the node\n * we're trying to form a block with, we also ignore that possibility - our\n * blocks would be split in that scenario.\n */\nfunction verticalAlignment(g, layering, conflicts, neighborFn) {\n  let root = {},\n    align = {},\n    pos = {};\n\n  // We cache the position here based on the layering because the graph and\n  // layering may be out of sync. The layering matrix is manipulated to\n  // generate different extreme alignments.\n  layering.forEach(layer => {\n    layer.forEach((v, order) => {\n      root[v] = v;\n      align[v] = v;\n      pos[v] = order;\n    });\n  });\n\n  layering.forEach(layer => {\n    let prevIdx = -1;\n    layer.forEach(v => {\n      let ws = neighborFn(v);\n      if (ws.length) {\n        ws = ws.sort((a, b) => pos[a] - pos[b]);\n        let mp = (ws.length - 1) / 2;\n        for (let i = Math.floor(mp), il = Math.ceil(mp); i <= il; ++i) {\n          let w = ws[i];\n          if (align[v] === v &&\n              prevIdx < pos[w] &&\n              !hasConflict(conflicts, v, w)) {\n            align[w] = v;\n            align[v] = root[v] = root[w];\n            prevIdx = pos[w];\n          }\n        }\n      }\n    });\n  });\n\n  return { root: root, align: align };\n}\n\nfunction horizontalCompaction(g, layering, root, align, reverseSep) {\n  // This portion of the algorithm differs from BK due to a number of problems.\n  // Instead of their algorithm we construct a new block graph and do two\n  // sweeps. The first sweep places blocks with the smallest possible\n  // coordinates. The second sweep removes unused space by moving blocks to the\n  // greatest coordinates without violating separation.\n  let xs = {},\n    blockG = buildBlockGraph(g, layering, root, reverseSep),\n    borderType = reverseSep ? \"borderLeft\" : \"borderRight\";\n\n  function iterate(setXsFunc, nextNodesFunc) {\n    let stack = blockG.nodes();\n    let elem = stack.pop();\n    let visited = {};\n    while (elem) {\n      if (visited[elem]) {\n        setXsFunc(elem);\n      } else {\n        visited[elem] = true;\n        stack.push(elem);\n        stack = stack.concat(nextNodesFunc(elem));\n      }\n\n      elem = stack.pop();\n    }\n  }\n\n  // First pass, assign smallest coordinates\n  function pass1(elem) {\n    xs[elem] = blockG.inEdges(elem).reduce((acc, e) => {\n      return Math.max(acc, xs[e.v] + blockG.edge(e));\n    }, 0);\n  }\n\n  // Second pass, assign greatest coordinates\n  function pass2(elem) {\n    let min = blockG.outEdges(elem).reduce((acc, e) => {\n      return Math.min(acc, xs[e.w] - blockG.edge(e));\n    }, Number.POSITIVE_INFINITY);\n\n    let node = g.node(elem);\n    if (min !== Number.POSITIVE_INFINITY && node.borderType !== borderType) {\n      xs[elem] = Math.max(xs[elem], min);\n    }\n  }\n\n  iterate(pass1, blockG.predecessors.bind(blockG));\n  iterate(pass2, blockG.successors.bind(blockG));\n\n  // Assign x coordinates to all nodes\n  Object.keys(align).forEach(v => xs[v] = xs[root[v]]);\n\n  return xs;\n}\n\n\nfunction buildBlockGraph(g, layering, root, reverseSep) {\n  let blockGraph = new Graph(),\n    graphLabel = g.graph(),\n    sepFn = sep(graphLabel.nodesep, graphLabel.edgesep, reverseSep);\n\n  layering.forEach(layer => {\n    let u;\n    layer.forEach(v => {\n      let vRoot = root[v];\n      blockGraph.setNode(vRoot);\n      if (u) {\n        var uRoot = root[u],\n          prevMax = blockGraph.edge(uRoot, vRoot);\n        blockGraph.setEdge(uRoot, vRoot, Math.max(sepFn(g, v, u), prevMax || 0));\n      }\n      u = v;\n    });\n  });\n\n  return blockGraph;\n}\n\n/*\n * Returns the alignment that has the smallest width of the given alignments.\n */\nfunction findSmallestWidthAlignment(g, xss) {\n  return Object.values(xss).reduce((currentMinAndXs, xs) => {\n    let max = Number.NEGATIVE_INFINITY;\n    let min = Number.POSITIVE_INFINITY;\n\n    Object.entries(xs).forEach(([v, x]) => {\n      let halfWidth = width(g, v) / 2;\n\n      max = Math.max(x + halfWidth, max);\n      min = Math.min(x - halfWidth, min);\n    });\n\n    const newMin = max - min;\n    if (newMin < currentMinAndXs[0]) {\n      currentMinAndXs = [newMin, xs];\n    }\n    return currentMinAndXs;\n  }, [Number.POSITIVE_INFINITY, null])[1];\n}\n\n/*\n * Align the coordinates of each of the layout alignments such that\n * left-biased alignments have their minimum coordinate at the same point as\n * the minimum coordinate of the smallest width alignment and right-biased\n * alignments have their maximum coordinate at the same point as the maximum\n * coordinate of the smallest width alignment.\n */\nfunction alignCoordinates(xss, alignTo) {\n  let alignToVals = Object.values(alignTo),\n    alignToMin = util.applyWithChunking(Math.min, alignToVals),\n    alignToMax = util.applyWithChunking(Math.max, alignToVals);\n\n  [\"u\", \"d\"].forEach(vert => {\n    [\"l\", \"r\"].forEach(horiz => {\n      let alignment = vert + horiz,\n        xs = xss[alignment];\n\n      if (xs === alignTo) return;\n\n      let xsVals = Object.values(xs);\n      let delta = alignToMin - util.applyWithChunking(Math.min, xsVals);\n      if (horiz !== \"l\") {\n        delta = alignToMax - util.applyWithChunking(Math.max,xsVals);\n      }\n\n      if (delta) {\n        xss[alignment] = util.mapValues(xs, x => x + delta);\n      }\n    });\n  });\n}\n\nfunction balance(xss, align) {\n  return util.mapValues(xss.ul, (num, v) => {\n    if (align) {\n      return xss[align.toLowerCase()][v];\n    } else {\n      let xs = Object.values(xss).map(xs => xs[v]).sort((a, b) => a - b);\n      return (xs[1] + xs[2]) / 2;\n    }\n  });\n}\n\nfunction positionX(g) {\n  let layering = util.buildLayerMatrix(g);\n  let conflicts = Object.assign(\n    findType1Conflicts(g, layering),\n    findType2Conflicts(g, layering));\n\n  let xss = {};\n  let adjustedLayering;\n  [\"u\", \"d\"].forEach(vert => {\n    adjustedLayering = vert === \"u\" ? layering : Object.values(layering).reverse();\n    [\"l\", \"r\"].forEach(horiz => {\n      if (horiz === \"r\") {\n        adjustedLayering = adjustedLayering.map(inner => {\n          return Object.values(inner).reverse();\n        });\n      }\n\n      let neighborFn = (vert === \"u\" ? g.predecessors : g.successors).bind(g);\n      let align = verticalAlignment(g, adjustedLayering, conflicts, neighborFn);\n      let xs = horizontalCompaction(g, adjustedLayering,\n        align.root, align.align, horiz === \"r\");\n      if (horiz === \"r\") {\n        xs = util.mapValues(xs, x => -x);\n      }\n      xss[vert + horiz] = xs;\n    });\n  });\n\n\n  let smallestWidth = findSmallestWidthAlignment(g, xss);\n  alignCoordinates(xss, smallestWidth);\n  return balance(xss, g.graph().align);\n}\n\nfunction sep(nodeSep, edgeSep, reverseSep) {\n  return (g, v, w) => {\n    let vLabel = g.node(v);\n    let wLabel = g.node(w);\n    let sum = 0;\n    let delta;\n\n    sum += vLabel.width / 2;\n    if (Object.hasOwn(vLabel, \"labelpos\")) {\n      switch (vLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = -vLabel.width / 2; break;\n      case \"r\": delta = vLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    sum += (vLabel.dummy ? edgeSep : nodeSep) / 2;\n    sum += (wLabel.dummy ? edgeSep : nodeSep) / 2;\n\n    sum += wLabel.width / 2;\n    if (Object.hasOwn(wLabel, \"labelpos\")) {\n      switch (wLabel.labelpos.toLowerCase()) {\n      case \"l\": delta = wLabel.width / 2; break;\n      case \"r\": delta = -wLabel.width / 2; break;\n      }\n    }\n    if (delta) {\n      sum += reverseSep ? delta : -delta;\n    }\n    delta = 0;\n\n    return sum;\n  };\n}\n\nfunction width(g, v) {\n  return g.node(v).width;\n}\n","\"use strict\";\n\nlet util = require(\"../util\");\nlet positionX = require(\"./bk\").positionX;\n\nmodule.exports = position;\n\nfunction position(g) {\n  g = util.asNonCompoundGraph(g);\n\n  positionY(g);\n  Object.entries(positionX(g)).forEach(([v, x]) => g.node(v).x = x);\n}\n\nfunction positionY(g) {\n  let layering = util.buildLayerMatrix(g);\n  let rankSep = g.graph().ranksep;\n  let prevY = 0;\n  layering.forEach(layer => {\n    const maxHeight = layer.reduce((acc, v) => {\n      const height = g.node(v).height;\n      if (acc > height) {\n        return acc;\n      } else {\n        return height;\n      }\n    }, 0);\n    layer.forEach(v => g.node(v).y = prevY + maxHeight / 2);\n    prevY += maxHeight + rankSep;\n  });\n}\n\n","\"use strict\";\n\nlet acyclic = require(\"./acyclic\");\nlet normalize = require(\"./normalize\");\nlet rank = require(\"./rank\");\nlet normalizeRanks = require(\"./util\").normalizeRanks;\nlet parentDummyChains = require(\"./parent-dummy-chains\");\nlet removeEmptyRanks = require(\"./util\").removeEmptyRanks;\nlet nestingGraph = require(\"./nesting-graph\");\nlet addBorderSegments = require(\"./add-border-segments\");\nlet coordinateSystem = require(\"./coordinate-system\");\nlet order = require(\"./order\");\nlet position = require(\"./position\");\nlet util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = layout;\n\nfunction layout(g, opts) {\n  let time = opts && opts.debugTiming ? util.time : util.notime;\n  time(\"layout\", () => {\n    let layoutGraph =\n      time(\"  buildLayoutGraph\", () => buildLayoutGraph(g));\n    time(\"  runLayout\",        () => runLayout(layoutGraph, time, opts));\n    time(\"  updateInputGraph\", () => updateInputGraph(g, layoutGraph));\n  });\n}\n\nfunction runLayout(g, time, opts) {\n  time(\"    makeSpaceForEdgeLabels\", () => makeSpaceForEdgeLabels(g));\n  time(\"    removeSelfEdges\",        () => removeSelfEdges(g));\n  time(\"    acyclic\",                () => acyclic.run(g));\n  time(\"    nestingGraph.run\",       () => nestingGraph.run(g));\n  time(\"    rank\",                   () => rank(util.asNonCompoundGraph(g)));\n  time(\"    injectEdgeLabelProxies\", () => injectEdgeLabelProxies(g));\n  time(\"    removeEmptyRanks\",       () => removeEmptyRanks(g));\n  time(\"    nestingGraph.cleanup\",   () => nestingGraph.cleanup(g));\n  time(\"    normalizeRanks\",         () => normalizeRanks(g));\n  time(\"    assignRankMinMax\",       () => assignRankMinMax(g));\n  time(\"    removeEdgeLabelProxies\", () => removeEdgeLabelProxies(g));\n  time(\"    normalize.run\",          () => normalize.run(g));\n  time(\"    parentDummyChains\",      () => parentDummyChains(g));\n  time(\"    addBorderSegments\",      () => addBorderSegments(g));\n  time(\"    order\",                  () => order(g, opts));\n  time(\"    insertSelfEdges\",        () => insertSelfEdges(g));\n  time(\"    adjustCoordinateSystem\", () => coordinateSystem.adjust(g));\n  time(\"    position\",               () => position(g));\n  time(\"    positionSelfEdges\",      () => positionSelfEdges(g));\n  time(\"    removeBorderNodes\",      () => removeBorderNodes(g));\n  time(\"    normalize.undo\",         () => normalize.undo(g));\n  time(\"    fixupEdgeLabelCoords\",   () => fixupEdgeLabelCoords(g));\n  time(\"    undoCoordinateSystem\",   () => coordinateSystem.undo(g));\n  time(\"    translateGraph\",         () => translateGraph(g));\n  time(\"    assignNodeIntersects\",   () => assignNodeIntersects(g));\n  time(\"    reversePoints\",          () => reversePointsForReversedEdges(g));\n  time(\"    acyclic.undo\",           () => acyclic.undo(g));\n}\n\n/*\n * Copies final layout information from the layout graph back to the input\n * graph. This process only copies whitelisted attributes from the layout graph\n * to the input graph, so it serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction updateInputGraph(inputGraph, layoutGraph) {\n  inputGraph.nodes().forEach(v => {\n    let inputLabel = inputGraph.node(v);\n    let layoutLabel = layoutGraph.node(v);\n\n    if (inputLabel) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n      inputLabel.rank = layoutLabel.rank;\n\n      if (layoutGraph.children(v).length) {\n        inputLabel.width = layoutLabel.width;\n        inputLabel.height = layoutLabel.height;\n      }\n    }\n  });\n\n  inputGraph.edges().forEach(e => {\n    let inputLabel = inputGraph.edge(e);\n    let layoutLabel = layoutGraph.edge(e);\n\n    inputLabel.points = layoutLabel.points;\n    if (Object.hasOwn(layoutLabel, \"x\")) {\n      inputLabel.x = layoutLabel.x;\n      inputLabel.y = layoutLabel.y;\n    }\n  });\n\n  inputGraph.graph().width = layoutGraph.graph().width;\n  inputGraph.graph().height = layoutGraph.graph().height;\n}\n\nlet graphNumAttrs = [\"nodesep\", \"edgesep\", \"ranksep\", \"marginx\", \"marginy\"];\nlet graphDefaults = { ranksep: 50, edgesep: 20, nodesep: 50, rankdir: \"tb\" };\nlet graphAttrs = [\"acyclicer\", \"ranker\", \"rankdir\", \"align\"];\nlet nodeNumAttrs = [\"width\", \"height\", \"rank\"];\nlet nodeDefaults = { width: 0, height: 0 };\nlet edgeNumAttrs = [\"minlen\", \"weight\", \"width\", \"height\", \"labeloffset\"];\nlet edgeDefaults = {\n  minlen: 1, weight: 1, width: 0, height: 0,\n  labeloffset: 10, labelpos: \"r\"\n};\nlet edgeAttrs = [\"labelpos\"];\n\n/*\n * Constructs a new graph from the input graph, which can be used for layout.\n * This process copies only whitelisted attributes from the input graph to the\n * layout graph. Thus this function serves as a good place to determine what\n * attributes can influence layout.\n */\nfunction buildLayoutGraph(inputGraph) {\n  let g = new Graph({ multigraph: true, compound: true });\n  let graph = canonicalize(inputGraph.graph());\n\n  g.setGraph(Object.assign({},\n    graphDefaults,\n    selectNumberAttrs(graph, graphNumAttrs),\n    util.pick(graph, graphAttrs)));\n\n  inputGraph.nodes().forEach(v => {\n    let node = canonicalize(inputGraph.node(v));\n    const newNode = selectNumberAttrs(node, nodeNumAttrs);\n    Object.keys(nodeDefaults).forEach(k => {\n      if (newNode[k] === undefined) {\n        newNode[k] = nodeDefaults[k];\n      }\n    });\n\n    g.setNode(v, newNode);\n    g.setParent(v, inputGraph.parent(v));\n  });\n\n  inputGraph.edges().forEach(e => {\n    let edge = canonicalize(inputGraph.edge(e));\n    g.setEdge(e, Object.assign({},\n      edgeDefaults,\n      selectNumberAttrs(edge, edgeNumAttrs),\n      util.pick(edge, edgeAttrs)));\n  });\n\n  return g;\n}\n\n/*\n * This idea comes from the Gansner paper: to account for edge labels in our\n * layout we split each rank in half by doubling minlen and halving ranksep.\n * Then we can place labels at these mid-points between nodes.\n *\n * We also add some minimal padding to the width to push the label for the edge\n * away from the edge itself a bit.\n */\nfunction makeSpaceForEdgeLabels(g) {\n  let graph = g.graph();\n  graph.ranksep /= 2;\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.minlen *= 2;\n    if (edge.labelpos.toLowerCase() !== \"c\") {\n      if (graph.rankdir === \"TB\" || graph.rankdir === \"BT\") {\n        edge.width += edge.labeloffset;\n      } else {\n        edge.height += edge.labeloffset;\n      }\n    }\n  });\n}\n\n/*\n * Creates temporary dummy nodes that capture the rank in which each edge's\n * label is going to, if it has one of non-zero width and height. We do this\n * so that we can safely remove empty ranks while preserving balance for the\n * label's position.\n */\nfunction injectEdgeLabelProxies(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.width && edge.height) {\n      let v = g.node(e.v);\n      let w = g.node(e.w);\n      let label = { rank: (w.rank - v.rank) / 2 + v.rank, e: e };\n      util.addDummyNode(g, \"edge-proxy\", label, \"_ep\");\n    }\n  });\n}\n\nfunction assignRankMinMax(g) {\n  let maxRank = 0;\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.borderTop) {\n      node.minRank = g.node(node.borderTop).rank;\n      node.maxRank = g.node(node.borderBottom).rank;\n      maxRank = Math.max(maxRank, node.maxRank);\n    }\n  });\n  g.graph().maxRank = maxRank;\n}\n\nfunction removeEdgeLabelProxies(g) {\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    if (node.dummy === \"edge-proxy\") {\n      g.edge(node.e).labelRank = node.rank;\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction translateGraph(g) {\n  let minX = Number.POSITIVE_INFINITY;\n  let maxX = 0;\n  let minY = Number.POSITIVE_INFINITY;\n  let maxY = 0;\n  let graphLabel = g.graph();\n  let marginX = graphLabel.marginx || 0;\n  let marginY = graphLabel.marginy || 0;\n\n  function getExtremes(attrs) {\n    let x = attrs.x;\n    let y = attrs.y;\n    let w = attrs.width;\n    let h = attrs.height;\n    minX = Math.min(minX, x - w / 2);\n    maxX = Math.max(maxX, x + w / 2);\n    minY = Math.min(minY, y - h / 2);\n    maxY = Math.max(maxY, y + h / 2);\n  }\n\n  g.nodes().forEach(v => getExtremes(g.node(v)));\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      getExtremes(edge);\n    }\n  });\n\n  minX -= marginX;\n  minY -= marginY;\n\n  g.nodes().forEach(v => {\n    let node = g.node(v);\n    node.x -= minX;\n    node.y -= minY;\n  });\n\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    edge.points.forEach(p => {\n      p.x -= minX;\n      p.y -= minY;\n    });\n    if (Object.hasOwn(edge, \"x\")) { edge.x -= minX; }\n    if (Object.hasOwn(edge, \"y\")) { edge.y -= minY; }\n  });\n\n  graphLabel.width = maxX - minX + marginX;\n  graphLabel.height = maxY - minY + marginY;\n}\n\nfunction assignNodeIntersects(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    let nodeV = g.node(e.v);\n    let nodeW = g.node(e.w);\n    let p1, p2;\n    if (!edge.points) {\n      edge.points = [];\n      p1 = nodeW;\n      p2 = nodeV;\n    } else {\n      p1 = edge.points[0];\n      p2 = edge.points[edge.points.length - 1];\n    }\n    edge.points.unshift(util.intersectRect(nodeV, p1));\n    edge.points.push(util.intersectRect(nodeW, p2));\n  });\n}\n\nfunction fixupEdgeLabelCoords(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (Object.hasOwn(edge, \"x\")) {\n      if (edge.labelpos === \"l\" || edge.labelpos === \"r\") {\n        edge.width -= edge.labeloffset;\n      }\n      switch (edge.labelpos) {\n      case \"l\": edge.x -= edge.width / 2 + edge.labeloffset; break;\n      case \"r\": edge.x += edge.width / 2 + edge.labeloffset; break;\n      }\n    }\n  });\n}\n\nfunction reversePointsForReversedEdges(g) {\n  g.edges().forEach(e => {\n    let edge = g.edge(e);\n    if (edge.reversed) {\n      edge.points.reverse();\n    }\n  });\n}\n\nfunction removeBorderNodes(g) {\n  g.nodes().forEach(v => {\n    if (g.children(v).length) {\n      let node = g.node(v);\n      let t = g.node(node.borderTop);\n      let b = g.node(node.borderBottom);\n      let l = g.node(node.borderLeft[node.borderLeft.length - 1]);\n      let r = g.node(node.borderRight[node.borderRight.length - 1]);\n\n      node.width = Math.abs(r.x - l.x);\n      node.height = Math.abs(b.y - t.y);\n      node.x = l.x + node.width / 2;\n      node.y = t.y + node.height / 2;\n    }\n  });\n\n  g.nodes().forEach(v => {\n    if (g.node(v).dummy === \"border\") {\n      g.removeNode(v);\n    }\n  });\n}\n\nfunction removeSelfEdges(g) {\n  g.edges().forEach(e => {\n    if (e.v === e.w) {\n      var node = g.node(e.v);\n      if (!node.selfEdges) {\n        node.selfEdges = [];\n      }\n      node.selfEdges.push({ e: e, label: g.edge(e) });\n      g.removeEdge(e);\n    }\n  });\n}\n\nfunction insertSelfEdges(g) {\n  var layers = util.buildLayerMatrix(g);\n  layers.forEach(layer => {\n    var orderShift = 0;\n    layer.forEach((v, i) => {\n      var node = g.node(v);\n      node.order = i + orderShift;\n      (node.selfEdges || []).forEach(selfEdge => {\n        util.addDummyNode(g, \"selfedge\", {\n          width: selfEdge.label.width,\n          height: selfEdge.label.height,\n          rank: node.rank,\n          order: i + (++orderShift),\n          e: selfEdge.e,\n          label: selfEdge.label\n        }, \"_se\");\n      });\n      delete node.selfEdges;\n    });\n  });\n}\n\nfunction positionSelfEdges(g) {\n  g.nodes().forEach(v => {\n    var node = g.node(v);\n    if (node.dummy === \"selfedge\") {\n      var selfNode = g.node(node.e.v);\n      var x = selfNode.x + selfNode.width / 2;\n      var y = selfNode.y;\n      var dx = node.x - x;\n      var dy = selfNode.height / 2;\n      g.setEdge(node.e, node.label);\n      g.removeNode(v);\n      node.label.points = [\n        { x: x + 2 * dx / 3, y: y - dy },\n        { x: x + 5 * dx / 6, y: y - dy },\n        { x: x +     dx    , y: y },\n        { x: x + 5 * dx / 6, y: y + dy },\n        { x: x + 2 * dx / 3, y: y + dy }\n      ];\n      node.label.x = node.x;\n      node.label.y = node.y;\n    }\n  });\n}\n\nfunction selectNumberAttrs(obj, attrs) {\n  return util.mapValues(util.pick(obj, attrs), Number);\n}\n\nfunction canonicalize(attrs) {\n  var newAttrs = {};\n  if (attrs) {\n    Object.entries(attrs).forEach(([k, v]) => {\n      if (typeof k === \"string\") {\n        k = k.toLowerCase();\n      }\n\n      newAttrs[k] = v;\n    });\n  }\n  return newAttrs;\n}\n","let util = require(\"./util\");\nlet Graph = require(\"@dagrejs/graphlib\").Graph;\n\nmodule.exports = {\n  debugOrdering: debugOrdering\n};\n\n/* istanbul ignore next */\nfunction debugOrdering(g) {\n  let layerMatrix = util.buildLayerMatrix(g);\n\n  let h = new Graph({ compound: true, multigraph: true }).setGraph({});\n\n  g.nodes().forEach(v => {\n    h.setNode(v, { label: v });\n    h.setParent(v, \"layer\" + g.node(v).rank);\n  });\n\n  g.edges().forEach(e => h.setEdge(e.v, e.w, {}, e.name));\n\n  layerMatrix.forEach((layer, i) => {\n    let layerV = \"layer\" + i;\n    h.setNode(layerV, { rank: \"same\" });\n    layer.reduce((u, v) => {\n      h.setEdge(u, v, { style: \"invis\" });\n      return v;\n    });\n  });\n\n  return h;\n}\n","module.exports = \"1.1.5\";\n","/*\nCopyright (c) 2012-2014 Chris Pettitt\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the \"Software\"), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in\nall copies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\nTHE SOFTWARE.\n*/\n\nmodule.exports = {\n  graphlib: require(\"@dagrejs/graphlib\"),\n\n  layout: require(\"./lib/layout\"),\n  debug: require(\"./lib/debug\"),\n  util: {\n    time: require(\"./lib/util\").time,\n    notime: require(\"./lib/util\").notime\n  },\n  version: require(\"./lib/version\")\n};\n","\"use client\";\n\n// src/presence.tsx\nimport * as React2 from \"react\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { useLayoutEffect } from \"@radix-ui/react-use-layout-effect\";\n\n// src/use-state-machine.tsx\nimport * as React from \"react\";\nfunction useStateMachine(initialState, machine) {\n  return React.useReducer((state, event) => {\n    const nextState = machine[state][event];\n    return nextState ?? state;\n  }, initialState);\n}\n\n// src/presence.tsx\nvar Presence = (props) => {\n  const { present, children } = props;\n  const presence = usePresence(present);\n  const child = typeof children === \"function\" ? children({ present: presence.isPresent }) : React2.Children.only(children);\n  const ref = useComposedRefs(presence.ref, getElementRef(child));\n  const forceMount = typeof children === \"function\";\n  return forceMount || presence.isPresent ? React2.cloneElement(child, { ref }) : null;\n};\nPresence.displayName = \"Presence\";\nfunction usePresence(present) {\n  const [node, setNode] = React2.useState();\n  const stylesRef = React2.useRef(null);\n  const prevPresentRef = React2.useRef(present);\n  const prevAnimationNameRef = React2.useRef(\"none\");\n  const initialState = present ? \"mounted\" : \"unmounted\";\n  const [state, send] = useStateMachine(initialState, {\n    mounted: {\n      UNMOUNT: \"unmounted\",\n      ANIMATION_OUT: \"unmountSuspended\"\n    },\n    unmountSuspended: {\n      MOUNT: \"mounted\",\n      ANIMATION_END: \"unmounted\"\n    },\n    unmounted: {\n      MOUNT: \"mounted\"\n    }\n  });\n  React2.useEffect(() => {\n    const currentAnimationName = getAnimationName(stylesRef.current);\n    prevAnimationNameRef.current = state === \"mounted\" ? currentAnimationName : \"none\";\n  }, [state]);\n  useLayoutEffect(() => {\n    const styles = stylesRef.current;\n    const wasPresent = prevPresentRef.current;\n    const hasPresentChanged = wasPresent !== present;\n    if (hasPresentChanged) {\n      const prevAnimationName = prevAnimationNameRef.current;\n      const currentAnimationName = getAnimationName(styles);\n      if (present) {\n        send(\"MOUNT\");\n      } else if (currentAnimationName === \"none\" || styles?.display === \"none\") {\n        send(\"UNMOUNT\");\n      } else {\n        const isAnimating = prevAnimationName !== currentAnimationName;\n        if (wasPresent && isAnimating) {\n          send(\"ANIMATION_OUT\");\n        } else {\n          send(\"UNMOUNT\");\n        }\n      }\n      prevPresentRef.current = present;\n    }\n  }, [present, send]);\n  useLayoutEffect(() => {\n    if (node) {\n      let timeoutId;\n      const ownerWindow = node.ownerDocument.defaultView ?? window;\n      const handleAnimationEnd = (event) => {\n        const currentAnimationName = getAnimationName(stylesRef.current);\n        const isCurrentAnimation = currentAnimationName.includes(event.animationName);\n        if (event.target === node && isCurrentAnimation) {\n          send(\"ANIMATION_END\");\n          if (!prevPresentRef.current) {\n            const currentFillMode = node.style.animationFillMode;\n            node.style.animationFillMode = \"forwards\";\n            timeoutId = ownerWindow.setTimeout(() => {\n              if (node.style.animationFillMode === \"forwards\") {\n                node.style.animationFillMode = currentFillMode;\n              }\n            });\n          }\n        }\n      };\n      const handleAnimationStart = (event) => {\n        if (event.target === node) {\n          prevAnimationNameRef.current = getAnimationName(stylesRef.current);\n        }\n      };\n      node.addEventListener(\"animationstart\", handleAnimationStart);\n      node.addEventListener(\"animationcancel\", handleAnimationEnd);\n      node.addEventListener(\"animationend\", handleAnimationEnd);\n      return () => {\n        ownerWindow.clearTimeout(timeoutId);\n        node.removeEventListener(\"animationstart\", handleAnimationStart);\n        node.removeEventListener(\"animationcancel\", handleAnimationEnd);\n        node.removeEventListener(\"animationend\", handleAnimationEnd);\n      };\n    } else {\n      send(\"ANIMATION_END\");\n    }\n  }, [node, send]);\n  return {\n    isPresent: [\"mounted\", \"unmountSuspended\"].includes(state),\n    ref: React2.useCallback((node2) => {\n      stylesRef.current = node2 ? getComputedStyle(node2) : null;\n      setNode(node2);\n    }, [])\n  };\n}\nfunction getAnimationName(styles) {\n  return styles?.animationName || \"none\";\n}\nfunction getElementRef(element) {\n  let getter = Object.getOwnPropertyDescriptor(element.props, \"ref\")?.get;\n  let mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.ref;\n  }\n  getter = Object.getOwnPropertyDescriptor(element, \"ref\")?.get;\n  mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n  return element.props.ref || element.ref;\n}\nvar Root = Presence;\nexport {\n  Presence,\n  Root\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/dialog.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContext, createContextScope } from \"@radix-ui/react-context\";\nimport { useId } from \"@radix-ui/react-id\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { DismissableLayer } from \"@radix-ui/react-dismissable-layer\";\nimport { FocusScope } from \"@radix-ui/react-focus-scope\";\nimport { Portal as PortalPrimitive } from \"@radix-ui/react-portal\";\nimport { Presence } from \"@radix-ui/react-presence\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { useFocusGuards } from \"@radix-ui/react-focus-guards\";\nimport { RemoveScroll } from \"react-remove-scroll\";\nimport { hideOthers } from \"aria-hidden\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { Fragment, jsx, jsxs } from \"react/jsx-runtime\";\nvar DIALOG_NAME = \"Dialog\";\nvar [createDialogContext, createDialogScope] = createContextScope(DIALOG_NAME);\nvar [DialogProvider, useDialogContext] = createDialogContext(DIALOG_NAME);\nvar Dialog = (props) => {\n  const {\n    __scopeDialog,\n    children,\n    open: openProp,\n    defaultOpen,\n    onOpenChange,\n    modal = true\n  } = props;\n  const triggerRef = React.useRef(null);\n  const contentRef = React.useRef(null);\n  const [open, setOpen] = useControllableState({\n    prop: openProp,\n    defaultProp: defaultOpen ?? false,\n    onChange: onOpenChange,\n    caller: DIALOG_NAME\n  });\n  return /* @__PURE__ */ jsx(\n    DialogProvider,\n    {\n      scope: __scopeDialog,\n      triggerRef,\n      contentRef,\n      contentId: useId(),\n      titleId: useId(),\n      descriptionId: useId(),\n      open,\n      onOpenChange: setOpen,\n      onOpenToggle: React.useCallback(() => setOpen((prevOpen) => !prevOpen), [setOpen]),\n      modal,\n      children\n    }\n  );\n};\nDialog.displayName = DIALOG_NAME;\nvar TRIGGER_NAME = \"DialogTrigger\";\nvar DialogTrigger = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...triggerProps } = props;\n    const context = useDialogContext(TRIGGER_NAME, __scopeDialog);\n    const composedTriggerRef = useComposedRefs(forwardedRef, context.triggerRef);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        \"aria-haspopup\": \"dialog\",\n        \"aria-expanded\": context.open,\n        \"aria-controls\": context.contentId,\n        \"data-state\": getState(context.open),\n        ...triggerProps,\n        ref: composedTriggerRef,\n        onClick: composeEventHandlers(props.onClick, context.onOpenToggle)\n      }\n    );\n  }\n);\nDialogTrigger.displayName = TRIGGER_NAME;\nvar PORTAL_NAME = \"DialogPortal\";\nvar [PortalProvider, usePortalContext] = createDialogContext(PORTAL_NAME, {\n  forceMount: void 0\n});\nvar DialogPortal = (props) => {\n  const { __scopeDialog, forceMount, children, container } = props;\n  const context = useDialogContext(PORTAL_NAME, __scopeDialog);\n  return /* @__PURE__ */ jsx(PortalProvider, { scope: __scopeDialog, forceMount, children: React.Children.map(children, (child) => /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(PortalPrimitive, { asChild: true, container, children: child }) })) });\n};\nDialogPortal.displayName = PORTAL_NAME;\nvar OVERLAY_NAME = \"DialogOverlay\";\nvar DialogOverlay = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(OVERLAY_NAME, props.__scopeDialog);\n    const { forceMount = portalContext.forceMount, ...overlayProps } = props;\n    const context = useDialogContext(OVERLAY_NAME, props.__scopeDialog);\n    return context.modal ? /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: /* @__PURE__ */ jsx(DialogOverlayImpl, { ...overlayProps, ref: forwardedRef }) }) : null;\n  }\n);\nDialogOverlay.displayName = OVERLAY_NAME;\nvar Slot = createSlot(\"DialogOverlay.RemoveScroll\");\nvar DialogOverlayImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...overlayProps } = props;\n    const context = useDialogContext(OVERLAY_NAME, __scopeDialog);\n    return (\n      // Make sure `Content` is scrollable even when it doesn't live inside `RemoveScroll`\n      // ie. when `Overlay` and `Content` are siblings\n      /* @__PURE__ */ jsx(RemoveScroll, { as: Slot, allowPinchZoom: true, shards: [context.contentRef], children: /* @__PURE__ */ jsx(\n        Primitive.div,\n        {\n          \"data-state\": getState(context.open),\n          ...overlayProps,\n          ref: forwardedRef,\n          style: { pointerEvents: \"auto\", ...overlayProps.style }\n        }\n      ) })\n    );\n  }\n);\nvar CONTENT_NAME = \"DialogContent\";\nvar DialogContent = React.forwardRef(\n  (props, forwardedRef) => {\n    const portalContext = usePortalContext(CONTENT_NAME, props.__scopeDialog);\n    const { forceMount = portalContext.forceMount, ...contentProps } = props;\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    return /* @__PURE__ */ jsx(Presence, { present: forceMount || context.open, children: context.modal ? /* @__PURE__ */ jsx(DialogContentModal, { ...contentProps, ref: forwardedRef }) : /* @__PURE__ */ jsx(DialogContentNonModal, { ...contentProps, ref: forwardedRef }) });\n  }\n);\nDialogContent.displayName = CONTENT_NAME;\nvar DialogContentModal = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, context.contentRef, contentRef);\n    React.useEffect(() => {\n      const content = contentRef.current;\n      if (content) return hideOthers(content);\n    }, []);\n    return /* @__PURE__ */ jsx(\n      DialogContentImpl,\n      {\n        ...props,\n        ref: composedRefs,\n        trapFocus: context.open,\n        disableOutsidePointerEvents: true,\n        onCloseAutoFocus: composeEventHandlers(props.onCloseAutoFocus, (event) => {\n          event.preventDefault();\n          context.triggerRef.current?.focus();\n        }),\n        onPointerDownOutside: composeEventHandlers(props.onPointerDownOutside, (event) => {\n          const originalEvent = event.detail.originalEvent;\n          const ctrlLeftClick = originalEvent.button === 0 && originalEvent.ctrlKey === true;\n          const isRightClick = originalEvent.button === 2 || ctrlLeftClick;\n          if (isRightClick) event.preventDefault();\n        }),\n        onFocusOutside: composeEventHandlers(\n          props.onFocusOutside,\n          (event) => event.preventDefault()\n        )\n      }\n    );\n  }\n);\nvar DialogContentNonModal = React.forwardRef(\n  (props, forwardedRef) => {\n    const context = useDialogContext(CONTENT_NAME, props.__scopeDialog);\n    const hasInteractedOutsideRef = React.useRef(false);\n    const hasPointerDownOutsideRef = React.useRef(false);\n    return /* @__PURE__ */ jsx(\n      DialogContentImpl,\n      {\n        ...props,\n        ref: forwardedRef,\n        trapFocus: false,\n        disableOutsidePointerEvents: false,\n        onCloseAutoFocus: (event) => {\n          props.onCloseAutoFocus?.(event);\n          if (!event.defaultPrevented) {\n            if (!hasInteractedOutsideRef.current) context.triggerRef.current?.focus();\n            event.preventDefault();\n          }\n          hasInteractedOutsideRef.current = false;\n          hasPointerDownOutsideRef.current = false;\n        },\n        onInteractOutside: (event) => {\n          props.onInteractOutside?.(event);\n          if (!event.defaultPrevented) {\n            hasInteractedOutsideRef.current = true;\n            if (event.detail.originalEvent.type === \"pointerdown\") {\n              hasPointerDownOutsideRef.current = true;\n            }\n          }\n          const target = event.target;\n          const targetIsTrigger = context.triggerRef.current?.contains(target);\n          if (targetIsTrigger) event.preventDefault();\n          if (event.detail.originalEvent.type === \"focusin\" && hasPointerDownOutsideRef.current) {\n            event.preventDefault();\n          }\n        }\n      }\n    );\n  }\n);\nvar DialogContentImpl = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, trapFocus, onOpenAutoFocus, onCloseAutoFocus, ...contentProps } = props;\n    const context = useDialogContext(CONTENT_NAME, __scopeDialog);\n    const contentRef = React.useRef(null);\n    const composedRefs = useComposedRefs(forwardedRef, contentRef);\n    useFocusGuards();\n    return /* @__PURE__ */ jsxs(Fragment, { children: [\n      /* @__PURE__ */ jsx(\n        FocusScope,\n        {\n          asChild: true,\n          loop: true,\n          trapped: trapFocus,\n          onMountAutoFocus: onOpenAutoFocus,\n          onUnmountAutoFocus: onCloseAutoFocus,\n          children: /* @__PURE__ */ jsx(\n            DismissableLayer,\n            {\n              role: \"dialog\",\n              id: context.contentId,\n              \"aria-describedby\": context.descriptionId,\n              \"aria-labelledby\": context.titleId,\n              \"data-state\": getState(context.open),\n              ...contentProps,\n              ref: composedRefs,\n              onDismiss: () => context.onOpenChange(false)\n            }\n          )\n        }\n      ),\n      /* @__PURE__ */ jsxs(Fragment, { children: [\n        /* @__PURE__ */ jsx(TitleWarning, { titleId: context.titleId }),\n        /* @__PURE__ */ jsx(DescriptionWarning, { contentRef, descriptionId: context.descriptionId })\n      ] })\n    ] });\n  }\n);\nvar TITLE_NAME = \"DialogTitle\";\nvar DialogTitle = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...titleProps } = props;\n    const context = useDialogContext(TITLE_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(Primitive.h2, { id: context.titleId, ...titleProps, ref: forwardedRef });\n  }\n);\nDialogTitle.displayName = TITLE_NAME;\nvar DESCRIPTION_NAME = \"DialogDescription\";\nvar DialogDescription = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...descriptionProps } = props;\n    const context = useDialogContext(DESCRIPTION_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(Primitive.p, { id: context.descriptionId, ...descriptionProps, ref: forwardedRef });\n  }\n);\nDialogDescription.displayName = DESCRIPTION_NAME;\nvar CLOSE_NAME = \"DialogClose\";\nvar DialogClose = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeDialog, ...closeProps } = props;\n    const context = useDialogContext(CLOSE_NAME, __scopeDialog);\n    return /* @__PURE__ */ jsx(\n      Primitive.button,\n      {\n        type: \"button\",\n        ...closeProps,\n        ref: forwardedRef,\n        onClick: composeEventHandlers(props.onClick, () => context.onOpenChange(false))\n      }\n    );\n  }\n);\nDialogClose.displayName = CLOSE_NAME;\nfunction getState(open) {\n  return open ? \"open\" : \"closed\";\n}\nvar TITLE_WARNING_NAME = \"DialogTitleWarning\";\nvar [WarningProvider, useWarningContext] = createContext(TITLE_WARNING_NAME, {\n  contentName: CONTENT_NAME,\n  titleName: TITLE_NAME,\n  docsSlug: \"dialog\"\n});\nvar TitleWarning = ({ titleId }) => {\n  const titleWarningContext = useWarningContext(TITLE_WARNING_NAME);\n  const MESSAGE = `\\`${titleWarningContext.contentName}\\` requires a \\`${titleWarningContext.titleName}\\` for the component to be accessible for screen reader users.\n\nIf you want to hide the \\`${titleWarningContext.titleName}\\`, you can wrap it with our VisuallyHidden component.\n\nFor more information, see https://radix-ui.com/primitives/docs/components/${titleWarningContext.docsSlug}`;\n  React.useEffect(() => {\n    if (titleId) {\n      const hasTitle = document.getElementById(titleId);\n      if (!hasTitle) console.error(MESSAGE);\n    }\n  }, [MESSAGE, titleId]);\n  return null;\n};\nvar DESCRIPTION_WARNING_NAME = \"DialogDescriptionWarning\";\nvar DescriptionWarning = ({ contentRef, descriptionId }) => {\n  const descriptionWarningContext = useWarningContext(DESCRIPTION_WARNING_NAME);\n  const MESSAGE = `Warning: Missing \\`Description\\` or \\`aria-describedby={undefined}\\` for {${descriptionWarningContext.contentName}}.`;\n  React.useEffect(() => {\n    const describedById = contentRef.current?.getAttribute(\"aria-describedby\");\n    if (descriptionId && describedById) {\n      const hasDescription = document.getElementById(descriptionId);\n      if (!hasDescription) console.warn(MESSAGE);\n    }\n  }, [MESSAGE, contentRef, descriptionId]);\n  return null;\n};\nvar Root = Dialog;\nvar Trigger = DialogTrigger;\nvar Portal = DialogPortal;\nvar Overlay = DialogOverlay;\nvar Content = DialogContent;\nvar Title = DialogTitle;\nvar Description = DialogDescription;\nvar Close = DialogClose;\nexport {\n  Close,\n  Content,\n  Description,\n  Dialog,\n  DialogClose,\n  DialogContent,\n  DialogDescription,\n  DialogOverlay,\n  DialogPortal,\n  DialogTitle,\n  DialogTrigger,\n  Overlay,\n  Portal,\n  Root,\n  Title,\n  Trigger,\n  WarningProvider,\n  createDialogScope\n};\n//# sourceMappingURL=index.mjs.map\n","'use client'\n\nimport * as React from 'react'\nimport * as DialogPrimitive from '@radix-ui/react-dialog'\nimport { X } from 'lucide-react'\n\nimport { cn } from '@/lib/utils'\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      'fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0',\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        'fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-slate-200 bg-white p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] dark:border-slate-800 dark:bg-slate-950 sm:rounded-lg',\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className='absolute right-4 top-4 rounded-sm opacity-70 ring-offset-white transition-opacity data-[state=open]:bg-slate-100 data-[state=open]:text-slate-500 hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:pointer-events-none dark:ring-offset-slate-950 dark:data-[state=open]:bg-slate-800 dark:data-[state=open]:text-slate-400 dark:focus:ring-slate-300'>\n        <X className='h-4 w-4' />\n        <span className='sr-only'>Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col space-y-1.5 text-center sm:text-left',\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = 'DialogHeader'\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      'flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2',\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = 'DialogFooter'\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      'text-lg font-semibold leading-none tracking-tight',\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn('text-sm text-slate-500 dark:text-slate-400', className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogTrigger,\n  DialogClose,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","import React, { useEffect, useState, useCallback } from 'react'\nimport {\n  ReactFlow,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  addEdge,\n  MarkerType,\n  ReactFlowProvider,\n  useReactFlow,\n  Panel,\n  type Node,\n  type Edge,\n  type Connection,\n} from '@xyflow/react'\nimport Dagre from '@dagrejs/dagre'\nimport { Card } from '@/components/ui/card'\nimport { Button } from '@/components/ui/button'\nimport { Loader2, Plus, Copy, Trash2, Edit } from 'lucide-react'\nimport {\n  Dialog,\n  DialogContent,\n  DialogHeader,\n  DialogTitle,\n  DialogFooter,\n} from '@/components/ui/dialog'\nimport { Input } from '@/components/ui/input'\nimport useAuthState from '@/hooks/useAuth'\nimport { OpenAIService } from '@/services/openAi'\nimport { generateMindMapStructure } from '@/services/openAiFns'\n\nimport '@xyflow/react/dist/style.css'\n\n// Use ReactFlow's built-in types\ntype ReactFlowNode = Node<{ label: string }>\ntype ReactFlowEdge = Edge\n\nconst NODE_STYLES = {\n  input: {\n    background: '#2563eb',\n    color: 'white',\n  },\n  default: {\n    background: '#4b5563',\n    color: 'white',\n  },\n  output: {\n    background: '#059669',\n    color: 'white',\n  },\n  common: {\n    border: 'none',\n    borderRadius: '8px',\n    padding: '10px 20px',\n    fontSize: '14px',\n    fontWeight: 'bold',\n    boxShadow: '0 4px 6px -1px rgba(0, 0, 0, 0.1)',\n    width: 'auto',\n    minWidth: '150px',\n  },\n}\n\n// React Flow container styles\nconst reactFlowStyles: React.CSSProperties = {\n  background: '#1f2937',\n}\n\nconst getLayoutedElements = (\n  nodes: ReactFlowNode[],\n  edges: ReactFlowEdge[],\n  direction: string = 'TB'\n) => {\n  const g = new Dagre.graphlib.Graph().setDefaultEdgeLabel(() => ({}))\n  g.setGraph({\n    rankdir: direction,\n    ranksep: 80,\n    nodesep: 50,\n    marginx: 20,\n    marginy: 20,\n  })\n\n  edges.forEach((edge: ReactFlowEdge) => g.setEdge(edge.source, edge.target))\n  nodes.forEach((node: ReactFlowNode) => {\n    g.setNode(node.id, { width: 150, height: 40 })\n  })\n\n  Dagre.layout(g)\n\n  const layoutedNodes = nodes.map((node: ReactFlowNode) => {\n    const nodeWithPosition = g.node(node.id)\n    return {\n      ...node,\n      position: {\n        x: nodeWithPosition.x - 75, // Half the width\n        y: nodeWithPosition.y - 20, // Half the height\n      },\n    }\n  })\n\n  return {\n    nodes: layoutedNodes,\n    edges,\n  }\n}\n\ninterface MindMapInnerProps {\n  markdown: string\n}\n\nconst MindMapInner: React.FC<MindMapInnerProps> = ({ markdown }) => {\n  const { nodes: ogNodes, edges: ogEdges } = JSON.parse(markdown)\n\n  const [nodes, setNodes, onNodesChange] = useNodesState<ReactFlowNode>([])\n  const [edges, setEdges, onEdgesChange] = useEdgesState<ReactFlowEdge>([])\n  const [error, setError] = useState<string | null>(null)\n  const [isLoading, setIsLoading] = useState<boolean>(false)\n  const [initialized, setInitialized] = useState<boolean>(false)\n  const [selectedNode, setSelectedNode] = useState<ReactFlowNode | null>(null)\n  const [isEditDialogOpen, setIsEditDialogOpen] = useState<boolean>(false)\n  const [editLabel, setEditLabel] = useState<string>('')\n\n  const authState = useAuthState()\n  // Get OpenAI API key from environment variables\n  const oAiKey = import.meta.env.VITE_OPENAI_API_KEY || process.env.OPENAI_API_KEY || null\n  const [apiClient, setApiClient] = useState<OpenAIService | null>(null)\n  const {\n    fitView,\n    getNode,\n    getNodes,\n    getEdges,\n    deleteElements,\n    addNodes,\n    addEdges,\n  } = useReactFlow()\n\n  const onConnect = useCallback(\n    (connection: Connection) => {\n      const newEdge = {\n        ...connection,\n        animated: true,\n        markerEnd: { type: MarkerType.ArrowClosed },\n        style: { stroke: '#64748b' },\n      }\n      setEdges(oldEdges => addEdge(newEdge, oldEdges))\n    },\n    [setEdges]\n  )\n\n  const onNodeClick = useCallback(\n    (event: React.MouseEvent, node: ReactFlowNode) => {\n      setSelectedNode(node)\n    },\n    []\n  )\n\n  const handleAddNode = useCallback(() => {\n    const newNodeId = `node-${getNodes().length + 1}`\n    const parentNode = selectedNode || getNodes()[0]\n\n    if (!parentNode) return\n\n    const newNode = {\n      id: newNodeId,\n      data: { label: 'New Topic' },\n      position: { x: parentNode.position.x + 200, y: parentNode.position.y },\n      style: {\n        ...NODE_STYLES.common,\n        ...NODE_STYLES.input,\n      },\n    }\n\n    const newEdge = {\n      id: `edge-${parentNode.id}-${newNodeId}`,\n      source: parentNode.id,\n      target: newNodeId,\n      type: 'default',\n      markerEnd: { type: MarkerType.ArrowClosed },\n      style: { stroke: '#64748b' },\n      animated: true,\n    }\n\n    addNodes(newNode)\n    addEdges(newEdge)\n  }, [\n    selectedNode,\n    getNodes,\n    addNodes,\n    addEdges,\n    getEdges,\n    setNodes,\n    setEdges,\n    fitView,\n  ])\n\n  const handleCopyNode = useCallback(() => {\n    if (!selectedNode) return\n\n    const newNodeId = `node-${getNodes().length + 1}`\n    const newNode = {\n      ...selectedNode,\n      id: newNodeId,\n      position: {\n        x: selectedNode.position.x + 100,\n        y: selectedNode.position.y + 100,\n      },\n    }\n\n    addNodes(newNode)\n  }, [selectedNode, getNodes, addNodes, getEdges, setNodes, setEdges, fitView])\n\n  const handleDeleteNode = useCallback(() => {\n    if (!selectedNode) return\n\n    const connectedEdges = getEdges().filter(\n      edge => edge.source === selectedNode.id || edge.target === selectedNode.id\n    )\n\n    deleteElements({\n      nodes: [selectedNode],\n      edges: connectedEdges,\n    })\n\n    setSelectedNode(null)\n  }, [\n    selectedNode,\n    getEdges,\n    deleteElements,\n    getNodes,\n    setNodes,\n    setEdges,\n    fitView,\n  ])\n\n  const handleEditNode = useCallback(() => {\n    if (!selectedNode) return\n    setEditLabel(selectedNode.data.label)\n    setIsEditDialogOpen(true)\n  }, [selectedNode])\n\n  const handleSaveEdit = useCallback(() => {\n    if (!selectedNode || !editLabel.trim()) return\n\n    setNodes(nds =>\n      nds.map(node => {\n        if (node.id === selectedNode.id) {\n          return {\n            ...node,\n            data: {\n              ...node.data,\n              label: editLabel.trim(),\n            },\n          }\n        }\n        return node\n      })\n    )\n\n    setIsEditDialogOpen(false)\n    setEditLabel('')\n  }, [selectedNode, editLabel, setNodes])\n\n  // Initialize API client\n  useEffect(() => {\n    if (!apiClient && oAiKey) {\n      setApiClient(new OpenAIService(oAiKey))\n    }\n  }, [oAiKey, apiClient])\n\n  // Initialize the mind map (once)\n  useEffect(() => {\n    if (!markdown || initialized) return\n\n    setError(null)\n    setIsLoading(true)\n\n    try {\n      const styledNodes = ogNodes.map(\n        (node: { type?: string; [key: string]: unknown }) => ({\n          ...node,\n          style: {\n            ...NODE_STYLES.common,\n            ...NODE_STYLES[\n              (node.type as keyof typeof NODE_STYLES) || 'default'\n            ],\n          },\n        })\n      )\n\n      const styledEdges = ogEdges.map((edge: Record<string, unknown>) => ({\n        ...edge,\n        animated: true,\n        markerEnd: { type: MarkerType.ArrowClosed },\n        style: { stroke: '#64748b' },\n      }))\n\n      const layouted = getLayoutedElements(styledNodes, styledEdges)\n      setNodes(layouted.nodes)\n      setEdges(layouted.edges)\n      setInitialized(true)\n      setIsLoading(false)\n\n      setTimeout(() => fitView({ padding: 0.2 }), 100)\n    } catch (err) {\n      setError('Failed to generate mind map')\n      console.error(err)\n      setIsLoading(false)\n    }\n  }, [markdown, initialized, fitView, setNodes, setEdges])\n\n  // Fix for the React Flow container size issue\n  const rfWrapper: React.CSSProperties = {\n    width: '100%',\n    height: 'calc(100vh - 200px)', // Adjust for header and padding\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  }\n\n  if (isLoading)\n    return (\n      <div className='flex h-full items-center justify-center'>\n        <Loader2 className='h-8 w-8 animate-spin text-blue-500' />\n        <span className='ml-3 text-gray-300'>Generating mind map...</span>\n      </div>\n    )\n\n  if (error)\n    return (\n      <div className='flex h-full items-center justify-center'>\n        <div className='text-center'>\n          <div className='mb-2 text-red-500'>Error: {error}</div>\n          <Button onClick={() => setInitialized(false)}>Retry</Button>\n        </div>\n      </div>\n    )\n\n  return (\n    <Card className='h-full w-full overflow-hidden'>\n      <div style={rfWrapper}>\n        <ReactFlow\n          nodes={nodes}\n          edges={edges}\n          onNodesChange={onNodesChange}\n          onEdgesChange={onEdgesChange}\n          onConnect={onConnect}\n          onNodeClick={onNodeClick}\n          proOptions={{ hideAttribution: true }}\n          style={reactFlowStyles}\n          minZoom={0.2}\n          maxZoom={1.5}\n          defaultViewport={{ x: 0, y: 0, zoom: 0.8 }}\n          fitView\n          fitViewOptions={{ padding: 0.2 }}\n          nodesDraggable={true}\n          elementsSelectable={true}\n          zoomOnScroll={true}\n          panOnScroll={true}\n          preventScrolling={false}\n          nodeOrigin={[0.5, 0.5]}\n        >\n          <Background color='#334155' gap={16} />\n          <Controls className='rounded-lg border border-gray-700 bg-gray-800 p-2 [&>button:hover]:bg-gray-600 [&>button]:border-0 [&>button]:bg-gray-700 [&>button]:text-white' />\n          <Panel\n            position='top-right'\n            className='flex space-x-1 rounded-md bg-gray-800 p-2 shadow'\n          >\n            <Button\n              size='sm'\n              variant='outline'\n              onClick={handleAddNode}\n              disabled={!selectedNode}\n            >\n              <Plus className='mr-1 h-4 w-4' />\n              Add\n            </Button>\n            <Button\n              size='sm'\n              variant='outline'\n              onClick={handleCopyNode}\n              disabled={!selectedNode}\n            >\n              <Copy className='mr-1 h-4 w-4' />\n              Copy\n            </Button>\n            <Button\n              size='sm'\n              variant='outline'\n              onClick={handleEditNode}\n              disabled={!selectedNode}\n            >\n              <Edit className='mr-1 h-4 w-4' />\n              Edit\n            </Button>\n            <Button\n              size='sm'\n              variant='destructive'\n              onClick={handleDeleteNode}\n              disabled={!selectedNode}\n            >\n              <Trash2 className='mr-1 h-4 w-4' />\n              Delete\n            </Button>\n          </Panel>\n        </ReactFlow>\n      </div>\n\n      <Dialog open={isEditDialogOpen} onOpenChange={setIsEditDialogOpen}>\n        <DialogContent>\n          <DialogHeader>\n            <DialogTitle>Edit Node</DialogTitle>\n          </DialogHeader>\n          <Input\n            value={editLabel}\n            onChange={e => setEditLabel(e.target.value)}\n            placeholder='Node text'\n          />\n          <DialogFooter>\n            <Button\n              variant='outline'\n              onClick={() => setIsEditDialogOpen(false)}\n            >\n              Cancel\n            </Button>\n            <Button onClick={handleSaveEdit}>Save</Button>\n          </DialogFooter>\n        </DialogContent>\n      </Dialog>\n    </Card>\n  )\n}\n\nconst MindMap: React.FC<MindMapInnerProps> = props => {\n  const rfWrapper: React.CSSProperties = {\n    width: '100%',\n    height: 'calc(100vh - 200px)', // Adjust for header and padding\n    position: 'relative',\n    display: 'flex',\n    justifyContent: 'center',\n    alignItems: 'center',\n  }\n\n  return (\n    <div className='flex h-full w-full items-center justify-center p-4'>\n      <div style={rfWrapper}>\n        <ReactFlowProvider>\n          <MindMapInner {...props} />\n        </ReactFlowProvider>\n      </div>\n    </div>\n  )\n}\n\nexport default MindMap\n","import { useState, useEffect } from 'react'\nimport MindMap from './MindMap'\nimport { useInteractionTracker } from '@/contexts/InteractionTrackerContext'\nimport { Maximize, Minimize, ArrowLeft, X, HelpCircle } from 'lucide-react'\n\ninterface EnhancedMindMapProps {\n  data: string\n  isFullscreen?: boolean\n  onToggleFullscreen?: () => void\n  onBack?: () => void\n}\n\nconst EnhancedMindMap = ({\n  data,\n  isFullscreen = false,\n  onToggleFullscreen,\n  onBack,\n}: EnhancedMindMapProps) => {\n  const [isFullScreen, setIsFullScreen] = useState(isFullscreen)\n  const [showHelp, setShowHelp] = useState(false)\n  const { trackContentView } = useInteractionTracker()\n\n  // Track mindmap interaction\n  useEffect(() => {\n    // interactionTracker.trackMindmapClick();\n    trackContentView('mindmap', {\n      contentId: 'mindmap',\n      contentType: 'mindmap',\n      knowledgeId: 'mindmap',\n      moduleId: 'mindmap',\n      type: 'mindmap_view',\n    })\n  }, [trackContentView])\n\n  // Update state when prop changes\n  useEffect(() => {\n    setIsFullScreen(isFullscreen)\n  }, [isFullscreen])\n\n  // Toggle fullscreen mode\n  const toggleFullScreen = () => {\n    if (onToggleFullscreen) {\n      onToggleFullscreen()\n    } else {\n      setIsFullScreen(!isFullScreen)\n    }\n  }\n\n  // Handle back button click\n  const handleBack = () => {\n    if (onBack) {\n      onBack()\n    } else {\n      setIsFullScreen(false)\n    }\n  }\n\n  // Toggle help overlay\n  const toggleHelp = () => {\n    setShowHelp(!showHelp)\n  }\n\n  return (\n    <div\n      className={`relative ${isFullScreen ? 'fixed inset-0 z-50 bg-gray-900' : 'h-full w-full'}`}\n      style={{ width: '100%', height: '100%' }}\n    >\n      {/* Header Bar */}\n      <div className='absolute left-0 right-0 top-0 z-50 flex items-center justify-between bg-gray-800 p-3'>\n        <div className='flex items-center gap-3'>\n          {isFullScreen && (\n            <button\n              onClick={handleBack}\n              className='flex items-center gap-1 text-gray-300 transition-colors hover:text-white'\n              aria-label='Back to course'\n            >\n              <ArrowLeft className='h-5 w-5' />\n              <span className='text-sm font-medium'>Back to Course</span>\n            </button>\n          )}\n        </div>\n\n        <div className='flex items-center gap-2'>\n          <button\n            onClick={toggleHelp}\n            className='text-gray-300 transition-colors hover:text-white'\n            aria-label='Help'\n          >\n            <HelpCircle className='h-5 w-5' />\n          </button>\n\n          <button\n            onClick={toggleFullScreen}\n            className='text-gray-300 transition-colors hover:text-white'\n            aria-label={isFullScreen ? 'Exit fullscreen' : 'Enter fullscreen'}\n          >\n            {isFullScreen ? (\n              <Minimize className='h-5 w-5' />\n            ) : (\n              <Maximize className='h-5 w-5' />\n            )}\n          </button>\n        </div>\n      </div>\n\n      {/* Mindmap Content - Ensure explicit sizing for React Flow */}\n      <div\n        className='h-full w-full pt-12'\n        style={{ width: '100%', height: 'calc(100% - 48px)' }}\n      >\n        <MindMap markdown={data} />\n      </div>\n\n      {/* Help Overlay */}\n      {showHelp && (\n        <div className='absolute inset-0 z-40 flex items-center justify-center bg-black bg-opacity-75'>\n          <div className='max-w-md rounded-lg border border-gray-700 bg-gray-800 p-6 text-white shadow-xl'>\n            <div className='mb-4 flex items-center justify-between'>\n              <h3 className='text-xl font-semibold'>Mindmap Help</h3>\n              <button\n                onClick={toggleHelp}\n                className='text-gray-400 transition-colors hover:text-white'\n              >\n                <X className='h-5 w-5' />\n              </button>\n            </div>\n            <div className='space-y-4'>\n              <p className='text-gray-300'>\n                The mindmap helps you visualize connections between concepts in\n                the course material.\n              </p>\n              <div>\n                <h4 className='mb-2 font-medium'>Tips:</h4>\n                <ul className='list-disc space-y-1 pl-5 text-gray-300'>\n                  <li>Click and drag to move around the mindmap</li>\n                  <li>Use the mouse wheel to zoom in and out</li>\n                  <li>Click on nodes to expand or collapse branches</li>\n                  <li>Double-click on a node to focus on it</li>\n                </ul>\n              </div>\n              <div>\n                <h4 className='mb-2 font-medium'>Keyboard Shortcuts:</h4>\n                <ul className='list-disc space-y-1 pl-5 text-gray-300'>\n                  <li>\n                    <span className='rounded bg-gray-700 px-1'>+</span> /{' '}\n                    <span className='rounded bg-gray-700 px-1'>-</span> to zoom\n                    in/out\n                  </li>\n                  <li>\n                    <span className='rounded bg-gray-700 px-1'>Space</span> +\n                    drag to pan\n                  </li>\n                  <li>\n                    <span className='rounded bg-gray-700 px-1'>Ctrl</span> +\n                    click to select multiple nodes\n                  </li>\n                </ul>\n              </div>\n            </div>\n            <button\n              onClick={toggleHelp}\n              className='mt-6 w-full rounded-md bg-indigo-600 px-4 py-2 font-medium text-white transition duration-200 ease-in-out hover:bg-indigo-700'\n            >\n              Got it\n            </button>\n          </div>\n        </div>\n      )}\n\n      {/* Welcome Overlay (shown when first entering fullscreen) */}\n      {isFullScreen && (\n        <div\n          id='mindmapMessageOverlay'\n          className='pointer-events-auto absolute inset-0 z-30 flex items-center justify-center bg-black bg-opacity-75'\n          onClick={e => e.currentTarget.remove()}\n        >\n          <div className='max-w-md rounded-lg border border-gray-700 bg-gray-800 p-8 text-center text-white shadow-xl'>\n            <h3 className='mb-4 text-2xl font-semibold'>\n              Welcome to Mindmap View\n            </h3>\n            <p className='mb-6 text-gray-300'>\n              Explore connections between concepts and ideas in this interactive\n              mindmap. Use the controls to navigate and zoom.\n            </p>\n            <p className='mb-4 text-sm text-gray-400'>\n              Click anywhere to dismiss this message\n            </p>\n            <div className='flex justify-center'>\n              <button\n                onClick={e => {\n                  e.stopPropagation()\n                  document.getElementById('mindmapMessageOverlay')?.remove()\n                  toggleHelp()\n                }}\n                className='rounded-md bg-indigo-600 px-6 py-2 font-medium text-white transition duration-200 ease-in-out hover:bg-indigo-700'\n              >\n                Show Help\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  )\n}\n\nexport default EnhancedMindMap\n","// promptsConfig.ts\nexport const promptsConfig = {\n  notes: (language: string) => `\nYou are a content expert at {{topic}}-{{subtopic}} skilled at distilling information to its core points in ${language}.\nExpanding upon the following content into detailed, informative notes with easily digestible explanations that highlight the main ideas, key takeaways, and any relevant context.\nGenerate content in Markdown format with proper usage of LaTeX syntax for mathematical expressions. Use $...$ for inline LaTeX and $$...$$ for block LaTeX. \nEnsure the text is well-structured, concise, and includes a mix of Markdown headings, lists, and explanatory text along with mathematical formulas.\nFocus on providing clear examples and explanations, combining text and mathematical formulas seamlessly. Keep the content engaging and visually intuitive.\nin ${language}\nContent:`,\n\n  summary: (language: string) => `\nYou are a content expert skilled at distilling information to its core points in ${language}. \nSummarize the following content into concise, easily digestible points that highlight the main ideas, key takeaways, and any relevant context.\nStructure the summary in ${language} with headers for each major topic, followed by brief, insightful bullet points or short paragraphs.\nFormat the output in Markdown and include any contextual insights that add depth to the summary in ${language}.\n\nContent:`,\n\n  mindMap: `You are a mind map generator specialized in creating educational content structures.\n\nTask: Generate a comprehensive mind map structure as a JSON object with nodes and edges arrays.\n\nRequirements:\n1. Main topic should be type \"input\" with id \"1\"\n2. Leaf nodes should be type \"output\"\n3. Intermediate nodes should be type \"default\"\n4. Create at least 4 levels of hierarchy\n5. Ensure connections are logical and flow from general to specific\n6. Include key concepts, relationships, and important details\n7. Make the structure easily understandable for students\n8. Generate only valid JSON with no markdown formatting\n\nThe response must strictly follow this JSON structure:\n{\n  \"nodes\": [\n    { \"id\": \"string\", \"type\": \"input|default|output\", \"data\": { \"label\": \"string\" } }\n  ],\n  \"edges\": [\n    { \"id\": \"string\", \"source\": \"string\", \"target\": \"string\" }\n  ]\n}`,\n\n  structuredQuestions: (count: number, language: string) => `\nGenerate ${count} multiple-choice questions based on the following content in ${language} in this format:\n[{\"question\":\"something\", \"options\": [], \"answer\":\"answer\"}]:`,\n\n  threeDPrompts: `\n10 image prompts for 3d model generation\n`,\n}\n\n// imageGeneration.ts\n// Just a placeholder for DALL-E or image generation logic.\n// Adjust as needed.\nexport async function generateImages(\n  openaiApiKey: string,\n  multipleImagePoints: string[]\n): Promise<string[]> {\n  const imagePromises = multipleImagePoints.map(async point => {\n    const imageResponse = await fetch(\n      'https://api.openai.com/v1/images/generations',\n      {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/json',\n          Authorization: `Bearer ${openaiApiKey}`,\n        },\n        body: JSON.stringify({\n          model: 'dall-e-3',\n          prompt: `Create a description for: ${point}`,\n          n: 1,\n          size: '1024x1024',\n          quality: 'standard',\n        }),\n      }\n    )\n    const imageData = await imageResponse.json()\n    return imageData.data[0].url\n  })\n\n  return Promise.all(imagePromises)\n}\n\n// Example usage:\n// const openaiClient = new OpenAIClient(openaiApiKey);\n// (async () => {\n//     const notes = await generateNotes(openaiClient, \"Your input text here...\", \"English\");\n//     console.log(notes.join(\"\\n\\n\"));\n// })();\n","// utils.ts\nexport function extractSubheadings(markdown: string, level = 2): string[] {\n  const regex = new RegExp(`^#{${level}}\\\\s+(.*)`, 'gm')\n  const subheadings = []\n  let match\n  while ((match = regex.exec(markdown)) !== null) {\n    if (match[1]) {\n      subheadings.push(match[1].trim())\n    }\n  }\n\n  if (subheadings.length === 0 && level < 5) {\n    return extractSubheadings(markdown, level + 1)\n  }\n\n  return subheadings\n}\n\nexport function windowedChunk<T>(array: T[], size: number, overlap = 0): T[][] {\n  if (size <= overlap) {\n    throw new Error('Size must be greater than overlap.')\n  }\n\n  const chunks: T[][] = []\n  for (let i = 0; i < array.length; i += size - overlap) {\n    chunks.push(array.slice(i, i + size))\n  }\n  return chunks\n}\n\nexport function stripMarkdown(text: string): string {\n  return text\n    .replace(/([*_~`]|#+\\s*|>|\\[|\\]\\(.*?\\)|!\\[.*?\\]\\(.*?\\))/g, '')\n    .replace(/\\n+/g, ' ')\n    .trim()\n}\n","// openaiFunctions.ts\nimport { promptsConfig } from './promptsConfig'\nimport { extractSubheadings, windowedChunk } from './utils'\nimport { OpenAIClient } from './openAi'\n\ninterface GenerateQuestionsOutput {\n  question: string\n  options: string[]\n  answer: string\n}\n// ... existing code ...\n\ninterface MindMapNode {\n  id: string\n  type?: 'input' | 'default' | 'output'\n  data: { label: string }\n}\n\ninterface MindMapEdge {\n  id: string\n  source: string\n  target: string\n}\n\ninterface MindMapStructure {\n  nodes: MindMapNode[]\n  edges: MindMapEdge[]\n}\n\nexport async function generateMindMapStructure(\n  openaiClient: OpenAIClient,\n  text: string\n): Promise<MindMapStructure> {\n  if (!text || text.length < 10) {\n    return { nodes: [], edges: [] }\n  }\n\n  const jsonSchema = {\n    name: 'mindmap_schema',\n    strict: true,\n    schema: {\n      type: 'object',\n      properties: {\n        nodes: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              id: { type: 'string' },\n              type: { type: 'string', enum: ['input', 'default', 'output'] },\n              data: {\n                type: 'object',\n                properties: {\n                  label: { type: 'string' },\n                },\n                additionalProperties: false,\n                required: ['label'],\n              },\n            },\n            required: ['id', 'type', 'data'],\n            additionalProperties: false,\n          },\n        },\n        edges: {\n          type: 'array',\n          items: {\n            type: 'object',\n            properties: {\n              id: { type: 'string' },\n              source: { type: 'string' },\n              target: { type: 'string' },\n            },\n            additionalProperties: false,\n            required: ['id', 'source', 'target'],\n          },\n        },\n      },\n      required: ['nodes', 'edges'],\n      additionalProperties: false,\n    },\n  }\n\n  try {\n    const result = await openaiClient.chatCompletion(\n      [\n        {\n          role: 'system',\n          content: promptsConfig.mindMap,\n        },\n        {\n          role: 'user',\n          content: text,\n        },\n      ],\n      'gpt-4o-2024-08-06',\n      800\n    )\n\n    return JSON.parse(result)\n  } catch (error) {\n    console.error('Error generating mind map structure:', error)\n    return {\n      nodes: [\n        {\n          id: '1',\n          type: 'input',\n          data: { label: 'Error generating mind map' },\n        },\n      ],\n      edges: [],\n    }\n  }\n}\n\nexport async function generateChunkedContent(\n  openaiClient: OpenAIClient,\n  text: string,\n  prompt: string,\n  tokenSize: number = 20\n): Promise<string[]> {\n  if (!text || text.length < 10) return []\n\n  // Heuristic to decide chunking strategy\n  const subheadings = extractSubheadings(text, 2).filter(\n    h => h !== 'Introduction'\n  )\n  const forcedChunks = windowedChunk(text.split('. '), 10, 2)\n  const chunks =\n    subheadings.length < 3 ? forcedChunks : subheadings.map(h => [h])\n\n  const results: string[] = []\n  for (const chunk of chunks) {\n    const chunkText = Array.isArray(chunk) ? chunk.join(' ') : chunk\n    try {\n      const result = await openaiClient.chatCompletion(\n        [\n          { role: 'system', content: prompt },\n          { role: 'user', content: chunkText },\n        ],\n        'gpt-4o-mini',\n        tokenSize\n      )\n      results.push(result)\n    } catch (error) {\n      console.error('Error generating notes for chunk:', error)\n    }\n  }\n\n  return results\n}\n\nexport async function generateNotes(\n  openaiClient: OpenAIClient,\n  text: string,\n  language: string\n): Promise<string[]> {\n  console.log('stepping donw')\n  const prompt = promptsConfig.notes(language)\n  return await generateChunkedContent(openaiClient, text, prompt, 500)\n}\n\nexport async function generateSummary(\n  openaiClient: OpenAIClient,\n  text: string,\n  language: string\n): Promise<string[]> {\n  const prompt = promptsConfig.summary(language)\n  return generateChunkedContent(openaiClient, text, prompt, 500)\n}\n\nexport async function generateMindMap(\n  openaiClient: OpenAIClient,\n  text: string\n): Promise<string[]> {\n  const prompt = promptsConfig.mindMap\n  return generateChunkedContent(openaiClient, text, prompt, 200)\n}\n\nexport async function generate3DPrompts(\n  openaiClient: OpenAIClient,\n  text: string\n): Promise<string> {\n  if (!text || text.length < 10) return ''\n  const prompt = promptsConfig.threeDPrompts\n  const result = await openaiClient.chatCompletion(\n    [\n      { role: 'system', content: prompt },\n      { role: 'user', content: text },\n    ],\n    'gpt-4o-mini',\n    20\n  )\n  return result\n}\n\nexport async function generateQuestions(\n  openaiClient: OpenAIClient,\n  text: string,\n  language: string,\n  questionsCount: number = 10\n): Promise<GenerateQuestionsOutput[]> {\n  if (!text || text.length < 10) return []\n\n  const maxQuestionsPerChunk = 10\n  const maxRetries = 3\n\n  const subheadings = extractSubheadings(text, 2).filter(\n    a => a != 'Introduction'\n  )\n  const forced = windowedChunk(text.split('.'), 20, 2)\n  const chunks = subheadings.length > 0 ? subheadings.map(h => [h]) : forced\n\n  const accumulatedQuestions: GenerateQuestionsOutput[] = []\n\n  // Helper for retries\n  async function fetchWithRetry(\n    chunk: string[],\n    retries = maxRetries\n  ): Promise<GenerateQuestionsOutput[]> {\n    const prompt = promptsConfig.structuredQuestions(\n      maxQuestionsPerChunk,\n      language\n    )\n    const jsonSchema = {\n      name: 'question_answer_schema',\n      strict: true,\n      schema: {\n        type: 'object',\n        properties: {\n          questions: {\n            type: 'array',\n            items: {\n              type: 'object',\n              properties: {\n                question: { type: 'string' },\n                options: {\n                  type: 'array',\n                  items: { type: 'string' },\n                },\n                answer: { type: 'string' },\n              },\n              required: ['question', 'options', 'answer'],\n              additionalProperties: false,\n            },\n          },\n        },\n        required: ['questions'],\n        additionalProperties: false,\n      },\n    }\n\n    try {\n      const result = await openaiClient.chatCompletion(\n        [\n          { role: 'system', content: prompt },\n          { role: 'user', content: chunk.join(' ') },\n        ],\n        'gpt-4o-2024-08-06',\n        4096\n      )\n\n      const parsed = JSON.parse(result)\n      return parsed.questions\n    } catch (error) {\n      if (retries > 0) {\n        console.warn(`Retrying... attempts left: ${retries}`)\n        return fetchWithRetry(chunk, retries - 1)\n      } else {\n        console.error(\n          'Failed to fetch questions after multiple attempts:',\n          error\n        )\n        return []\n      }\n    }\n  }\n\n  for (const chunk of chunks) {\n    const questions = await fetchWithRetry(chunk)\n    accumulatedQuestions.push(...questions)\n\n    if (accumulatedQuestions.length >= questionsCount) {\n      break\n    }\n  }\n\n  return accumulatedQuestions.slice(0, questionsCount)\n}\n\n// --- Roleplay Functions Start ---\n\n// Comment out or remove old roleplay functions\n/*\nexport async function generateRoleplayQuestion(\n    openaiClient: OpenAIClient,\n    studentPersonality: string,\n    teacherResponse: string,\n    responseType: 'summary' | 'response'\n): Promise<string> { ... }\n\ninterface EvaluationResponse { ... }\n\nexport async function evaluateTeacherResponse(\n    openaiClient: OpenAIClient,\n    response: string,\n    responseType: 'summary' | 'response',\n    context: string | null,\n    criteria: string[]\n): Promise<EvaluationResponse> { ... }\n*/\n\n// NEW: Function for AI to generate Teacher response\nexport async function generateTeacherResponse(\n  openaiClient: OpenAIClient,\n  studentResponse: string,\n  teacherPersona: string,\n  scenarioContext: string,\n  language: string\n): Promise<string> {\n  // Refined prompt structure using message history\n\n  try {\n    const result = await openaiClient.chatCompletion(\n      [\n        {\n          role: 'system',\n          content: `You are roleplaying as a teacher with the persona: ${teacherPersona}. You must strictly adhere to this persona. The scenario context is: ${scenarioContext}. Respond directly to the student in character, using the scenario context. **IMPORTANT: Respond ONLY in the following language: ${language}**`,\n        },\n        {\n          role: 'user',\n          content: `Scenario Reminder: \"${scenarioContext}\"\nStudent Input: \"${studentResponse}\"\n\nBased on the scenario and my input, what is your response as the teacher (${teacherPersona})? **Remember to respond ONLY in ${language}.**`,\n        },\n      ],\n      'gpt-4o-mini',\n      -1\n    )\n    return result\n  } catch (error) {\n    console.error('Error generating teacher response:', error)\n    // Provide a generic fallback, ideally this would also be localized\n    return language === 'es'\n      ? 'Ese es un punto interesante. Â¿Puedes dar mÃ¡s detalles?'\n      : \"That's an interesting point. Can you elaborate further?\"\n  }\n}\n\n// --- Roleplay Functions End ---\n\n// Existing metaMap might be here or at the end of the file\n// Assuming it's at the end based on common patterns\n\n// ... potentially other existing functions ...\n\n// Update or add the metaMap export\nexport const metaMap = {\n  notes: generateNotes,\n  summary: generateSummary,\n  quiz: generateQuestions,\n  mindmapStructure: generateMindMapStructure,\n  // Add new teacher response function\n  teacherResponse: generateTeacherResponse,\n  // Remove or comment out old roleplay functions\n  // roleplayQuestion: generateRoleplayQuestion,\n  // evaluateResponse: evaluateTeacherResponse\n  // Add other existing mappings if they were present\n  // e.g., mindmap: generateMindMap, threeDPrompts: generate3DPrompts\n}\n\n// Ensure all previously exported functions remain exported\n// ... potentially export other functions if they were defined after generateQuestions ...\n\n// Final check: Ensure all imports and interfaces are correctly placed/defined.\n","import { OpenAIClient } from './openAi'\nimport { generateTeacherResponse } from './openAiFns'\n\nexport class RoleplayService {\n  private openaiClient: OpenAIClient\n\n  constructor(openaiClient: OpenAIClient) {\n    this.openaiClient = openaiClient\n  }\n\n  /**\n   * Generates the AI teacher's response based on the student's input.\n   *\n   * @param studentResponse - The latest response provided by the student (user).\n   * @param teacherPersona - Identifier for the AI teacher's persona.\n   * @param scenarioContext - The context of the current roleplay scenario.\n   * @param language - The language code for the response (e.g., 'en', 'es').\n   * @returns A promise that resolves to the generated teacher response string.\n   */\n  async getTeacherResponse(\n    studentResponse: string,\n    teacherPersona: string,\n    scenarioContext: string,\n    language: string\n  ): Promise<string> {\n    console.log(\n      `Generating teacher response for persona: ${teacherPersona} in language: ${language}`\n    )\n    try {\n      const teacherResponse = await generateTeacherResponse(\n        this.openaiClient,\n        studentResponse,\n        teacherPersona,\n        scenarioContext,\n        language\n      )\n      return teacherResponse\n    } catch (error) {\n      console.error('RoleplayService: Error getting teacher response:', error)\n      // Reuse the fallback logic from openAiFns, including basic localization\n      return language === 'es'\n        ? 'Ese es un punto interesante. Â¿Puedes dar mÃ¡s detalles?'\n        : \"That's an interesting point. Can you elaborate further?\"\n    }\n  }\n\n  // Future methods for evaluation etc. can be added here\n}\n","import React from 'react'\n\ninterface BlackboardDisplayProps {\n  title?: string\n  // context?: string; // Decided to primarily show the question\n  currentQuestion?: string\n  // Adding scenario context to provide background\n  scenarioContext?: string\n}\n\nconst BlackboardDisplay: React.FC<BlackboardDisplayProps> = ({\n  title,\n  currentQuestion,\n  scenarioContext,\n}) => {\n  return (\n    <div className='relative mb-6 min-h-[150px] rounded-lg border border-gray-700 bg-black p-6 shadow-inner shadow-black/30 sm:min-h-[200px] sm:p-8'>\n      {/* TODO: Add chalk-like font (e.g., 'Permanent Marker') via global CSS or font utility */}\n      <div className='whitespace-pre-line font-sans text-base leading-relaxed text-gray-200 sm:text-lg'>\n        {title && (\n          <h3 className='mb-3 text-lg font-semibold text-indigo-400 sm:text-xl'>\n            {title}\n          </h3>\n        )}\n\n        {/* Show context initially or if no question yet */}\n        {scenarioContext &&\n          (!currentQuestion ||\n            currentQuestion === 'Initial Summary Prompt') && (\n            <p className='mb-4 text-sm italic text-gray-400'>\n              {scenarioContext}\n            </p>\n          )}\n\n        {currentQuestion && currentQuestion !== 'Initial Summary Prompt' && (\n          <>\n            {/* Make label bold and add margin */}\n            <p className='mb-2 font-semibold text-indigo-300'>Teacher Asks:</p>\n            <p>{currentQuestion}</p>\n          </>\n        )}\n\n        {/* Fallback if nothing to display */}\n        {!currentQuestion && !title && !scenarioContext && (\n          <p className='italic text-gray-500'>Blackboard is empty...</p>\n        )}\n      </div>\n    </div>\n  )\n}\n\nexport default BlackboardDisplay\n","import React from 'react'\nimport { User, Target, Brain, Zap, Trophy, Clock, Star } from 'lucide-react'\n\n// Assuming the Role interface is defined elsewhere and imported\n// or defined inline if needed specifically here.\ninterface Role {\n  name: string\n  description: string\n  icon: string\n  practiceFeatures?: string[]\n  benefits?: string[]\n}\n\ninterface StudentCardProps {\n  role: Role\n  onClick: (roleName: string) => void\n  showPracticeFeatures?: boolean\n}\n\nconst StudentCard: React.FC<StudentCardProps> = ({ role, onClick, showPracticeFeatures = false }) => {\n  const practiceIcons = {\n    'Adaptive Quiz': Brain,\n    'Smart Flashcards': Star,\n    'Speed Training': Zap,\n    'Challenge Arena': Trophy,\n    'Progress Tracking': Target,\n    'Personalized Learning': Brain\n  }\n\n  const renderIcon = () => {\n    const isEmoji = /\\p{Emoji}/u.test(role.icon)\n\n    if (isEmoji) {\n      return (\n        <span className='text-2xl' role='img' aria-label={`${role.name} icon`}>\n          {role.icon}\n        </span>\n      )\n    } else {\n      return <User className='h-6 w-6 text-indigo-300' />\n    }\n  }\n\n  const getPracticeIcon = (feature: string) => {\n    const IconComponent = practiceIcons[feature as keyof typeof practiceIcons] || Target\n    return <IconComponent className=\"h-3 w-3\" />\n  }\n\n  return (\n    <button\n      onClick={() => onClick(role.name)}\n      className='flex h-full w-full flex-col justify-between rounded-lg border border-gray-600 bg-gray-700 p-4 text-left transition-colors hover:border-indigo-500 hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-indigo-500'\n    >\n      <div>\n        <div className='mb-3 flex items-center gap-3'>\n          <div className='flex items-center justify-center rounded-full bg-gray-800 p-2'>\n            {renderIcon()}\n          </div>\n          <h5 className='text-lg font-semibold text-white'>{role.name}</h5>\n        </div>\n        <p className='line-clamp-3 text-sm text-gray-300 mb-3'>{role.description}</p>\n\n        {/* Practice Features */}\n        {showPracticeFeatures && role.practiceFeatures && role.practiceFeatures.length > 0 && (\n          <div className=\"mb-3\">\n            <h6 className=\"text-xs font-medium text-indigo-400 mb-2\">ðŸŽ¯ Practice Features:</h6>\n            <div className=\"space-y-1\">\n              {role.practiceFeatures.slice(0, 3).map((feature, index) => (\n                <div key={index} className=\"flex items-center space-x-2 text-xs text-gray-400\">\n                  {getPracticeIcon(feature)}\n                  <span>{feature}</span>\n                </div>\n              ))}\n              {role.practiceFeatures.length > 3 && (\n                <div className=\"text-xs text-gray-500\">\n                  +{role.practiceFeatures.length - 3} more features\n                </div>\n              )}\n            </div>\n          </div>\n        )}\n\n        {/* Benefits */}\n        {role.benefits && role.benefits.length > 0 && (\n          <div className=\"mb-3\">\n            <h6 className=\"text-xs font-medium text-green-400 mb-2\">âœ¨ Benefits:</h6>\n            <div className=\"space-y-1\">\n              {role.benefits.slice(0, 2).map((benefit, index) => (\n                <div key={index} className=\"flex items-center space-x-2 text-xs text-gray-400\">\n                  <div className=\"w-1 h-1 rounded-full bg-green-400\" />\n                  <span>{benefit}</span>\n                </div>\n              ))}\n            </div>\n          </div>\n        )}\n      </div>\n      \n      <div className=\"text-xs text-indigo-400 mt-3 self-end flex items-center\">\n        <Target className=\"h-3 w-3 mr-1\" />\n        Select Role\n      </div>\n    </button>\n  )\n}\n\nexport default StudentCard\n","import React, { useState, useEffect, useMemo, useRef } from 'react'\nimport {\n  MessageSquare,\n  RefreshCw,\n  Users,\n  User,\n  ChevronLeft,\n  ChevronRight,\n  Send,\n  Mic,\n  MicOff,\n  Volume2,\n  VolumeX,\n} from 'lucide-react'\nimport { OpenAIService } from '@/services/openAi'\nimport { RoleplayService } from '@/services/RoleplayService'\nimport { EvaluationService } from '@/services/EvaluationService'\nimport { analyticsService } from '@/services/analytics-service'\nimport { voiceService } from '@/services/voice-service'\nimport BlackboardDisplay from '@/components/BlackboardDisplay'\nimport StudentCard from '@/components/StudentCard'\n\ninterface TeacherPersona {\n  name: string\n  description: string\n  icon: string\n}\n\ninterface RoleplayScenario {\n  title: string\n  context: string\n  roles: TeacherPersona[]\n  maxSteps?: number\n}\n\ninterface RoleplayComponentProps {\n  scenarios: RoleplayScenario[]\n  onRegenerate?: () => void\n  isGenerating?: boolean\n  openaiApiKey: string\n  userId: string\n  language: string\n}\n\ninterface RoleplayState {\n  studentInput: string\n  responses: { type: 'student' | 'teacher'; content: string }[]\n  currentStep: number\n  isLoading: boolean\n  sessionId: string | null\n  isListening: boolean\n  isSpeaking: boolean\n}\n\nconst MAX_ROLEPLAY_STEPS = 5\n\nconst RoleplayComponent: React.FC<RoleplayComponentProps> = ({\n  scenarios,\n  onRegenerate,\n  isGenerating = false,\n  openaiApiKey,\n  userId,\n  language,\n}) => {\n  console.log(\n    'RoleplayComponent received scenarios:',\n    scenarios,\n    'Language:',\n    language\n  )\n\n  const [activeScenarioIndex, setActiveScenarioIndex] = useState(0)\n  const [activeTeacherPersona, setActiveTeacherPersona] = useState<\n    string | null\n  >(null)\n  const [isViewingScenarios, setIsViewingScenarios] = useState(true)\n  const chatEndRef = useRef<HTMLDivElement>(null)\n\n  const getInitialRoleplayState = (): RoleplayState => ({\n    studentInput: '',\n    responses: [],\n    currentStep: 0,\n    isLoading: false,\n    sessionId: null,\n    isListening: false,\n    isSpeaking: false,\n  })\n\n  const [roleplayState, setRoleplayState] = useState<RoleplayState>(\n    getInitialRoleplayState()\n  )\n\n  const openaiClient = useMemo(\n    () => new OpenAIService(openaiApiKey),\n    [openaiApiKey]\n  )\n  const roleplayService = useMemo(\n    () => new RoleplayService(openaiClient),\n    [openaiClient]\n  )\n\n  const activeScenario = scenarios[activeScenarioIndex]\n  const maxSteps = activeScenario?.maxSteps ?? MAX_ROLEPLAY_STEPS\n\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' })\n  }, [roleplayState.responses])\n\n  useEffect(() => {\n    console.log('Resetting Roleplay state due to prop change...')\n    setRoleplayState(getInitialRoleplayState())\n    setActiveTeacherPersona(null)\n    setIsViewingScenarios(true)\n  }, [openaiApiKey, activeScenarioIndex, language, scenarios])\n\n  const nextScenario = () => {\n    if (activeScenarioIndex < scenarios.length - 1) {\n      setActiveScenarioIndex(activeScenarioIndex + 1)\n    }\n  }\n\n  const prevScenario = () => {\n    if (activeScenarioIndex > 0) {\n      setActiveScenarioIndex(activeScenarioIndex - 1)\n    }\n  }\n\n  const selectTeacherPersona = async (personaName: string) => {\n    setRoleplayState(getInitialRoleplayState())\n    setActiveTeacherPersona(personaName)\n    setIsViewingScenarios(false)\n\n    const selectedPersona = activeScenario?.roles.find(\n      p => p.name === personaName\n    )\n    if (selectedPersona) {\n      setRoleplayState(prevState => ({\n        ...prevState,\n        responses: [\n          {\n            type: 'teacher',\n            content: `Hello! I am ${selectedPersona.name}. ${selectedPersona.description} How can I help you with the scenario: '${activeScenario?.title}'?`,\n          },\n        ],\n      }))\n    }\n\n    if (userId && activeScenario) {\n      try {\n        const session = await analyticsService.startUserSession(userId)\n        if (session && session.id) {\n          setRoleplayState(prevState => ({\n            ...prevState,\n            sessionId: session.id,\n          }))\n          console.log('Analytics session started:', session.id)\n\n          await analyticsService.trackEvent({\n            event_type: 'roleplay_start',\n            content_id: activeScenario.title,\n            userId,\n            eventType: 'roleplay_start',\n            contentId: activeScenario.title,\n            timestamp: Date.now(),\n            sessionId: session.id,\n            scenarioTitle: activeScenario.title,\n            selectedTeacherPersona: personaName,\n            interactionType: 'scenario_selection',\n          })\n        } else {\n          console.warn('Failed to start analytics session or retrieve ID.')\n        }\n      } catch (error) {\n        console.error('Error starting analytics session:', error)\n      }\n    }\n  }\n\n  const backToScenarios = async () => {\n    if (roleplayState.sessionId) {\n      console.log(\n        'Ending analytics session due to backing out:',\n        roleplayState.sessionId\n      )\n      await analyticsService.endUserSession(roleplayState.sessionId)\n    }\n    setIsViewingScenarios(true)\n    setActiveTeacherPersona(null)\n    setRoleplayState(getInitialRoleplayState())\n  }\n\n  const getSelectedTeacherPersona = (): TeacherPersona | null => {\n    if (!activeScenario || !activeTeacherPersona) return null\n    const scenarioFromProp = scenarios[activeScenarioIndex]\n    if (!scenarioFromProp || !Array.isArray(scenarioFromProp.roles)) return null\n    return (\n      scenarioFromProp.roles.find(p => p.name === activeTeacherPersona) || null\n    )\n  }\n\n  const handleInputChange = (event: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setRoleplayState(prevState => ({\n      ...prevState,\n      studentInput: event.target.value,\n    }))\n  }\n\n  const isValidInput = (input: string): boolean => {\n    return input.trim().length > 0\n  }\n\n  const handleStudentSubmit = async () => {\n    const selectedPersona = getSelectedTeacherPersona()\n    if (\n      !isValidInput(roleplayState.studentInput) ||\n      roleplayState.isLoading ||\n      !selectedPersona ||\n      !activeScenario ||\n      !language\n    ) {\n      console.warn(\n        'Submission blocked: Invalid input, loading, no persona, no session, no scenario, or no language.'\n      )\n      return\n    }\n\n    const currentInput = roleplayState.studentInput\n    const step = roleplayState.currentStep\n    const currentSessionId = roleplayState.sessionId\n\n    setRoleplayState(prevState => ({\n      ...prevState,\n      isLoading: true,\n      studentInput: '',\n      responses: [\n        ...prevState.responses,\n        { type: 'student', content: currentInput },\n      ],\n    }))\n\n    try {\n      const teacherResponse = await roleplayService.getTeacherResponse(\n        currentInput,\n        selectedPersona.name,\n        activeScenario.context,\n        language\n      )\n\n      const nextStep = step + 1\n      const isComplete = nextStep >= maxSteps\n\n      await analyticsService.trackEvent({\n        event_type: 'roleplay_student_response',\n        content_id: activeScenario.title,\n        userId,\n        eventType: 'roleplay_student_response',\n        contentId: activeScenario.title,\n        timestamp: Date.now(),\n        sessionId: currentSessionId || '',\n        step: nextStep,\n        teacherPersona: selectedPersona.name,\n        studentResponse: currentInput,\n        teacherResponse: teacherResponse,\n        language: language,\n        interactionType: 'student_response',\n      })\n\n      if (isComplete) {\n        console.log('Roleplay Complete.')\n        await analyticsService.trackEvent({\n          event_type: 'roleplay_complete',\n          content_id: activeScenario.title,\n          userId,\n          eventType: 'roleplay_complete',\n          contentId: activeScenario.title,\n          timestamp: Date.now(),\n          sessionId: currentSessionId || '',\n          totalSteps: nextStep,\n          language: language,\n          interactionType: 'completion',\n        })\n\n        console.log('Ending analytics session on completion:', currentSessionId)\n        if (currentSessionId) {\n          await analyticsService.endUserSession(currentSessionId)\n        }\n      }\n\n      setRoleplayState(prevState => ({\n        ...prevState,\n        responses: [\n          ...prevState.responses,\n          { type: 'teacher', content: teacherResponse },\n        ],\n        currentStep: nextStep,\n        isLoading: false,\n        sessionId: isComplete ? null : prevState.sessionId,\n      }))\n    } catch (error) {\n      console.error(\n        'Error during student submission/teacher response flow:',\n        error\n      )\n      if (currentSessionId) {\n        console.warn('Ending analytics session due to error:', currentSessionId)\n        await analyticsService.endUserSession(currentSessionId)\n      }\n      setRoleplayState(prevState => ({\n        ...prevState,\n        sessionId: null,\n        isLoading: false,\n        responses: [\n          ...prevState.responses,\n          {\n            type: 'teacher',\n            content:\n              'Sorry, I encountered an error generating my response. Please try again.',\n          },\n        ],\n      }))\n    }\n  }\n\n  const renderScenarioView = () => {\n    if (!scenarios || scenarios.length === 0) {\n      console.warn('Render blocked: scenarios prop is empty or undefined.')\n      return (\n        <div className='p-4 text-center text-gray-400'>\n          No scenarios available.\n        </div>\n      )\n    }\n\n    if (activeScenarioIndex < 0 || activeScenarioIndex >= scenarios.length) {\n      console.error(\n        `Render blocked: Invalid activeScenarioIndex (${activeScenarioIndex}) for scenarios length (${scenarios.length}).`\n      )\n      return (\n        <div className='p-4 text-center text-gray-400'>\n          Error loading scenario index.\n        </div>\n      )\n    }\n\n    const currentScenario = scenarios[activeScenarioIndex]\n\n    if (!currentScenario || !Array.isArray(currentScenario.roles)) {\n      console.warn(\n        `Render blocked: Scenario data or roles array missing for index ${activeScenarioIndex}. Scenario data:`,\n        currentScenario\n      )\n      return (\n        <div className='p-4 text-center text-gray-400'>\n          Loading scenario details...\n        </div>\n      )\n    }\n\n    if (currentScenario.roles.length === 0) {\n      console.warn(\n        `Render blocked: Scenario roles array is empty for index ${activeScenarioIndex}.`\n      )\n      return (\n        <div className='p-4 text-center text-gray-400'>\n          No teacher personas defined for this scenario.\n        </div>\n      )\n    }\n\n    return (\n      <div className='flex h-full flex-col'>\n        <div className='flex items-center justify-between border-b border-gray-700 bg-gray-800 p-4'>\n          <h2 className='text-xl font-semibold text-white'>\n            Roleplay Scenarios\n          </h2>\n          <div className='flex items-center gap-2'>\n            <button\n              onClick={prevScenario}\n              disabled={activeScenarioIndex === 0}\n              className='rounded-full p-1 text-gray-400 hover:bg-gray-700 hover:text-white disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Previous scenario'\n            >\n              <ChevronLeft className='h-5 w-5' />\n            </button>\n            <span className='text-sm text-gray-400'>\n              {activeScenarioIndex + 1} of {scenarios.length}\n            </span>\n            <button\n              onClick={nextScenario}\n              disabled={activeScenarioIndex === scenarios.length - 1}\n              className='rounded-full p-1 text-gray-400 hover:bg-gray-700 hover:text-white disabled:cursor-not-allowed disabled:opacity-50'\n              aria-label='Next scenario'\n            >\n              <ChevronRight className='h-5 w-5' />\n            </button>\n          </div>\n        </div>\n\n        <div className='flex-grow overflow-auto p-4'>\n          <div className='mb-6'>\n            <h3 className='mb-2 text-xl font-semibold text-indigo-400'>\n              {currentScenario.title}\n            </h3>\n            <p className='mb-4 text-gray-300'>{currentScenario.context}</p>\n\n            <div className='mt-6'>\n              <h4 className='mb-3 flex items-center gap-2 text-lg font-medium'>\n                <Users className='h-5 w-5 text-indigo-400' />\n                <span>Select AI Teacher Persona</span>\n              </h4>\n              <div className='grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-3'>\n                {currentScenario.roles.map(persona => (\n                  <StudentCard\n                    key={persona.name}\n                    role={persona}\n                    onClick={selectTeacherPersona}\n                  />\n                ))}\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {onRegenerate && (\n          <div className='border-t border-gray-700 bg-gray-800 p-4'>\n            <button\n              onClick={onRegenerate}\n              disabled={isGenerating}\n              className='flex w-full items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white transition-colors hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50'\n            >\n              {isGenerating ? (\n                <>\n                  <RefreshCw className='h-4 w-4 animate-spin' />\n                  <span>Generating New Scenarios...</span>\n                </>\n              ) : (\n                <>\n                  <RefreshCw className='h-4 w-4' />\n                  <span>Generate New Scenarios</span>\n                </>\n              )}\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  const renderTeacherIcon = (icon: string) => {\n    const isEmoji = /\\p{Emoji}/u.test(icon)\n    if (isEmoji) {\n      return (\n        <span className='text-xl' role='img'>\n          {icon}\n        </span>\n      )\n    } else {\n      return <User className='h-5 w-5 text-indigo-300' />\n    }\n  }\n\n  const renderInteractionView = () => {\n    const selectedPersona = getSelectedTeacherPersona()\n    if (!selectedPersona || !activeScenario) return null\n\n    const currentTeacherMessage =\n      roleplayState.responses.length > 0\n        ? roleplayState.responses[roleplayState.responses.length - 1]?.type ===\n          'teacher'\n          ? roleplayState.responses[roleplayState.responses.length - 1]?.content\n          : 'Waiting for your input...'\n        : ''\n\n    const progressText =\n      roleplayState.currentStep >= maxSteps\n        ? 'Roleplay Complete'\n        : `Interaction: ${roleplayState.currentStep + 1} / ${maxSteps}`\n\n    const isComplete = roleplayState.currentStep >= maxSteps\n\n    return (\n      <div className='flex h-full flex-col bg-gray-900'>\n        <div className='flex items-center justify-between border-b border-gray-700 bg-gray-800 p-4'>\n          <div className='flex items-center gap-3'>\n            <button\n              onClick={backToScenarios}\n              className='rounded-full p-1 text-gray-400 hover:bg-gray-700 hover:text-white'\n              aria-label='Back to scenarios'\n            >\n              <ChevronLeft className='h-5 w-5' />\n            </button>\n            <div className='flex items-center gap-2'>\n              <div className='flex items-center justify-center rounded-full bg-gray-700 p-1.5'>\n                {renderTeacherIcon(selectedPersona.icon)}\n              </div>\n              <h2 className='text-lg font-semibold text-white'>\n                Teacher: {selectedPersona.name}\n              </h2>\n            </div>\n          </div>\n          <span className='text-sm font-medium text-indigo-400'>\n            {progressText}\n          </span>\n        </div>\n\n        <div className='flex-grow space-y-4 overflow-y-auto p-4'>\n          <BlackboardDisplay\n            title={`Scenario: ${activeScenario.title}`}\n            {...(currentTeacherMessage && {\n              currentQuestion: currentTeacherMessage,\n            })}\n          />\n\n          <div className='space-y-4'>\n            {roleplayState.responses.map((msg, index) => (\n              <div\n                key={index}\n                className={`flex items-end gap-2 ${msg.type === 'student' ? 'justify-end' : 'justify-start'}`}\n              >\n                {msg.type === 'teacher' && (\n                  <div className='mb-1 flex h-8 w-8 flex-shrink-0 items-center justify-center rounded-full bg-gray-700'>\n                    {renderTeacherIcon(selectedPersona.icon)}\n                  </div>\n                )}\n                <div\n                  className={`max-w-md rounded-lg p-3 sm:max-w-lg ${msg.type === 'student' ? 'bg-indigo-600 text-white' : 'bg-gray-700 text-gray-200'}`}\n                >\n                  {msg.content}\n                </div>\n              </div>\n            ))}\n            <div ref={chatEndRef} />\n          </div>\n\n          {roleplayState.isLoading && (\n            <div className='flex items-center justify-center py-2'>\n              <RefreshCw className='h-5 w-5 animate-spin text-indigo-400' />\n              <span className='ml-2 text-indigo-400'>\n                Teacher is thinking...\n              </span>\n            </div>\n          )}\n        </div>\n\n        {!isComplete && (\n          <div className='border-t border-gray-700 bg-gray-800 p-4'>\n            <div className='flex items-center gap-2'>\n              <textarea\n                rows={2}\n                value={roleplayState.studentInput}\n                onChange={handleInputChange}\n                placeholder='Your response or question...'\n                className='flex-grow resize-none rounded-md border border-gray-600 bg-gray-700 px-3 py-2 text-white focus:outline-none focus:ring-2 focus:ring-indigo-500 disabled:opacity-50'\n                disabled={roleplayState.isLoading}\n                onKeyDown={e => {\n                  if (e.key === 'Enter' && !e.shiftKey) {\n                    e.preventDefault()\n                    handleStudentSubmit()\n                  }\n                }}\n              />\n              <button\n                onClick={handleStudentSubmit}\n                disabled={\n                  !isValidInput(roleplayState.studentInput) ||\n                  roleplayState.isLoading\n                }\n                className='rounded-md bg-indigo-600 p-2 text-white transition-colors hover:bg-indigo-700 disabled:cursor-not-allowed disabled:opacity-50'\n                aria-label='Send response'\n              >\n                {roleplayState.isLoading ? (\n                  <RefreshCw className='h-5 w-5 animate-spin' />\n                ) : (\n                  <Send className='h-5 w-5' />\n                )}\n              </button>\n            </div>\n          </div>\n        )}\n        {isComplete && (\n          <div className='border-t border-gray-700 bg-gray-800 p-4 text-center text-gray-400'>\n            Roleplay finished.\n            <button\n              onClick={backToScenarios}\n              className='ml-4 text-indigo-400 hover:underline'\n            >\n              Select New Scenario\n            </button>\n          </div>\n        )}\n      </div>\n    )\n  }\n\n  return (\n    <div className='flex h-full flex-col overflow-hidden rounded-lg bg-gray-900 shadow-lg'>\n      {isViewingScenarios ? renderScenarioView() : renderInteractionView()}\n    </div>\n  )\n}\n\nexport default RoleplayComponent\n","// This file will export all interactive components from the interactive folder\n// As we implement each component, we'll add it to the exports\n\n// Core Components - Comment out until they're fully implemented\nexport { default as SlopeDrawing } from './slope/SlopeDrawing'\n\n// This will allow convenient imports like:\n// import { SlopeDrawing } from '@/components/interactive';\n\n// For now, just export the types and placeholder for structure setup\nexport const InteractiveComponentTypes = {\n  SLOPE_DRAWER: 'slope-drawer',\n  EQUATION_SOLVER: 'equation-solver',\n  GRAPH_PLOTTER: 'graph-plotter',\n}\n\n// Remove the placeholder export since we're using the real component now\n// export { default as SlopeDrawingPlaceholder } from './slope/SlopeDrawing';\n","'use client'\n\nimport React, { useState, useEffect, useRef, useCallback, useMemo } from 'react'\nimport Loader from '../ui/Loader'\nimport LearningReport from '../LearningReport' // Assuming path\nimport ModernVideoPlayer from '../video/ModernVideoPlayer' // Use modernized video player\nimport ModernMarkdownSlideshow from '../slideshow/ModernMarkdownSlideshow' // Use modernized slideshow\nimport Quiz from '../Quiz' // Assuming path\nimport EnhancedMindMap from '../EnhancedMindMap' // Assuming path\nimport RoleplayComponent from '../RoleplayComponent' // Import RoleplayComponent\nimport { Chapter, ChapterContent, QuizQuestion } from '@/types/api' // Removed RoleplayScenario\nimport { ChevronLeft } from 'lucide-react'\n// Removed Supabase import - now using local API services\nimport { useInteractionTracker } from '@/contexts/InteractionTrackerContext' // Import the hook\nimport { SlopeDrawing, InteractiveComponentTypes } from '../interactive' // Import interactive components\n\n// TODO: Define proper types for timelineMarkers and interactionTracker if needed here\n// import { InteractionTracker } from '@/contexts/InteractionTrackerContext';\n// import { VideoMarkerType } from '../video/VideoTypes';\n\n// Import the actual types used by RoleplayComponent if possible\n// Assuming TeacherPersona is defined like this within RoleplayComponent's scope or types\ninterface TeacherPersona {\n  name: string\n  description: string\n  icon: string // Expect icon here\n}\n\n// Define Scenario type locally, ensuring it includes icon\ninterface Scenario {\n  title: string\n  context: string\n  roles: Array<{\n    name: string\n    description: string\n    icon: string // Add icon here\n  }>\n}\n\n// Helper function to recursively parse JSON strings\nconst recursiveJSONParse = (data: any): any => {\n  if (typeof data !== 'string') {\n    return data\n  }\n  try {\n    const parsed = JSON.parse(data)\n    if (typeof parsed === 'string') {\n      return recursiveJSONParse(parsed)\n    }\n    return parsed\n  } catch (e) {\n    console.error('Failed to parse JSON string:', e)\n    return data\n  }\n}\n\n// Map the incoming data structure to our Scenario format, including icon\nconst mapToScenario = (rawScenario: any): Scenario | null => {\n  if (!rawScenario || typeof rawScenario !== 'object') {\n    return null\n  }\n  try {\n    return {\n      title: rawScenario.title || '',\n      context:\n        rawScenario.description ||\n        rawScenario.initialPrompt ||\n        rawScenario.context ||\n        '',\n      // Ensure roles/characters are mapped correctly and include an icon\n      roles: Array.isArray(rawScenario.characters)\n        ? rawScenario.characters.map((char: any) => ({\n            name: char.name || '',\n            description: char.description || '',\n            // Provide default icon if missing, e.g., emoji or placeholder\n            icon: char.icon || 'ðŸ§‘â€ðŸ«', // Default teacher emoji\n          }))\n        : Array.isArray(rawScenario.roles)\n          ? rawScenario.roles.map((role: any) => ({\n              name: role.name || '',\n              description: role.description || '',\n              icon: role.icon || 'ðŸ§‘â€ðŸ«', // Default icon for roles too\n            }))\n          : [],\n    }\n  } catch (error) {\n    console.error('Error mapping scenario:', error)\n    return null\n  }\n}\n\n// Placeholder validation/mapping function for quiz data\nconst ensureQuizDataFormat = (data: any): QuizQuestion[] => {\n  // TODO: Implement proper validation or mapping logic\n  if (Array.isArray(data)) {\n    // Basic check: are essential properties present?\n    if (\n      data.length > 0 ||\n      (data[0] &&\n        data[0].question &&\n        data[0].options &&\n        data[0].correct_option !== undefined)\n    ) {\n      return data as QuizQuestion[] // Still casting, but after a basic check\n    }\n  }\n  console.warn('Invalid quiz data format received', data)\n  return [] // Return empty array or throw error on invalid format\n}\n\n// Placeholder validation/mapping function for roleplay data\nconst ensureRoleplayDataFormat = (data: any): Scenario[] => {\n  console.log('Raw roleplay data:', data)\n\n  try {\n    // First, handle potentially multiple levels of JSON string encoding\n    const parsedData = recursiveJSONParse(data)\n    console.log('Parsed roleplay data:', parsedData)\n\n    // Handle different potential data structures\n    let rawScenarios: any[] = []\n\n    if (Array.isArray(parsedData)) {\n      rawScenarios = parsedData\n    } else if (parsedData && typeof parsedData === 'object') {\n      if (Array.isArray(parsedData.scenarios)) {\n        rawScenarios = parsedData.scenarios\n      } else if (parsedData.title || parsedData.context || parsedData.roles) {\n        rawScenarios = [parsedData]\n      }\n    }\n\n    // Map and validate each scenario, checking for icon\n    const scenarios = rawScenarios\n      .map(mapToScenario)\n      .filter((scenario): scenario is Scenario => {\n        if (!scenario) return false\n        const isValid =\n          typeof scenario.title === 'string' &&\n          scenario.title.length > 0 &&\n          typeof scenario.context === 'string' &&\n          scenario.context.length > 0 &&\n          Array.isArray(scenario.roles) &&\n          scenario.roles.length > 0 &&\n          scenario.roles.every(\n            role =>\n              role &&\n              typeof role.name === 'string' &&\n              role.name.length > 0 &&\n              typeof role.description === 'string' &&\n              role.description.length > 0 &&\n              typeof role.icon === 'string' &&\n              role.icon.length > 0 // Add check for icon\n          )\n        if (!isValid) {\n          console.warn(\n            'Invalid scenario structure (might be missing icon):',\n            scenario\n          )\n        }\n        return isValid\n      })\n\n    console.log('Validated roleplay scenarios:', scenarios)\n    return scenarios\n  } catch (error) {\n    console.error('Error processing roleplay data:', error)\n    return []\n  }\n}\n\n// --- Updated function to use public URLs instead of signed URLs ---\nasync function fetchPublicVideoUrl(filePath: string): Promise<string> {\n  try {\n    console.log('Using direct public URL for:', filePath)\n\n    if (!filePath) {\n      throw new Error('No video URL provided')\n    }\n\n    // If already a full URL, return it directly\n    if (filePath.startsWith('http')) {\n      return filePath\n    }\n\n    // Return the file path as-is for relative paths\n    return filePath\n  } catch (error) {\n    console.error('Error processing video URL:', error)\n    throw error\n  }\n}\n\ninterface CourseContentRendererProps {\n  activeTab: string\n  content: ChapterContent\n  chapter: Chapter\n  chaptersMeta?: Chapter[]\n  isLoading: boolean\n  showReport: boolean\n  isFullscreenMindmap: boolean\n  sidebarOpen: boolean\n  language: string\n  onMindmapBack: () => void\n  onToggleMindmapFullscreen: () => void\n  onCloseReport: () => void\n  onGenerateContentRequest: () => void\n}\n\nconst formatTime = (seconds: number): string => {\n  const mins = Math.floor(seconds / 60)\n  const secs = Math.floor(seconds % 60)\n  return `${mins.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`\n}\n\n// Add a combined video and notes view\nconst CombinedVideoAndNotes: React.FC<{\n  videoUrl: string\n  chapter: Chapter\n  chaptersMeta: Chapter[]\n  content: ChapterContent\n  currentVideoChapter: Chapter | null\n  setCurrentVideoChapter: (chapter: Chapter | null) => void\n}> = ({\n  videoUrl,\n  chapter,\n  chaptersMeta = [],\n  content,\n  currentVideoChapter,\n  setCurrentVideoChapter,\n}) => {\n  const notesContainerRef = useRef<HTMLDivElement>(null)\n\n  // Debug log for chaptersMeta\n  useEffect(() => {\n    console.log('CombinedVideoAndNotes - chaptersMeta:', chaptersMeta)\n  }, [chaptersMeta])\n\n  const handleVideoTimeUpdate = useCallback(\n    (currentTime: number) => {\n      console.log('Video time update:', currentTime)\n      // Find the chapter that matches the current time\n      const matchingChapter = chaptersMeta?.find(chapter => {\n        const start = Number(chapter.timestamp_start) || 0\n        const end = Number(chapter.timestamp_end) || Infinity\n        console.log(`Checking chapter ${chapter.chaptertitle}:`, {\n          start,\n          end,\n          currentTime,\n        })\n        return currentTime >= start && currentTime < end\n      })\n\n      if (matchingChapter) {\n        console.log('Found matching chapter:', matchingChapter.chaptertitle)\n        if (\n          !currentVideoChapter ||\n          matchingChapter.id !== currentVideoChapter.id\n        ) {\n          setCurrentVideoChapter(matchingChapter)\n          const chapterElement = notesContainerRef.current?.querySelector(\n            `[data-chapter-id=\"${matchingChapter.id}\"]`\n          )\n          chapterElement?.scrollIntoView({ behavior: 'smooth', block: 'start' })\n        }\n      } else {\n        console.log('No matching chapter found for time:', currentTime)\n      }\n    },\n    [chaptersMeta, currentVideoChapter, setCurrentVideoChapter]\n  )\n\n  // Create video markers only if chaptersMeta exists and has items\n  const videoMarkers = useMemo(() => {\n    if (!chaptersMeta?.length) {\n      console.log('No chapters available for video markers')\n      return []\n    }\n\n    const markers = chaptersMeta\n      .map(chapterMeta => ({\n        id: chapterMeta.id.toString(),\n        time: Number(chapterMeta.timestamp_start) || 0,\n        title: chapterMeta.chaptertitle,\n        description: chapterMeta.subtopic,\n        type: 'chapter' as const,\n      }))\n      .filter(marker => marker.time >= 0)\n\n    console.log('Created video markers:', markers)\n    return markers\n  }, [chaptersMeta])\n\n  // If no chapters are available, show a message\n  if (!chaptersMeta?.length) {\n    return (\n      <div className='flex h-full items-center justify-center'>\n        <div className='text-center text-gray-400'>\n          <p className='mb-2'>No chapters available for this content.</p>\n          <p className='text-sm'>\n            Please make sure chapters are properly configured.\n          </p>\n        </div>\n      </div>\n    )\n  }\n\n  return (\n    <div className='flex h-full gap-4'>\n      {/* Video Section */}\n      <div className='h-full w-1/2'>\n        <ModernVideoPlayer\n          src={videoUrl}\n          title={chapter.chaptertitle}\n          chapterId={chapter.id.toString()}\n          knowledgeId={chapter.knowledge_id.toString()}\n          className='h-full w-full'\n          markers={videoMarkers}\n          onMarkerClick={marker => {\n            const selectedChapter = chaptersMeta.find(\n              c => c.id.toString() === marker.id\n            )\n            if (selectedChapter) {\n              setCurrentVideoChapter(selectedChapter)\n            }\n          }}\n          onTimeUpdate={handleVideoTimeUpdate}\n          showChapterOverlay={true}\n          currentChapter={\n            currentVideoChapter\n              ? (() => {\n                  const chapter: any = {\n                    title: currentVideoChapter.chaptertitle,\n                    startTime: Number(currentVideoChapter.timestamp_start) || 0,\n                  }\n                  if (currentVideoChapter.timestamp_end) {\n                    chapter.endTime = Number(currentVideoChapter.timestamp_end)\n                  }\n                  return chapter\n                })()\n              : undefined\n          }\n        />\n      </div>\n\n      {/* Notes Section */}\n      <div className='h-full w-1/2'>\n        <div\n          ref={notesContainerRef}\n          className='h-full overflow-y-auto rounded-lg bg-gray-900 p-4'\n        >\n          {chaptersMeta.map(chapterMeta => {\n            const isCurrentChapter = currentVideoChapter?.id === chapterMeta.id\n\n            // Get chapter notes with proper null checking\n            let chapterNotes = null\n            if (content.notes) {\n              if (\n                typeof content.notes === 'object' &&\n                !Array.isArray(content.notes)\n              ) {\n                chapterNotes = content.notes[chapterMeta.id] || null\n              } else {\n                chapterNotes = content.notes\n              }\n            }\n\n            return (\n              <div\n                key={chapterMeta.id}\n                data-chapter-id={chapterMeta.id}\n                className={`mb-8 rounded-lg p-4 transition-colors ${\n                  isCurrentChapter\n                    ? 'border-2 border-blue-500 bg-blue-900/20'\n                    : 'bg-gray-800'\n                }`}\n              >\n                <h3 className='mb-2 flex items-center justify-between text-lg font-semibold text-white'>\n                  <span>{chapterMeta.chaptertitle}</span>\n                  {isCurrentChapter && (\n                    <span className='rounded-full bg-blue-900/40 px-3 py-1 text-sm text-blue-400'>\n                      Currently Playing\n                    </span>\n                  )}\n                </h3>\n                <div className='mb-4 text-sm text-gray-400'>\n                  {formatTime(Number(chapterMeta.timestamp_start) || 0)} -{' '}\n                  {formatTime(Number(chapterMeta.timestamp_end) || 0)}\n                </div>\n                {chapterNotes ? (\n                  <div\n                    className={`prose prose-invert max-w-none ${\n                      isCurrentChapter ? 'prose-blue' : ''\n                    }`}\n                  >\n                    <ModernMarkdownSlideshow\n                      content={\n                        Array.isArray(chapterNotes)\n                          ? chapterNotes\n                          : [chapterNotes]\n                      }\n                      knowledge_id={chapter.knowledge_id.toString()}\n                    />\n                  </div>\n                ) : (\n                  <p className='text-gray-400'>\n                    No notes available for this chapter.\n                  </p>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nconst CourseContentRenderer: React.FC<CourseContentRendererProps> = ({\n  activeTab,\n  content,\n  chapter,\n  chaptersMeta = [],\n  isLoading,\n  showReport,\n  isFullscreenMindmap,\n  sidebarOpen,\n  language,\n  onMindmapBack,\n  onToggleMindmapFullscreen,\n  onCloseReport,\n  onGenerateContentRequest,\n}) => {\n  const { session } = useInteractionTracker() // Get session context\n  const userId =\n    typeof session?.metadata?.userId === 'string'\n      ? session.metadata.userId\n      : 'anonymous' // Extract userId with fallback\n\n  // Add debug logging for props\n  useEffect(() => {\n    console.log('CourseContentRenderer - Props:', {\n      activeTab,\n      chapter,\n      chaptersMeta,\n      content,\n    })\n  }, [activeTab, chapter, chaptersMeta, content])\n\n  const [currentVideoChapter, setCurrentVideoChapter] =\n    useState<Chapter | null>(null)\n  const [viewMode, setViewMode] = useState<'video' | 'notes' | 'combined'>(\n    'combined'\n  )\n\n  // State for video URL\n  const [signedVideoUrl, setSignedVideoUrl] = useState<string | null>(null)\n  const [isSigningUrl, setIsSigningUrl] = useState<boolean>(false)\n  const [signingError, setSigningError] = useState<string | null>(null)\n\n  const notesContainerRef = useRef<HTMLDivElement>(null)\n\n  // Function to scroll to current chapter's notes\n  const scrollToChapterNotes = useCallback((chapterId: string) => {\n    if (notesContainerRef.current) {\n      const chapterElement = notesContainerRef.current.querySelector(\n        `[data-chapter-id=\"${chapterId}\"]`\n      )\n      if (chapterElement) {\n        chapterElement.scrollIntoView({ behavior: 'smooth', block: 'start' })\n      }\n    }\n  }, [])\n\n  // Add debug logging for video time updates\n  const handleVideoTimeUpdate = useCallback(\n    (currentTime: number) => {\n      console.log('Video time update:', currentTime)\n      const currentChapter = chaptersMeta.find(chapter => {\n        const start = chapter.timestamp_start || 0\n        const end = chapter.timestamp_end || Infinity\n        console.log(`Checking chapter ${chapter.chaptertitle}:`, {\n          start,\n          end,\n          currentTime,\n        })\n        return currentTime >= start && currentTime < end\n      })\n\n      if (currentChapter) {\n        console.log('Found current chapter:', currentChapter.chaptertitle)\n        if (\n          !currentVideoChapter ||\n          currentChapter.id !== currentVideoChapter.id\n        ) {\n          console.log('Updating current chapter and scrolling')\n          setCurrentVideoChapter(currentChapter)\n          if (activeTab === 'notes') {\n            scrollToChapterNotes(currentChapter.id.toString())\n          }\n        }\n      } else {\n        console.log('No matching chapter found for time:', currentTime)\n      }\n    },\n    [chaptersMeta, currentVideoChapter, activeTab, scrollToChapterNotes]\n  )\n\n  // Effect to handle video URL\n  useEffect(() => {\n    if (activeTab === 'video' && content.video_url) {\n      console.log('Setting up video with URL:', content.video_url)\n      let isMounted = true\n\n      const setupVideoUrl = async () => {\n        setIsSigningUrl(true)\n        setSigningError(null)\n        setSignedVideoUrl(null)\n        try {\n          const url = await fetchPublicVideoUrl(content.video_url!)\n          console.log('Ready to use URL:', url)\n          if (isMounted) {\n            setSignedVideoUrl(url)\n          }\n        } catch (error) {\n          console.error('Error processing video URL:', error)\n          if (isMounted) {\n            setSigningError(\n              `Could not load video: ${error instanceof Error ? error.message : 'Unknown error'}`\n            )\n          }\n        } finally {\n          if (isMounted) {\n            setIsSigningUrl(false)\n          }\n        }\n      }\n\n      setupVideoUrl()\n\n      return () => {\n        isMounted = false\n      }\n    } else {\n      setSignedVideoUrl(null)\n      setIsSigningUrl(false)\n      setSigningError(null)\n      return () => {} // Empty cleanup function\n    }\n  }, [activeTab, content.video_url])\n\n  if (isLoading) {\n    return (\n      <div className='flex h-full items-center justify-center'>\n        <Loader size='large' />\n      </div>\n    )\n  }\n\n  // Render Learning Report Overlay if active\n  // Note: This was rendered outside the main content area in the original. Consider if it should be a modal overlay instead.\n  if (showReport) {\n    // This might be better handled as a modal in the parent MainCourse component\n    return (\n      <div className='fixed inset-0 z-50 flex items-center justify-center bg-black/50 p-4'>\n        <div className='max-h-[90vh] w-full max-w-3xl overflow-auto rounded-lg bg-gray-800'>\n          {userId && chapter?.knowledge_id ? (\n            <LearningReport\n              userId={userId}\n              knowledgeId={String(chapter.knowledge_id)}\n              onClose={onCloseReport}\n            />\n          ) : (\n            // Optional: Show a loading or error state if IDs are missing\n            <div className='p-6 text-center text-red-500'>\n              Required information (User or Knowledge ID) is missing to load the\n              report.\n            </div>\n          )}\n        </div>\n      </div>\n    )\n    // Alternatively, render null here and handle the modal in MainCourse.tsx\n    // return null;\n  }\n\n  // Video and Notes Combined View\n  if (activeTab === 'video' && content.video_url) {\n    if (isSigningUrl) {\n      return (\n        <div className='flex h-full items-center justify-center'>\n          <div className='text-center'>\n            <Loader size='medium' />\n            <p className='mt-4 text-gray-400'>Loading video...</p>\n          </div>\n        </div>\n      )\n    }\n\n    if (signingError) {\n      return (\n        <div className='flex h-full flex-col items-center justify-center p-4 text-center'>\n          <div className='mb-4 text-red-400'>{signingError}</div>\n          <button\n            onClick={() => {\n              setSigningError(null)\n              setIsSigningUrl(true)\n              fetchPublicVideoUrl(content.video_url || '')\n                .then(url => setSignedVideoUrl(url))\n                .catch(err => setSigningError(err.message))\n                .finally(() => setIsSigningUrl(false))\n            }}\n            className='rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700'\n          >\n            Retry Loading\n          </button>\n        </div>\n      )\n    }\n\n    if (signedVideoUrl) {\n      return (\n        <div className='flex h-full flex-col'>\n          {/* View Mode Selector */}\n          <div className='flex items-center gap-4 border-b border-gray-700 bg-gray-800 p-4'>\n            <button\n              onClick={() => setViewMode('video')}\n              className={`rounded px-4 py-2 ${viewMode === 'video' ? 'bg-blue-600' : 'bg-gray-700'}`}\n            >\n              Video Only\n            </button>\n            <button\n              onClick={() => setViewMode('notes')}\n              className={`rounded px-4 py-2 ${viewMode === 'notes' ? 'bg-blue-600' : 'bg-gray-700'}`}\n            >\n              Notes Only\n            </button>\n            <button\n              onClick={() => setViewMode('combined')}\n              className={`rounded px-4 py-2 ${viewMode === 'combined' ? 'bg-blue-600' : 'bg-gray-700'}`}\n            >\n              Side by Side\n            </button>\n          </div>\n\n          {/* Content Area */}\n          <div className='flex-1 overflow-hidden'>\n            {viewMode === 'combined' ? (\n              <CombinedVideoAndNotes\n                videoUrl={signedVideoUrl}\n                chapter={chapter}\n                chaptersMeta={chaptersMeta}\n                content={content}\n                currentVideoChapter={currentVideoChapter}\n                setCurrentVideoChapter={setCurrentVideoChapter}\n              />\n            ) : viewMode === 'video' ? (\n              <div className='h-full'>\n                <ModernVideoPlayer\n                  src={signedVideoUrl}\n                  title={chapter.chaptertitle}\n                  chapterId={chapter.id.toString()}\n                  knowledgeId={chapter.knowledge_id.toString()}\n                  className='h-full w-full'\n                  markers={chaptersMeta.map(cm => ({\n                    id: cm.id.toString(),\n                    time: Number(cm.timestamp_start) || 0,\n                    title: cm.chaptertitle,\n                    description: cm.subtopic,\n                    type: 'chapter' as const,\n                  }))}\n                  showChapterOverlay={true}\n                />\n              </div>\n            ) : (\n              <div\n                ref={notesContainerRef}\n                className='h-full overflow-y-auto p-4'\n              >\n                {chaptersMeta.map(chapterMeta => {\n                  const isCurrentChapter =\n                    currentVideoChapter?.id === chapterMeta.id\n\n                  // Get chapter notes with proper null checking\n                  let chapterNotes = null\n                  if (content.notes) {\n                    if (\n                      typeof content.notes === 'object' &&\n                      !Array.isArray(content.notes)\n                    ) {\n                      chapterNotes = content.notes[chapterMeta.id] || null\n                    } else {\n                      chapterNotes = content.notes\n                    }\n                  }\n\n                  return (\n                    <div\n                      key={chapterMeta.id}\n                      data-chapter-id={chapterMeta.id}\n                      className={`mb-8 rounded-lg p-4 transition-colors ${\n                        isCurrentChapter\n                          ? 'border-2 border-blue-500 bg-blue-900/20'\n                          : 'bg-gray-800'\n                      }`}\n                    >\n                      <h3 className='mb-2 flex items-center justify-between text-lg font-semibold text-white'>\n                        <span>{chapterMeta.chaptertitle}</span>\n                        {isCurrentChapter && (\n                          <span className='rounded-full bg-blue-900/40 px-3 py-1 text-sm text-blue-400'>\n                            Currently Playing\n                          </span>\n                        )}\n                      </h3>\n                      <div className='mb-4 text-sm text-gray-400'>\n                        {formatTime(Number(chapterMeta.timestamp_start) || 0)} -{' '}\n                        {formatTime(Number(chapterMeta.timestamp_end) || 0)}\n                      </div>\n                      {chapterNotes ? (\n                        <div\n                          className={`prose prose-invert max-w-none ${\n                            isCurrentChapter ? 'prose-blue' : ''\n                          }`}\n                        >\n                          <ModernMarkdownSlideshow\n                            content={\n                              Array.isArray(chapterNotes)\n                                ? chapterNotes\n                                : [chapterNotes]\n                            }\n                            knowledge_id={chapter.knowledge_id.toString()}\n                          />\n                        </div>\n                      ) : (\n                        <p className='text-gray-400'>\n                          No notes available for this chapter.\n                        </p>\n                      )}\n                    </div>\n                  )\n                })}\n              </div>\n            )}\n          </div>\n        </div>\n      )\n    }\n  }\n\n  // Original Content Tab (from chapter.chapter)\n  if (activeTab === 'og') {\n    return (\n      <div className='h-full overflow-y-auto bg-gray-900 p-4 text-white md:p-6'>\n        <div className='prose prose-invert prose-lg max-w-none'>\n          {chapter?.chapter ? (\n            <ModernMarkdownSlideshow\n              content={[chapter.chapter]}\n              knowledge_id={chapter.knowledge_id.toString()}\n            />\n          ) : (\n            <div className='text-center text-gray-400'>\n              <p>No original content available.</p>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  // Notes Tab with synchronized highlighting\n  if (activeTab === 'notes') {\n    console.log('Rendering notes tab with chapters:', chaptersMeta)\n    console.log('Current video chapter:', currentVideoChapter)\n\n    return (\n      <div\n        ref={notesContainerRef}\n        className='h-full overflow-y-auto p-4 md:p-6'\n      >\n        {chaptersMeta.map(chapterMeta => {\n          const isCurrentChapter = currentVideoChapter?.id === chapterMeta.id\n\n          // Get chapter notes with proper null checking\n          let chapterNotes = null\n          if (content.notes) {\n            if (\n              typeof content.notes === 'object' &&\n              !Array.isArray(content.notes)\n            ) {\n              chapterNotes = content.notes[chapterMeta.id] || null\n            } else {\n              chapterNotes = content.notes\n            }\n          }\n\n          console.log(`Chapter ${chapterMeta.chaptertitle}:`, {\n            isCurrentChapter,\n            hasNotes: !!chapterNotes,\n            notes: chapterNotes,\n          })\n\n          return (\n            <div\n              key={chapterMeta.id}\n              data-chapter-id={chapterMeta.id}\n              className={`mb-8 rounded-lg p-4 transition-colors ${\n                isCurrentChapter\n                  ? 'border-2 border-blue-500 bg-blue-900/20'\n                  : 'bg-gray-800'\n              }`}\n            >\n              <h3 className='mb-2 flex items-center justify-between text-lg font-semibold text-white'>\n                <span>{chapterMeta.chaptertitle}</span>\n                {isCurrentChapter && (\n                  <span className='rounded-full bg-blue-900/40 px-3 py-1 text-sm text-blue-400'>\n                    Currently Playing\n                  </span>\n                )}\n              </h3>\n              <div className='mb-4 text-sm text-gray-400'>\n                {formatTime(Number(chapterMeta.timestamp_start) || 0)} -{' '}\n                {formatTime(Number(chapterMeta.timestamp_end) || 0)}\n              </div>\n              {chapterNotes ? (\n                <div\n                  className={`prose prose-invert max-w-none ${\n                    isCurrentChapter ? 'prose-blue' : ''\n                  }`}\n                >\n                  <ModernMarkdownSlideshow\n                    content={\n                      Array.isArray(chapterNotes)\n                        ? chapterNotes\n                        : [chapterNotes]\n                    }\n                    knowledge_id={chapter.knowledge_id.toString()}\n                  />\n                </div>\n              ) : (\n                <p className='text-gray-400'>\n                  No notes available for this chapter.\n                </p>\n              )}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n\n  // Summary Tab\n  if (activeTab === 'summary') {\n    return (\n      <div className='h-full overflow-y-auto bg-gray-900 p-4 text-white md:p-6'>\n        <div className='prose prose-invert prose-lg max-w-none'>\n          {content.summary ? (\n            <ModernMarkdownSlideshow\n              content={\n                Array.isArray(content.summary)\n                  ? content.summary\n                  : [content.summary]\n              }\n              knowledge_id={chapter.knowledge_id.toString()}\n            />\n          ) : (\n            <div className='text-center text-gray-400'>\n              <p>Summary is not available for this content.</p>\n              <button\n                onClick={onGenerateContentRequest}\n                className='mt-4 rounded bg-indigo-600 px-4 py-2 text-white hover:bg-indigo-700'\n              >\n                Generate Summary\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n    )\n  }\n\n  // Quiz Tab\n  if (activeTab === 'quiz' && content.quiz) {\n    // Check if quiz exists\n    const validatedQuizQuestions = ensureQuizDataFormat(content.quiz)\n    if (validatedQuizQuestions.length > 0) {\n      return (\n        <div className='h-full overflow-y-auto p-4 md:p-6'>\n          <Quiz questions={validatedQuizQuestions} />\n        </div>\n      )\n    }\n    // Optionally render a message if quiz data is present but invalid\n  }\n\n  // Mindmap Tab\n  if (activeTab === 'mindmap' && content.mindmap) {\n    return (\n      <div\n        className={`h-full ${isFullscreenMindmap ? 'fixed inset-0 z-20 bg-gray-900' : 'relative'}`}\n      >\n        {isFullscreenMindmap && (\n          <button\n            onClick={onMindmapBack}\n            className='absolute left-4 top-4 z-30 rounded-full bg-gray-800 p-2 text-white shadow-lg hover:bg-gray-700'\n            aria-label='Exit fullscreen mindmap'\n          >\n            <ChevronLeft className='h-5 w-5' />\n          </button>\n        )}\n        <EnhancedMindMap\n          data={content.mindmap} // Ensure data format is correct\n          isFullscreen={isFullscreenMindmap}\n          onToggleFullscreen={onToggleMindmapFullscreen} // Pass the callback\n        />\n      </div>\n    )\n  }\n\n  // Roleplay Tab\n  if (activeTab === 'roleplay') {\n    if (!content.roleplay) {\n      return (\n        <div className='flex h-full flex-col items-center justify-center p-8 text-center'>\n          <div className='max-w-md rounded-lg bg-gray-800 p-6 shadow-lg'>\n            <h2 className='mb-4 text-xl font-semibold text-gray-200'>\n              No Roleplay Scenarios Available\n            </h2>\n            <p className='mb-6 text-gray-400'>\n              There are no roleplay scenarios available for this chapter yet.\n            </p>\n            <button\n              onClick={onGenerateContentRequest}\n              className='flex items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white shadow-md transition-colors hover:bg-indigo-700'\n            >\n              <span>Generate Roleplay Scenarios</span>\n            </button>\n          </div>\n        </div>\n      )\n    }\n\n    const validatedScenarios = ensureRoleplayDataFormat(content.roleplay)\n    if (validatedScenarios.length === 0) {\n      return (\n        <div className='flex h-full flex-col items-center justify-center p-8 text-center'>\n          <div className='max-w-md rounded-lg bg-gray-800 p-6 shadow-lg'>\n            <h2 className='mb-4 text-xl font-semibold text-gray-200'>\n              Invalid Roleplay Data\n            </h2>\n            <p className='mb-6 text-gray-400'>\n              The roleplay scenarios could not be loaded due to invalid data\n              format.\n            </p>\n            <button\n              onClick={onGenerateContentRequest}\n              className='flex items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white shadow-md transition-colors hover:bg-indigo-700'\n            >\n              <span>Regenerate Roleplay Scenarios</span>\n            </button>\n          </div>\n        </div>\n      )\n    }\n\n    return (\n      <div className='h-full overflow-y-auto p-4 md:p-6'>\n        <RoleplayComponent\n          scenarios={validatedScenarios as any}\n          onRegenerate={onGenerateContentRequest}\n          openaiApiKey={''}\n          userId={userId}\n          language={language}\n        />\n      </div>\n    )\n  }\n\n  // Interactive Tab - Add new tab for slope drawing and other interactive components\n  if (activeTab === 'interactive') {\n    // Create mock default interactive content if none exists\n    const mockInteractiveContent = {\n      type: 'slope-drawer',\n      problems: [\n        {\n          id: 'p1',\n          question: 'Draw a line with slope 2 and y-intercept 3',\n          difficulty: 'easy' as const,\n          hints: [\n            'Remember slope is rise over run',\n            'Try plotting (0,3) first',\n          ],\n          solution: 'y = 2x + 3',\n          data: { slope: 2, yIntercept: 3 },\n        },\n        {\n          id: 'p2',\n          question: 'Draw a line with slope -1 and y-intercept 5',\n          difficulty: 'medium' as const,\n          hints: [\n            'Negative slope means the line goes down as x increases',\n            'Try plotting (0,5) first',\n          ],\n          solution: 'y = -1x + 5',\n          data: { slope: -1, yIntercept: 5 },\n        },\n        {\n          id: 'p3',\n          question: 'Draw a vertical line at x = 4',\n          difficulty: 'hard' as const,\n          hints: [\n            'Vertical lines have undefined slope',\n            'All points on the line have the same x-value',\n          ],\n          solution: 'Vertical line: x = 4',\n        },\n      ],\n      conceptExplanations: [\n        {\n          id: 'c1',\n          title: 'Understanding Slope',\n          content:\n            'Slope measures the steepness of a line. It is calculated as the ratio of vertical change (rise) to horizontal change (run).',\n          examples: [\n            {\n              id: 'e1',\n              description:\n                'A line with slope 2 rises 2 units for every 1 unit it runs horizontally.',\n            },\n          ],\n        },\n      ],\n    }\n\n    // Use existing interactive content if available, otherwise use mock data\n    const interactiveContent = content?.interactive || mockInteractiveContent\n\n    return (\n      <div className='h-full overflow-y-auto p-4 md:p-6'>\n        <SlopeDrawing\n          interactiveContent={interactiveContent}\n          userId={userId}\n          knowledgeId={chapter.knowledge_id?.toString()}\n          language={language}\n          onUpdateProgress={progress => {\n            console.log('Progress updated:', progress)\n            // Here you would implement logic to update user progress\n          }}\n        />\n      </div>\n    )\n  }\n\n  // Fallback: Content Not Available\n  // TODO: Roleplay, Interactive Modules, etc. need to be added here based on `activeTab`\n\n  // Default message if no specific content matches the active tab\n  return (\n    <div className='flex h-full flex-col items-center justify-center p-8 text-center'>\n      <div className='max-w-md rounded-lg bg-gray-800 p-6 shadow-lg'>\n        <h2 className='mb-4 text-xl font-semibold text-gray-200'>\n          Content Not Available\n        </h2>\n        <p className='mb-6 text-gray-400'>\n          The <span className='font-medium text-gray-300'>{activeTab}</span>{' '}\n          content for this chapter isn't available right now.\n        </p>\n        {/* Trigger the parent component to show the generation panel */}\n        <button\n          onClick={onGenerateContentRequest} // Use the passed callback\n          className='flex items-center justify-center gap-2 rounded-md bg-indigo-600 px-4 py-2 text-white shadow-md transition-colors hover:bg-indigo-700'\n        >\n          {/* <RefreshCw className=\"w-4 h-4\" /> // Icon can be added if needed */}\n          <span>Generate Content</span>\n        </button>\n      </div>\n    </div>\n  )\n}\n\nexport default CourseContentRenderer\n"],"names":["__iconNode","ArrowLeft","createLucideIcon","ChevronRight","Copy","Maximize","Minimize","Plus","SquarePen","Star","Target","Trophy","User","Users","Zap","degrees","identity","decompose","a","b","c","d","e","f","scaleX","scaleY","skewX","svgNode","parseCss","value","m","parseSvg","interpolateTransform","parse","pxComma","pxParen","degParen","pop","s","translate","xa","ya","xb","yb","q","i","number","rotate","scale","t","n","o","interpolateTransformCss","interpolateTransformSvg","epsilon2","cosh","x","sinh","tanh","interpolateZoom","zoomRho","rho","rho2","rho4","zoom","p0","p1","ux0","uy0","w0","ux1","uy1","w1","dx","dy","d2","S","d1","b0","b1","r0","r1","coshr0","u","_","_1","_2","_4","cov_2kbmt728gu","actualCoverage","size","Loader","color","small","medium","large","colorMap","green","red","purple","jsx","children","sizeMap","cov_2lzghcnu4c","jsxs","ModernVideoPlayer","title","chapterId","knowledgeId","className","markers","onMarkerClick","onTimeUpdate","showChapterOverlay","currentChapter","containerRef","useRef","setIsPlaying","currentTime","setCurrentTime","useState","duration","setDuration","volume","setVolume","isMuted","setIsMuted","isFullscreen","setIsFullscreen","showControls","setShowControls","controlsTimeoutRef","seekInitiatedRef","seekTimeoutRef","currentMarker","useMemo","slice","marker","useEffect","container","videoRef","video","handleTimeUpdateEvent","current","console","newTime","handleDurationChange","handlePlay","handlePause","handleVolumeChange2","handleFullscreenChange","document","readyState","addEventListener","hideControls","resetControlsTimeout","clearTimeout","removeEventListener","isPlaying","togglePlay","pause","play","error","handleSeek","targetTime","isFinite","canSeek","handleVolumeChange","vol","muted","toggleMute","toggleFullscreen","fullscreenElement","exitFullscreen","mozCancelFullScreen","webkitExitFullscreen","msExitFullscreen","err","requestFullscreen","elem","mozRequestFullScreen","webkitRequestFullscreen","msRequestFullscreen","formatTime","seconds","secs","Math","floor","toString","mins","seekBarBackground","progressPercent","onMouseEnter","ref","src","playsInline","onClick","onDoubleClick","stopPropagation","type","min","max","onChange","style","background","disabled","xmlns","viewBox","fill","fillRule","clipRule","step","time","ccount","character","source","count","index","escapeStringRegexp","string","findAndReplace","tree","list","options","ignored","convert","pairs","toPairs","pairIndex","visitParents","visitor","node","parents","grandparent","parent","siblings","handler","find","replace","start","change","nodes","match","position","matchObject","tupleOrList","result","tuple","toExpression","toFunction","escape","inConstruct","notInConstruct","gfmAutolinkLiteralFromMarkdown","transformGfmAutolinkLiterals","enterLiteralAutolink","enterLiteralAutolinkValue","exitLiteralAutolink","exitLiteralAutolinkEmail","exitLiteralAutolinkHttp","exitLiteralAutolinkWww","gfmAutolinkLiteralToMarkdown","token","assert","findUrl","findEmail","protocol","domain","path","prefix","previous","isCorrectDomain","parts","splitUrl","atext","label","url","trailExec","trail","closingParenIndex","openingParens","closingParens","email","code","unicodeWhitespace","unicodePunctuation","footnoteReference","footnoteReferencePeek","enterFootnoteCallString","enterFootnoteCall","enterFootnoteDefinitionLabelString","enterFootnoteDefinition","exitFootnoteCallString","normalizeIdentifier","exitFootnoteCall","exitFootnoteDefinitionLabelString","exitFootnoteDefinition","state","info","tracker","exit","subexit","gfmFootnoteFromMarkdown","gfmFootnoteToMarkdown","firstLineBlank","footnoteDefinition","mapAll","mapExceptFirst","line","blank","constructsWithoutStrikethrough","handleDelete","peekDelete","gfmStrikethroughFromMarkdown","enterStrikethrough","exitStrikethrough","gfmStrikethroughToMarkdown","defaultStringLength","markdownTable","table","settings","align","stringLength","alignments","cellMatrix","sizeMatrix","longestCellByColumn","mostCellsPerRow","rowIndex","row","sizes","columnIndex","cell","serialize","toAlignment","before","after","lines","blockquote","map","patternInScope","stack","pattern","listInScope","none","hardBreak","formatCodeAsIndented","checkFence","raw","suffix","sequence","longestStreak","checkQuote","definition","quote","checkEmphasis","encodeCharacterReference","encodeInfo","outside","inside","outsideKind","classifyCharacter","insideKind","emphasis","emphasisPeek","between","betweenHead","open","betweenTail","close","formatHeadingAsSetext","literalWithBreak","visit","EXIT","heading","rank","html","htmlPeek","image","imagePeek","imageReference","imageReferencePeek","alt","reference","inlineCode","inlineCodePeek","expression","formatLinkAsAutolink","link","linkPeek","linkReference","linkReferencePeek","text","checkBullet","checkBulletOther","bullet","bulletOther","checkBulletOrdered","checkRule","bulletCurrent","useDifferentMarker","firstListItem","item","checkListItemIndent","listItem","listItemIndent","paragraph","phrasing","root","checkStrong","strong","strongPeek","checkRuleRepetition","repetition","thematicBreak","handle","gfmTableFromMarkdown","enterTable","enterCell","enterRow","exitCodeText","exitTable","$0","$1","gfmTableToMarkdown","padding","alignDelimiters","around","inlineCodeWithTable","handleTable","handleTableCell","handleTableRow","serializeData","handleTableAsData","handleTableRowAsData","matrix","defaultHandlers","gfmTaskListItemFromMarkdown","exitCheck","exitParagraphWithTaskListItem","gfmTaskListItemToMarkdown","listItemWithTaskListItem","head","firstParaghraph","sibling","checkable","checkbox","check","gfmFromMarkdown","gfmToMarkdown","wwwPrefix","tokenizeWwwPrefix","tokenizeDomain","tokenizePath","tokenizeTrail","emailDomainDotTrail","tokenizeEmailDomainDotTrail","wwwAutolink","tokenizeWwwAutolink","previousWww","protocolAutolink","tokenizeProtocolAutolink","previousProtocol","emailAutolink","tokenizeEmailAutolink","previousEmail","gfmAutolinkLiteral","effects","ok","nok","self","dot","data","gfmAtext","previousUnbalanced","emailDomain","emailDomainAfter","emailDomainDot","asciiAlphanumeric","asciiAlpha","wwwStart","wwwAfter","buffer","seen","protocolStart","protocolPrefixInside","protocolSlashesInside","afterProtocol","asciiControl","markdownLineEndingOrSpace","protocolAfter","wwwPrefixInside","wwwPrefixAfter","underscoreInLastSegment","underscoreInLastLastSegment","domainInside","domainAfter","domainAtPunctuation","sizeOpen","sizeClose","pathInside","pathAtPunctuation","trailCharacterReferenceStart","trailBracketAfter","trailCharacterReferenceInside","events","indent","tokenizeIndent","gfmFootnote","tokenizeDefinitionStart","tokenizeDefinitionContinuation","gfmFootnoteDefinitionEnd","tokenizeGfmFootnoteCall","tokenizePotentialGfmFootnoteCall","resolveToPotentialGfmFootnoteCall","defined","labelStart","id","context","call","chunk","replacement","callStart","callData","callEscape","identifier","labelAtMarker","labelInside","labelAfter","labelEscape","factorySpace","whitespaceAfter","blankLine","afterPrefix","tail","gfmStrikethrough","single","tokenizer","tokenizeStrikethrough","resolveAllStrikethrough","strikethrough","nextEvents","insideSpan","splice","resolveAll","more","EditMap","remove","add","addImplementation","vecs","element","editMap","at","gfmTableAlign","inDelimiterRow","event","alignIndex","gfmTable","tokenizeTable","resolveTable","sizeB","next","bodyRowStart","headRowBefore","headRowStart","headRowBreak","markdownLineEnding","headDelimiterStart","markdownSpace","headRowData","headRowEscape","headDelimiterBefore","headDelimiterValueBefore","headDelimiterCellBefore","headDelimiterNok","headDelimiterLeftAlignmentAfter","headDelimiterCellAfter","headDelimiterFiller","headDelimiterRightAlignmentAfter","bodyRowBreak","bodyRowData","bodyRowEscape","inFirstCellAwaitingPipe","rowKind","lastCell","afterHeadAwaitingFirstBodyRow","lastTableEnd","currentTable","currentBody","currentCell","flushTableEnd","flushCell","range","rowEnd","previousCell","groupName","valueName","getPoint","now","relatedStart","relatedEnd","valueToken","end","tableBody","exits","related","side","tasklistCheck","tokenizeTasklistCheck","gfmTaskListItem","spaceThenNonSpace","gfm","combineExtensions","emptyOptions","remarkGfm","micromarkExtensions","fromMarkdownExtensions","toMarkdownExtensions","entries","setPrototypeOf","isFrozen","getPrototypeOf","getOwnPropertyDescriptor","freeze","seal","create","apply","construct","fun","thisValue","args","Func","arrayForEach","unapply","arrayLastIndexOf","arrayPop","arrayPush","arraySplice","stringToLowerCase","stringToString","stringMatch","stringReplace","stringIndexOf","stringTrim","objectHasOwnProperty","regExpTest","typeErrorCreate","unconstruct","func","thisArg","_len","_key","_len2","_key2","addToSet","set","array","transformCaseFunc","lcElement","cleanArray","clone","object","newObject","property","lookupGetter","prop","desc","fallbackValue","html$1","svg$1","svgFilters","svgDisallowed","mathMl$1","mathMlDisallowed","svg","mathMl","xml","MUSTACHE_EXPR","ERB_EXPR","TMPLIT_EXPR","DATA_ATTR","ARIA_ATTR","IS_ALLOWED_URI","IS_SCRIPT_OR_DATA","ATTR_WHITESPACE","DOCTYPE_NAME","CUSTOM_ELEMENT","EXPRESSIONS","NODE_TYPE","getGlobal","_createTrustedTypesPolicy","trustedTypes","purifyHostElement","ATTR_NAME","policyName","scriptUrl","_createHooksMap","createDOMPurify","window","DOMPurify","originalDocument","currentScript","DocumentFragment","HTMLTemplateElement","Node","Element","NodeFilter","NamedNodeMap","HTMLFormElement","DOMParser","ElementPrototype","cloneNode","getNextSibling","getChildNodes","getParentNode","template","trustedTypesPolicy","emptyHTML","implementation","createNodeIterator","createDocumentFragment","getElementsByTagName","importNode","hooks","IS_ALLOWED_URI$1","ALLOWED_TAGS","DEFAULT_ALLOWED_TAGS","ALLOWED_ATTR","DEFAULT_ALLOWED_ATTR","CUSTOM_ELEMENT_HANDLING","FORBID_TAGS","FORBID_ATTR","ALLOW_ARIA_ATTR","ALLOW_DATA_ATTR","ALLOW_UNKNOWN_PROTOCOLS","ALLOW_SELF_CLOSE_IN_ATTR","SAFE_FOR_TEMPLATES","SAFE_FOR_XML","WHOLE_DOCUMENT","SET_CONFIG","FORCE_BODY","RETURN_DOM","RETURN_DOM_FRAGMENT","RETURN_TRUSTED_TYPE","SANITIZE_DOM","SANITIZE_NAMED_PROPS","SANITIZE_NAMED_PROPS_PREFIX","KEEP_CONTENT","IN_PLACE","USE_PROFILES","FORBID_CONTENTS","DEFAULT_FORBID_CONTENTS","DATA_URI_TAGS","DEFAULT_DATA_URI_TAGS","URI_SAFE_ATTRIBUTES","DEFAULT_URI_SAFE_ATTRIBUTES","MATHML_NAMESPACE","SVG_NAMESPACE","HTML_NAMESPACE","NAMESPACE","IS_EMPTY_INPUT","ALLOWED_NAMESPACES","DEFAULT_ALLOWED_NAMESPACES","MATHML_TEXT_INTEGRATION_POINTS","HTML_INTEGRATION_POINTS","COMMON_SVG_AND_HTML_ELEMENTS","PARSER_MEDIA_TYPE","SUPPORTED_PARSER_MEDIA_TYPES","DEFAULT_PARSER_MEDIA_TYPE","CONFIG","formElement","isRegexOrFunction","testValue","_parseConfig","cfg","ALL_SVG_TAGS","ALL_MATHML_TAGS","_checkValidNamespace","tagName","parentTagName","_forceRemove","_removeAttribute","name","_initDocument","dirty","doc","leadingWhitespace","matches","dirtyPayload","body","_createNodeIterator","_isClobbered","_isNode","_executeHooks","currentNode","hook","_sanitizeElements","content","_isBasicCustomElement","parentNode","childNodes","childCount","childClone","expr","_isValidAttribute","lcTag","lcName","_sanitizeAttributes","attributes","hookEvent","l","attr","namespaceURI","attrValue","initValue","_sanitizeShadowDOM","fragment","shadowNode","shadowIterator","importedNode","returnNode","nodeIterator","serializedHTML","tag","entryPoint","hookFunction","purify","cov_1woswf74tw","getImageSrc","knowledge_id","MarkdownViewer","sanitizedContent","React","sanitize","slide","remarkPlugins","remarkMath","rehypePlugins","rehypeKatex","components","h1","props","resolvedSrc","maxWidth","border","margin","cov_1az04ezpuk","SlideshowControls","currentSlide","totalSlides","onNext","onPrevious","showProgressIndicator","variant","hasNextSlide","hasPreviousSlide","renderButtons","ChevronLeft","renderProgressIndicator","role","cov_1roha40lvq","ModernMarkdownSlideshow","images","currentIndex","onSlideChange","theme","controlsVariant","setCurrentSlide","length","getThemeClass","prefersDark","setThemeClass","mediaQuery","handleChange","useCallback","newIndex","previousSlide","handleKeyDown","nextSlide","getContainerStyles","themeClass","cov_1ez21j095s","questions","negativeMarking","selectedAnswers","showResults","setShowResults","score","setScore","maxScore","setMaxScore","attempted","setAttempted","correctAnswers","setCorrectAnswers","incorrectAnswers","setIncorrectAnswers","currentQuestionIndex","setCurrentQuestionIndex","sum","question","total","questionIndex","option","setSelectedAnswers","prev","handleSubmit","correct","incorrect","attempted2","forEach","newScore","pointsForQuestion","goToNextQuestion","goToPreviousQuestion","handleReset","percentageScore","Fragment","width","isSelected","handleAnswerSelect","cc","names","out","tmp","k","noop","dispatch","Dispatch","parseTypenames","typenames","types","typename","callback","T","get","copy","that","xhtml","namespaces","namespace","creatorInherit","uri","creatorFixed","fullname","creator","selector","selection_select","select","groups","subgroups","j","group","subgroup","subnode","Selection","empty","selectorAll","arrayAll","selection_selectAll","matcher","childMatcher","childFind","childFirst","selection_selectChild","filter","childrenFilter","selection_selectChildren","selection_filter","sparse","update","selection_enter","EnterNode","datum","child","constant$2","bindIndex","enter","groupLength","dataLength","bindKey","key","nodeByKeyValue","keyValues","keyValue","selection_data","bind","constant","arraylike","enterGroup","updateGroup","exitGroup","i0","i1","selection_exit","selection_join","onenter","onupdate","onexit","selection_merge","selection","groups0","groups1","m0","m1","merges","group0","group1","merge","selection_order","selection_sort","compare","ascending","compareNode","sortgroups","sortgroup","selection_call","selection_nodes","selection_node","selection_size","selection_empty","selection_each","attrRemove","attrRemoveNS","attrConstant","attrConstantNS","attrFunction","v","attrFunctionNS","selection_attr","defaultView","styleRemove","styleConstant","priority","styleFunction","selection_style","styleValue","propertyRemove","propertyConstant","propertyFunction","selection_property","classArray","classList","ClassList","classedAdd","classedRemove","classedTrue","classedFalse","classedFunction","selection_classed","textRemove","textConstant","textFunction","selection_text","htmlRemove","htmlConstant","htmlFunction","selection_html","raise","selection_raise","lower","selection_lower","selection_append","constantNull","selection_insert","selection_remove","selection_cloneShallow","selection_cloneDeep","selection_clone","deep","selection_datum","contextListener","listener","onRemove","on","onAdd","selection_on","dispatchEvent","params","dispatchConstant","dispatchFunction","selection_dispatch","selection_iterator","selection_selection","sourceEvent","pointer","point","rect","nonpassive","nonpassivecapture","nopropagation","noevent$1","dragDisable","view","noevent","yesdrag","noclick","constant$1","DragEvent","subject","target","active","y","defaultFilter","defaultContainer","defaultSubject","defaultTouchable","drag","touchable","gestures","listeners","mousedownx","mousedowny","mousemoving","touchending","clickDistance2","mousedowned","touchstarted","touchmoved","touchended","gesture","beforestart","mousemoved","mouseupped","nodrag","touches","touch","p","frame","timeout","interval","pokeDelay","taskHead","taskTail","clockLast","clockNow","clockSkew","clock","setFrame","clearNow","Timer","timer","delay","sleep","timerFlush","wake","nap","poke","t0","t1","t2","elapsed","emptyOn","emptyTween","CREATED","SCHEDULED","STARTING","STARTED","RUNNING","ENDING","ENDED","schedule","timing","schedules","init","tween","stop","tick","interrupt","selection_interrupt","tweenRemove","tween0","tween1","tweenFunction","transition_tween","tweenValue","transition","interpolate","interpolateNumber","interpolateRgb","interpolateString","value1","string00","string1","interpolate0","string0","string10","transition_attr","attrInterpolate","attrInterpolateNS","attrTweenNS","attrTween","transition_attrTween","delayFunction","delayConstant","transition_delay","durationFunction","durationConstant","transition_duration","easeConstant","transition_ease","easeVarying","transition_easeVarying","transition_filter","Transition","transition_merge","onFunction","on0","on1","sit","transition_on","removeFunction","transition_remove","transition_select","transition_selectAll","inherit","transition_selection","styleNull","styleMaybeRemove","listener0","transition_style","styleInterpolate","styleTween","transition_styleTween","transition_text","textInterpolate","textTween","transition_textTween","transition_transition","id0","id1","newId","transition_end","resolve","reject","cancel","selection_prototype","cubicInOut","defaultTiming","easeCubicInOut","selection_transition","ZoomEvent","transform","Transform","location","defaultExtent","defaultTransform","defaultWheelDelta","defaultConstrain","extent","translateExtent","dx0","dx1","dy0","dy1","constrain","wheelDelta","scaleExtent","touchstarting","touchfirst","touchDelay","wheelDelay","tapDistance","wheeled","dblclicked","collection","k0","k1","centroid","g","w","clean","Gesture","wheelidled","currentTarget","x0","y0","dragEnable","started","l0","l1","dp","dl","errorMessages","nodeType","handleType","sourceHandle","targetHandle","edgeType","lib","infiniteExtent","elementSelectionKeys","defaultAriaLabelConfig","direction","ConnectionMode","PanOnScrollMode","SelectionMode","initialConnection","ConnectionLineType","MarkerType","Position","oppositePosition","getConnectionStatus","isValid","isEdgeBase","isNodeBase","isInternalNodeBase","getNodePositionWithOrigin","nodeOrigin","height","getNodeDimensions","origin","offsetX","offsetY","getNodesBounds","box","currBox","nodeOrId","isId","nodeBox","nodeToBox","getBoundsOfBoxes","boxToRect","getInternalNodesBounds","nodeLookup","getNodesInside","tx","ty","tScale","partially","excludeNonSelectableNodes","paneRect","pointToRendererPoint","visibleNodes","measured","selectable","hidden","overlappingArea","getOverlappingArea","nodeToRect","area","partiallyVisible","getConnectedEdges","edges","nodeIds","edge","getFitViewNodes","fitViewNodes","optionNodeIds","fitViewport","panZoom","minZoom","maxZoom","nodesToFit","bounds","viewport","getViewportForBounds","calculateNodePosition","nodeId","nextPosition","nodeExtent","onError","parentX","parentY","parentWidth","parentHeight","isCoordinateExtent","positionAbsolute","clampPosition","getElementsToRemove","nodesToRemove","edgesToRemove","onBeforeDelete","matchingNodes","isIncluded","parentHit","edgeIds","deletableEdges","matchingEdges","onBeforeDeleteResult","clamp","val","dimensions","clampPositionToParent","childPosition","childDimensions","calcAutoPanVelocity","calcAutoPan","pos","speed","distance","xMovement","yMovement","box1","box2","rectToBox","x2","y2","getBoundsOfRects","rect1","rect2","rectA","rectB","xOverlap","yOverlap","isRectObject","obj","isNumeric","devWarn","message","snapPosition","snapGrid","snapToGrid","rendererPointToPoint","parsePadding","paddingValue","parsePaddings","paddingY","paddingX","top","bottom","left","right","calculateAppliedPaddings","boundRight","boundBottom","xZoom","yZoom","clampedZoom","boundsCenterX","boundsCenterY","newPadding","offset","isMacOs","nodeHasDimensions","evaluateAbsolutePosition","parentId","areSetsEqual","withResolvers","res","rej","mergeAriaLabelConfig","partial","getPointerPosition","containerBounds","getEventPosition","pointerPos","xSnapped","ySnapped","getDimensions","getHostForElement","inputTags","isInputDOMNode","isMouseEvent","isMouse","evtX","evtY","getHandleBounds","nodeElement","nodeBounds","handles","handleBounds","getBezierEdgeCenter","sourceX","sourceY","targetX","targetY","sourceControlX","sourceControlY","targetControlX","targetControlY","centerX","centerY","calculateControlOffset","curvature","getControlWithCurvature","x1","y1","getBezierPath","sourcePosition","targetPosition","labelX","labelY","getEdgeCenter","xOffset","yOffset","getElevatedEdgeZIndex","sourceNode","targetNode","selected","zIndex","elevateOnSelect","edgeZ","nodeZ","isEdgeVisible","edgeBox","viewRect","getEdgeId","connectionExists","el","addEdge","edgeParams","getStraightPath","handleDirections","getDirection","getPoints","center","sourceDir","targetDir","sourceGapped","targetGapped","dir","dirAccessor","currDir","points","sourceGapOffset","targetGapOffset","defaultCenterX","defaultCenterY","defaultOffsetX","defaultOffsetY","verticalSplit","horizontalSplit","sourceTarget","targetSource","diff","gapOffset","dirAccessorOpposite","isSameDir","sourceGtTargetOppo","sourceLtTargetOppo","sourceGapPoint","targetGapPoint","maxXDistance","maxYDistance","getBend","bendSize","xDir","yDir","getSmoothStepPath","borderRadius","segment","isNodeInitialized","getEdgePosition","sourceHandleBounds","toHandleBounds","targetHandleBounds","getHandle$1","getHandlePosition","fallbackPosition","handleId","getMarkerId","createMarkerIds","defaultColor","defaultMarkerStart","defaultMarkerEnd","ids","markerId","defaultOptions","adoptUserNodesDefaultOptions","mergeObjects","base","incoming","updateAbsolutePositions","parentLookup","_options","updateChildNode","positionWithOrigin","clampedPosition","adoptUserNodes","nodesInitialized","tmpLookup","selectedNodeZ","userNode","internalNode","calculateZ","updateParentLookup","elevateNodesOnSelect","z","calculateChildXYZ","positionChanged","childNode","absolutePosition","childZ","parentZ","handleExpandParent","changes","parentExpansions","parentRect","expandedRect","xChange","yChange","newWidth","newHeight","widthChange","heightChange","updateNodeInternals","updates","domNode","viewportNode","updatedInternals","parentExpandChildren","dimensionChanged","newNode","parentExpandChanges","panBy","delta","nextViewport","transformChanged","addConnectionToLookup","connection","connectionKey","connectionLookup","nodeMap","typeMap","handleMap","updateConnectionLookup","edgeLookup","sourceKey","targetKey","isParentSelected","hasSelector","getDragItems","nodesDraggable","mousePos","dragItems","getEventHandlerParams","dragging","nodesFromDragItems","dragItem","XYDrag","onNodeMouseDown","getStoreItems","onDragStart","onDrag","onDragStop","lastPos","autoPanId","autoPanStarted","mousePosition","dragStarted","d3Selection","abortDrag","nodePositionsChanged","noDragClassName","handleSelector","isSelectable","nodeClickDistance","updateNodes","dragEvent","onNodeDrag","onSelectionDrag","updateNodePositions","hasChange","nodesBox","adjustedNodeExtent","currentNodes","autoPan","autoPanSpeed","autoPanOnNodeDrag","startDrag","multiSelectionActive","selectNodesOnDrag","onNodeDragStart","onSelectionDragStart","unselectNodesAndEdges","d3DragInstance","nodeDragThreshold","onNodeDragStop","onSelectionDragStop","destroy","getNodesWithinDistance","ADDITIONAL_DISTANCE","getClosestHandle","connectionRadius","fromHandle","closestHandles","minDistance","closeNodes","allHandles","oppositeHandleType","getHandle","connectionMode","withAbsolutePosition","h","getHandleType","edgeUpdaterType","handleDomNode","isConnectionValid","isInsideConnectionRadius","isHandleValid","alwaysValid","onPointerDown","isTarget","autoPanOnConnect","flowId","cancelConnection","onConnectStart","onConnect","onConnectEnd","isValidConnection","onReconnectEnd","updateConnection","getTransform","getFromHandle","dragThreshold","closestHandle","clickedHandle","connectionStarted","fromHandleInternal","fromNodeInternal","previousConnection","startConnection","onPointerMove","onPointerUp","isValidHandle","newConnection","inProgress","connectionState","finalConnectionState","fromNodeId","fromHandleId","fromType","handleBelow","handleToCheck","handleNodeId","connectable","connectableEnd","XYHandle","XYMinimap","getViewScale","zoomStep","pannable","zoomable","inversePan","zoomHandler","pinchDelta","nextZoom","panStart","panStartHandler","panHandler","panCurrent","panDelta","moveScale","zoomAndPanHandler","viewChanged","prevViewport","eventViewport","transformToViewport","viewportToTransform","zoomIdentity","isWrappedWithClass","isRightClickPan","panOnDrag","usedButton","defaultEase","getD3Transition","ease","onEnd","hasDuration","factor","createPanOnScrollHandler","zoomPanValues","noWheelClassName","d3Zoom","panOnScrollMode","panOnScrollSpeed","zoomOnPinch","onPanZoomStart","onPanZoom","onPanZoomEnd","currentZoom","deltaNormalize","deltaX","deltaY","createZoomOnScrollHandler","preventScrolling","d3ZoomHandler","isWheel","preventZoom","hasNoWheelClass","createPanZoomStartHandler","onDraggingChange","createPanZoomHandler","onPaneContextMenu","onTransformChange","createPanZoomEndHandler","panOnScroll","createFilter","zoomActivationKeyPressed","zoomOnScroll","zoomOnDoubleClick","userSelectionActive","noPanClassName","zoomScroll","pinchZoom","buttonAllowed","XYPanZoom","paneClickDistance","bbox","d3ZoomInstance","setViewportConstrained","d3DblClickZoomHandler","setTransform","wheelHandler","startHandler","panZoomHandler","panZoomEndHandler","nextTransform","contrainedTransform","setViewport","syncViewport","currentTransform","getViewport","zoomTransform","scaleTo","scaleBy","setScaleExtent","setTranslateExtent","setClickDistance","validDistance","ResizeControlVariant","getResizeDirection","prevWidth","prevHeight","affectsX","affectsY","deltaWidth","deltaHeight","getControlDirection","controlPosition","isHorizontal","isVertical","getLowerExtentClamp","lowerExtent","lowerBound","getUpperExtentClamp","upperExtent","upperBound","getSizeClamp","minSize","maxSize","xor","getDimensionsAfterResize","startValues","controlDirection","pointerPosition","boundaries","keepAspectRatio","childExtent","isDiagonal","minWidth","minHeight","maxHeight","startX","startY","startWidth","startHeight","aspectRatio","distX","distY","originOffsetX","originOffsetY","clampX","clampY","xExtentClamp","yExtentClamp","aspectHeightClamp","aspectExtentClamp","aspectWidthClamp","initPrevValues","initStartValues","nodeToParentExtent","nodeToChildExtent","XYResizer","resizeDirection","onResizeStart","onResize","onResizeEnd","shouldResize","prevValues","parentExtent","dragHandler","paneDomNode","childId","storeNodeOrigin","childChanges","prevX","prevY","isWidthChange","isHeightChange","isXPosChange","isYPosChange","xLimit","yLimit","nextValues","createStoreImpl","createState","setState","nextState","previousState","getState","api","initialState","__vite_import_meta_env__","createStore","useDebugValue","ReactExports","useSyncExternalStoreWithSelector","useSyncExternalStoreExports","arg","useStoreWithEqualityFn","equalityFn","createWithEqualityFnImpl","defaultEqualityFn","useBoundStoreWithEqualityFn","createWithEqualityFn","shallow$1","objA","objB","keysA","keyA","StoreContext","createContext","Provider$1","zustandErrorMessage","useStore","store","useContext","useStoreApi","ariaLiveStyle","ARIA_NODE_DESC_KEY","ARIA_EDGE_DESC_KEY","ARIA_LIVE_MESSAGE","ariaLiveSelector","ariaLabelConfigSelector","AriaLiveMessage","rfId","ariaLiveMessage","A11yDescriptions","disableKeyboardA11y","ariaLabelConfig","Panel","forwardRef","rest","positionClasses","Attribution","proOptions","selector$m","selectedNodes","selectedEdges","selectId","areEqual","shallow","SelectionListenerInner","onSelectionChange","fn","changeSelector","SelectionListener","storeHasSelectionChangeHandlers","defaultNodeOrigin","defaultViewport","reactFlowFieldsToTrack","fieldsToTrack","selector$l","StoreUpdater","setNodes","setEdges","setMinZoom","setMaxZoom","setNodeExtent","reset","setDefaultNodesAndEdges","setPaneClickDistance","previousFields","fieldName","fieldValue","previousFieldValue","getMediaQuery","useColorModeClass","colorMode","colorModeClass","setColorModeClass","updateColorModeClass","defaultDoc","useKeyPress","keyCode","keyPressed","setKeyPressed","modifierPressed","pressedKeys","keyCodes","keysToWatch","keys","kc","keysFlat","actInsideInputWithModifier","downHandler","keyOrCode","useKeyOrCode","isMatchingKey","isInteractiveElement","upHandler","resetHandler","isUp","eventCode","useViewportHelper","zoomLevel","tX","tY","tZoom","clientPosition","domX","domY","correctedPosition","_snapGrid","_snapToGrid","flowPosition","rendererPosition","applyChanges","elements","updatedElements","changesMap","addItemChanges","elementChanges","updatedElement","applyChange","applyNodeChanges","applyEdgeChanges","createSelectionChange","getSelectionChanges","items","selectedIds","mutateItem","willBeSelected","getElementsDiffChanges","lookup","itemsLookup","lookupItem","storeItem","elementToRemoveChange","isNode","isEdge","fixedForwardRef","render","useIsomorphicLayoutEffect","useLayoutEffect","useQueue","runQueue","serial","setSerial","queue","createQueue","queueItems","cb","BatchContext","BatchProvider","nodeQueueHandler","hasDefaultNodes","onNodesChange","fitViewQueued","payload","nodeQueue","edgeQueueHandler","hasDefaultEdges","onEdgesChange","edgeQueue","useBatchContext","batchContext","selector$k","useReactFlow","viewportHelper","viewportInitialized","generalHelper","getInternalNode","getNodeRect","nodeToUse","nodeWithPosition","updateNode","nodeUpdate","prevNodes","nextNode","updateEdge","edgeUpdate","prevEdges","nextEdge","newNodes","newEdges","onNodesDelete","onEdgesDelete","triggerNodeChanges","triggerEdgeChanges","onDelete","hasMatchingEdges","hasMatchingNodes","edgeChanges","nodeChanges","nodeOrRect","isRect","nodeRect","hasNodesOption","currNodeRect","dataUpdate","nextData","fitViewResolver","win$1","useGlobalKeyHandler","deleteKeyCode","multiSelectionKeyCode","deleteElements","deleteKeyPressed","multiSelectionKeyPressed","useResizeHandler","updateDimensions","resizeObserver","containerStyle","selector$j","ZoomPane","zoomActivationKeyCode","onViewportChange","isControlledViewport","zoomPane","paneDragging","vp","onViewportChangeStart","onMoveStart","onMove","onViewportChangeEnd","onMoveEnd","selector$i","UserSelection","userSelectionRect","wrapHandler","selector$h","Pane","isSelecting","selectionKeyPressed","selectionMode","selectionOnDrag","onSelectionStart","onSelectionEnd","onPaneClick","onPaneScroll","onPaneMouseEnter","onPaneMouseMove","onPaneMouseLeave","elementsSelectable","connectionInProgress","hasActiveSelection","selectedNodeIds","selectedEdgeIds","selectionInProgress","selectionStarted","onContextMenu","onWheel","resetSelectedElements","defaultEdgeOptions","mouseX","mouseY","nextUserSelectRect","prevSelectedNodeIds","prevSelectedEdgeIds","edgesSelectable","connections","edgeId","draggable","handleNodeClick","unselect","nodeRef","addSelectedNodes","useDrag","setDragging","xyDrag","selectedAndDraggable","useMoveSelectedNodes","nodeUpdates","xVelo","yVelo","xDiff","yDiff","NodeIdContext","Provider","useNodeId","selector$g","connectingSelector","clickHandle","toHandle","connectingTo","HandleComponent","isConnectable","isConnectableStart","isConnectableEnd","onMouseDown","onTouchStart","connectOnClick","connectingFrom","clickConnecting","isPossibleEndHandle","connectionInProcess","clickConnectionInProcess","valid","onConnectExtended","onConnectAction","isMouseTriggered","currentStore","onClickConnectStart","onClickConnectEnd","connectionClickStartHandle","isValidConnectionStore","isValidConnectionHandler","connectionClone","Handle","memo","InputNode","DefaultNode","GroupNode","OutputNode","arrowKeyDiffs","builtinNodeTypes","getNodeInlineStyleDimensions","selector$f","NodesSelection","onSelectionContextMenu","transformString","moveSelectedNodes","onKeyDown","win","selector$e","FlowRendererComponent","selectionKeyCode","panActivationKeyCode","_panOnScroll","_panOnDrag","nodesSelectionActive","panActivationKeyPressed","_selectionOnDrag","FlowRenderer","selector$d","onlyRenderVisible","useVisibleNodeIds","selector$c","useResizeObserver","entry","useNodeObserver","hasDimensions","observedNode","prevSourcePosition","prevTargetPosition","prevType","isInitialized","typeChanged","sourcePosChanged","targetPosChanged","NodeWrapper","onMouseMove","onMouseLeave","nodesConnectable","nodesFocusable","nodeTypes","internals","isParent","NodeComponent","isDraggable","isFocusable","nodeDimensions","inlineDimensions","hasPointerEvents","onMouseEnterHandler","onMouseMoveHandler","onMouseLeaveHandler","onContextMenuHandler","onDoubleClickHandler","onSelectNodeHandler","onFocus","autoPanOnNodeFocus","setCenter","selector$b","NodeRendererComponent","NodeRenderer","useVisibleEdgeIds","visibleEdgeIds","ArrowSymbol","strokeWidth","ArrowClosedSymbol","MarkerSymbols","useMarkerSymbol","Marker","markerUnits","orient","Symbol","MarkerDefinitions","MarkerDefinitions$1","EdgeTextComponent","labelStyle","labelShowBg","labelBgStyle","labelBgPadding","labelBgBorderRadius","edgeTextBbox","setEdgeTextBbox","edgeTextClasses","edgeTextRef","textBbox","EdgeText","BaseEdge","interactionWidth","getControl","getSimpleBezierPath","createSimpleBezierEdge","markerEnd","markerStart","_id","SimpleBezierEdge","SimpleBezierEdgeInternal","createSmoothStepEdge","pathOptions","SmoothStepEdge","SmoothStepEdgeInternal","createStepEdge","StepEdge","StepEdgeInternal","createStraightEdge","StraightEdge","StraightEdgeInternal","createBezierEdge","BezierEdge","BezierEdgeInternal","builtinEdgeTypes","nullPosition","shiftX","shift","shiftY","EdgeUpdaterClassName","EdgeAnchor","radius","onMouseOut","EdgeUpdateAnchors","isReconnectable","reconnectRadius","onReconnect","onReconnectStart","setReconnecting","setUpdateHover","handleEdgeUpdater","oppositeHandle","_onReconnectEnd","evt","onConnectEdge","_onConnectStart","_event","onReconnectSourceMouseDown","onReconnectTargetMouseDown","onReconnectMouseEnter","onReconnectMouseOut","EdgeWrapper","edgesFocusable","edgesReconnectable","edgeTypes","EdgeComponent","edgeRef","updateHover","reconnecting","edgePosition","markerStartUrl","markerEndUrl","onEdgeClick","addSelectedEdges","onEdgeDoubleClick","onEdgeContextMenu","onEdgeMouseEnter","onEdgeMouseMove","onEdgeMouseLeave","selector$a","EdgeRendererComponent","defaultMarkerColor","onlyRenderVisibleElements","EdgeRenderer","selector$9","Viewport","useOnInitHandler","onInit","rfInstance","selector$8","useViewportSync","storeSelector$1","getSelector","connectionSelector","useConnection","combinedSelector","selector$7","ConnectionLineWrapper","component","ConnectionLine","CustomComponent","from","fromNode","fromPosition","to","toNode","toPosition","pathParams","emptyTypes","useNodeOrEdgeTypesWarning","nodeOrEdgeTypes","useStylesLoadedWarning","GraphViewComponent","onNodeClick","onNodeDoubleClick","onNodeMouseEnter","onNodeMouseMove","onNodeMouseLeave","onNodeContextMenu","connectionLineType","connectionLineStyle","connectionLineComponent","connectionLineContainerStyle","GraphView","getInitialState","defaultNodes","defaultEdges","fitView","fitViewOptions","storeEdges","storeNodes","storeNodeExtent","resolveFitView","debug","nodeDragItems","expandParent","updatedNodes","updatedEdges","changedEdges","nodesToUnselect","edgesToUnselect","clickDistance","nextNodeExtent","ReactFlowProvider","Wrapper","wrapperStyle","ReactFlow","defaultViewport$1","attributionPosition","elevateEdgesOnSelect","connectionDragThreshold","onScroll","colorModeClassName","wrapperOnScroll","useNodesState","initialNodes","nds","useEdgesState","initialEdges","eds","LinePattern","lineWidth","DotPattern","BackgroundVariant","defaultSize","selector$3","BackgroundComponent","gap","bgColor","patternClassName","patternId","patternSize","isDots","isCross","gapXY","scaledGap","scaledSize","offsetXY","patternDimensions","scaledOffset","_patternId","Background","PlusIcon","MinusIcon","FitViewIcon","LockIcon","UnlockIcon","ControlButton","selector$2","ControlsComponent","showZoom","showFitView","showInteractive","onZoomIn","onZoomOut","onFitView","onInteractiveChange","orientation","ariaLabel","isInteractive","minZoomReached","maxZoomReached","zoomIn","zoomOut","onZoomInHandler","onZoomOutHandler","onFitViewHandler","onToggleInteractivity","orientationClass","Controls","MiniMapNodeComponent","strokeColor","shapeRendering","backgroundColor","MiniMapNode","selectorNodeIds","getAttrFunction","MiniMapNodes","nodeStrokeColor","nodeColor","nodeClassName","nodeBorderRadius","nodeStrokeWidth","nodeColorFunc","nodeStrokeColorFunc","nodeClassNameFunc","NodeComponentWrapper","NodeComponentWrapperInner","MiniMapNodes$1","defaultWidth","defaultHeight","filterHidden","selector$1","viewBB","ARIA_LABEL_KEY","MiniMapComponent","nodeComponent","maskColor","maskStrokeColor","maskStrokeWidth","offsetScale","boundingRect","flowWidth","flowHeight","elementWidth","elementHeight","scaledWidth","scaledHeight","viewScale","viewWidth","viewHeight","labelledBy","viewScaleRef","minimapInstance","onSvgClick","onSvgNodeClick","_ariaLabel","scaleSelector","calculateScale","defaultPositions","ResizeControl","autoScale","contextNodeId","resizeControlRef","isHandleControl","resizer","positionChange","dimensionChange","childChange","positionClassNames","DEFAULT_EDGE_NAME","GRAPH_NODE","EDGE_KEY_DELIM","Graph","opts","newDefault","vs","removeEdge","ancestor","predsV","sucsV","preds","union","succ","neighbors","findParent","valueSpecified","arg0","edgeArgsToId","edgeObj","edgeArgsToObj","incrementOrInitEntry","edgeObjToId","decrementOrRemoveEntry","inV","outV","inEdges","isDirected","v_","w_","graph","version","require$$0","require$$1","json","write","read","writeNodes","writeEdges","nodeValue","edgeValue","components_1","visited","cmpts","cmpt","dfs","PriorityQueue","keyIndices","arr","largest","origArrI","origArrJ","priorityQueue","dijkstra_1","dijkstra","DEFAULT_WEIGHT_FUNC","weightFn","edgeFn","runDijkstra","results","pq","vEntry","updateNeighbors","wEntry","weight","dijkstraAll_1","dijkstraAll","weightFunc","edgeFunc","acc","tarjan_1","tarjan","findCycles_1","findCycles","floydWarshall_1","floydWarshall","runFloydWarshall","rowK","rowI","ik","kj","ij","altDistance","topsort","CycleException","topsort_1","isAcyclic_1","isAcyclic","dfs_1","order","navigation","orderFunc","postOrderDfs","preOrderDfs","curr","forEachRight","iteratee","postorder_1","postorder","preorder_1","preorder","prim_1","prim","pri","edgeWeight","alg","require$$2","require$$3","require$$4","require$$5","require$$6","require$$7","require$$8","require$$9","require$$10","graphlib","List","sentinel","unlink","strs","filterOutLinks","greedyFas","greedyFAS","DEFAULT_WEIGHT_FN","buildState","doGreedyFAS","buckets","zeroIdx","sources","sinks","removeNode","collectPredecessors","uEntry","assignBucket","fasGraph","maxIn","maxOut","prevWeight","limit","util","addBorderNode","addDummyNode","applyWithChunking","asNonCompoundGraph","buildLayerMatrix","intersectRect","mapValues","maxRank","normalizeRanks","notime","partition","pick","predecessorWeights","removeEmptyRanks","simplify","successorWeights","uniqueId","zipObject","attrs","simplified","simpleLabel","weightMap","sucs","sx","sy","layering","nodeRanks","layers","nodeRankFactor","splitToChunks","chunkSize","CHUNKING_THRESHOLD","chunks","argsArray","idCounter","endCon","dest","funcOrProp","values","acyclic","run","undo","dfsFAS","fas","forwardName","normalize","normalizeEdge","vRank","wRank","edgeLabel","labelRank","dummy","origLabel","longestPath","slack","outEdgesMinLens","feasibleTree_1","feasibleTree","tightTree","findMinSlackEdge","shiftRanks","edgeV","edgeSlack","initRank","networkSimplex_1","networkSimplex","initLowLimValues","initCutValues","calcCutValue","leaveEdge","enterEdge","exchangeEdges","assignCutValue","childLab","childIsTail","graphEdge","cutValue","isOutEdge","other","pointsToHead","otherWeight","isTreeEdge","otherCutValue","dfsAssignLowLim","nextLim","low","vLabel","wLabel","tailLabel","flip","candidates","isDescendant","updateRanks","flipped","rootLabel","rankUtil","rank_1","ranker","networkSimplexRanker","tightTreeRanker","longestPathRanker","parentDummyChains_1","parentDummyChains","postorderNums","pathData","findPath","lca","pathIdx","pathV","vPath","wPath","lim","nestingGraph","cleanup","depths","treeDepths","depthsArr","nodeSep","sumWeights","childTop","childBottom","thisWeight","minlen","depth","graphLabel","addBorderSegments_1","addBorderSegments","sg","sgNode","coordinateSystem","adjust","rankDir","swapWidthHeight","reverseY","swapXY","swapWidthHeightOne","reverseYOne","swapXYOne","initOrder_1","initOrder","simpleNodes","simpleNodesRanks","crossCount_1","crossCount","twoLayerCrossCount","northLayer","southLayer","southPos","southEntries","firstIndex","treeSize","weightSum","barycenter_1","barycenter","movable","nodeU","resolveConflicts_1","resolveConflicts","cg","mappedEntries","entryV","entryW","sourceSet","doResolveConflicts","handleIn","mergeEntries","handleOut","sort_1","sort","biasRight","sortable","unsortable","vsIndex","compareWithBias","consumeUnsortable","last","bias","sortSubgraph_1","sortSubgraph","bl","br","subgraphs","barycenters","subgraphResult","mergeBarycenters","expandSubgraphs","blPred","brPred","buildLayerGraph_1","buildLayerGraph","relationship","createRootNode","addSubgraphConstraints_1","addSubgraphConstraints","rootPrev","prevChild","order_1","downLayerGraphs","buildLayerGraphs","upLayerGraphs","assignOrder","bestCC","best","lastBest","sweepLayerGraphs","ranks","layerGraphs","lg","sorted","layer","bk","positionX","findType1Conflicts","findType2Conflicts","addConflict","hasConflict","verticalAlignment","horizontalCompaction","alignCoordinates","findSmallestWidthAlignment","balance","conflicts","visitLayer","prevLayer","scanPos","prevLayerLength","lastNode","findOtherInnerSegmentNode","scanNode","uLabel","uPos","scan","south","southEnd","prevNorthBorder","nextNorthBorder","uNode","north","prevNorthPos","nextNorthPos","southLookahead","predecessors","conflictsV","neighborFn","prevIdx","ws","mp","il","reverseSep","xs","blockG","buildBlockGraph","borderType","iterate","setXsFunc","nextNodesFunc","pass1","pass2","blockGraph","sepFn","sep","vRoot","uRoot","prevMax","xss","currentMinAndXs","halfWidth","newMin","alignTo","alignToVals","alignToMin","alignToMax","vert","horiz","alignment","xsVals","num","adjustedLayering","inner","smallestWidth","edgeSep","position_1","positionY","rankSep","layout_1","layout","layoutGraph","buildLayoutGraph","runLayout","updateInputGraph","makeSpaceForEdgeLabels","removeSelfEdges","injectEdgeLabelProxies","assignRankMinMax","removeEdgeLabelProxies","insertSelfEdges","positionSelfEdges","removeBorderNodes","fixupEdgeLabelCoords","translateGraph","assignNodeIntersects","reversePointsForReversedEdges","inputGraph","inputLabel","layoutLabel","graphNumAttrs","graphDefaults","graphAttrs","nodeNumAttrs","nodeDefaults","edgeNumAttrs","edgeDefaults","edgeAttrs","canonicalize","selectNumberAttrs","minX","maxX","minY","maxY","marginX","marginY","getExtremes","nodeV","nodeW","p2","r","orderShift","selfEdge","selfNode","newAttrs","debugOrdering","layerMatrix","layerV","dagre","useStateMachine","machine","React.useReducer","Presence","present","presence","usePresence","React2.Children","useComposedRefs","getElementRef","React2.cloneElement","setNode","React2.useState","stylesRef","React2.useRef","prevPresentRef","prevAnimationNameRef","send","React2.useEffect","currentAnimationName","getAnimationName","styles","wasPresent","prevAnimationName","timeoutId","ownerWindow","handleAnimationEnd","isCurrentAnimation","currentFillMode","handleAnimationStart","React2.useCallback","node2","getter","mayWarn","DIALOG_NAME","createDialogContext","createDialogScope","createContextScope","DialogProvider","useDialogContext","Dialog","__scopeDialog","openProp","defaultOpen","onOpenChange","modal","triggerRef","React.useRef","contentRef","setOpen","useControllableState","useId","React.useCallback","prevOpen","TRIGGER_NAME","DialogTrigger","React.forwardRef","forwardedRef","triggerProps","composedTriggerRef","Primitive","composeEventHandlers","PORTAL_NAME","PortalProvider","usePortalContext","DialogPortal","forceMount","React.Children","PortalPrimitive","OVERLAY_NAME","DialogOverlay","portalContext","overlayProps","DialogOverlayImpl","Slot","createSlot","RemoveScroll","CONTENT_NAME","DialogContent","contentProps","DialogContentModal","DialogContentNonModal","composedRefs","React.useEffect","hideOthers","DialogContentImpl","originalEvent","ctrlLeftClick","hasInteractedOutsideRef","hasPointerDownOutsideRef","trapFocus","onOpenAutoFocus","onCloseAutoFocus","useFocusGuards","FocusScope","DismissableLayer","TitleWarning","DescriptionWarning","TITLE_NAME","DialogTitle","titleProps","DESCRIPTION_NAME","DialogDescription","descriptionProps","CLOSE_NAME","DialogClose","closeProps","TITLE_WARNING_NAME","WarningProvider","useWarningContext","titleId","titleWarningContext","MESSAGE","DESCRIPTION_WARNING_NAME","descriptionId","describedById","Root","Trigger","Portal","Overlay","Content","Title","Description","Close","cov_15f78kymuc","DialogPrimitive.Root","DialogPrimitive","DialogPrimitive.Overlay","displayName","DialogPrimitive.Content","cn","DialogPrimitive.Close","X","DialogHeader","DialogFooter","DialogPrimitive.Title","DialogPrimitive.Description","cov_hsbqmiqfs","define_process_env_default","input","default","output","common","fontSize","fontWeight","boxShadow","getLayoutedElements","Dagre","rankdir","ranksep","nodesep","marginx","marginy","setEdge","layoutedNodes","MindMapInner","markdown","ogEdges","setError","isLoading","setIsLoading","initialized","setInitialized","selectedNode","setSelectedNode","isEditDialogOpen","setIsEditDialogOpen","editLabel","setEditLabel","authState","useAuthState","oAiKey","setApiClient","apiClient","getNode","getNodes","getEdges","addNodes","addEdges","animated","stroke","newEdge","oldEdges","newNodeId","NODE_STYLES","handleCopyNode","handleDeleteNode","connectedEdges","handleEditNode","handleSaveEdit","OpenAIService","ogNodes","styledNodes","styledEdges","layouted","setTimeout","rfWrapper","display","justifyContent","alignItems","Loader2","Button","Card","hideAttribution","reactFlowStyles","handleAddNode","Edit","Trash2","Input","cov_j4c0rxtjc","EnhancedMindMap","onToggleFullscreen","onBack","isFullScreen","showHelp","setShowHelp","trackContentView","useInteractionTracker","contentId","contentType","moduleId","setIsFullScreen","toggleFullScreen","handleBack","toggleHelp","HelpCircle","cov_1p4t3hci0c","promptsConfig","cov_1nqg9gerzi","cov_1g2y1tqbze","generateTeacherResponse","openaiClient","studentResponse","teacherPersona","scenarioContext","language","cov_1kz46awx4w","constructor","teacherResponse","cov_1zw7fhrz5g","BlackboardDisplay","currentQuestion","cov_2gwynayhq2","StudentCard","showPracticeFeatures","practiceIcons","Brain","renderIcon","icon","getPracticeIcon","feature","IconComponent","benefit","cov_2gjhvo5j7a","RoleplayComponent","scenarios","onRegenerate","isGenerating","openaiApiKey","userId","activeScenarioIndex","activeTeacherPersona","setActiveScenarioIndex","setActiveTeacherPersona","isViewingScenarios","setIsViewingScenarios","chatEndRef","getInitialRoleplayState","studentInput","responses","currentStep","sessionId","isListening","isSpeaking","roleplayService","RoleplayService","activeScenario","maxSteps","MAX_ROLEPLAY_STEPS","scrollIntoView","behavior","setRoleplayState","nextScenario","prevScenario","selectTeacherPersona","personaName","prevState","selectedPersona","analyticsService","session","event_type","content_id","eventType","timestamp","Date","scenarioTitle","selectedTeacherPersona","interactionType","backToScenarios","roleplayState","getSelectedTeacherPersona","scenarioFromProp","handleInputChange","isValidInput","trim","handleStudentSubmit","currentSessionId","currentInput","nextStep","isComplete","totalSteps","renderScenarioView","currentScenario","roles","persona","RefreshCw","renderTeacherIcon","renderInteractionView","progressText","currentTeacherMessage","msg","rows","placeholder","preventDefault","Send","cov_1efz06uhv0","cov_2gbnj3dstd","recursiveJSONParse","parsed","mapToScenario","rawScenario","description","char","ensureQuizDataFormat","isArray","ensureRoleplayDataFormat","parsedData","rawScenarios","scenario","filePath","Error","startsWith","CombinedVideoAndNotes","videoUrl","chapter","chaptersMeta","currentVideoChapter","setCurrentVideoChapter","notesContainerRef","handleVideoTimeUpdate","matchingChapter","chapter2","Number","timestamp_end","Infinity","chapterElement","block","chapterMeta","chaptertitle","videoMarkers","selectedChapter","startTime","isCurrentChapter","notes","chapterNotes","CourseContentRenderer","activeTab","showReport","isFullscreenMindmap","sidebarOpen","onMindmapBack","onToggleMindmapFullscreen","onCloseReport","onGenerateContentRequest","viewMode","signedVideoUrl","setSignedVideoUrl","isSigningUrl","setIsSigningUrl","signingError","setSigningError","scrollToChapterNotes","setupVideoUrl","fetchPublicVideoUrl","isMounted","LearningReport","onClose","finally","setViewMode","cm","hasNotes","validatedQuizQuestions","mindmap","roleplay","validatedScenarios","mockInteractiveContent","problems","difficulty","hints","solution","slope","yIntercept","conceptExplanations","examples","SlopeDrawing","onUpdateProgress","progress"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,136,137,138,139,140,141,142,143,144,145,146,147,148,149,150,151,152,153,154,155,156,157,158,159,160,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,177,178,179,180,181,182,183,184,185,186,187,188,189,190,191,192,193,194,195,196,197,198,199,200,201,202,203,204,205,206,207,208,209,210,211,212,213,214,215,216,217,218,219,220,221,222,223]}