{"version":3,"file":"LearningReport.stories-BYnCYWWP.js","sources":["../../src/components/LearningReport.stories.tsx"],"sourcesContent":["import type { Meta, StoryObj } from '@storybook/react'\nimport LearningReport from './LearningReport'\nimport { analyticsService } from '@/services/analytics-service'\nimport { InteractionTrackerProvider } from '../stories/InteractionTrackerContextMock'\n\n// Create a mock implementation of the analytics service\nconst originalGetUserCompletion = analyticsService.getUserCompletion\n\n// Mock data for our stories\nconst mockAnalyticsData = {\n  engagement_score: 75,\n  understanding: 'Proficient',\n  strengths: ['Concept visualization', 'Problem-solving approach'],\n  weaknesses: ['Mathematical notation', 'Advanced theorems'],\n  recommendations: [\n    'Review the properties of matrices',\n    'Practice more eigenvalue problems',\n    'Study the relationship between linear transformations and matrices',\n  ],\n}\n\nconst meta: Meta<typeof LearningReport> = {\n  title: 'Course/LearningReport',\n  component: LearningReport,\n  parameters: {\n    layout: 'fullscreen',\n    backgrounds: {\n      default: 'dark',\n    },\n  },\n  argTypes: {\n    userId: { control: 'text' },\n    knowledgeId: { control: 'text' },\n    onClose: { action: 'report closed' },\n  },\n  // Mock the analytics service before each story\n  decorators: [\n    Story => {\n      // Override the getUserCompletion method for Storybook\n      analyticsService.getUserCompletion = async () => mockAnalyticsData\n\n      return (\n        <div className='min-h-screen bg-gray-900'>\n          <InteractionTrackerProvider>\n            <Story />\n          </InteractionTrackerProvider>\n        </div>\n      )\n    },\n  ],\n}\n\nexport default meta\ntype Story = StoryObj<typeof LearningReport>\n\nexport const Default: Story = {\n  args: {\n    userId: 'user123',\n    knowledgeId: '456',\n  },\n}\n\nexport const WithDifferentKnowledgeId: Story = {\n  args: {\n    userId: 'user123',\n    knowledgeId: '789',\n  },\n}\n\nexport const WithDifferentUser: Story = {\n  args: {\n    userId: 'user456',\n    knowledgeId: '456',\n  },\n}\n\n// This story will show loading state\nexport const Loading: Story = {\n  decorators: [\n    Story => {\n      // Override with a function that never resolves to simulate loading\n      analyticsService.getUserCompletion = () => new Promise(() => { })\n\n      return (\n        <div className='min-h-screen bg-gray-900'>\n          <InteractionTrackerProvider>\n            <Story />\n          </InteractionTrackerProvider>\n        </div>\n      )\n    },\n  ],\n  args: {\n    userId: 'user123',\n    knowledgeId: '456',\n  },\n}\n\n// This story will show an error state\nexport const Error: Story = {\n  decorators: [\n    Story => {\n      // Override with a function that rejects to simulate error\n      analyticsService.getUserCompletion = () =>\n        Promise.reject('Error fetching analytics')\n\n      return (\n        <div className='min-h-screen bg-gray-900'>\n          <InteractionTrackerProvider>\n            <Story />\n          </InteractionTrackerProvider>\n        </div>\n      )\n    },\n  ],\n  args: {\n    userId: 'user123',\n    knowledgeId: '456',\n  },\n}\n\n// Note: In a real implementation, you would want to restore the original\n// implementation after the stories run. In Storybook, this isn't typically\n// needed as the stories run in isolation.\n"],"names":["analyticsService","getUserCompletion","mockAnalyticsData","engagement_score","understanding","strengths","weaknesses","recommendations","meta","title","component","LearningReport","parameters","layout","backgrounds","default","argTypes","userId","control","knowledgeId","onClose","action","decorators","Story","jsx","InteractionTrackerProvider","Default","args","WithDifferentKnowledgeId","WithDifferentUser","Loading","Promise","Error","reject","docs","source","originalSource"],"mappings":"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"}